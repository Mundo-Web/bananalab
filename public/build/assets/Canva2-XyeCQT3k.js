var V=Object.defineProperty;var K=(a,o,r)=>o in a?V(a,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[o]=r;var j=(a,o,r)=>K(a,typeof o!="symbol"?o+"":o,r);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as y}from"./index-BOnQTV8N.js";import{I as Z}from"./ItemPresetsRest-BDS9KUxS.js";import{m as N}from"./main-Bp3JhiuO.js";import{m as s}from"./proxy-DTU49k-A.js";import{C as Q}from"./chevron-left-JcR9Fe4w.js";import{S as C}from"./sparkles-DvmvZ6mJ.js";import{C as A}from"./chevron-down-uIVDLcM-.js";import{A as H}from"./arrow-right-MB8dWH_Y.js";import{U as M}from"./upload-GO9GDST_.js";import{A as Y}from"./index-BNMCJu8J.js";import{c as O}from"./createLucideIcon-DfjclApS.js";import{P as ee}from"./palette-BTxIxfA-.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./ModalImportItem-08p2KSos.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=O("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=O("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),v=class v{};j(v,"checkAuth",async()=>{var o;try{const{status:r,result:n}=await N.Fetch("./api/auth/check",{method:"GET"});return{authenticated:r&&n.status===200,user:((o=n==null?void 0:n.data)==null?void 0:o.user)||null,message:(n==null?void 0:n.message)||null}}catch(r){return console.error("Error checking authentication:",r),{authenticated:!1,user:null,message:"Error al verificar autenticaci√≥n"}}}),j(v,"saveAlbum",async o=>{var r;try{console.log("Guardando √°lbum:",o);const n=new FormData;Object.keys(o).forEach(m=>{o[m]!==null&&o[m]!==void 0&&(m==="custom_options"&&typeof o[m]=="object"?n.append(m,JSON.stringify(o[m])):n.append(m,o[m]))}),o.selected_pages!==void 0&&n.append("pages",o.selected_pages),o.selected_cover_type!==void 0&&n.append("cover_type",o.selected_cover_type),o.selected_finish!==void 0&&n.append("finish_type",o.selected_finish),console.log("FormData preparada");const u=await fetch("./api/albums",{method:"POST",body:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},credentials:"include"});if(!u.ok){const m=await u.text();console.error("Respuesta RAW del backend:",m);let d;try{d=JSON.parse(m)}catch{d={message:m}}throw new Error((d==null?void 0:d.message)||"Error al guardar el √°lbum")}const x=await u.json();if(console.log("Respuesta del servidor:",x),!u.ok||x.status!==201)throw new Error((x==null?void 0:x.message)||"Error al guardar el √°lbum");return N.Notify.add({icon:"/assets/img/icon.svg",title:"√Ålbum guardado",body:"Tu √°lbum se ha guardado exitosamente",type:"success"}),x}catch(n){throw console.error("Error en saveAlbum:",n),N.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:n.message,type:"danger"}),n}}),j(v,"updateAlbum",async(o,r)=>{var n;try{console.log("Actualizando √°lbum:",o,r);const u=new FormData;Object.keys(r).forEach(d=>{r[d]!==null&&r[d]!==void 0&&(d==="custom_options"&&typeof r[d]=="object"||d==="album_pages_data"&&typeof r[d]=="object"?u.append(d,JSON.stringify(r[d])):u.append(d,r[d]))}),r.selected_pages!==void 0&&u.append("pages",r.selected_pages),r.selected_cover_type!==void 0&&u.append("cover_type",r.selected_cover_type),r.selected_finish!==void 0&&u.append("finish_type",r.selected_finish),console.log("FormData preparada para actualizaci√≥n");const x=await fetch(`./api/albums/${o}`,{method:"PUT",body:u,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},credentials:"include"});if(!x.ok){const d=await x.text();console.error("Respuesta RAW del backend:",d);let l;try{l=JSON.parse(d)}catch{l={message:d}}throw new Error((l==null?void 0:l.message)||"Error al actualizar el √°lbum")}const m=await x.json();if(console.log("Respuesta del servidor (actualizaci√≥n):",m),!x.ok||m.status!==200)throw new Error((m==null?void 0:m.message)||"Error al actualizar el √°lbum");return m}catch(u){throw console.error("Error en updateAlbum:",u),u}}),j(v,"autoSaveAlbum",async(o,r)=>{try{console.log("Auto-guardando √°lbum:",o);const n=await v.updateAlbum(o,r);return console.log("Auto-guardado exitoso"),n}catch(n){throw console.error("Error en auto-guardado:",n),n}}),j(v,"getUserAlbums",async()=>{try{const{status:o,result:r}=await N.Fetch("./api/albums",{method:"GET"});if(!o||r.status!==200)throw new Error((r==null?void 0:r.message)||"Error al obtener √°lbumes");return r.data}catch(o){return N.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:o.message,type:"danger"}),[]}}),j(v,"getAlbum",async o=>{try{const{status:r,result:n}=await N.Fetch(`./api/albums/${o}`,{method:"GET"});if(!r||n.status!==200)throw new Error((n==null?void 0:n.message)||"Error al obtener el √°lbum");return n.data}catch(r){throw N.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),r}});let k=v;const b={container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},item:{hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:120,damping:12,mass:.5}}},button:{hover:{x:-5,backgroundColor:"rgba(243, 244, 246, 0.8)",transition:{type:"spring",stiffness:400}},tap:{scale:.96,transition:{type:"spring",stiffness:400}}},formItem:{hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}},hover:{y:-2,transition:{type:"spring",stiffness:400,damping:10}}},image:{hidden:{opacity:0,scale:.95,rotate:-2},visible:{opacity:1,scale:1,rotate:0,transition:{type:"spring",stiffness:80,damping:15,delay:.3}},hover:{scale:1.02,transition:{type:"spring",stiffness:300}}},featureIcon:{hidden:{scale:0,opacity:0},visible:a=>({scale:1,opacity:1,transition:{delay:.5+a*.1,type:"spring",stiffness:300}})}};function je(){var F;const[a,o]=y.useState(null),[r,n]=y.useState(!0),[u,x]=y.useState(null),[m,d]=y.useState(null),[l,_]=y.useState({titulo:"",paginas:"",tapa:"",acabado:""}),[P,S]=y.useState(!1),[se,I]=y.useState(null),[E,T]=y.useState(!1),[q,z]=y.useState(!1),G=new Z,B=()=>{const t=[],i=`${l.paginas} p√°ginas`||(a!=null&&a.default_pages?`${a.default_pages} p√°ginas`:"50 p√°ginas");t.push({icon:e.jsx(ae,{size:20}),text:i}),t.push({icon:e.jsx(ee,{size:20}),text:"Personalizable"});const c=`Tapa ${l.tapa}`||`Tapa ${a==null?void 0:a.default_cover}`||"Tapa dura premium";return t.push({icon:e.jsx(te,{size:20}),text:c}),t},J=()=>{var t;return l.titulo&&l.titulo.trim()!==""?l.titulo:(a==null?void 0:a.name)||((t=a==null?void 0:a.item)==null?void 0:t.name)||"Libro Personalizado"};y.useEffect(()=>{(async()=>{try{const i=new URLSearchParams(window.location.search),c=i.get("preset"),h=i.get("item");if(console.log("URL params:",{presetId:c,itemId:h}),c){console.log("Cargando preset:",c),n(!0);const w=await G.getPresetById(c);if(console.log("Datos del preset recibidos:",w),w.success){const g=w.data;console.log("Preset data:",g);let p={...g};if(typeof g.pages_options=="string")try{p.pages_options=JSON.parse(g.pages_options)}catch(f){console.warn("Error parsing pages_options:",f),p.pages_options=[]}if(typeof g.cover_options=="string")try{p.cover_options=JSON.parse(g.cover_options)}catch(f){console.warn("Error parsing cover_options:",f),p.cover_options=[]}if(typeof g.finish_options=="string")try{p.finish_options=JSON.parse(g.finish_options)}catch(f){console.warn("Error parsing finish_options:",f),p.finish_options=[]}if(o(p),_(f=>{var R,$,U;return{...f,titulo:"",paginas:p.default_pages||p.pages_options&&Array.isArray(p.pages_options)&&((R=p.pages_options[0])==null?void 0:R.label)||"50 p√°ginas",tapa:p.default_cover||p.cover_options&&Array.isArray(p.cover_options)&&(($=p.cover_options[0])==null?void 0:$.label)||"Tapa Dura Personalizable",acabado:p.default_finish||p.finish_options&&Array.isArray(p.finish_options)&&((U=p.finish_options[0])==null?void 0:U.label)||"Limado"}}),g.image&&typeof g.image=="string"){const f=g.image.startsWith("/")?g.image:`/storage/images/item_preset/${g.image}`;d(f)}}else console.error("Error al cargar preset:",w.message),o({id:c,name:"Preset no encontrado",description:"No se pudo cargar la informaci√≥n del preset",image:null});n(!1)}else console.log("No hay preset ID en URL, usando datos por defecto"),o({id:null,name:"Preset por defecto",description:"Dise√±o personalizable para tu regalo especial",image:null,item_id:h||null}),n(!1)}catch(i){console.error("Error al cargar preset:",i),o({id:null,name:"Error al cargar",description:"Hubo un problema al cargar el preset",image:null}),n(!1)}})()},[]),y.useEffect(()=>{(async()=>{try{const i=await k.checkAuth();S(i.authenticated),I(i.user)}catch(i){console.error("Error al verificar autenticaci√≥n:",i),S(!1),I(null)}})()},[]);const X=t=>{const i=t.target.files[0];if(i){x(i);const c=new FileReader;c.onload=h=>{d(h.target.result)},c.readAsDataURL(i)}},W=async()=>{var t;if(!P){z(!0);return}if(!l.titulo.trim()){alert("Por favor, ingresa un t√≠tulo para tu √°lbum");return}if(!l.paginas){alert("Por favor, selecciona la cantidad de p√°ginas");return}if(!l.tapa){alert("Por favor, selecciona el tipo de tapa");return}if(!l.acabado){alert("Por favor, selecciona el tipo de acabado");return}try{T(!0);const i=new URLSearchParams(window.location.search);let c=i.get("item"),h=i.get("preset");if(console.log("Par√°metros URL:",{itemId:c,presetId:h}),console.log("Estado preset:",a),!c&&(a!=null&&a.item_id)&&(c=a.item_id.toString(),console.log("Usando item_id del preset:",c)),!h&&(a!=null&&a.id)&&(h=a.id.toString(),console.log("Usando preset.id:",h)),a!=null&&a.item_id&&(c=a.item_id.toString()),a!=null&&a.id&&(h=a.id.toString()),console.log("Corregido para backend:",{itemId:c,presetId:h}),!c||!h){const p=[];throw c||p.push("ID del item"),h||p.push("ID del preset"),console.error("Datos faltantes para guardar √°lbum:",{itemId:c,presetId:h,preset:a,urlParams:Object.fromEntries(i.entries())}),new Error(`Faltan datos requeridos: ${p.join(", ")}. 
                    Aseg√∫rate de acceder desde la p√°gina de selecci√≥n de productos.
                    
Informaci√≥n de debug:
- URL item: ${i.get("item")}
- URL preset: ${i.get("preset")}
- Estado preset.id: ${a==null?void 0:a.id}
- Estado preset.item_id: ${a==null?void 0:a.item_id}`)}console.log("Guardando √°lbum con:",{itemId:c,presetId:h,preset:a});const w={item_id:c,item_preset_id:h,title:l.titulo,description:`√Ålbum personalizado con ${l.paginas} p√°ginas, tapa ${l.tapa}, acabado ${l.acabado}`,selected_pages:parseInt(l.paginas),selected_cover_type:l.tapa,selected_finish:l.acabado,cover_image:u,custom_options:{selected_options:{pages:l.paginas,cover:l.tapa,finish:l.acabado},preset_data:a}};console.log("Enviando datos del √°lbum:",w);const g=await k.saveAlbum(w);if(g&&g.data){const p=((t=g.data.album)==null?void 0:t.id)||g.data.id;console.log("√Ålbum guardado exitosamente:",g.data);const f=new URLSearchParams({album:p,item:c,preset:h,pages:l.paginas,cover:l.tapa,finish:l.acabado});setTimeout(()=>{window.location.href=`/editor?${f.toString()}`},1e3)}}catch(i){console.error("Error al guardar √°lbum:",i);let c="Error al guardar el √°lbum";i.message.includes("Faltan datos requeridos")?c=i.message:i.message.includes("401")?(c="Tu sesi√≥n ha expirado. Por favor, inicia sesi√≥n nuevamente.",S(!1),z(!0)):i.message.includes("500")?c="Error interno del servidor. Por favor, intenta nuevamente.":(i.message.includes("network")||i.message.includes("fetch"))&&(c="Error de conexi√≥n. Verifica tu conexi√≥n a internet e intenta nuevamente."),alert(c)}finally{T(!1)}},D=()=>{const t=encodeURIComponent(window.location.href);window.location.href=`/login?redirect=${t}`},L=()=>{z(!1)};return e.jsxs(s.div,{className:"container mx-auto px-4 py-8 max-w-7xl font-paragraph bg-gradient-to-b from-white to-purple-50 min-h-screen",initial:"hidden",animate:"visible",variants:b.container,children:[(()=>{const t=new URLSearchParams(window.location.search),i=t.get("item"),c=t.get("preset");return!i||!c?e.jsx(s.div,{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Advertencia:"})," No se detectaron par√°metros v√°lidos en la URL. Para una experiencia completa, accede desde la p√°gina de selecci√≥n de productos.",e.jsx("br",{}),e.jsxs("span",{className:"text-xs text-yellow-600",children:["Par√°metros esperados: item=",i?"‚úì":"‚úó",", preset=",c?"‚úì":"‚úó"]})]})})]})}):null})(),e.jsx(s.div,{className:"fixed inset-0 overflow-hidden pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[...Array(10)].map((t,i)=>e.jsx(s.div,{className:"absolute rounded-full bg-purple-100 opacity-20",style:{width:Math.random()*200+100,height:Math.random()*200+100,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,Math.random()*100-50],x:[0,Math.random()*100-50],opacity:[.2,.3,.2]},transition:{duration:Math.random()*10+10,repeat:1/0,repeatType:"reverse"}},i))}),e.jsxs(s.button,{className:"flex items-center  mb-6 p-3 rounded-xl transition-all z-10 relative",variants:b.button,whileHover:"hover",whileTap:"tap",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,type:"spring"},onClick:()=>window.history.back(),children:[e.jsx(Q,{className:"h-6 w-6"}),e.jsx("span",{className:"ml-1 font-medium",children:"Regresar"})]}),e.jsxs("div",{className:"md:flex md:gap-10 md:items-start relative z-10",children:[e.jsxs("div",{className:"md:w-1/2",children:[e.jsxs(s.div,{className:"mb-8",variants:b.item,children:[r?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):e.jsxs(e.Fragment,{children:[e.jsx(s.h1,{className:"text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-500 bg-clip-text text-transparent",initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,type:"spring",stiffness:100},children:J()}),e.jsx(s.p,{className:"text-base md:text-lg text-gray-700 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:(a==null?void 0:a.description)||"El libro es de 22√ó22 cm, de tapa dura que tiene un dise√±o especial de boda personalizable para agregar una foto o imagen, nombres y fecha del evento. En su interior viene con 50 p√°ginas de papel couch√© de 170 grs. en blanco para que los invitados puedan escribir sus mensajes."})]}),e.jsx(s.div,{className:"mt-6 flex flex-wrap gap-3",children:B().map((t,i)=>e.jsxs(s.div,{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm",custom:i,variants:b.featureIcon,whileHover:{y:-2},children:[e.jsx(s.span,{whileHover:{scale:1.1},children:t.icon}),e.jsx("span",{className:"text-sm font-medium",children:t.text})]},i))})]}),e.jsxs(s.form,{className:"space-y-6 bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white",variants:b.container,initial:"hidden",animate:"visible",children:[e.jsxs(s.div,{className:"space-y-2",variants:b.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"T√≠tulo del Libro"}),e.jsxs(s.div,{className:"relative",children:[e.jsx(s.input,{type:"text",value:l.titulo,onChange:t=>_({...l,titulo:t.target.value}),className:"w-full p-4 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100",placeholder:`${(a==null?void 0:a.name)||((F=a==null?void 0:a.item)==null?void 0:F.name)||"Libro Personalizado"} (personaliza tu t√≠tulo)`,whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"}}),e.jsx(s.span,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-400",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},children:e.jsx(C,{size:18})})]})]}),e.jsxs(s.div,{className:"space-y-2",variants:b.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad de P√°ginas"}),e.jsxs(s.div,{className:"relative",children:[e.jsx(s.select,{value:l.paginas,onChange:t=>_({...l,paginas:t.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.pages_options&&Array.isArray(a.pages_options)?a.pages_options.map((t,i)=>e.jsx("option",{value:t.label||t.value||t,children:t.label||t.value||t},i)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"24 p√°ginas",children:"24 p√°ginas"}),e.jsx("option",{value:"50 p√°ginas",children:"50 p√°ginas"}),e.jsx("option",{value:"100 p√°ginas",children:"100 p√°ginas"})]})}),e.jsx(A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsxs(s.div,{className:"space-y-2",variants:b.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Tapa"}),e.jsxs(s.div,{className:"relative",children:[e.jsx(s.select,{value:l.tapa,onChange:t=>_({...l,tapa:t.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.cover_options&&Array.isArray(a.cover_options)?a.cover_options.map((t,i)=>e.jsx("option",{value:t.label||t.value||t,children:t.label||t.value||t},i)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Tapa Dura Personalizable",children:"Tapa Dura Personalizable"}),e.jsx("option",{value:"Tapa Blanda",children:"Tapa Blanda"})]})}),e.jsx(A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsxs(s.div,{className:"space-y-2",variants:b.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Acabado"}),e.jsxs(s.div,{className:"relative",children:[e.jsx(s.select,{value:l.acabado,onChange:t=>_({...l,acabado:t.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.finish_options&&Array.isArray(a.finish_options)?a.finish_options.map((t,i)=>e.jsx("option",{value:t.label||t.value||t,children:t.label||t.value||t},i)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Limado",children:"Limado"}),e.jsx("option",{value:"Brillante",children:"Brillante"}),e.jsx("option",{value:"Mate",children:"Mate"})]})}),e.jsx(A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsx(s.div,{className:"pt-4",children:e.jsxs(s.button,{onClick:W,disabled:E,className:`block text-center w-full py-4 px-6 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all relative overflow-hidden group ${E?"bg-gray-400 cursor-not-allowed":P?"bg-gradient-to-r from-purple-600 to-pink-500 text-white":"bg-gradient-to-r from-orange-500 to-red-500 text-white"}`,whileHover:E?{}:{scale:1.02,boxShadow:"0 10px 25px -5px rgba(139, 92, 246, 0.4)"},whileTap:E?{}:{scale:.98},children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsx(s.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Guardando..."]}):P?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:20}),"Crear proyecto",e.jsx(H,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üîê"}),"Inicia sesi√≥n para crear",e.jsx(H,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})}),!E&&e.jsx(s.span,{className:`absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${P?"bg-gradient-to-r from-pink-600 to-purple-700":"bg-gradient-to-r from-red-600 to-orange-700"}`})]})})]})]}),e.jsx(s.div,{className:"mt-8 md:mt-0 md:w-1/2 sticky top-6",variants:b.image,whileHover:"hover",children:e.jsx(s.div,{className:"bg-white rounded-2xl shadow-2xl border-2 border-white relative overflow-hidden min-h-[600px] flex flex-col",initial:{rotate:-1,scale:.95},animate:{rotate:0,scale:1},whileHover:{scale:1.02,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},children:r?e.jsx("div",{className:"animate-pulse flex-1 flex items-center justify-center",children:e.jsx("div",{className:"w-full h-[500px] bg-gray-200 rounded-lg m-6"})}):e.jsxs(e.Fragment,{children:[e.jsxs(s.div,{className:"flex-1 relative cursor-pointer group",whileHover:{backgroundColor:"rgba(245, 243, 255, 0.3)"},whileTap:{scale:.98},children:[e.jsx("input",{type:"file",accept:"image/*",onChange:X,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),m?e.jsxs("div",{className:"relative h-full min-h-[500px] flex items-center justify-center p-6",children:[e.jsx(s.img,{src:m,alt:"Portada personalizada",className:"max-w-full max-h-full object-contain rounded-lg shadow-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},onError:t=>{console.warn("Error al cargar imagen:",m),t.target.src="/assets/img/backgrounds/resources/default-image.png"}}),e.jsx(s.div,{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",initial:{opacity:0},children:e.jsxs("div",{className:"bg-white/90 backdrop-blur px-6 py-3 rounded-full shadow-lg flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Cambiar imagen"})]})}),e.jsx(s.div,{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-2 rounded-full shadow-lg flex items-center gap-2",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,type:"spring"},children:e.jsx("span",{className:"text-sm font-medium",children:"‚úì Imagen personalizada"})})]}):e.jsx("div",{className:"h-full min-h-[500px] flex flex-col items-center justify-center p-8 border-4 border-dashed border-purple-200 m-6 rounded-2xl bg-gradient-to-br from-purple-50/50 to-pink-50/50",children:e.jsxs(s.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx(s.div,{className:"w-20 h-20 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center mb-6 mx-auto",whileHover:{scale:1.1,rotate:5},animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:2},children:e.jsx(M,{className:"w-10 h-10 text-purple-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Arrastra tu imagen aqu√≠"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"O haz clic para seleccionar una imagen desde tu dispositivo. Esta ser√° la portada de tu libro personalizado."}),e.jsx(s.div,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-semibold shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Seleccionar imagen"}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Formatos soportados: PNG, JPG, JPEG"}),(a==null?void 0:a.image)&&e.jsxs(s.div,{className:"mt-6 p-4 bg-white/50 rounded-xl",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Vista previa del dise√±o:"}),e.jsx("img",{src:a.image,alt:"Dise√±o preset",className:"w-24 h-24 object-cover rounded-lg mx-auto opacity-60",onError:t=>{t.target.style.display="none"}})]})]})})]}),e.jsx(s.div,{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 border-t border-purple-100",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:18,className:"text-purple-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:(a==null?void 0:a.name)||"Dise√±o Personalizado"})]}),u&&e.jsxs(s.div,{className:"text-sm text-green-600 font-medium flex items-center gap-1",initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[e.jsx("span",{children:"‚úì"}),u.name]})]})})]})})})]}),e.jsx(Y,{children:q&&e.jsx(s.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L,children:e.jsx(s.div,{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx(s.div,{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:e.jsx("span",{className:"text-2xl",children:"üîê"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"¬°Inicia sesi√≥n para continuar!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Para guardar tu √°lbum personalizado necesitas tener una cuenta activa."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(s.button,{onClick:D,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Iniciar sesi√≥n"}),e.jsx(s.button,{onClick:L,className:"w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Continuar sin guardar"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["¬øNo tienes cuenta?",e.jsx("a",{href:"/crear-cuenta",className:"text-purple-600 hover:underline ml-1",children:"Reg√≠strate gratis"})]})]})})})})]})}export{je as default};

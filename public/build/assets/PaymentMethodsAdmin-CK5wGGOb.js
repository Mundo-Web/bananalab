var ie=Object.defineProperty;var le=(u,g,m)=>g in u?ie(u,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):u[g]=m;var j=(u,g,m)=>le(u,typeof g!="symbol"?g+"":g,m);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as me}from"./Base-BEMHs2oE.js";import{S as A}from"./SwitchFormGroup-CPKgKErd.js";import{T as de}from"./TextareaFormGroup-CgEriU3j.js";import{r as p}from"./index-BOnQTV8N.js";import{c as pe}from"./ReactAppend-DTVVXReZ.js";import{s as H}from"./DxBox-C2WMS09E.js";import{S as v}from"./ProductCard-CwyKCVe-.js";import{B as ue}from"./ModalImportItem-08p2KSos.js";import{M as fe}from"./Modal-D318Q6e0.js";import{T as ge}from"./Table-DaiyF0kF.js";import{I as J}from"./ImageFormGroup-BJgwOQgt.js";import{I as q}from"./InputFormGroup-BRr_So2P.js";import{S as he}from"./SelectFormGroup-D5ZAG8Pz.js";import{D as Q}from"./DxButton-CsjWvhyj.js";import{C as xe}from"./CreateReactScript-CrlrjA2p.js";import{N as je}from"./Number2Currency-e57Tgsuk.js";import{R as U}from"./ReactAppend-D7S498fx.js";import"./index-yBjzXJbu.js";import"./Global-BM4Id4Pw.js";import"./tippy-react.esm-BktTnHXY.js";import"./index-DE3dzT5W.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-BOnt0YF6.js";import"./main-Bp3JhiuO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-BFMpZmqE.js";import"./index.esm-DFiNGWUA.js";/* empty css               */import"./General-BmbBKdsB.js";class be extends ue{constructor(){super(...arguments);j(this,"path","admin/payment-methods");j(this,"hasFiles",!0);j(this,"toggleStatus",async m=>{var d;try{const c=await fetch(`/api/admin/payment-methods/${m}/toggle`,{method:"PATCH",headers:{"X-CSRF-TOKEN":(d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content")}}),i=await c.json();if(!c.ok)throw new Error((i==null?void 0:i.message)??"Error cambiando estado");return i}catch(c){throw console.error("Error en toggleStatus:",c.message),c}});j(this,"reorder",async m=>{var d;try{const c=await fetch("/api/admin/payment-methods/reorder",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content")},body:JSON.stringify({methods:m})}),i=await c.json();if(!c.ok)throw new Error((i==null?void 0:i.message)??"Error reordenando m√©todos");return i}catch(c){throw console.error("Error en reorder:",c.message),c}});j(this,"getTemplates",async()=>{try{const m=await fetch("/api/admin/payment-methods/templates"),d=await m.json();if(!m.ok)throw new Error((d==null?void 0:d.message)??"Error obteniendo plantillas");return d}catch(m){throw console.error("Error en getTemplates:",m.message),m}});j(this,"destroy",async m=>{var d;try{const c=await fetch(`/api/${this.path}/${m}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content")}}),i=await c.json();if(!c.ok)throw new Error((i==null?void 0:i.message)??"Error eliminando m√©todo de pago");return i}catch(c){throw console.error("Error en destroy:",c.message),c}});j(this,"list",async m=>{var d;try{const c=await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content")},body:JSON.stringify(m)}),i=await c.json();if(!c.ok)throw new Error((i==null?void 0:i.message)??"Error obteniendo m√©todos de pago");return i}catch(c){throw console.error("Error en list:",c.message),c}})}}const y=new be,ye=()=>{const u=p.useRef(),g=p.useRef(),m=p.useRef(),d=p.useRef(),c=p.useRef(),i=p.useRef(),b=p.useRef(),w=p.useRef(),T=p.useRef(),E=p.useRef(),_=p.useRef(),R=p.useRef(),S=p.useRef(),F=p.useRef({}),[N,X]=p.useState(!1),[f,B]=p.useState({}),[Ne,P]=p.useState("gateway"),[k,I]=p.useState(""),[h,z]=p.useState(null);p.useEffect(()=>{V()},[]);const V=async()=>{try{const s=await y.getTemplates();s.status&&B(s.templates)}catch(s){console.error("Error loading templates:",s)}},G=async s=>{console.log("üöÄ Opening modal with data:",s),z(s||null),X(!!(s!=null&&s.id));let t=f,r=!1;if(!t||Object.keys(t).length===0){console.log("‚è≥ Templates not loaded, fetching directly...");try{const a=await y.getTemplates();a.status?(t=a.templates,B(t),r=!0,console.log("‚úÖ Templates loaded directly:",Object.keys(t))):(console.error("‚ùå Failed to load templates:",a),t={})}catch(a){console.error("‚ùå Error loading templates:",a),t={}}}const o=(s==null?void 0:s.template_key)||"";let n=(s==null?void 0:s.configuration)||{};if(typeof n=="string")try{n=JSON.parse(n),console.log("‚úÖ Parsed configuration JSON:",n)}catch{console.warn("‚ö†Ô∏è Could not parse configuration JSON:",n),n={}}console.log("üìã Template key:",o),console.log("üîß Configuration data:",n),console.log("üìä Available templates:",Object.keys(t)),F.current=n,Y(s),s!=null&&s.type&&P(s.type),o&&I(o),$(g.current).modal("show"),setTimeout(async()=>{console.log("üîÑ Setting up dynamic fields..."),b.current&&$(b.current).val((s==null?void 0:s.type)||"gateway").trigger("change"),await new Promise(a=>setTimeout(a,300)),o&&t[o]&&Object.keys(n).length>0?(console.log("üéØ Populating configuration fields..."),await D(o,n,t)):(console.log("‚ÑπÔ∏è No configuration data to populate or template not found"),console.log("üìã Debug info:",{templateKey:o,hasTemplate:!!t[o],configDataKeys:Object.keys(n),availableTemplateKeys:Object.keys(t)})),W(o,t)},r?800:500)},Y=s=>{console.log("üìù Populating basic fields..."),m.current&&(m.current.value=(s==null?void 0:s.id)||""),d.current&&(d.current.value=(s==null?void 0:s.name)||""),c.current&&(c.current.value=(s==null?void 0:s.display_name)||""),i.current&&(i.current.value=(s==null?void 0:s.description)||""),w.current&&(w.current.checked=(s==null?void 0:s.is_active)??!0),T.current&&(T.current.checked=(s==null?void 0:s.requires_proof)??!1),E.current&&(E.current.value=(s==null?void 0:s.fee_percentage)||0),_.current&&(_.current.value=(s==null?void 0:s.fee_fixed)||0),S.current&&(S.current.value=(s==null?void 0:s.sort_order)||0),R.image.src=s!=null&&s.icon?`/storage/images/payment_method/${s==null?void 0:s.icon}`:"/storage/images/item/undefined"},W=(s,t=f)=>{setTimeout(()=>{const r=document.getElementById("instructions-preview-container");if(r){const o=t[s];o&&o.instructions?r.style.display="block":r.style.display="none"}},200)},D=async(s,t,r=f)=>{const o=r[s];if(!o||!o.config){console.warn("‚ùå Template or config not found for templateKey:",s),console.warn("üìã Available templates:",Object.keys(r));return}return console.log("üîß Starting robust config field population for template:",s),console.log("üìä Config data to populate:",t),console.log("üèóÔ∏è Template structure:",o.config),new Promise(n=>{const l=(a=1)=>{console.log(`üîç Population attempt ${a}/25`);const ce=Object.keys(o.config),O=[],C=[];if(ce.forEach(M=>{document.getElementById(`config_${M}`)?C.push(M):O.push(M)}),console.log(`‚úÖ Available fields (${C.length}):`,C),console.log(`‚ùå Missing fields (${O.length}):`,O),O.length===0){console.log("üéØ All fields found! Populating values..."),L(o,t),n(!0);return}a<25?(console.log("‚è≥ Waiting 300ms before retry..."),setTimeout(()=>l(a+1),300)):(console.warn("üö® Max attempts reached. Populating available fields only."),L(o,t),n(!1))};setTimeout(()=>l(),100)})},L=(s,t)=>{console.log("ÔøΩ Populating configuration fields with data:",t),Object.keys(s.config).forEach(r=>{const o=document.getElementById(`config_${r}`),n=s.config[r],l=t[r]||n.default||"";if(!o){console.warn(`‚ö†Ô∏è Element config_${r} not found during population`);return}console.log(`üìù Setting field ${r} =`,l),o.type==="checkbox"?o.checked=!!l:o.type==="file"?Z(o,r,l,n):o.value=l}),console.log("‚úÖ Configuration field population completed")},Z=(s,t,r,o)=>{const n=s.closest("[data-image-form-group]");if(n&&o.accept&&o.accept.includes("image")){console.log(`üñºÔ∏è Populating ImageFormGroup for ${t} with value:`,r);const l=n.querySelector("img");if(r&&r!==""){l&&(l.src=`/storage/images/payment_method/${r}`,l.style.display="block",console.log(`‚úÖ Image preview set for ${t}:`,`/storage/images/payment_method/${r}`));let a=n.querySelector(".config-file-info");a||(a=document.createElement("div"),a.className="config-file-info mt-2",n.appendChild(a)),a.innerHTML=`<small class="text-success"><i class="mdi mdi-check-circle"></i> Archivo actual: <strong>${r}</strong></small>`}else{l&&(l.src="/api/cover/thumbnail/null",l.style.display="block");const a=n.querySelector(".config-file-info");a&&a.remove()}}else{console.log(`üìé Populating regular file field ${t} with value:`,r);let l=document.getElementById(`config_${t}_info`);l||(l=document.createElement("div"),l.id=`config_${t}_info`,l.className="mt-2",s.parentNode.appendChild(l)),r&&r!==""?l.innerHTML=`<small class="text-success"><i class="mdi mdi-check-circle"></i> Archivo actual: <strong>${r}</strong></small>`:l.innerHTML='<small class="text-muted">No hay archivo subido</small>'}},K=async s=>{s.preventDefault();const t=new FormData;N&&m.current&&t.append("id",m.current.value),d.current&&t.append("name",d.current.value),c.current&&t.append("display_name",c.current.value),i.current&&t.append("description",i.current.value),b.current&&t.append("type",b.current.value),w.current&&t.append("is_active",w.current.checked?1:0),T.current&&t.append("requires_proof",T.current.checked?1:0),E.current&&t.append("fee_percentage",E.current.value),_.current&&t.append("fee_fixed",_.current.value),S.current&&t.append("sort_order",S.current.value),R.current&&R.current.files[0]&&t.append("icon",R.current.files[0]);const r={},o={},n=f[k];n&&n.config&&Object.keys(n.config).forEach(a=>{const x=document.getElementById(`config_${a}`);x&&(x.type==="checkbox"?r[a]=x.checked:x.type==="file"&&x.files[0]?(o[a]=x.files[0],r[a]=x.files[0].name):r[a]=x.value)}),t.append("template_key",k),t.append("configuration",JSON.stringify(r)),Object.keys(o).forEach(a=>{t.append(`config_files[${a}]`,o[a])});const l=(n==null?void 0:n.instructions)||{};t.append("instructions",JSON.stringify(l));try{(N?await y.save(t):await y.save(t))&&(g.current&&$(g.current).modal("hide"),u.current&&$(u.current).dxDataGrid("instance").refresh(),v.fire({title:"¬°√âxito!",text:`M√©todo de pago ${N?"actualizado":"creado"} correctamente`,icon:"success"}))}catch(a){v.fire({title:"Error",text:a.message||"Error guardando m√©todo de pago",icon:"error"})}},ee=async({id:s,value:t})=>{try{await y.toggleStatus(s),u.current&&$(u.current).dxDataGrid("instance").refresh()}catch(r){v.fire({title:"Error",text:r.message||"Error cambiando estado",icon:"error"})}},se=async s=>{if((await v.fire({title:"¬øEst√°s seguro?",text:"Esta acci√≥n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S√≠, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await y.destroy(s),u.current&&$(u.current).dxDataGrid("instance").refresh(),v.fire({title:"¬°Eliminado!",text:"M√©todo de pago eliminado correctamente",icon:"success"})}catch(r){v.fire({title:"Error",text:r.message||"Error eliminando m√©todo de pago",icon:"error"})}},te=s=>{const t=s.target.value;P(t);const r=Object.keys(f).find(o=>f[o].type===t);r&&(I(r),F.current={},updateConfigurationFields(r,{}),setTimeout(()=>{const o=document.getElementById("instructions-preview-container");if(o){const n=f[r];n&&n.instructions?o.style.display="block":o.style.display="none"}},100))},re=()=>{const s=f[k];return!s||!s.config?k?null:e.jsxs("div",{className:"alert alert-warning mt-4 mb-0",children:[e.jsx("i",{className:"mdi mdi-information"})," Seleccione un m√©todo de pago espec√≠fico para ver sus campos de configuraci√≥n."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsx("h5",{className:"mb-3",children:"Configuraci√≥n espec√≠fica"})}),Object.entries(s.config).map(([t,r])=>e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:[r.label,r.required&&e.jsx("span",{className:"text-danger",children:"*"})]}),ne(t,r)]},t))]}),"                ",s.instructions&&e.jsx("div",{className:"row mt-4",id:"instructions-preview-container",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-info",children:[e.jsxs("div",{className:"card-header bg-light",children:[e.jsxs("h6",{className:"mb-0 text-info",children:[e.jsx("i",{className:"mdi mdi-information-outline me-2"}),"Vista previa de instrucciones para el usuario"]}),e.jsx("small",{className:"text-muted",children:"Estas son las instrucciones que ver√°n los usuarios al seleccionar este m√©todo de pago"})]}),e.jsx("div",{className:"card-body bg-light",children:oe(s.instructions)})]})})})]})},oe=s=>e.jsxs("div",{className:"instructions-preview",children:[s.title&&e.jsx("div",{className:"mb-3",children:e.jsxs("h6",{className:"text-primary mb-2",children:[e.jsx("i",{className:"mdi mdi-format-title me-1"}),s.title]})}),s.bank_info&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("strong",{className:"text-success",children:[e.jsx("i",{className:"mdi mdi-bank me-1"}),"Datos bancarios:"]}),e.jsx("div",{className:"bg-white p-2 rounded border mt-2",children:e.jsx("ul",{className:"list-unstyled mb-0",children:s.bank_info.map((t,r)=>e.jsx("li",{className:"mb-1",dangerouslySetInnerHTML:{__html:t}},r))})})]}),s.contact_info&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("strong",{className:"text-info",children:[e.jsx("i",{className:"mdi mdi-phone me-1"}),"Informaci√≥n de contacto:"]}),e.jsx("div",{className:"bg-white p-2 rounded border mt-2",children:e.jsx("ul",{className:"list-unstyled mb-0",children:s.contact_info.map((t,r)=>e.jsx("li",{className:"mb-1",dangerouslySetInnerHTML:{__html:t}},r))})})]}),s.account_info&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("strong",{className:"text-warning",children:[e.jsx("i",{className:"mdi mdi-account me-1"}),"Datos de la cuenta:"]}),e.jsx("div",{className:"bg-white p-2 rounded border mt-2",children:e.jsx("ul",{className:"list-unstyled mb-0",children:s.account_info.map((t,r)=>e.jsx("li",{className:"mb-1",dangerouslySetInnerHTML:{__html:t}},r))})})]}),s.steps&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("strong",{className:"text-primary",children:[e.jsx("i",{className:"mdi mdi-format-list-numbered me-1"}),"Pasos a seguir:"]}),e.jsx("div",{className:"bg-white p-2 rounded border mt-2",children:e.jsx("ol",{className:"mb-0",children:s.steps.map((t,r)=>e.jsx("li",{className:"mb-2",dangerouslySetInnerHTML:{__html:t}},r))})})]}),s.qr_display&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"alert alert-info border-0",children:[e.jsx("i",{className:"mdi mdi-qrcode me-2 fs-5"}),e.jsx("strong",{children:"C√≥digo QR:"})," Se mostrar√° el c√≥digo QR que subas en el campo correspondiente.",e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"Los usuarios podr√°n escanear el c√≥digo para realizar el pago directamente."})]})}),s.show_phone&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"alert alert-info border-0",children:[e.jsx("i",{className:"mdi mdi-cellphone me-2 fs-5"}),e.jsx("strong",{children:"N√∫mero de tel√©fono:"})," Se mostrar√° el n√∫mero configurado para b√∫squeda manual.",e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"√ötil como alternativa al QR para usuarios que prefieren buscar manualmente."})]})}),s.show_cci&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"alert alert-success border-0",children:[e.jsx("i",{className:"mdi mdi-bank-transfer me-2 fs-5"}),e.jsx("strong",{children:"CCI:"})," Se mostrar√° el c√≥digo de cuenta interbancario configurado.",e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"Para transferencias entre diferentes bancos."})]})}),s.note&&e.jsxs("div",{className:"alert alert-warning border-0",children:[e.jsx("i",{className:"mdi mdi-alert-circle-outline me-2 fs-5"}),e.jsx("strong",{children:"Nota importante:"})," ",s.note]}),e.jsx("div",{className:"mt-3 pt-2 border-top",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"mdi mdi-information me-1"}),"Estas instrucciones se generan autom√°ticamente seg√∫n el tipo de m√©todo de pago seleccionado. Los datos espec√≠ficos (QR, CCI, tel√©fono) se mostrar√°n seg√∫n la configuraci√≥n que hagas arriba."]})})]}),ne=(s,t)=>{const r=`config_${s}`;switch(t.type){case"text":case"tel":case"url":return e.jsx("input",{type:t.type,id:r,className:"form-control",placeholder:t.placeholder,required:t.required});case"password":return e.jsx("input",{type:"password",id:r,className:"form-control",placeholder:t.placeholder,required:t.required});case"select":return e.jsxs("select",{id:r,className:"form-control",required:t.required,children:[e.jsx("option",{value:"",children:"Seleccionar..."}),Object.entries(t.options||{}).map(([o,n])=>e.jsx("option",{value:o,children:n},o))]});case"boolean":return e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",id:r,className:"form-check-input"}),e.jsx("label",{className:"form-check-label",htmlFor:r,children:t.label})]});case"file":return t.accept&&t.accept.includes("image")?e.jsx("div",{"data-image-form-group":r,children:e.jsx(J,{eRef:null,id:r,label:t.label||s,accept:t.accept,required:t.required,help:t.help})}):e.jsxs("div",{children:[e.jsx("input",{type:"file",id:r,className:"form-control",accept:t.accept,required:t.required}),e.jsx("div",{id:`${r}_info`,className:"mt-1"}),t.help&&e.jsx("small",{className:"form-text text-muted",children:t.help})]});case"textarea":return e.jsx("textarea",{id:r,className:"form-control",rows:"3",placeholder:t.placeholder,required:t.required});default:return e.jsx("input",{type:"text",id:r,className:"form-control",placeholder:t.placeholder,required:t.required})}},ae=s=>{switch(s){case"gateway":return'<span class="badge bg-primary">Gateway</span>';case"qr":return'<span class="badge bg-info">QR/M√≥vil</span>';case"manual":return'<span class="badge bg-success">Manual</span>';default:return'<span class="badge bg-secondary">Otro</span>'}};return e.jsxs(e.Fragment,{children:[e.jsx(ge,{gridRef:u,title:"M√©todos de Pago",rest:y,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>{u.current&&$(u.current).dxDataGrid("instance").refresh()}}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar M√©todo",hint:"Agregar M√©todo de Pago",onClick:()=>G()}})},exportable:!0,exportableName:"MetodosPago",columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"icon",caption:"Icono",width:"60px",cellTemplate:(s,{data:t})=>{U(s,e.jsx("img",{src:`/storage/images/payment_method/${t.icon}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:r=>r.target.src="/api/cover/thumbnail/null"}))}},{dataField:"display_name",caption:"M√©todo",cellTemplate:(s,{data:t})=>{s.html(H.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:t.display_name}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:t.description})]})))}},{dataField:"type",caption:"Tipo",width:"100px",cellTemplate:(s,{data:t})=>{s.html(ae(t.type))}},{dataField:"fee_percentage",caption:"Comisi√≥n",width:"120px",cellTemplate:(s,{data:t})=>{s.html(H.renderToString(e.jsxs(e.Fragment,{children:[t.fee_percentage>0&&e.jsxs("div",{children:[t.fee_percentage,"%"]}),t.fee_fixed>0&&e.jsxs("div",{children:["S/ ",je(t.fee_fixed)]}),t.fee_percentage==0&&t.fee_fixed==0&&e.jsx("span",{className:"text-success",children:"Gratis"})]})))}},{dataField:"requires_proof",caption:"Comprobante",width:"100px",cellTemplate:(s,{data:t})=>{s.html(t.requires_proof?'<span class="badge bg-warning">Requerido</span>':'<span class="badge bg-light text-muted">No</span>')}},{dataField:"is_active",caption:"Estado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{U(s,e.jsx(A,{checked:t.is_active,onChange:r=>ee({id:t.id,value:r.target.checked})}))}},{dataField:"sort_order",caption:"Orden",width:"70px"},{caption:"Acciones",width:"120px",cellTemplate:(s,{data:t})=>{s.css("text-overflow","unset"),s.append(Q({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>G(t)})),s.append(Q({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>se(t.id)}))}}]}),e.jsxs(fe,{modalRef:g,title:N?"Editar M√©todo de Pago":"Nuevo M√©todo de Pago",onSubmit:K,size:"lg",id:"modalForm",children:[e.jsx("input",{ref:m,type:"hidden"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(q,{eRef:d,label:"Nombre interno",placeholder:"Ej: Yape",required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(q,{eRef:c,label:"Nombre para usuario",placeholder:"Ej: Pago con Yape",required:!0})})]}),"                ",e.jsx(de,{eRef:i,label:"Descripci√≥n",placeholder:"Descripci√≥n del m√©todo de pago",rows:3}),"                ",e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:["                        ",e.jsxs(he,{eRef:b,label:"Tipo de m√©todo",required:!0,onChange:te,dropdownParent:"#modalForm",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),f&&[...new Set(Object.values(f).map(s=>s.type))].map(s=>{const t={gateway:"Gateway (Online)",qr:"QR/M√≥vil",manual:"Manual"};return e.jsx("option",{value:s,children:t[s]||s.charAt(0).toUpperCase()+s.slice(1)},s)})]})]}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["M√©todo de pago espec√≠fico",e.jsx("span",{className:"text-danger",children:"*"})]}),"                            ",e.jsxs("select",{className:"form-select",value:k,onChange:s=>{const t=s.target.value;if(I(t),console.log("Template changed to:",t),t&&f[t]){const r=f[t].type;P(r),b.current&&$(b.current).val(r).trigger("change");let o={};N&&(h==null?void 0:h.template_key)===t?(o=(h==null?void 0:h.configuration)||{},console.log("Using original saved config for template:",t,o)):N&&(h==null?void 0:h.template_key)!==t?(o={},console.log("Template changed during edit, clearing config")):(o={},console.log("New payment method, using empty config")),F.current=o,setTimeout(()=>{D(t,o,f)},100)}else F.current={}},required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar m√©todo..."}),f&&Object.entries(f).map(([s,t])=>{const o={yape:"Yape",plin:"Plin",culqi:"Culqi",mercadopago:"MercadoPago",transferencia_bancaria:"Transferencia Bancaria",efectivo:"Pago en Efectivo",agente_bancario:"Agente Bancario"}[s]||t.name||s.charAt(0).toUpperCase()+s.slice(1);return e.jsx("option",{value:s,children:o},s)})]}),e.jsx("small",{className:"form-text text-muted",children:"Seleccione el m√©todo espec√≠fico para mostrar sus campos de configuraci√≥n"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(q,{eRef:E,label:"Comisi√≥n (%)",type:"number",step:"0.01",min:"0",max:"100",defaultValue:"0"})}),e.jsx("div",{className:"col-md-4",children:e.jsx(q,{eRef:_,label:"Comisi√≥n fija (S/)",type:"number",step:"0.01",min:"0",defaultValue:"0"})})]}),e.jsxs("div",{className:"row",children:["                    ",e.jsx("div",{className:"col-md-4",children:e.jsx(J,{eRef:R,label:"Icono",accept:"image/*"})}),e.jsx("div",{className:"col-md-4",children:e.jsx(q,{eRef:S,label:"Orden",type:"number",min:"0",defaultValue:"0"})}),e.jsxs("div",{className:"col-md-4 d-flex flex-column justify-content-end",children:["                        ",e.jsx("div",{className:"mb-3",children:e.jsx(A,{eRef:w,label:"Activo",checked:!0})}),e.jsx("div",{className:"mb-3",children:e.jsx(A,{eRef:T,label:"Requiere comprobante",checked:!1})})]})]}),"                ",e.jsx("div",{id:"dynamic-config-section",children:!f||Object.keys(f).length===0?e.jsxs("div",{className:"alert alert-info mt-4 mb-0",children:[e.jsx("i",{className:"mdi mdi-timer-sand"})," Cargando configuraci√≥n din√°mica..."]}):re()})]})]})};xe((u,g)=>{pe.createRoot(u).render(e.jsx(me,{...g,title:"M√©todos de Pago",children:e.jsx(ye,{...g})}))});

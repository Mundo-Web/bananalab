import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BOnQTV8N.js";import{N as p}from"./Number2Currency-e57Tgsuk.js";import{m as y}from"./main-Bp3JhiuO.js";import{G as R}from"./Global-BM4Id4Pw.js";import{B as J,a as ie,D as Se}from"./DeliveryPricesRest-CepPhj8K.js";import{C as Ce}from"./CardItem-CdbVCrTF.js";import{u as B,S as V}from"./SelectForm-CoB1IHa7.js";import{I as T}from"./InputForm-BW2Lnisr.js";import{c as H}from"./createLucideIcon-DfjclApS.js";import{C as ee}from"./check-D5vaIe6v.js";import{U as G}from"./upload-GO9GDST_.js";import{B as se}from"./building-2-DSFvhCB-.js";import{S as ae}from"./smartphone-BHF2PZKl.js";import{C as Pe}from"./clock-BLXQcN-l.js";import{U as ke}from"./user-BZB1h7Cv.js";import{C as U}from"./copy-BnGV3h9k.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./book-C1IPlXSj.js";import"./minus-Db6MFKEO.js";import"./plus-CTIomuuF.js";import"./trash-2-DU7LB6-f.js";import"./chevron-down-uIVDLcM-.js";import"./search-BQ59Robe.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=H("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=H("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=H("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function _e({cart:l,setCart:d,onContinue:o,subTotal:h,envio:u,igv:v,totalFinal:g}){console.log("üõí CartStep: Cart received:",l);const b=m=>{typeof m=="function"?d(n=>{const S=m(n);return y.Local.set(`${R.APP_CORRELATIVE}_cart`,S),console.log("üõí CartStep: Carrito actualizado en localStorage:",S.length,"items"),S}):(d(m),y.Local.set(`${R.APP_CORRELATIVE}_cart`,m),console.log("üõí CartStep: Carrito actualizado en localStorage:",m.length,"items"))},N=l.reduce((m,n)=>{const S=n.price||0,E=n.final_price||n.price||0,r=n.quantity||1;return S>E?m+(S-E)*r:m},0);return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"space-y-6",children:l.map((m,n)=>e.jsx(Ce,{...m,setCart:b},n))})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[N>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600 font-medium",children:"Ahorros totales"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-S/ ",p(N)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(h)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(v)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Env√≠o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(u)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",p(g)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(J,{onClick:o,children:"  Continuar"}),e.jsx(ie,{href:"/",children:" Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los¬†",e.jsx("a",{className:"customtext-primary font-bold",children:"T√©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra¬†",e.jsx("a",{className:"customtext-primary font-bold",children:"Pol√≠tica de Privacidad"}),"."]})})]})]})]})}function $e(){let l="";for(let d=0;d<12;d++){const o=Math.floor(Math.random()*10);l+=o}return l}const Ee=l=>new Promise((d,o)=>{try{console.log(l);const h=$e(l.email);console.log(h),window.Culqi.publicKey="pk_test_f4d42a7b5073e8df",window.Culqi.settings({title:"Sala Fabulosa",email:l.email,currency:"PEN",amount:l.amount*100,order:`${h}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:"/assets/resources/logo.png",bannerColor:"#311609",buttonBackground:"#311609"}}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){o("No se obtuvo un token de Culqi");return}const u=window.Culqi.token.id;console.log("‚úÖ Token generado:",u),l={...l,token:u,orderNumber:h},console.log("_request actualizado",l);const{status:v,result:g}=await y.Fetch("./api/pago",{method:"POST",body:JSON.stringify(l)});v||console.log((g==null?void 0:g.message)||"Error en el pago"),window.Culqi.close(),y.Notify.add({icon:"/assets/img/icon.svg",title:"Pago Exitoso",body:"El pago se proces√≥ correctamente.",type:"success"}),d(g)}catch(u){y.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:u.message,type:"danger"}),o(u.message||"Error en el pago")}},document.addEventListener("culqi.error",function(u){var v,g;y.Notify.add({icon:"/assets/img/icon.svg",title:"Error en Culqi",body:((v=u.detail)==null?void 0:v.message)||"Error desconocido",type:"danger"}),o(((g=u.detail)==null?void 0:g.message)||"Error desconocido")})}catch(h){y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:h.message,type:"danger"}),o("Error en la integraci√≥n con Culqi")}}),Me=async l=>{var d;try{const o=await fetch("/api/payments/mercadopago",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content")},body:JSON.stringify(l)});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error processing MercadoPago payment:",o),o}},qe=async l=>{var d;try{const o=await fetch("/api/payments/manual",{method:"POST",headers:{"X-CSRF-TOKEN":(d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content")},body:l});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error processing manual payment:",o),o}},ne=({title:l,description:d,selected:o,onSelect:h,disabled:u})=>e.jsxs("div",{className:`flex w-full items-center gap-3 p-4 border rounded-xl cursor-pointer transition-all duration-300 customtext-neutral-dark 
                }`,onClick:h,children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center ${o?"border-primary":""}`,children:o&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light",children:[e.jsx("h4",{className:"text-sm ",children:l}),e.jsx("p",{className:"text-xs",children:d})]})]});function Te({cart:l,setSale:d,setCode:o,setDelivery:h,setCart:u,onContinue:v,noContinue:g,subTotal:b,igv:N,totalFinal:m,user:n,setEnvio:S,envio:E}){const[r,w]=c.useState({name:(n==null?void 0:n.name)||"",lastname:(n==null?void 0:n.lastname)||"",email:(n==null?void 0:n.email)||"",department:(n==null?void 0:n.department)||"",province:(n==null?void 0:n.province)||"",district:(n==null?void 0:n.district)||"",address:(n==null?void 0:n.address)||"",number:(n==null?void 0:n.number)||"",comment:(n==null?void 0:n.comment)||"",reference:(n==null?void 0:n.reference)||"",shippingOption:"delivery",paymentMethod:"culqi"}),[C,A]=c.useState(null),[j,P]=c.useState(null),[F,Ae]=c.useState(0),[_,le]=c.useState([]),[oe,ce]=c.useState(!0),M=a=>{const{name:s,value:i}=a.target;w(t=>({...t,[s]:i}))},de=a=>{w(i=>({...i,paymentMethod:a}));const s=_.find(i=>i.slug===a);s&&!s.requires_proof&&(A(null),P(null))},Q=a=>{const s=a.target.files[0];if(s){if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(s.type)){y.Notify.add({icon:"/assets/img/icon.svg",title:"Archivo no v√°lido",body:"Solo se permiten im√°genes (JPG, PNG) o archivos PDF",type:"danger"});return}if(s.size>5*1024*1024){y.Notify.add({icon:"/assets/img/icon.svg",title:"Archivo muy grande",body:"El archivo no debe superar los 5MB",type:"danger"});return}if(A(s),s.type.startsWith("image/")){const t=new FileReader;t.onload=x=>P(x.target.result),t.readAsDataURL(s)}else P(null)}},[k,me]=c.useState(""),[q,K]=c.useState(""),[z,O]=c.useState(""),[xe,pe]=c.useState([]),[ue,he]=c.useState([]),[ge,W]=c.useState([]),[Fe,Ie]=c.useState(0);c.useEffect(()=>{je()},[]);const je=async()=>{try{const s=await(await fetch("/api/payments/methods")).json();s.status&&s.methods?(le(s.methods),s.methods.length>0&&w(i=>({...i,paymentMethod:s.methods[0].slug}))):console.error("Error en respuesta de m√©todos de pago:",s)}catch(a){console.error("Error fetching payment methods:",a),y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:"No se pudieron cargar los m√©todos de pago",type:"danger"})}finally{ce(!1)}};c.useEffect(()=>{const a=[...new Set(B.map(s=>s.departamento))];pe(a)},[]),c.useEffect(()=>{if(k){const a=[...new Set(B.filter(s=>s.departamento===k).map(s=>s.provincia))];he(a),K(""),O(""),W([]),w(s=>({...s,department:k,province:"",district:""}))}},[k]),c.useEffect(()=>{if(q){const a=B.filter(s=>s.departamento===k&&s.provincia===q).map(s=>s.distrito);W(a),O(""),w(s=>({...s,province:q,district:""}))}},[q]),c.useEffect(()=>{z&&(w(s=>({...s,district:z})),(async()=>{try{const s=await Se.getShippingCost({department:k,district:z});S(s.data.price),p(s.data.price)>0?Y("express"):Y("free")}catch(s){console.error("Error fetching shipping cost:",s),alert("No se pudo obtener el costo de env√≠o.")}})())},[z]);const ye=async a=>{if(a.preventDefault(),!n){y.Notify.add({icon:"/assets/img/icon.svg",title:"Iniciar Sesi√≥n",body:"Se requiere que inicie sesi√≥n para realizar la compra",type:"danger"});return}if(!r.department||!r.province||!r.district||!r.name||!r.lastname||!r.email||!r.address||!r.reference){y.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:"Completar los datos de env√≠o",type:"danger"});return}const s=_.find(t=>t.slug===r.paymentMethod);if(s&&s.requires_proof&&!C){y.Notify.add({icon:"/assets/img/icon.svg",title:"Comprobante requerido",body:"Debe subir el comprobante de pago para este m√©todo",type:"danger"});return}const i={user_id:(n==null?void 0:n.id)||"",name:(r==null?void 0:r.name)||"",lastname:(r==null?void 0:r.lastname)||"",fullname:`${r==null?void 0:r.name} ${r==null?void 0:r.lastname}`,email:(r==null?void 0:r.email)||"",phone:"",country:"Per√∫",department:k||"",province:q||"",district:z||"",ubigeo:null,address:(r==null?void 0:r.address)||"",number:(r==null?void 0:r.number)||"",comment:(r==null?void 0:r.comment)||"",reference:(r==null?void 0:r.reference)||"",amount:m||0,delivery:E,cart:l,payment_method:r.paymentMethod};try{let t;const x=_.find($=>$.slug===r.paymentMethod);if(!x)throw new Error("M√©todo de pago no v√°lido");switch(x.type){case"gateway":if(x.slug==="culqi"){if(!window.Culqi){console.error("‚ùå Culqi a√∫n no se ha cargado.");return}t=await Ee(i)}else if(x.slug==="mercadopago")t=await Me(i);else throw new Error("Gateway no implementado");break;case"qr":case"manual":const $=new FormData;Object.keys(i).forEach(I=>{Array.isArray(i[I])?$.append(I,JSON.stringify(i[I])):$.append(I,i[I])}),C&&$.append("payment_proof",C),t=await qe($);break;default:throw new Error("Tipo de m√©todo de pago no v√°lido")}const f=t;f.status?(d(f.sale),h(f.delivery),o(f.code),u([]),y.Notify.add({icon:"/assets/img/icon.svg",title:"¬°Pedido procesado!",body:x.type==="gateway"?"Su pago ha sido procesado exitosamente":"Su pedido est√° pendiente de validaci√≥n del comprobante",type:"success"}),v()):y.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:f.message||"El pago ha sido rechazado",type:"danger"})}catch(t){console.log(t),y.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:"No se pudo procesar el pago",type:"danger"})}},[X,Y]=c.useState("free"),Z=(a,s)=>{switch(a){case"gateway":return e.jsx(L,{size:20});case"qr":return e.jsx(ae,{size:20});case"manual":return e.jsx(se,{size:20});default:return e.jsx(L,{size:20})}},D=(a,s,i)=>{if(!a)return"";const t={phone_number:s.phone_number||s.phone||"",amount:`S/ ${p(i)}`,bank_name:s.bank_name||"",account_number:s.account_number||"",account_type:s.account_type||"",cci:s.cci||"",account_holder:s.account_holder||"",document_number:s.document_number||"",currency:s.currency||"PEN",qr_code:s.qr_code||"",account_name:s.account_name||"",order_id:Math.random().toString(36).substr(2,9).toUpperCase(),current_date:new Date().toLocaleDateString("es-PE"),current_time:new Date().toLocaleTimeString("es-PE",{hour:"2-digit",minute:"2-digit"})};let x=a;return Object.keys(t).forEach(f=>{const $=new RegExp(`\\{${f}\\}`,"g");x=x.replace($,t[f])}),x},be=a=>{if(!a||!a.instructions)return null;let s=a.instructions;const i=a.configuration||{};if(typeof s=="string")try{s=JSON.parse(s)}catch(x){return console.error("Error parsing instructions:",x),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-2",children:["Instrucciones para ",a.name]}),e.jsx("p",{className:"text-gray-700",children:a.instructions})]})}const t=we(a.type);return e.jsxs("div",{className:`bg-${t}-50 border border-${t}-200 rounded-xl p-6 transition-all duration-200 animate-fadeIn`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-${t}-100 flex items-center justify-center`,children:Z(a.type,a.slug)}),e.jsx("h4",{className:`font-semibold text-${t}-800 text-lg`,children:D(s.title||`Instrucciones para ${a.name}`,i,m)})]}),a.type==="qr"&&fe(a,i,s,t),a.type==="manual"&&Ne(a,i,s,t),a.type==="gateway"&&ve(a,i,s,t),s.steps&&s.steps.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h5",{className:`font-medium text-${t}-800 mb-3 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"üìã"}),"Pasos a seguir:"]}),e.jsx("ol",{className:"space-y-3",children:s.steps.map((x,f)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:`bg-${t}-200 text-${t}-800 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5`,children:f+1}),e.jsx("div",{className:`text-sm text-${t}-700 flex-1 leading-relaxed`,dangerouslySetInnerHTML:{__html:D(x,i,m)}})]},f))})]}),s.note&&e.jsx("div",{className:`mt-5 p-4 bg-${t}-100 rounded-lg border border-${t}-200`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg flex-shrink-0",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium text-${t}-800 mb-1`,children:"Importante:"}),e.jsx("p",{className:`text-sm text-${t}-700`,children:D(s.note,i,m)})]})]})}),s.processing_time&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Pe,{size:16}),e.jsxs("span",{children:["Tiempo de procesamiento: ",s.processing_time]})]})]})},fe=(a,s,i,t)=>e.jsxs("div",{className:"space-y-4",children:[s.phone_number&&e.jsx("div",{className:`bg-gradient-to-r from-${t}-100 to-${t}-50 rounded-lg p-5 border-2 border-${t}-200`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{size:20,className:`text-${t}-600`}),e.jsxs("p",{className:`text-sm font-medium text-${t}-700`,children:["N√∫mero para ",a.name,":"]})]}),e.jsx("p",{className:`text-3xl font-bold text-${t}-900 tracking-wider mb-1`,children:s.phone_number}),s.account_name&&e.jsxs("p",{className:`text-sm text-${t}-600 flex items-center gap-1`,children:[e.jsx(ke,{size:14}),"A nombre de: ",e.jsx("span",{className:"font-medium",children:s.account_name})]})]}),e.jsxs("button",{className:`bg-${t}-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-${t}-700 transition-colors shadow-md flex items-center gap-2`,onClick:()=>{navigator.clipboard.writeText(s.phone_number);const x=event.target,f=x.innerHTML;x.innerHTML="‚úì Copiado",setTimeout(()=>x.innerHTML=f,2e3)},children:[e.jsx(U,{size:16}),"Copiar"]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:"üí∞"}),e.jsx("span",{className:"text-yellow-800 font-medium text-lg",children:"Monto exacto a enviar:"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-900",children:["S/ ",p(m)]}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Incluye todos los cargos"})]})]})}),s.qr_code&&i.qr_display!==!1&&e.jsxs("div",{className:"text-center bg-white rounded-lg p-6 border-2 border-dashed border-gray-300 hover:border-gray-400 transition-colors",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full text-sm text-gray-600 mb-3",children:[e.jsx(re,{size:16}),"C√≥digo QR"]})}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:`/storage/images/payment_method/${s.qr_code}`,alt:"C√≥digo QR",className:"mx-auto max-w-48 h-auto rounded-lg border shadow-lg",onError:x=>{x.target.style.display="none",x.target.nextSibling.style.display="block"}}),e.jsxs("div",{className:"hidden bg-gray-100 p-8 rounded-lg",children:[e.jsx(re,{size:48,className:"mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"QR no disponible"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-3 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"üì±"}),"Escanea el c√≥digo QR con tu app de ",a.name]})]}),e.jsxs("div",{className:`bg-${t}-50 border border-${t}-200 rounded-lg p-4`,children:[e.jsxs("h5",{className:`font-medium text-${t}-800 mb-2 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"üí°"}),"Tips para ",a.name,":"]}),e.jsxs("ul",{className:`text-sm text-${t}-700 space-y-1`,children:[e.jsxs("li",{children:["‚Ä¢ Env√≠a exactamente ",e.jsxs("strong",{children:["S/ ",p(m)]})]}),e.jsx("li",{children:"‚Ä¢ Toma captura del comprobante de la app"}),e.jsx("li",{children:"‚Ä¢ Aseg√∫rate de que aparezca el n√∫mero de operaci√≥n"}),e.jsx("li",{children:"‚Ä¢ Verifica que el destinatario sea correcto"})]})]})]}),Ne=(a,s,i,t)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`bg-gradient-to-r from-${t}-100 to-${t}-50 rounded-lg p-5 border-2 border-${t}-200`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 bg-${t}-600 rounded-lg flex items-center justify-center`,children:e.jsx(se,{size:20,className:"text-white"})}),e.jsx("h5",{className:`font-semibold text-${t}-800 text-lg`,children:"Datos para transferencia"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.bank_name&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Banco:"}),e.jsx("span",{className:"font-bold text-gray-900",children:s.bank_name})]})}),s.account_number&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"N¬∞ Cuenta:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-gray-900 font-mono",children:s.account_number}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>navigator.clipboard.writeText(s.account_number),children:e.jsx(U,{size:14})})]})]})}),s.cci&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"CCI:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-gray-900 font-mono",children:s.cci}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 transition-colors",onClick:()=>navigator.clipboard.writeText(s.cci),children:e.jsx(U,{size:14})})]})]})}),s.account_holder&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Titular:"}),e.jsx("span",{className:"font-bold text-gray-900",children:s.account_holder})]})}),s.document_number&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"DNI/RUC:"}),e.jsx("span",{className:"font-bold text-gray-900 font-mono",children:s.document_number})]})}),s.account_type&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Tipo:"}),e.jsx("span",{className:"font-bold text-gray-900",children:s.account_type})]})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:"üí∏"}),e.jsx("span",{className:"text-blue-800 font-medium text-lg",children:"Monto exacto a transferir:"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-900",children:["S/ ",p(m)]}),e.jsx("div",{className:"text-sm text-blue-700",children:"Incluye todos los cargos"})]})]})}),e.jsxs("div",{className:`bg-${t}-50 border border-${t}-200 rounded-lg p-4`,children:[e.jsxs("h5",{className:`font-medium text-${t}-800 mb-2 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"üí°"}),"Tips importantes para transferencia:"]}),e.jsxs("ul",{className:`text-sm text-${t}-700 space-y-1`,children:[e.jsxs("li",{children:["‚Ä¢ Transfiere exactamente ",e.jsxs("strong",{children:["S/ ",p(m)]})]}),e.jsx("li",{children:"‚Ä¢ Guarda el comprobante de transferencia"}),e.jsx("li",{children:"‚Ä¢ Anota el n√∫mero de operaci√≥n"}),e.jsx("li",{children:"‚Ä¢ Verifica que los datos del destinatario sean correctos"}),e.jsx("li",{children:"‚Ä¢ El procesamiento puede tomar de 1 a 24 horas"})]})]})]}),ve=(a,s,i,t)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`bg-gradient-to-r from-${t}-100 to-${t}-50 rounded-lg p-5 border-2 border-${t}-200`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 bg-${t}-600 rounded-lg flex items-center justify-center`,children:e.jsx(L,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("h5",{className:`font-semibold text-${t}-800 text-lg`,children:["Procesamiento seguro con ",a.name]}),e.jsx("p",{className:`text-sm text-${t}-600`,children:"Acepta tarjetas Visa, Mastercard y m√°s"})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Monto a pagar:"}),e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["S/ ",p(m)]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-green-700",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 rounded-full flex items-center justify-center",children:"‚úì"}),e.jsx("span",{children:"Transacci√≥n protegida con cifrado SSL"})]})]}),e.jsxs("div",{className:`bg-${t}-50 border border-${t}-200 rounded-lg p-4`,children:[e.jsxs("h5",{className:`font-medium text-${t}-800 mb-2 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"üõ°Ô∏è"}),"Beneficios del pago online:"]}),e.jsxs("ul",{className:`text-sm text-${t}-700 space-y-1`,children:[e.jsx("li",{children:"‚Ä¢ ‚úÖ Procesamiento inmediato"}),e.jsx("li",{children:"‚Ä¢ üîí Transacci√≥n 100% segura"}),e.jsx("li",{children:"‚Ä¢ üì± Compatible con billeteras digitales"}),e.jsx("li",{children:"‚Ä¢ ‚ôªÔ∏è Sin necesidad de subir comprobante"}),e.jsx("li",{children:"‚Ä¢ ‚ö° Confirmaci√≥n autom√°tica del pedido"})]})]})]}),we=a=>{switch(a){case"gateway":return"blue";case"qr":return"purple";case"manual":return"green";default:return"gray"}};return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("form",{className:"space-y-6",onSubmit:a=>a.preventDefault(),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(T,{type:"text",label:"Nombres",name:"name",value:r.name,onChange:M,placeholder:"Nombres"}),e.jsx(T,{label:"Apellidos",type:"text",name:"lastname",value:r.lastname,onChange:M,placeholder:"Apellidos"})]}),e.jsx(T,{label:"Correo electr√≥nico",type:"email",name:"email",value:r.email,onChange:M,placeholder:"Ej. hola@gmail.com"}),e.jsx(V,{label:"Departamento",options:xe,placeholder:"Selecciona un Departamento",onChange:a=>{me(a),w(s=>({...s,department:k}))}}),e.jsx(V,{disabled:!k,label:"Provincia",options:ue,placeholder:"Selecciona una Provincia",onChange:a=>{K(a),w(s=>({...s,province:q}))}}),e.jsx(V,{disabled:!q,label:"Distrito",options:ge,placeholder:"Selecciona un Distrito",onChange:a=>{O(a),w(s=>({...s,district:z}))}}),e.jsx(T,{label:"Avenida / Calle / Jir√≥n",type:"text",name:"address",value:r.address,onChange:M,placeholder:"Ingresa el nombre de la calle"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(T,{label:"N√∫mero",type:"text",name:"number",value:r.number,onChange:M,placeholder:"Ingresa el n√∫mero de la calle"}),e.jsx(T,{label:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)",type:"text",name:"comment",value:r.comment,onChange:M,placeholder:"Ej. Casa 3, Dpto 101"})]}),e.jsx(T,{label:"Referencia",type:"text",name:"reference",value:r.reference,onChange:M,placeholder:"Ejem. Altura de la avenida..."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(L,{size:20,className:"text-primary"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"M√©todo de Pago"})]}),oe?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Cargando m√©todos de pago..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:[e.jsx(L,{size:48,className:"mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No hay m√©todos de pago disponibles"})]}):e.jsx("div",{className:"space-y-3",children:_.map(a=>e.jsxs("div",{className:`group relative border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-lg ${r.paymentMethod===a.slug?"border-primary bg-primary/5 shadow-md":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>de(a.slug),children:[r.paymentMethod===a.slug&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:e.jsx(ee,{size:14,className:"text-white"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl flex items-center justify-center transition-all duration-200 ${r.paymentMethod===a.slug?"bg-primary text-white shadow-lg":"bg-gray-100 group-hover:bg-gray-200"}`,children:a.icon?e.jsx("img",{src:a.icon,alt:a.name,className:"w-10 h-10 object-contain"}):Z(a.type,a.slug)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-900",children:a.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a.type==="gateway"?"bg-blue-100 text-blue-800":a.type==="qr"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:a.type==="gateway"?"Online":a.type==="qr"?"QR":"Manual"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.fee_percentage>0||a.fee_fixed>0?e.jsxs("span",{className:"text-orange-600 font-medium bg-orange-50 px-2 py-1 rounded",children:[a.fee_percentage>0&&`+${a.fee_percentage}%`,a.fee_percentage>0&&a.fee_fixed>0&&" ",a.fee_fixed>0&&`+S/ ${p(a.fee_fixed)}`]}):e.jsx("span",{className:"text-green-600 font-medium bg-green-50 px-2 py-1 rounded",children:"Sin comisi√≥n"}),a.requires_proof&&e.jsxs("span",{className:"text-blue-600 bg-blue-50 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(G,{size:12}),"Requiere comprobante"]})]})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 transition-all duration-200 ${r.paymentMethod===a.slug?"border-primary bg-primary":"border-gray-300 group-hover:border-gray-400"}`,children:r.paymentMethod===a.slug&&e.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})]},a.slug))}),(()=>{const a=_.find(s=>s.slug===r.paymentMethod);return a?be(a):null})(),(()=>{const a=_.find(s=>s.slug===r.paymentMethod);return a&&a.requires_proof?e.jsxs("div",{className:"space-y-4 bg-gray-50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(G,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Comprobante de Pago"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sube tu comprobante para validar el pago"})]})]}),e.jsx("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 ${C?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:C?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(ee,{className:"text-green-600",size:24}),e.jsx("span",{className:"text-green-800 font-medium",children:"Archivo cargado exitosamente"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:C.type.startsWith("image/")?e.jsx("img",{src:"/assets/img/file-image.svg",alt:"Image",className:"w-6 h-6"}):e.jsx("img",{src:"/assets/img/file-pdf.svg",alt:"PDF",className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:C.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(C.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{onClick:()=>{A(null),P(null)},className:"text-red-500 hover:text-red-700 transition-colors",children:"‚úï"})]}),j&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Vista previa:"}),e.jsx("img",{src:j,alt:"Preview",className:"max-w-full h-40 object-contain rounded-lg border mx-auto"})]})]}),e.jsxs("label",{htmlFor:"payment-proof-replace",className:"cursor-pointer",children:[e.jsx("span",{className:"text-primary hover:text-primary-dark text-sm font-medium",children:"Cambiar archivo"}),e.jsx("input",{id:"payment-proof-replace",type:"file",className:"hidden",accept:"image/*,.pdf",onChange:Q})]})]}):e.jsxs("div",{children:[e.jsx(G,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"payment-proof",className:"cursor-pointer",children:[e.jsx("span",{className:"bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors font-medium inline-block",children:"Seleccionar Archivo"}),e.jsx("input",{id:"payment-proof",type:"file",className:"hidden",accept:"image/*,.pdf",onChange:Q})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Arrastra y suelta tu archivo aqu√≠, o haz clic para seleccionar"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Formatos: PNG, JPG, PDF ‚Ä¢ Tama√±o m√°ximo: 5MB"})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"üí° Tips para tu comprobante:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Aseg√∫rate de que se vea claramente el monto y fecha"}),e.jsx("li",{children:"‚Ä¢ Incluye el n√∫mero de operaci√≥n si est√° disponible"}),e.jsx("li",{children:"‚Ä¢ La imagen debe ser n√≠tida y completa"}),e.jsx("li",{children:"‚Ä¢ No env√≠es capturas de pantalla parciales"})]})]})]}):null})()]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx(ne,{title:"Env√≠o gratis",description:"Entrega entre 3 a 10 d√≠as h√°biles",selected:X==="free"}),e.jsx(ne,{title:"Delivery",description:"Delivery 24 horas",selected:X==="express"})]}),e.jsxs("div",{className:"flex gap-4 mt-6 bg-[#F7F9FB] p-3 rounded-xl",children:[e.jsx("div",{className:"w-5",children:e.jsx(te,{className:"customtext-primary",width:"20px"})}),e.jsxs("div",{className:"text-xs font-medium customtext-neutral-dark flex flex-col gap-2",children:[e.jsx("p",{children:"Solo Lima Metropolitana: Dentro de las 24 horas despu√©s de efectuado el pago, solo algunos distritos de Lima Metropolitana."}),e.jsxs("p",{children:[" ","Distritos No incluidos: Santa Mar√≠a del Mar, Pucusana, San Bartolo, Punta Hermosa, Lur√≠n, Pachacamac, Chorrillos, Villa el Salvador, Villa Mar√≠a del Triunfo, San Juan de Miraflores, Cieneguilla, Ate, Chosica, Huaycan, San Juan de Lurigancho (hasta el Metro), Anc√≥n, Santa Rosa, Carabayllo, Puente Piedra."]}),e.jsxs("p",{children:[" ","Same Day: Solo para compras efectuadas hasta las 1pm del d√≠a."]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4 bg-[#F7F9FB] p-3 rounded-xl",children:[e.jsx("div",{className:"w-5",children:e.jsx(te,{className:"customtext-primary",width:"20px"})}),e.jsx("div",{className:"text-xs font-medium customtext-neutral-dark flex flex-col gap-2",children:e.jsx("p",{children:"Lima: 3 a 4 dias h√°biles | Provincia: de 4 a 10 dias h√°biles"})})]})]}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen de compra"}),e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:l.map((a,s)=>{var i,t;return e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl",children:e.jsx("img",{src:a.type==="custom_album"?`/storage/images/item_preset/${a.image}`:`/storage/images/item/${a.image}`,alt:a.name,className:"w-20 h-20 object-cover rounded"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:a.name}),a.type==="custom_album"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Tipo:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:"√Ålbum Personalizado"})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["P√°ginas:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:((i=a.album_data)==null?void 0:i.pages_count)||"N/A"})]})]}):e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:((t=a.brand)==null?void 0:t.name)||"Sin marca"})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:a.quantity||1})]})]})]})},a.id)})}),e.jsxs("div",{className:"space-y-4 mt-6",children:[(()=>{const a=l.reduce((s,i)=>{const t=i.price||0,x=i.final_price||i.price||0,f=i.quantity||1;return t>x?s+(t-x)*f:s},0);return a>0?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600 font-medium",children:"Ahorros totales"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-S/ ",p(a)]})]}):null})(),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(b)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(N)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Env√≠o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(E)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",p(m)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(J,{onClick:ye,children:(()=>{const a=_.find(s=>s.slug===r.paymentMethod);if(!a)return"Continuar";switch(a.type){case"gateway":return`Pagar con ${a.name}`;case"qr":case"manual":return`Confirmar ${a.name}`;default:return"Continuar"}})()}),e.jsx(ie,{onClick:g,children:"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los",e.jsx("a",{className:"customtext-primary font-bold",children:"T√©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra",e.jsx("a",{className:"customtext-primary font-bold",children:"Pol√≠tica de Privacidad"}),"."]})})]})]})]})}function ze({cart:l,code:d,delivery:o}){const u=(l.reduce((b,N)=>{const m=N.final_price;return b+m*N.quantity},0)/1.18).toFixed(2),v=(u*.18).toFixed(2),g=parseFloat(u)+parseFloat(v)+parseFloat(o);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-[20px] customtext-neutral-light",children:"Gracias por tu compra üéâ"}),e.jsx("p",{className:"customtext-neutral-dark text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"C√≥digo de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-lg font-semibold",children:`#${d}`})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:l.map((b,N)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex   gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl w-max",children:e.jsx("img",{src:`/storage/images/item/${b.image}`,alt:b.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:" text-start",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:b.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:b.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[b.quantity," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:b.sku})]})]})]})},N))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(u)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(v)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Env√≠o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",p(o)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",p(g)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx(J,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function ds({cart:l,setCart:d,user:o}){const[h,u]=c.useState(1),g=(l.reduce((j,P)=>{const F=P.final_price;return j+F*P.quantity},0)/1.18).toFixed(2),b=(g*.18).toFixed(2),[N,m]=c.useState(0),n=parseFloat(g)+parseFloat(b)+parseFloat(N),[S,E]=c.useState([]),[r,w]=c.useState([]),[C,A]=c.useState([]);return c.useEffect(()=>{console.log("üîÑ CheckoutSteps: Sincronizando carrito con localStorage...");const j=y.Local.get(`${R.APP_CORRELATIVE}_cart`)||[];console.log("üì¶ CheckoutSteps: Carrito desde localStorage:",j),j.length>0&&JSON.stringify(j)!==JSON.stringify(l)&&(console.log("‚úÖ CheckoutSteps: Actualizando carrito desde localStorage"),d(j))},[]),c.useEffect(()=>{const j=P=>{console.log("üì¢ CheckoutSteps: Carrito actualizado:",P.detail);const F=y.Local.get(`${R.APP_CORRELATIVE}_cart`)||[];console.log("üîÑ CheckoutSteps: Cargando carrito actualizado:",F),d(F)};return window.addEventListener("cartUpdated",j),()=>{window.removeEventListener("cartUpdated",j)}},[d]),c.useEffect(()=>{const j=document.createElement("script");return j.src="https://checkout.culqi.com/js/v4",j.async=!0,j.onload=()=>{console.log("‚úÖ Culqi cargado correctamente."),window.culqi=function(){window.Culqi.token?console.log("‚úÖ Token recibido:",window.Culqi.token.id):window.Culqi.order?console.log("‚úÖ Orden recibida:",window.Culqi.order):console.error("‚ùå Error en Culqi:",window.Culqi.error)}},document.body.appendChild(j),()=>{document.body.removeChild(j)}},[]),e.jsx("div",{className:"min-h-screen  py-12 px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white   p-8 rounded-xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[e.jsx("div",{className:`text-sm ${h===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"1. Carrito de compra"}),e.jsx("div",{className:`text-sm ${h===2?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"2. Detalles de env√≠o"}),e.jsx("div",{className:`text-sm ${h===3?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"3. Orden confirmada"})]}),e.jsx("div",{className:"mt-4 h-1 max-w-3xl mx-auto bg-gray-200",children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:`${(h-1)/2*100}%`}})})]}),h===1&&e.jsx(_e,{cart:l,setCart:d,onContinue:()=>u(2),subTotal:g,envio:N,igv:b,totalFinal:n}),h===2&&e.jsx(Te,{setCode:w,setDelivery:A,cart:l,setSale:E,setCart:d,onContinue:()=>u(3),noContinue:()=>u(1),subTotal:g,envio:N,setEnvio:m,igv:b,totalFinal:n,user:o}),h===3&&e.jsx(ze,{code:r,delivery:C,cart:S,subTotal:g,envio:N,igv:b,totalFinal:n})]})})}export{ds as default};

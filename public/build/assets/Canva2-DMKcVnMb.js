var O=Object.defineProperty;var B=(a,r,s)=>r in a?O(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s;var w=(a,r,s)=>B(a,typeof r!="symbol"?r+"":r,s);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as x}from"./index-BOnQTV8N.js";import{I as G}from"./ItemPresetsRest-BDS9KUxS.js";import{m as j}from"./main-Bp3JhiuO.js";import{m as t}from"./proxy-DTU49k-A.js";import{C as X}from"./chevron-left-JcR9Fe4w.js";import{S as I,I as J}from"./sparkles-CvIuWYkt.js";import{U as V}from"./upload-GO9GDST_.js";import{C}from"./chevron-down-uIVDLcM-.js";import{A as T}from"./arrow-right-MB8dWH_Y.js";import{A as W}from"./index-BNMCJu8J.js";import{c as F}from"./createLucideIcon-DfjclApS.js";import{P as K}from"./palette-BTxIxfA-.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./ModalImportItem-08p2KSos.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=F("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=F("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),b=class b{};w(b,"checkAuth",async()=>{var r;try{const{status:s,result:o}=await j.Fetch("./api/auth/check",{method:"GET"});return{authenticated:s&&o.status===200,user:((r=o==null?void 0:o.data)==null?void 0:r.user)||null,message:(o==null?void 0:o.message)||null}}catch(s){return console.error("Error checking authentication:",s),{authenticated:!1,user:null,message:"Error al verificar autenticaci√≥n"}}}),w(b,"saveAlbum",async r=>{var s;try{console.log("Guardando √°lbum:",r);const o=new FormData;Object.keys(r).forEach(d=>{r[d]!==null&&r[d]!==void 0&&(d==="custom_options"&&typeof r[d]=="object"?o.append(d,JSON.stringify(r[d])):o.append(d,r[d]))}),r.selected_pages!==void 0&&o.append("pages",r.selected_pages),r.selected_cover_type!==void 0&&o.append("cover_type",r.selected_cover_type),r.selected_finish!==void 0&&o.append("finish_type",r.selected_finish),console.log("FormData preparada");const u=await fetch("./api/albums",{method:"POST",body:o,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},credentials:"include"});if(!u.ok){const d=await u.text();console.error("Respuesta RAW del backend:",d);let p;try{p=JSON.parse(d)}catch{p={message:d}}throw new Error((p==null?void 0:p.message)||"Error al guardar el √°lbum")}const g=await u.json();if(console.log("Respuesta del servidor:",g),!u.ok||g.status!==201)throw new Error((g==null?void 0:g.message)||"Error al guardar el √°lbum");return j.Notify.add({icon:"/assets/img/icon.svg",title:"√Ålbum guardado",body:"Tu √°lbum se ha guardado exitosamente",type:"success"}),g}catch(o){throw console.error("Error en saveAlbum:",o),j.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:o.message,type:"danger"}),o}}),w(b,"updateAlbum",async(r,s)=>{var o;try{console.log("Actualizando √°lbum:",r,s);const u=new FormData;Object.keys(s).forEach(p=>{s[p]!==null&&s[p]!==void 0&&(p==="custom_options"&&typeof s[p]=="object"||p==="album_pages_data"&&typeof s[p]=="object"?u.append(p,JSON.stringify(s[p])):u.append(p,s[p]))}),s.selected_pages!==void 0&&u.append("pages",s.selected_pages),s.selected_cover_type!==void 0&&u.append("cover_type",s.selected_cover_type),s.selected_finish!==void 0&&u.append("finish_type",s.selected_finish),console.log("FormData preparada para actualizaci√≥n");const g=await fetch(`./api/albums/${r}`,{method:"PUT",body:u,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},credentials:"include"});if(!g.ok){const p=await g.text();console.error("Respuesta RAW del backend:",p);let l;try{l=JSON.parse(p)}catch{l={message:p}}throw new Error((l==null?void 0:l.message)||"Error al actualizar el √°lbum")}const d=await g.json();if(console.log("Respuesta del servidor (actualizaci√≥n):",d),!g.ok||d.status!==200)throw new Error((d==null?void 0:d.message)||"Error al actualizar el √°lbum");return d}catch(u){throw console.error("Error en updateAlbum:",u),u}}),w(b,"autoSaveAlbum",async(r,s)=>{try{console.log("Auto-guardando √°lbum:",r);const o=await b.updateAlbum(r,s);return console.log("Auto-guardado exitoso"),o}catch(o){throw console.error("Error en auto-guardado:",o),o}}),w(b,"getUserAlbums",async()=>{try{const{status:r,result:s}=await j.Fetch("./api/albums",{method:"GET"});if(!r||s.status!==200)throw new Error((s==null?void 0:s.message)||"Error al obtener √°lbumes");return s.data}catch(r){return j.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),[]}}),w(b,"getAlbum",async r=>{try{const{status:s,result:o}=await j.Fetch(`./api/albums/${r}`,{method:"GET"});if(!s||o.status!==200)throw new Error((o==null?void 0:o.message)||"Error al obtener el √°lbum");return o.data}catch(s){throw j.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),s}});let P=b;const f={container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},item:{hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:120,damping:12,mass:.5}}},button:{hover:{x:-5,backgroundColor:"rgba(243, 244, 246, 0.8)",transition:{type:"spring",stiffness:400}},tap:{scale:.96,transition:{type:"spring",stiffness:400}}},formItem:{hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}},hover:{y:-2,transition:{type:"spring",stiffness:400,damping:10}}},image:{hidden:{opacity:0,scale:.95,rotate:-2},visible:{opacity:1,scale:1,rotate:0,transition:{type:"spring",stiffness:80,damping:15,delay:.3}},hover:{scale:1.02,transition:{type:"spring",stiffness:300}}},featureIcon:{hidden:{scale:0,opacity:0},visible:a=>({scale:1,opacity:1,transition:{delay:.5+a*.1,type:"spring",stiffness:300}})}},Y=[{icon:e.jsx(Z,{size:20}),text:"50 p√°ginas en blanco"},{icon:e.jsx(K,{size:20}),text:"Personalizable"},{icon:e.jsx(Q,{size:20}),text:"Tapa dura premium"}];function be(){const[a,r]=x.useState(null),[s,o]=x.useState(!0),[u,g]=x.useState(null),[d,p]=x.useState(null),[l,N]=x.useState({titulo:"",paginas:"",tapa:"",acabado:""}),[_,k]=x.useState(!1),[D,z]=x.useState(null),[E,L]=x.useState(!1),[A,S]=x.useState(!1),H=new G;x.useEffect(()=>{(async()=>{try{const i=new URLSearchParams(window.location.search),c=i.get("preset"),h=i.get("item");if(console.log("URL params:",{presetId:c,itemId:h}),c){console.log("Cargando preset:",c),o(!0);const v=await H.getPresetById(c);if(console.log("Datos del preset recibidos:",v),v.success){const m=v.data;console.log("Preset data:",m),r(m),N(y=>({...y,titulo:m.name||"Momentos que no quiero olvidar",paginas:m.default_pages||m.pages_options&&m.pages_options[0]||"",tapa:m.default_cover||m.cover_options&&m.cover_options[0]||"",acabado:m.default_finish||m.finish_options&&m.finish_options[0]||""})),m.image&&p(m.image)}else console.error("Error al cargar preset:",v.message),r({id:c,name:"Preset no encontrado",description:"No se pudo cargar la informaci√≥n del preset",image:null});o(!1)}else console.log("No hay preset ID en URL, usando datos por defecto"),r({id:null,name:"Preset por defecto",description:"Dise√±o personalizable para tu regalo especial",image:null,item_id:h||null}),o(!1)}catch(i){console.error("Error al cargar preset:",i),r({id:null,name:"Error al cargar",description:"Hubo un problema al cargar el preset",image:null}),o(!1)}})()},[]),x.useEffect(()=>{(async()=>{try{const i=await P.checkAuth();k(i.authenticated),z(i.user)}catch(i){console.error("Error al verificar autenticaci√≥n:",i),k(!1),z(null)}})()},[]);const M=n=>{const i=n.target.files[0];if(i){g(i);const c=new FileReader;c.onload=h=>{p(h.target.result)},c.readAsDataURL(i)}},U=async()=>{var n;if(!_){S(!0);return}if(!l.titulo.trim()){alert("Por favor, ingresa un t√≠tulo para tu √°lbum");return}if(!l.paginas){alert("Por favor, selecciona la cantidad de p√°ginas");return}if(!l.tapa){alert("Por favor, selecciona el tipo de tapa");return}if(!l.acabado){alert("Por favor, selecciona el tipo de acabado");return}try{L(!0);const i=new URLSearchParams(window.location.search);let c=i.get("item"),h=i.get("preset");if(console.log("Par√°metros URL:",{itemId:c,presetId:h}),console.log("Estado preset:",a),!c&&(a!=null&&a.item_id)&&(c=a.item_id.toString(),console.log("Usando item_id del preset:",c)),!h&&(a!=null&&a.id)&&(h=a.id.toString(),console.log("Usando preset.id:",h)),a!=null&&a.item_id&&(c=a.item_id.toString()),a!=null&&a.id&&(h=a.id.toString()),console.log("Corregido para backend:",{itemId:c,presetId:h}),!c||!h){const y=[];throw c||y.push("ID del item"),h||y.push("ID del preset"),console.error("Datos faltantes para guardar √°lbum:",{itemId:c,presetId:h,preset:a,urlParams:Object.fromEntries(i.entries())}),new Error(`Faltan datos requeridos: ${y.join(", ")}. 
                    Aseg√∫rate de acceder desde la p√°gina de selecci√≥n de productos.
                    
Informaci√≥n de debug:
- URL item: ${i.get("item")}
- URL preset: ${i.get("preset")}
- Estado preset.id: ${a==null?void 0:a.id}
- Estado preset.item_id: ${a==null?void 0:a.item_id}`)}console.log("Guardando √°lbum con:",{itemId:c,presetId:h,preset:a});const v={item_id:c,item_preset_id:h,title:l.titulo,description:`√Ålbum personalizado con ${l.paginas} p√°ginas, tapa ${l.tapa}, acabado ${l.acabado}`,selected_pages:parseInt(l.paginas),selected_cover_type:l.tapa,selected_finish:l.acabado,cover_image:u,custom_options:{selected_options:{pages:l.paginas,cover:l.tapa,finish:l.acabado},preset_data:a}};console.log("Enviando datos del √°lbum:",v);const m=await P.saveAlbum(v);if(m&&m.data){const y=((n=m.data.album)==null?void 0:n.id)||m.data.id;console.log("√Ålbum guardado exitosamente:",m.data);const q=new URLSearchParams({album:y,item:c,preset:h,pages:l.paginas,cover:l.tapa,finish:l.acabado});setTimeout(()=>{window.location.href=`/editor?${q.toString()}`},1e3)}}catch(i){console.error("Error al guardar √°lbum:",i);let c="Error al guardar el √°lbum";i.message.includes("Faltan datos requeridos")?c=i.message:i.message.includes("401")?(c="Tu sesi√≥n ha expirado. Por favor, inicia sesi√≥n nuevamente.",k(!1),S(!0)):i.message.includes("500")?c="Error interno del servidor. Por favor, intenta nuevamente.":(i.message.includes("network")||i.message.includes("fetch"))&&(c="Error de conexi√≥n. Verifica tu conexi√≥n a internet e intenta nuevamente."),alert(c)}finally{L(!1)}},$=()=>{const n=encodeURIComponent(window.location.href);window.location.href=`/login?redirect=${n}`},R=()=>{S(!1)};return e.jsxs(t.div,{className:"container mx-auto px-4 py-8 max-w-7xl font-paragraph bg-gradient-to-b from-white to-purple-50 min-h-screen",initial:"hidden",animate:"visible",variants:f.container,children:[(()=>{const n=new URLSearchParams(window.location.search),i=n.get("item"),c=n.get("preset");return!i||!c?e.jsx(t.div,{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Advertencia:"})," No se detectaron par√°metros v√°lidos en la URL. Para una experiencia completa, accede desde la p√°gina de selecci√≥n de productos.",e.jsx("br",{}),e.jsxs("span",{className:"text-xs text-yellow-600",children:["Par√°metros esperados: item=",i?"‚úì":"‚úó",", preset=",c?"‚úì":"‚úó"]})]})})]})}):null})(),e.jsx(t.div,{className:"fixed inset-0 overflow-hidden pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[...Array(10)].map((n,i)=>e.jsx(t.div,{className:"absolute rounded-full bg-purple-100 opacity-20",style:{width:Math.random()*200+100,height:Math.random()*200+100,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,Math.random()*100-50],x:[0,Math.random()*100-50],opacity:[.2,.3,.2]},transition:{duration:Math.random()*10+10,repeat:1/0,repeatType:"reverse"}},i))}),e.jsxs(t.button,{className:"flex items-center customtext-primary mb-6 p-3 rounded-xl bg-white shadow-sm hover:shadow-md transition-all z-10 relative",variants:f.button,whileHover:"hover",whileTap:"tap",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,type:"spring"},children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2 font-medium",children:"Regresar"}),e.jsx(t.span,{className:"absolute -z-10 inset-0 bg-gradient-to-r from-purple-50 to-white rounded-xl opacity-0",whileHover:{opacity:1}})]}),e.jsxs("div",{className:"md:flex md:gap-10 md:items-start relative z-10",children:[e.jsxs("div",{className:"md:w-1/2",children:[e.jsxs(t.div,{className:"mb-8",variants:f.item,children:[s?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(t.h1,{className:"text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-500 bg-clip-text text-transparent",initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,type:"spring",stiffness:100},children:[(a==null?void 0:a.name)||"Libro Personalizado"," ",e.jsx("br",{className:"hidden lg:block"}),"¬´Buenos Deseos de Matrimonio¬ª"]}),e.jsx(t.p,{className:"text-base md:text-lg text-gray-700 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:(a==null?void 0:a.description)||"El libro es de 22√ó22 cm, de tapa dura que tiene un dise√±o especial de boda personalizable para agregar una foto o imagen, nombres y fecha del evento. En su interior viene con 50 p√°ginas de papel couch√© de 170 grs. en blanco para que los invitados puedan escribir sus mensajes."})]}),e.jsx(t.div,{className:"mt-6 flex flex-wrap gap-3",children:Y.map((n,i)=>e.jsxs(t.div,{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm",custom:i,variants:f.featureIcon,whileHover:{y:-2},children:[e.jsx(t.span,{whileHover:{scale:1.1},children:n.icon}),e.jsx("span",{className:"text-sm font-medium",children:n.text})]},i))})]}),e.jsx(t.form,{className:"space-y-6 bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white",variants:f.container,initial:"hidden",animate:"visible",children:e.jsxs(t.div,{className:"space-y-2",variants:f.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"T√≠tulo del Libro"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.input,{type:"text",value:l.titulo,onChange:n=>N({...l,titulo:n.target.value}),className:"w-full p-4 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100",placeholder:"Escribe el t√≠tulo de tu libro...",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"}}),e.jsx(t.span,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-400",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},children:e.jsx(I,{size:18})})]})]})})]}),e.jsxs(t.div,{className:"mt-8 md:mt-0 md:w-1/2 sticky top-6 space-y-6",variants:f.image,whileHover:"hover",children:[e.jsxs(t.div,{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(t.span,{animate:{rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:"‚öôÔ∏è"}),"Configuraci√≥n"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(t.div,{className:"space-y-2",variants:f.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Imagen de Portada"}),d&&e.jsxs(t.div,{className:"mb-3 relative group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.02},children:[e.jsx("img",{src:d,alt:"Vista previa de portada",className:"w-full max-w-[150px] h-[150px] object-cover rounded-lg border-2 border-purple-100 shadow-sm mx-auto"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-2",children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Portada actual"})})]}),e.jsxs(t.div,{className:"relative border-2 border-dashed border-purple-300 rounded-xl p-4 hover:border-purple-400 transition-colors cursor-pointer bg-purple-50/30",whileHover:{backgroundColor:"rgba(245, 243, 255, 0.5)"},whileTap:{scale:.98},children:[e.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsxs("div",{className:"text-center",children:[e.jsx(t.div,{className:"mx-auto w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mb-2",whileHover:{scale:1.1},children:e.jsx(V,{className:"w-4 h-4 text-purple-600"})}),e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("span",{className:"font-medium text-purple-600",children:"Subir imagen"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, JPEG"}),u&&e.jsxs(t.p,{className:"text-xs text-green-600 mt-2 font-medium",initial:{opacity:0},animate:{opacity:1},children:["‚úì ",u.name]})]})]})]}),e.jsxs(t.div,{className:"space-y-2",variants:f.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad de P√°ginas"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.select,{value:l.paginas,onChange:n=>N({...l,paginas:n.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.pages_options?a.pages_options.map((n,i)=>e.jsx("option",{value:n,children:n},i)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"24 p√°ginas",children:"24 p√°ginas"}),e.jsx("option",{value:"50 p√°ginas",children:"50 p√°ginas"}),e.jsx("option",{value:"100 p√°ginas",children:"100 p√°ginas"})]})}),e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsxs(t.div,{className:"space-y-2",variants:f.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Tapa"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.select,{value:l.tapa,onChange:n=>N({...l,tapa:n.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.cover_options?a.cover_options.map((n,i)=>e.jsx("option",{value:n,children:n},i)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Tapa Dura Personalizable",children:"Tapa Dura Personalizable"}),e.jsx("option",{value:"Tapa Blanda",children:"Tapa Blanda"})]})}),e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsxs(t.div,{className:"space-y-2",variants:f.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Acabado"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.select,{value:l.acabado,onChange:n=>N({...l,acabado:n.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.finish_options?a.finish_options.map((n,i)=>e.jsx("option",{value:n,children:n},i)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Limado",children:"Limado"}),e.jsx("option",{value:"Brillante",children:"Brillante"}),e.jsx("option",{value:"Mate",children:"Mate"})]})}),e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsx(t.div,{className:"pt-4",children:e.jsxs(t.button,{onClick:U,disabled:E,className:`block text-center w-full py-3 px-4 rounded-xl font-bold text-sm shadow-lg hover:shadow-xl transition-all relative overflow-hidden group ${E?"bg-gray-400 cursor-not-allowed":_?"bg-gradient-to-r from-purple-600 to-pink-500 text-white":"bg-gradient-to-r from-orange-500 to-red-500 text-white"}`,whileHover:E?{}:{scale:1.02,boxShadow:"0 10px 25px -5px rgba(139, 92, 246, 0.4)"},whileTap:E?{}:{scale:.98},children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsx(t.div,{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Guardando..."]}):_?e.jsxs(e.Fragment,{children:[e.jsx(I,{size:16}),"Crear proyecto",e.jsx(T,{size:16,className:"group-hover:translate-x-1 transition-transform"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üîê"}),"Inicia sesi√≥n para crear",e.jsx(T,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})}),!E&&e.jsx(t.span,{className:`absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${_?"bg-gradient-to-r from-pink-600 to-purple-700":"bg-gradient-to-r from-red-600 to-orange-700"}`})]})})]})]}),e.jsxs(t.div,{className:"bg-white rounded-2xl p-6 flex flex-col items-center justify-center shadow-2xl border-2 border-white relative overflow-hidden",initial:{rotate:-2,scale:.95},animate:{rotate:0,scale:1},whileHover:{scale:1.03,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},children:[s?e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"w-full h-[300px] bg-gray-200 rounded-lg"})}):e.jsxs(e.Fragment,{children:[e.jsx(t.img,{src:d||(a==null?void 0:a.image)||"/assets/img/backgrounds/resources/default-image.png",alt:"Vista previa del libro personalizado",className:"max-w-full h-auto max-h-[400px] rounded-lg shadow-md transform transition-transform group-hover:scale-105",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}}),!d&&e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",initial:{opacity:0},whileHover:{opacity:1},children:e.jsxs("div",{className:"bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-sm flex items-center gap-2",children:[e.jsx(J,{size:16,className:"text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Sube tu portada"})]})}),d&&e.jsx(t.div,{className:"absolute top-4 right-4 bg-green-500 text-white px-2 py-1 rounded-full shadow-sm flex items-center gap-1",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,type:"spring"},children:e.jsx("span",{className:"text-xs font-medium",children:"‚úì Personalizada"})})]}),e.jsxs(t.div,{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full shadow-sm flex items-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:[e.jsx(I,{size:14,className:"text-purple-500"}),e.jsx("span",{className:"text-xs font-medium",children:(a==null?void 0:a.name)||"Edici√≥n Especial"})]})]})]})]}),e.jsx(W,{children:A&&e.jsx(t.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:R,children:e.jsx(t.div,{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:n=>n.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx(t.div,{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:e.jsx("span",{className:"text-2xl",children:"üîê"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"¬°Inicia sesi√≥n para continuar!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Para guardar tu √°lbum personalizado necesitas tener una cuenta activa."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t.button,{onClick:$,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Iniciar sesi√≥n"}),e.jsx(t.button,{onClick:R,className:"w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Continuar sin guardar"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["¬øNo tienes cuenta?",e.jsx("a",{href:"/crear-cuenta",className:"text-purple-600 hover:underline ml-1",children:"Reg√≠strate gratis"})]})]})})})})]})}export{be as default};

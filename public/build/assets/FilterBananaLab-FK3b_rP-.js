import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as c,R as B}from"./index-BH53Isel.js";import{I as ue}from"./ItemsRest-CkSgkplb.js";import{N as he}from"./NoResult-C9qZVva5.js";import{S as pe}from"./SelectForm-BieIjeOd.js";import{C as xe}from"./CardProductBananaLab-DTeMXdoV.js";import{m as i}from"./proxy-BTYtmp9V.js";import{C as y}from"./chevron-down-DS-mdh9v.js";import{A as j}from"./index-CFtDjG4d.js";import{S as v}from"./search-TwiiKGP5.js";import{C as M}from"./chevron-left-B2s3ZsB7.js";import{C as E}from"./chevron-right-Ckt5D2ka.js";import"./index-yBjzXJbu.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./ModalImportItem-edN7nyz1.js";import"./check-DQ7QoS0v.js";import"./createLucideIcon-Cy5Ya80P.js";import"./ProductCard-Bvp3XiVT.js";import"./HeaderSearch-Cq1uEEdU.js";import"./index-Bv81MoWS.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-wjCZuSxN.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./Number2Currency-e57Tgsuk.js";import"./minus-jyhodMPN.js";import"./plus-Bot15Khs.js";import"./index-CC1Omfac.js";import"./CartModalBananaLab-DCgEmL1_.js";/* empty css              */import"./trash-2-DK1wnsDn.js";import"./x-DBMwyD6F.js";import"./shopping-cart-CZEUxbmv.js";import"./arrow-right-DR00rP9v.js";import"./heart-ChuvJi-4.js";import"./circle-check-big-D6DM3vPb.js";const ge=new ue,fe=()=>e.jsx("div",{className:"group font-paragraph animate-pulse w-full transition-transform duration-300 hover:scale-105  sm:w-1/3 flex-shrink-0 font-paragraph customtext-primary cursor-pointer",children:e.jsx("div",{className:" px-4",children:e.jsx("div",{className:"bg-white rounded-3xl",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center  bg-secondary",children:e.jsx("svg",{class:"w-10 h-10 text-gray-200 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:e.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),sa=({items:F,data:be,filteredData:I,cart:T,setCart:Z,setFavorites:z,favorites:D,collections:N,campaigns:O})=>{const{brands:V}=I,[q,K]=c.useState([]),[C,U]=c.useState([]),[G,J]=c.useState([]),[m,Q]=c.useState({collection:!0,marca:!1,precio:!0,categoria:!0,subcategoria:!0,colores:!1}),[u,p]=c.useState({collection_id:[],category_id:[],subcategory_id:[],brand_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),[w,P]=c.useState([]),[W,X]=c.useState(null),[Y,_]=c.useState(!1),[n,ee]=c.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:21,from:0,to:0}),ae={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},o={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.3}}},te={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},se=a=>{const t=[];if(a.collection_id.length>0){const r=a.collection_id.map(s=>["collection_id","=",s]);t.push(["or",...r])}if(a.category_id.length>0){const r=a.category_id.map(s=>["category_id","=",s]);t.push(["or",...r])}if(a.subcategory_id.length>0){const r=a.subcategory_id.map(s=>["subcategory_id","=",s]);t.push(["or",...r])}if(a.brand_id.length>0){const r=a.brand_id.map(s=>["brand_id","=",s]);t.push(["or",...r])}return a.price&&t.push(["or",[["final_price",">=",a.price.min],"and",["final_price","<=",a.price.max]]]),a.name&&t.push(["name","contains",a.name]),t},k=async(a=1)=>{_(!0);try{const r={filter:se(u),sort:u.sort,skip:(a-1)*n.itemsPerPage,take:n.itemsPerPage,requireTotalCount:!0},s=await ge.paginate(r);P(s.data),ee({currentPage:a,totalPages:Math.ceil(s.totalCount/n.itemsPerPage),totalItems:s.totalCount,itemsPerPage:n.itemsPerPage,from:(a-1)*n.itemsPerPage+1,to:Math.min(a*n.itemsPerPage,s.totalCount)}),U(s==null?void 0:s.summary.categories),K(s==null?void 0:s.summary.subcategories),J(s==null?void 0:s.summary.priceRanges)}catch(t){console.error("Error fetching products:",t)}finally{_(!1)}};c.useEffect(()=>{k(n.currentPage)},[u]);const x=a=>{a>=1&&a<=n.totalPages&&k(a)},S=()=>{const a=[],t=n.totalPages,r=n.currentPage,s=2;for(let l=1;l<=t;l++)l===1||l===t||l>=r-s&&l<=r+s?a.push(l):(l===r-s-1||l===r+s+1)&&a.push("...");return a.filter((l,b,d)=>l!=="..."||d[b-1]!=="...")},$=[{value:"created_at:desc",label:"Más reciente"},{value:"created_at:asc",label:"Mas antiguo"},{value:"final_price:asc",label:"Precio: Menor a Mayor"},{value:"final_price:desc",label:"Precio: Mayor a Menor"},{value:"name:asc",label:"Nombre: A-Z"},{value:"name:desc",label:"Nombre: Z-A"}];c.useEffect(()=>{const a=new URLSearchParams(window.location.search),t=a.get("category"),r=a.get("collection"),s=a.get("search"),l=a.get("campaign"),b=a.get("sort");if(t){const d=C.find(h=>h.slug===t);d&&p(h=>({...h,category_id:[d.id]}))}if(r){const d=N.find(h=>h.slug===r);d&&p(h=>({...h,collection_id:[d.id]}))}if(l){const d=O.find(h=>h.slug===l);P(d.items)}s&&p(d=>({...d,name:s})),b==="novedades"&&(p(d=>({...d,sort_by:"created_at",order:"desc"})),X($[0]))},[F]);const g=(a,t)=>{p(r=>{if(a==="price")return{...r,price:r.price&&r.price.min===t.min&&r.price.max===t.max?null:t};const s=Array.isArray(r[a])?r[a]:[],l=s.includes(t)?s.filter(b=>b!==t):[...s,t];return{...r,[a]:l}})},f=a=>{Q(t=>({...t,[a]:!t[a]}))},[H,re]=c.useState(""),[R,ie]=c.useState(""),[L,ne]=c.useState(""),[A,le]=c.useState(""),oe=N.filter(a=>a.name.toLowerCase().includes(L.toLowerCase())),ce=C.filter(a=>a.name.toLowerCase().includes(H.toLowerCase())),de=q.filter(a=>a.name.toLowerCase().includes(R.toLowerCase())),me=V.filter(a=>a.name.toLowerCase().includes(A.toLowerCase()));return e.jsx(i.section,{initial:"hidden",animate:"visible",variants:ae,className:"py-6 customtext-neutral-dark font-paragraph",children:e.jsx("div",{className:"mx-auto px-primary",children:e.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-8",children:[e.jsxs(i.div,{className:"w-full sm:w-1/5  bg-white py-4 rounded-lg h-max shadow-sm",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[e.jsx("p",{className:"customtext-neutral-dark text-2xl font-bold pb-4 mb-4 border-b",children:"Escoge el regalo y personaliza"}),e.jsxs(i.div,{className:"mb-6",variants:o,children:[e.jsxs(i.button,{onClick:()=>f("collection"),className:"flex items-center justify-between w-full mb-4",whileHover:{x:3},children:[e.jsx("span",{className:"font-medium",children:"Colleciones"}),e.jsx(y,{className:`h-5 w-5 transform transition-transform ${m.collection?"":"-rotate-180"}`})]}),e.jsx(j,{children:m.collection&&e.jsxs(i.div,{className:"space-y-1",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto",transition:{staggerChildren:.1}}},children:[e.jsxs(i.div,{className:"relative",variants:o,children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",value:L,onChange:a=>ne(a.target.value)})]}),oe.map(a=>{var r;const t=(r=u.collection_id)==null?void 0:r.includes(a.id);return e.jsx(i.div,{className:`group py-2 rounded-md ${t?"bg-primary brightness-125":"bg-transparent"}`,variants:o,children:e.jsxs("label",{className:"flex items-center justify-between space-x-3 px-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"hidden",onChange:()=>g("collection_id",a.id),checked:t}),e.jsx("img",{src:`/storage/images/collection/${a.image}`,onError:s=>s.target.src="assets/img/noimage/no_imagen_circular.png",alt:a.name,className:"w-8 h-8 rounded-full object-cover order-1",loading:"lazy"}),e.jsx("span",{className:`${t?"text-white":"text-gray-700"}`,children:a.name})]})},a.id)})]})})]}),e.jsxs(i.div,{className:"mb-6",variants:o,children:[e.jsxs(i.button,{onClick:()=>f("categoria"),className:"flex items-center justify-between w-full mb-4",whileHover:{x:3},children:[e.jsx("span",{className:"font-medium",children:"Categorías"}),e.jsx(y,{className:`h-5 w-5 transform transition-transform ${m.categoria?"":"-rotate-180"}`})]}),e.jsx(j,{children:m.categoria&&e.jsxs(i.div,{className:"space-y-1",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto",transition:{staggerChildren:.1}}},children:[e.jsxs(i.div,{className:"relative",variants:o,children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",value:H,onChange:a=>re(a.target.value)})]}),ce.map(a=>{var r;const t=(r=u.category_id)==null?void 0:r.includes(a.id);return e.jsx(i.div,{className:`group py-2 rounded-md ${t?"bg-primary brightness-125":"bg-transparent"}`,variants:o,children:e.jsxs("label",{className:"flex items-center justify-between space-x-3 px-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"hidden",onChange:()=>g("category_id",a.id),checked:t}),e.jsx("img",{src:`/storage/images/category/${a.image}`,onError:s=>s.target.src="assets/img/noimage/no_imagen_circular.png",alt:a.name,className:"w-8 h-8 rounded-full object-cover order-1",loading:"lazy"}),e.jsx("span",{className:`${t?"text-white":"text-gray-700"}`,children:a.name})]})},a.id)})]})})]}),e.jsxs(i.div,{className:"mb-6",variants:o,children:[e.jsxs(i.button,{onClick:()=>f("subcategoria"),className:"flex items-center justify-between w-full mb-4",whileHover:{x:3},children:[e.jsx("span",{className:"font-medium",children:"Sub Categorías"}),e.jsx(y,{className:`h-5 w-5 transform transition-transform ${m.subcategoria?"":"-rotate-180"}`})]}),e.jsx(j,{children:m.subcategoria&&e.jsxs(i.div,{className:"space-y-1",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto",transition:{staggerChildren:.1}}},children:[e.jsxs(i.div,{className:"relative",variants:o,children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",value:R,onChange:a=>ie(a.target.value)})]}),de.map(a=>{var r;const t=(r=u.subcategory_id)==null?void 0:r.includes(a.id);return e.jsx(i.div,{className:`group py-2 rounded-md ${t?"bg-primary brightness-125":"bg-transparent"}`,variants:o,children:e.jsxs("label",{className:"flex items-center justify-between space-x-3 px-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"hidden",onChange:()=>g("subcategory_id",a.id),checked:t}),e.jsx("img",{src:`/storage/images/category/${a.image}`,onError:s=>s.target.src="assets/img/noimage/no_imagen_circular.png",alt:a.name,className:"w-8 h-8 rounded-full object-cover order-1",loading:"lazy"}),e.jsx("span",{className:`${t?"text-white":"text-gray-700"}`,children:a.name})]})},a.id)})]})})]}),e.jsxs(i.div,{className:"mb-6",variants:o,children:[e.jsxs(i.button,{onClick:()=>f("precio"),className:"flex items-center justify-between w-full mb-4",whileHover:{x:3},children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(y,{className:`h-5 w-5 transform transition-transform ${m.precio?"":"-rotate-180"}`})]}),e.jsx(j,{children:m.precio&&e.jsx(i.div,{className:"space-y-3",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto",transition:{staggerChildren:.1}}},children:G.map(a=>{const t=u.price&&u.price.min===a.min&&u.price.max===a.max;return e.jsxs(i.label,{className:"flex items-center space-x-3 cursor-pointer ",variants:o,whileHover:{x:3},children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary checked:accent-primary ",onChange:()=>g("price",a),checked:t}),e.jsx("span",{className:`${t?"font-medium ":"text-gray-600"}`,children:`S/ ${a.min} - S/ ${a.max}`})]},`${a.min}-${a.max}`)})})})]}),m.marca&&e.jsxs(i.div,{className:"mb-6",variants:o,children:[e.jsxs(i.button,{onClick:()=>f("marca"),className:"flex items-center justify-between w-full mb-4",whileHover:{x:3},children:[e.jsx("span",{className:"font-medium",children:"Marcas"}),e.jsx(y,{className:`h-5 w-5 transform transition-transform ${m.marca?"":"-rotate-180"}`})]}),e.jsx(j,{children:m.marca&&e.jsxs(i.div,{className:"space-y-1",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto",transition:{staggerChildren:.1}}},children:[e.jsxs(i.div,{className:"relative",variants:o,children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",value:A,onChange:a=>le(a.target.value)})]}),me.map(a=>{var r;const t=(r=u.brand_id)==null?void 0:r.includes(a.id);return e.jsx(i.div,{className:`group py-2 rounded-md ${t?"bg-primary/10":"bg-transparent"}`,variants:o,children:e.jsxs("label",{className:"flex items-center space-x-3 px-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",onChange:()=>g("brand_id",a.id),checked:t}),e.jsx("span",{className:`${t?"font-medium text-primary":"text-gray-600"}`,children:a.name})]})},a.id)})]})})]})]}),e.jsxs(i.div,{className:"w-full sm:w-4/5 py-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs(i.div,{className:"flex flex-col lg:flex-row lg:justify-between items-center mb-4 w-full",variants:o,children:[e.jsxs("div",{className:"flex gap-4 items-center mb-4 lg:mb-0",children:[e.jsx("label",{className:"font-semibold text-sm w-[150px]",children:"Ordenar por"}),e.jsx(pe,{defaultOption:W,options:$,placeholder:"Recomendados",onChange:a=>{const[t,r]=a.split(":"),s=[{selector:t,desc:r==="desc"}];p(l=>({...l,sort:s}))},labelKey:"label",valueKey:"value",className:"border-primary rounded-full customtext-primary "})]}),e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{className:"flex items-center gap-x-2 min-w-max",children:[e.jsx(i.button,{className:`p-4 inline-flex items-center ${n.currentPage===1?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(n.currentPage-1),disabled:n.currentPage===1,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(M,{})}),S().map((a,t)=>e.jsx(B.Fragment,{children:a==="..."?e.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):e.jsx(i.button,{className:`w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 
                                                                ${a===n.currentPage?"bg-primary text-white":"bg-transparent hover:text-white hover:bg-primary"}`,onClick:()=>x(a),whileHover:{scale:1.05},whileTap:{scale:.95},children:a})},t)),e.jsx(i.button,{className:`p-4 inline-flex items-center ${n.currentPage===n.totalPages?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(n.currentPage+1),disabled:n.currentPage===n.totalPages,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(E,{})})]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold",children:[n.from," - ",n.to," ","de ",n.totalItems," ","Resultados"]})})]})})]}),Y?e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(a=>e.jsx(fe,{},a))}):e.jsx(i.div,{className:"flex items-center flex-wrap gap-y-2 lg:gap-y-3 transition-all duration-300 ease-in-out",variants:te,initial:"hidden",animate:"visible",children:Array.isArray(w)&&w.length>0?w.map((a,t)=>e.jsx(i.div,{custom:t,variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,delay:t*.03}}},whileHover:{y:-5},className:"w-full md:w-1/2 lg:w-1/3 px-2",children:e.jsx(xe,{product:a,cart:T,setCart:Z,favorites:D,setFavorites:z})},a.id)):e.jsx(he,{})}),e.jsxs(i.div,{className:"flex justify-between items-center mb-4 w-full mt-8",variants:o,children:[e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{className:"flex items-center gap-x-2 min-w-max",children:[e.jsx(i.button,{className:`p-4 inline-flex items-center ${n.currentPage===1?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(n.currentPage-1),disabled:n.currentPage===1,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(M,{})}),S().map((a,t)=>e.jsx(B.Fragment,{children:a==="..."?e.jsx("span",{className:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full",children:"..."}):e.jsx(i.button,{className:`w-10 h-10 p-2 inline-flex items-center justify-center rounded-full transition-all duration-300 
                                                        ${a===n.currentPage?"bg-primary text-white":"bg-transparent hover:text-white hover:bg-primary"}`,onClick:()=>x(a),whileHover:{scale:1.05},whileTap:{scale:.95},children:a})},t)),e.jsx(i.button,{className:`p-4 inline-flex items-center ${n.currentPage===n.totalPages?"opacity-50 cursor-not-allowed":""}`,onClick:()=>x(n.currentPage+1),disabled:n.currentPage===n.totalPages,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(E,{})})]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold",children:[n.from," - ",n.to," de"," ",n.totalItems," Resultados"]})})]})]})]})})})};export{sa as default};

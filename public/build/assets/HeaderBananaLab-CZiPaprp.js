import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as m}from"./index-BOnQTV8N.js";import"./HeaderSearch-DVtmJo0W.js";import"./main-Bp3JhiuO.js";import{S as N}from"./CartModalBananaLab-ECgslFbz.js";import{R as f}from"./index-BtQtP3Fl.js";/* empty css              */import{i as w}from"./tippy-react.esm-BktTnHXY.js";import{N as u}from"./Number2Currency-e57Tgsuk.js";import{m as a}from"./proxy-DTU49k-A.js";import{T as C}from"./trash-2-DU7LB6-f.js";import{A as y}from"./index-BNMCJu8J.js";import{X as S}from"./x-fof_H3Vv.js";import{S as k}from"./shopping-cart-DLRnxGTD.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./CartItemRow-DuXzM7Ih.js";import"./minus-Db6MFKEO.js";import"./createLucideIcon-DfjclApS.js";import"./plus-CTIomuuF.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./Global-BM4Id4Pw.js";import"./book-C1IPlXSj.js";import"./arrow-right-MB8dWH_Y.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./index-DE3dzT5W.js";const T=({setFavorites:x,...t})=>{var i;const c=o=>{x(d=>d.filter(l=>l.id!==o))};return e.jsxs(a.tr,{className:"border-b border-gray-100 font-font-general hover:bg-gray-50 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{duration:.3},children:[e.jsx("td",{className:"p-4 w-28",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/images/item/${t.image}`,className:"block bg-white rounded-lg p-0 aspect-square w-20 h-20 object-cover object-center shadow-sm",alt:t.name,onError:o=>o.target.src="/api/cover/thumbnail/null"}),t.discount>0&&e.jsxs(a.div,{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:["-",Math.round(t.discount/t.price*100),"%"]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex flex-col h-full justify-between",children:e.jsxs("div",{children:[(t==null?void 0:t.category)&&e.jsx("span",{className:"block text-xs text-gray-500 mb-1",children:((i=t==null?void 0:t.category)==null?void 0:i.name)??"Sin categoría"}),e.jsx("h3",{className:"font-semibold text-gray-800 line-clamp-2",children:t.name})]})})}),e.jsx("td",{className:"p-4 text-right w-28",children:e.jsxs("div",{className:"flex flex-col items-end h-full justify-between",children:[e.jsxs("div",{children:[(t==null?void 0:t.discount)>0&&e.jsxs("span",{className:"block text-xs text-gray-400 line-through mb-1",children:["S/. ",u(t==null?void 0:t.price)]}),e.jsxs("p",{className:"font-bold customtext-neutral-dark text-base",children:["S/. ",u(t==null?void 0:t.final_price)]})]}),e.jsx(w,{content:"Eliminar",placement:"left",animation:"scale",children:e.jsx(a.button,{type:"button",onClick:()=>c(t==null?void 0:t.id),className:"mt-3 p-2 rounded-full hover:bg-red-50 text-gray-400 hover:text-red-500 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(C,{size:18})})})]})})]})};f.setAppElement("#app");const te=({data:x,favorites:t,setFavorites:c,modalOpen:i,setModalOpen:o})=>{const[d,l]=m.useState(!1),[b,p]=m.useState(!1);m.useEffect(()=>{i?(document.body.classList.add("overflow-hidden"),document.documentElement.classList.add("overflow-hidden")):(document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden"))},[i]);const n=()=>{l(!0),setTimeout(()=>{o(!1),l(!1)},300)};t.reduce((s,r)=>s+r.final_price*r.quantity,0);const h=t.reduce((s,r)=>s+r.quantity,0),g=()=>{p(!0),setTimeout(()=>p(!1),1e3)},j={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1,transition:{type:"spring",damping:25,stiffness:300}},exit:{x:"100%",opacity:0,transition:{ease:"easeInOut",duration:.3}}},v={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.05,duration:.4}}),exit:{opacity:0,x:50}};return e.jsx(y,{children:i&&e.jsx(f,{isOpen:i,onRequestClose:n,closeTimeoutMS:300,contentLabel:"Favoritos",className:"absolute right-0 top-0 bottom-0 bg-white p-6 rounded-l-2xl shadow-2xl w-full max-w-md outline-none h-screen flex flex-col",overlayClassName:"fixed inset-0 z-50",children:e.jsxs(a.div,{className:"flex-1 flex flex-col",initial:"hidden",animate:d?"exit":"visible",exit:"exit",variants:j,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100",children:[e.jsxs(a.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx(N,{className:"text-primary",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tus Favoritos"}),e.jsxs(a.span,{className:"bg-primary text-white text-sm font-medium px-2 py-1 rounded-full",animate:b?{scale:[1,1.1,1],rotate:[0,5,-5,0]}:{},transition:{duration:.6},children:[h," ",h===1?"ítem":"ítems"]})]}),e.jsx(a.button,{onClick:n,whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Cerrar carrito",children:e.jsx(S,{size:24,className:"text-gray-500"})})]}),t.length>0?e.jsx(a.div,{className:"flex-1 overflow-y-auto pr-2 scroll__carrito",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:e.jsx(y,{children:t.map((s,r)=>e.jsx(a.table,{custom:r,initial:"hidden",animate:"visible",exit:"exit",variants:v,layout:!0,className:"mb-4",children:e.jsx(T,{...s,setFavorites:c,triggerShake:g})},`${s.id}-${r}`))})}):e.jsxs(a.div,{className:"flex-1 flex flex-col items-center justify-center gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsx(k,{size:48,className:"text-gray-300"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Tu carrito está vacío"}),e.jsx(a.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-2 bg-primary text-white rounded-lg font-medium",children:"Seguir comprando"})]}),t.length>0&&e.jsx(a.div,{className:"pt-4 border-t border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(a.button,{onClick:n,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full mt-3 bg-white text-primary border border-primary py-3 px-6 rounded-xl font-medium flex items-center justify-center gap-2 transition-colors",children:"Agregar más"})})]})})})};export{te as F};

import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{r as x,R as oe}from"./index-BH53Isel.js";import{a as Tn,b as ao,_ as qt,e as $}from"./objectWithoutPropertiesLoose-G_JZ8CQC.js";import{h as jn}from"./hoist-non-react-statics.cjs-lJxeXavk.js";import{r as io,R as oo}from"./index-rimy3MAc.js";import{c as q}from"./createLucideIcon-Cy5Ya80P.js";import{S as so,I as Ht,P as Oa}from"./sparkles-BeGvo0qS.js";import{B as lo,h as co}from"./Editor-2K39rwIv.js";import{e as uo}from"./index-BSWw-p5k.js";import{T as Ut}from"./trash-2-DK1wnsDn.js";import{U as po}from"./upload-qgEr5bIl.js";import{C as pr}from"./chevron-up-D78jyEhP.js";import{C as zt}from"./chevron-down-DS-mdh9v.js";import{X as fo}from"./x-DBMwyD6F.js";import{M as Rn}from"./minus-jyhodMPN.js";import{P as Mn}from"./plus-Bot15Khs.js";import{G as go}from"./Global-BM4Id4Pw.js";import{C as ho}from"./chevron-left-B2s3ZsB7.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./index-Bv81MoWS.js";import"./index-Chjiymov.js";import"./index.es-p8wkj5I3.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=q("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=q("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=q("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=q("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=q("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=q("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=q("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=q("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=q("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=q("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=q("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=q("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=q("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=q("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=q("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=q("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=q("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=q("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=q("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=q("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=q("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=q("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=q("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=q("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=q("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=q("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=q("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=q("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=q("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=q("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=q("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=q("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=q("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=q("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=q("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=q("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=q("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=q("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function qe({children:e,onClick:t,className:r="",variant:n="default",size:a="default",disabled:i=!1,icon:o=null}){const s="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},f={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return l.jsxs("button",{className:`${s} ${c[n]} ${f[a]} ${r} gap-2`,onClick:t,disabled:i,children:[o&&l.jsx("span",{className:"w-4 h-4",children:o}),e]})}const Ue=({value:e=[50],min:t=0,max:r=100,step:n=1,onValueChange:a,label:i,unit:o="%"})=>{const[s,c]=x.useState(e[0]),f=g=>{const u=Number.parseInt(g.target.value);c(u),a&&a([u])};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i}),l.jsxs("span",{className:"text-sm text-gray-500",children:[s,o]})]}),l.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:l.jsx("input",{type:"range",min:t,max:r,step:n,value:s,onChange:f,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},Qo=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:105,contrast:115,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],Zo=({onSelectPreset:e,selectedImage:t})=>{const r=n=>({filter:`
            brightness(${n.brightness}%)
            contrast(${n.contrast}%)
            saturate(${n.saturation}%)
            sepia(${n.tint}%)
            hue-rotate(${n.hue}deg)
            blur(${n.blur}px)
        `});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:Qo.map(n=>l.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>e(n.filters),children:[l.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:t?l.jsx("img",{src:t.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r(n.filters)}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:l.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:l.jsx(so,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},es=({filters:e={},onFilterChange:t,selectedElement:r})=>{const n=(a,i)=>{const o={...e,[a]:i};t(o)};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),l.jsx("div",{className:"space-y-3",children:l.jsx(Ue,{label:"Opacidad",value:e.opacity||100,onChange:a=>n("opacity",a),min:0,max:100,step:1,unit:"%"})}),(r==null?void 0:r.type)==="image"&&l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Modo de mezcla"}),l.jsxs("select",{value:e.blendMode||"normal",onChange:a=>n("blendMode",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"normal",children:"Normal"}),l.jsx("option",{value:"multiply",children:"Multiplicar"}),l.jsx("option",{value:"screen",children:"Pantalla"}),l.jsx("option",{value:"overlay",children:"Superposición"}),l.jsx("option",{value:"soft-light",children:"Luz suave"}),l.jsx("option",{value:"hard-light",children:"Luz fuerte"}),l.jsx("option",{value:"color-dodge",children:"Sobreexponer color"}),l.jsx("option",{value:"color-burn",children:"Subexponer color"}),l.jsx("option",{value:"darken",children:"Oscurecer"}),l.jsx("option",{value:"lighten",children:"Aclarar"}),l.jsx("option",{value:"difference",children:"Diferencia"}),l.jsx("option",{value:"exclusion",children:"Exclusión"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Transformaciones adicionales"}),l.jsx(Ue,{label:"Profundidad (Z-Index)",value:e.zIndex||1,onChange:a=>n("zIndex",a),min:1,max:100,step:1}),l.jsx(Ue,{label:"Desenfoque gaussiano",value:e.gaussianBlur||0,onChange:a=>n("gaussianBlur",a),min:0,max:50,step:.5,unit:"px"})]})]})},Ra=x.createContext({dragDropManager:void 0});function Fe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var kn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),An=function(){return Math.random().toString(36).substring(7).split("").join(".")},Bn={INIT:"@@redux/INIT"+An(),REPLACE:"@@redux/REPLACE"+An()};function ts(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Wr(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Fe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Fe(1));return r(Wr)(e,t)}if(typeof e!="function")throw new Error(Fe(2));var a=e,i=t,o=[],s=o,c=!1;function f(){s===o&&(s=o.slice())}function g(){if(c)throw new Error(Fe(3));return i}function u(h){if(typeof h!="function")throw new Error(Fe(4));if(c)throw new Error(Fe(5));var m=!0;return f(),s.push(h),function(){if(m){if(c)throw new Error(Fe(6));m=!1,f();var w=s.indexOf(h);s.splice(w,1),o=null}}}function d(h){if(!ts(h))throw new Error(Fe(7));if(typeof h.type>"u")throw new Error(Fe(8));if(c)throw new Error(Fe(9));try{c=!0,i=a(i,h)}finally{c=!1}for(var m=o=s,b=0;b<m.length;b++){var w=m[b];w()}return h}function p(h){if(typeof h!="function")throw new Error(Fe(10));a=h,d({type:Bn.REPLACE})}function v(){var h,m=u;return h={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Fe(11));function D(){w.next&&w.next(g())}D();var N=m(D);return{unsubscribe:N}}},h[kn]=function(){return this},h}return d({type:Bn.INIT}),n={dispatch:d,subscribe:u,getState:g,replaceReducer:p},n[kn]=v,n}function Ln(e,t){return function(){return t(e.apply(this,arguments))}}function Fn(e,t){if(typeof e=="function")return Ln(e,t);if(typeof e!="object"||e===null)throw new Error(Fe(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=Ln(a,t))}return r}function Ma(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function rs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Fe(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(c){return c(o)});return i=Ma.apply(void 0,s)(a.dispatch),Tn(Tn({},a),{},{dispatch:i})}}}function W(e,t,...r){if(ns()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function ns(){return typeof process<"u"&&!0}function as(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function is(e,t){return e.filter(r=>r!==t)}function ka(e){return typeof e=="object"}function os(e,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function ss(e,t){return e.filter(r=>t.indexOf(r)>-1)}const qr="dnd-core/INIT_COORDS",er="dnd-core/BEGIN_DRAG",Ur="dnd-core/PUBLISH_DRAG_SOURCE",tr="dnd-core/HOVER",rr="dnd-core/DROP",nr="dnd-core/END_DRAG";function $n(e,t){return{type:qr,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const ls={type:qr,payload:{clientOffset:null,sourceClientOffset:null}};function cs(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,s=e.getMonitor(),c=e.getRegistry();e.dispatch($n(i)),ds(r,s,c);const f=fs(r,s);if(f==null){e.dispatch(ls);return}let g=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");us(o),g=o(f)}e.dispatch($n(i,g));const d=c.getSource(f).beginDrag(s,f);if(d==null)return;ps(d),c.pinSource(f);const p=c.getSourceType(f);return{type:er,payload:{itemType:p,item:d,sourceId:f,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!a}}}}function ds(e,t,r){W(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){W(r.getSource(n),"Expected sourceIds to be registered.")})}function us(e){W(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function ps(e){W(ka(e),"Item must be an object.")}function fs(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function gs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){gs(e,a,r[a])})}return e}function vs(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();ms(n),ys(n).forEach((o,s)=>{const c=bs(o,s,a,n),f={type:rr,payload:{dropResult:hs({},r,c)}};e.dispatch(f)})}}function ms(e){W(e.isDragging(),"Cannot call drop while not dragging."),W(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function bs(e,t,r,n){const a=r.getTarget(e);let i=a?a.drop(n,e):void 0;return xs(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function xs(e){W(typeof e>"u"||ka(e),"Drop result must either be an object or undefined.")}function ys(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function ws(e){return function(){const r=e.getMonitor(),n=e.getRegistry();Ds(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:nr}}}function Ds(e){W(e.isDragging(),"Cannot call endDrag while not dragging.")}function Tr(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function Cs(e){return function(r,{clientOffset:n}={}){Ss(r);const a=r.slice(0),i=e.getMonitor(),o=e.getRegistry(),s=i.getItemType();return Ns(a,o,s),Is(a,i,o),Es(a,i,o),{type:tr,payload:{targetIds:a,clientOffset:n||null}}}}function Ss(e){W(Array.isArray(e),"Expected targetIds to be an array.")}function Is(e,t,r){W(t.isDragging(),"Cannot call hover while not dragging."),W(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];W(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);W(i,"Expected targetIds to be registered.")}}function Ns(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],i=t.getTargetType(a);Tr(i,r)||e.splice(n,1)}}function Es(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function Ps(e){return function(){if(e.getMonitor().isDragging())return{type:Ur}}}function Os(e){return{beginDrag:cs(e),publishDragSource:Ps(e),hover:Cs(e),drop:vs(e),endDrag:ws(e)}}class Ts{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const s=i.apply(t,o);typeof s<"u"&&r(s)}}const a=Os(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function js(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Aa(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Rs(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:Aa(js(t,n),r)}function Ms(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:Aa(t,r)}const St=[],Vr=[];St.__IS_NONE__=!0;Vr.__IS_ALL__=!0;function ks(e,t){return e===St?!1:e===Vr||typeof t>"u"?!0:ss(t,e).length>0}class As{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;W(typeof t=="function","listener must be a function."),W(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!ks(o.dirtyHandlerIds,n)||t()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){W(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return W(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(W(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return Tr(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(W(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!Tr(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(t);return n?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Rs(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Ms(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const Hn=typeof global<"u"?global:self,Ba=Hn.MutationObserver||Hn.WebKitMutationObserver;function La(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function Bs(e){let t=1;const r=new Ba(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const Ls=typeof Ba=="function"?Bs:La;class Fs{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=Ls(this.flush),this.requestErrorThrow=La(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class $s{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class Hs{create(t){const r=this.freeTasks,n=r.length?r.pop():new $s(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const Fa=new Fs,zs=new Hs(Fa.registerPendingError);function Gs(e){Fa.enqueueTask(zs.create(e))}const Yr="dnd-core/ADD_SOURCE",Xr="dnd-core/ADD_TARGET",Jr="dnd-core/REMOVE_SOURCE",ar="dnd-core/REMOVE_TARGET";function Ws(e){return{type:Yr,payload:{sourceId:e}}}function qs(e){return{type:Xr,payload:{targetId:e}}}function Us(e){return{type:Jr,payload:{sourceId:e}}}function Vs(e){return{type:ar,payload:{targetId:e}}}function Ys(e){W(typeof e.canDrag=="function","Expected canDrag to be a function."),W(typeof e.beginDrag=="function","Expected beginDrag to be a function."),W(typeof e.endDrag=="function","Expected endDrag to be a function.")}function Xs(e){W(typeof e.canDrop=="function","Expected canDrop to be a function."),W(typeof e.hover=="function","Expected hover to be a function."),W(typeof e.drop=="function","Expected beginDrag to be a function.")}function jr(e,t){if(t&&Array.isArray(e)){e.forEach(r=>jr(r,!1));return}W(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Ve;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Ve||(Ve={}));let Js=0;function Ks(){return Js++}function _s(e){const t=Ks().toString();switch(e){case Ve.SOURCE:return`S${t}`;case Ve.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function zn(e){switch(e[0]){case"S":return Ve.SOURCE;case"T":return Ve.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Gn(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class Qs{addSource(t,r){jr(t),Ys(r);const n=this.addHandler(Ve.SOURCE,t,r);return this.store.dispatch(Ws(n)),n}addTarget(t,r){jr(t,!0),Xs(r);const n=this.addHandler(Ve.TARGET,t,r);return this.store.dispatch(qs(n)),n}containsHandler(t){return Gn(this.dragSources,t)||Gn(this.dropTargets,t)}getSource(t,r=!1){return W(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return W(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return W(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return W(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return zn(t)===Ve.SOURCE}isTargetId(t){return zn(t)===Ve.TARGET}removeSource(t){W(this.getSource(t),"Expected an existing source."),this.store.dispatch(Us(t)),Gs(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){W(this.getTarget(t),"Expected an existing target."),this.store.dispatch(Vs(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);W(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){W(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=_s(t);return this.types.set(a,r),t===Ve.SOURCE?this.dragSources.set(a,n):t===Ve.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const Zs=(e,t)=>e===t;function el(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function tl(e,t,r=Zs){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function rl(e=St,t){switch(t.type){case tr:break;case Yr:case Xr:case ar:case Jr:return St;case er:case Ur:case nr:case rr:default:return Vr}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=os(r,n);if(!(a.length>0||!tl(r,n)))return St;const o=n[n.length-1],s=r[r.length-1];return o!==s&&(o&&a.push(o),s&&a.push(s)),a}function nl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){nl(e,a,r[a])})}return e}const Wn={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function il(e=Wn,t){const{payload:r}=t;switch(t.type){case qr:case er:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case tr:return el(e.clientOffset,r.clientOffset)?e:al({},e,{clientOffset:r.clientOffset});case nr:case rr:return Wn;default:return e}}function ol(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){ol(e,a,r[a])})}return e}const sl={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function ll(e=sl,t){const{payload:r}=t;switch(t.type){case er:return dt({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Ur:return dt({},e,{isSourcePublic:!0});case tr:return dt({},e,{targetIds:r.targetIds});case ar:return e.targetIds.indexOf(r.targetId)===-1?e:dt({},e,{targetIds:is(e.targetIds,r.targetId)});case rr:return dt({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case nr:return dt({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function cl(e=0,t){switch(t.type){case Yr:case Xr:return e+1;case Jr:case ar:return e-1;default:return e}}function dl(e=0){return e+1}function ul(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){ul(e,a,r[a])})}return e}function fl(e={},t){return{dirtyHandlerIds:rl(e.dirtyHandlerIds,{type:t.type,payload:pl({},t.payload,{prevTargetIds:as(e,"dragOperation.targetIds",[])})}),dragOffset:il(e.dragOffset,t),refCount:cl(e.refCount,t),dragOperation:ll(e.dragOperation,t),stateId:dl(e.stateId)}}function gl(e,t=void 0,r={},n=!1){const a=hl(n),i=new As(a,new Qs(a)),o=new Ts(a,i),s=e(o,t,r);return o.receiveBackend(s),o}function hl(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Wr(fl,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function vl(e,t){if(e==null)return{};var r=ml(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ml(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let qn=0;const Gt=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var bl=x.memo(function(t){var{children:r}=t,n=vl(t,["children"]);const[a,i]=xl(n);return x.useEffect(()=>{if(i){const o=$a();return++qn,()=>{--qn===0&&(o[Gt]=null)}}},[]),l.jsx(Ra.Provider,{value:a,children:r})});function xl(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=yl(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function yl(e,t=$a(),r,n){const a=t;return a[Gt]||(a[Gt]={dragDropManager:gl(e,t,r,n)}),a[Gt]}function $a(){return typeof global<"u"?global:window}const st=typeof window<"u"?x.useLayoutEffect:x.useEffect;function wl(e,t,r){const[n,a]=x.useState(()=>t(e)),i=x.useCallback(()=>{const o=t(e);uo(n,o)||(a(o),r&&r())},[n,e,r]);return st(i),[n,i]}function Dl(e,t,r){const[n,a]=wl(e,t,r);return st(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function Ha(e,t,r){return Dl(t,e||(()=>({})),()=>r.reconnect())}function za(e,t){const r=[];return typeof e!="function"&&r.push(e),x.useMemo(()=>typeof e=="function"?e():e,r)}function Cl(e){return x.useMemo(()=>e.hooks.dragSource(),[e])}function Sl(e){return x.useMemo(()=>e.hooks.dragPreview(),[e])}let fr=!1,gr=!1;class Il{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){W(!fr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return fr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{fr=!1}}isDragging(){if(!this.sourceId)return!1;W(!gr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return gr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{gr=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let hr=!1;class Nl{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;W(!hr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return hr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{hr=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function El(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function Pl(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function Rr(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const f=i[c];if(!s(f))return!1;const g=e[f],u=t[f];if(a=void 0,a===!1||a===void 0&&g!==u)return!1}return!0}function Mr(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Ol(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function Tl(e){return(t=null,r=null)=>{if(!x.isValidElement(t)){const i=t;return e(i,r),i}const n=t;return Ol(n),jl(n,r?i=>e(i,r):e)}}function Ga(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=Tl(n);t[r]=()=>a}}),t}function Un(e,t){typeof e=="function"?e(t):e.current=t}function jl(e,t){const r=e.ref;return W(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?x.cloneElement(e,{ref:n=>{Un(r,n),Un(t,n)}}):x.cloneElement(e,{ref:t})}class Rl{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Rr(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Rr(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=Ga({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Mr(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Mr(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class Ml{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Rr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=Ga({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Mr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function vt(){const{dragDropManager:e}=x.useContext(Ra);return W(e!=null,"Expected drag drop context"),e}function kl(e,t){const r=vt(),n=x.useMemo(()=>new Rl(r.getBackend()),[r]);return st(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),st(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function Al(){const e=vt();return x.useMemo(()=>new Il(e),[e])}class Bl{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function Ll(e,t,r){const n=x.useMemo(()=>new Bl(e,t,r),[t,r]);return x.useEffect(()=>{n.spec=e},[e]),n}function Fl(e){return x.useMemo(()=>{const t=e.type;return W(t!=null,"spec.type must be defined"),t},[e])}function $l(e,t,r){const n=vt(),a=Ll(e,t,r),i=Fl(e);st(function(){if(i!=null){const[s,c]=Pl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c}},[n,t,r,a,i])}function Wa(e,t){const r=za(e);W(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=Al(),a=kl(r.options,r.previewOptions);return $l(r,n,a),[Ha(r.collect,n,a),Cl(a),Sl(a)]}function Hl(e){return x.useMemo(()=>e.hooks.dropTarget(),[e])}function zl(e){const t=vt(),r=x.useMemo(()=>new Ml(t.getBackend()),[t]);return st(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function Gl(){const e=vt();return x.useMemo(()=>new Nl(e),[e])}function Wl(e){const{accept:t}=e;return x.useMemo(()=>(W(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class ql{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function Ul(e,t){const r=x.useMemo(()=>new ql(e,t),[t]);return x.useEffect(()=>{r.spec=e},[e]),r}function Vl(e,t,r){const n=vt(),a=Ul(e,t),i=Wl(e);st(function(){const[s,c]=El(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c},[n,t,a,r,i.map(o=>o.toString()).join("|")])}function Yl(e,t){const r=za(e),n=Gl(),a=zl(r.options);return Vl(r,n,a),[Ha(r.collect,n,a),Hl(a)]}const kr=[{id:"none",name:"Sin máscara",class:"",category:"Básicas"},{id:"circle",name:"Círculo",class:"mask-circle",category:"Básicas"},{id:"rounded",name:"Redondeado",class:"mask-rounded",category:"Básicas"},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas"},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas"},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas"},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas"},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos"},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos"},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos"},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos"},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas"},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas"},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas"},{id:"rounded-sm",name:"Redondeado pequeño",class:"mask-rounded-sm",category:"Básicas"},{id:"rounded-lg",name:"Redondeado grande",class:"mask-rounded-lg",category:"Básicas"},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas"},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas"},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas"}];function Xl({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,availableMasks:i=[],workspaceSize:o={width:800,height:600}}){var Ee,fe,Oe,Te,je,Ae,me,Re,ge,j,X,le,ue,Se,Be,xe;const[{isDragging:s},c]=Wa(()=>({type:"IMAGE_ELEMENT",item:{id:e.id},collect:I=>({isDragging:!!I.isDragging()})})),f=x.useRef(null),[g,u]=x.useState(!1),[d,p]=x.useState(null),[v,h]=x.useState(null),[m,b]=x.useState({mouseX:0,mouseY:0,elementX:0,elementY:0,elementWidth:0,elementHeight:0}),[w,D]=x.useState(!1),[N,k]=x.useState({x:0,y:0}),R={filter:`
            brightness(${(((Ee=e.filters)==null?void 0:Ee.brightness)||100)/100})
            contrast(${(((fe=e.filters)==null?void 0:fe.contrast)||100)/100})
            saturate(${(((Oe=e.filters)==null?void 0:Oe.saturation)||100)/100})
            sepia(${(((Te=e.filters)==null?void 0:Te.tint)||0)/100})
            hue-rotate(${(((je=e.filters)==null?void 0:je.hue)||0)*3.6}deg)
            blur(${((Ae=e.filters)==null?void 0:Ae.blur)||0}px)
        `,transform:`scale(${((me=e.filters)==null?void 0:me.scale)||1}) rotate(${((Re=e.filters)==null?void 0:Re.rotate)||0}deg) ${(ge=e.filters)!=null&&ge.flipHorizontal?"scaleX(-1)":""} ${(j=e.filters)!=null&&j.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((X=e.filters)==null?void 0:X.blendMode)||"normal",opacity:(((le=e.filters)==null?void 0:le.opacity)||100)/100},z=kr.find(I=>I.id===e.mask)||kr[0],V=x.useCallback((I,G)=>typeof I=="number"?I<=1?I*G:I:0,[]),O=x.useCallback((I,G)=>typeof I=="number"&&G>0?I>1?Math.min(I/G,1):I:0,[]),F={x:Math.max(0,V(((ue=e.position)==null?void 0:ue.x)||0,o.width)),y:Math.max(0,V(((Se=e.position)==null?void 0:Se.y)||0,o.height))},B={width:Math.max(50,(Be=e.size)!=null&&Be.width?V(e.size.width,o.width):200),height:Math.max(50,(xe=e.size)!=null&&xe.height?V(e.size.height,o.height):200)},ie=x.useCallback(I=>{t&&(I.stopPropagation(),I.preventDefault(),u(!0),p("move"),b({mouseX:I.clientX,mouseY:I.clientY,elementX:F.x,elementY:F.y,elementWidth:B.width,elementHeight:B.height}))},[t,F,B]),E=x.useCallback((I,G)=>{t&&(I.stopPropagation(),I.preventDefault(),u(!0),p("resize"),h(G),b({mouseX:I.clientX,mouseY:I.clientY,elementX:F.x,elementY:F.y,elementWidth:B.width,elementHeight:B.height}))},[t,F,B]),Y=x.useCallback(I=>{if(!g)return;const G=I.clientX-m.mouseX,J=I.clientY-m.mouseY;if(d==="move"){const te=Math.max(0,Math.min(o.width-B.width,m.elementX+G)),re=Math.max(0,Math.min(o.height-B.height,m.elementY+J)),pe={position:{x:O(te,o.width),y:O(re,o.height)}};n(pe)}else if(d==="resize"){let te=m.elementWidth,re=m.elementHeight,pe=m.elementX,ye=m.elementY;const he=50,_e=m.elementWidth/m.elementHeight;switch(v){case"nw":te=Math.max(he,m.elementWidth-G),re=Math.max(he,m.elementHeight-J),I.shiftKey&&(re=te/_e),pe=m.elementX+(m.elementWidth-te),ye=m.elementY+(m.elementHeight-re);break;case"n":re=Math.max(he,m.elementHeight-J),ye=m.elementY+(m.elementHeight-re);break;case"ne":te=Math.max(he,m.elementWidth+G),re=Math.max(he,m.elementHeight-J),I.shiftKey&&(re=te/_e),ye=m.elementY+(m.elementHeight-re);break;case"e":te=Math.max(he,m.elementWidth+G);break;case"se":te=Math.max(he,m.elementWidth+G),re=Math.max(he,m.elementHeight+J),I.shiftKey&&(re=te/_e);break;case"s":re=Math.max(he,m.elementHeight+J);break;case"sw":te=Math.max(he,m.elementWidth-G),re=Math.max(he,m.elementHeight+J),I.shiftKey&&(re=te/_e),pe=m.elementX+(m.elementWidth-te);break;case"w":te=Math.max(he,m.elementWidth-G),pe=m.elementX+(m.elementWidth-te);break}pe=Math.max(0,Math.min(o.width-te,pe)),ye=Math.max(0,Math.min(o.height-re,ye)),te=Math.min(te,o.width-pe),re=Math.min(re,o.height-ye);const at={position:{x:O(pe,o.width),y:O(ye,o.height)},size:{width:O(te,o.width),height:O(re,o.height)}};n(at)}},[g,d,m,v,o,B,n,O]),ce=x.useCallback(()=>{u(!1),p(null),h(null)},[]),T=x.useCallback(I=>{I.stopPropagation();const G={width:200,height:200};n({size:{width:O(G.width,o.width),height:O(G.height,o.height)}})},[n,O,o]),ne=x.useCallback(I=>{if(!t)return;const G=I.shiftKey?10:1;let J={};switch(I.key){case"ArrowLeft":I.preventDefault(),J.position={x:Math.max(0,O(F.x-G,o.width)),y:O(F.y,o.height)};break;case"ArrowRight":I.preventDefault(),J.position={x:Math.min(1,O(F.x+G,o.width)),y:O(F.y,o.height)};break;case"ArrowUp":I.preventDefault(),J.position={x:O(F.x,o.width),y:Math.max(0,O(F.y-G,o.height))};break;case"ArrowDown":I.preventDefault(),J.position={x:O(F.x,o.width),y:Math.min(1,O(F.y+G,o.height))};break;case"Delete":case"Backspace":I.preventDefault(),a();break;case"Escape":I.preventDefault(),r();break}Object.keys(J).length>0&&n(J)},[t,F,o,O,n,a,r]);x.useEffect(()=>{if(t)return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[t,ne]),x.useEffect(()=>{if(g){const I=J=>Y(J),G=()=>ce();return document.addEventListener("mousemove",I),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",G)}}},[g,Y,ce]),x.useEffect(()=>{const I=G=>{w&&!G.target.closest(".context-menu")&&D(!1)};return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[w]);const ve=x.useCallback(I=>{f.current=I,c(I)},[c]),Q=I=>{I.preventDefault(),I.stopPropagation(),k({x:I.clientX,y:I.clientY}),D(!0)},se=()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=G=>{if(G.target.files&&G.target.files[0]){const J=new FileReader;J.onload=te=>{var re;(re=te.target)!=null&&re.result&&n({content:te.target.result})},J.readAsDataURL(G.target.files[0])}},I.click(),D(!1)},be=()=>{var G,J;const I={...JSON.parse(JSON.stringify(e)),id:`img-${Date.now()}`,position:{x:Math.min(.9,(((G=e.position)==null?void 0:G.x)||0)+.05),y:Math.min(.9,(((J=e.position)==null?void 0:J.y)||0)+.05)}};n(I,!0),D(!1)},de=()=>{if(g){if(d==="move")return"grabbing";if(d==="resize")return Pe(v)}return t?"grab":"pointer"},Pe=I=>({n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize",nw:"nw-resize"})[I]||"default";return l.jsxs("div",{ref:ve,className:`absolute ${z.class} ${t?"ring-2 ring-blue-500 ring-opacity-75":""} ${s?"opacity-50":"opacity-100"}`,style:{left:`${F.x}px`,top:`${F.y}px`,width:`${B.width}px`,height:`${B.height}px`,cursor:de(),zIndex:t?1e3:e.zIndex||1,transition:g?"none":"all 0.1s ease-out",pointerEvents:"all",userSelect:"none",transformOrigin:"center"},onClick:I=>{I.stopPropagation(),r()},onMouseDown:ie,onContextMenu:Q,onDoubleClick:T,children:[l.jsxs("div",{className:"w-full h-full overflow-hidden relative bg-transparent",children:[l.jsx("img",{src:e.content,alt:"Imagen editada",className:"w-full h-full object-cover select-none",style:R,draggable:!1,onLoad:()=>{f.current&&(f.current.style.visibility="visible")}}),t&&!s&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-nw-resize",style:{top:-8,left:-8},onMouseDown:I=>E(I,"nw"),title:"Redimensionar desde esquina superior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-ne-resize",style:{top:-8,right:-8},onMouseDown:I=>E(I,"ne"),title:"Redimensionar desde esquina superior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-se-resize",style:{bottom:-8,right:-8},onMouseDown:I=>E(I,"se"),title:"Redimensionar desde esquina inferior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-sw-resize",style:{bottom:-8,left:-8},onMouseDown:I=>E(I,"sw"),title:"Redimensionar desde esquina inferior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-n-resize",style:{top:-8,left:"calc(50% - 8px)"},onMouseDown:I=>E(I,"n"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-e-resize",style:{right:-8,top:"calc(50% - 8px)"},onMouseDown:I=>E(I,"e"),title:"Redimensionar horizontalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-s-resize",style:{bottom:-8,left:"calc(50% - 8px)"},onMouseDown:I=>E(I,"s"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-w-resize",style:{left:-8,top:"calc(50% - 8px)"},onMouseDown:I=>E(I,"w"),title:"Redimensionar horizontalmente"}),g&&l.jsx("div",{className:"absolute -inset-2 border-2 border-blue-300 border-dashed rounded animate-pulse"})]})]}),w&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>D(!1)}),l.jsxs("div",{className:"fixed bg-white shadow-xl rounded-lg z-50 py-2 w-56 context-menu border border-gray-200",style:{left:`${Math.min(N.x,window.innerWidth-240)}px`,top:`${Math.min(N.y,window.innerHeight-200)}px`},onClick:I=>I.stopPropagation(),children:[l.jsx("button",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 text-gray-500 z-10",onClick:()=>D(!1),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsx("div",{className:"px-3 py-2 border-b border-gray-100",children:l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Opciones de imagen"})}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-3 text-sm text-gray-700 hover:text-blue-700 transition-colors",onClick:se,children:[l.jsx(Go,{className:"h-4 w-4"}),"Reemplazar imagen"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-green-50 flex items-center gap-3 text-sm text-gray-700 hover:text-green-700 transition-colors",onClick:be,children:[l.jsx(Gr,{className:"h-4 w-4"}),"Duplicar elemento"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-yellow-50 flex items-center gap-3 text-sm text-gray-700 hover:text-yellow-700 transition-colors",onClick:()=>{var I;n({filters:{...e.filters,opacity:Math.max(0,(((I=e.filters)==null?void 0:I.opacity)||100)-20)}}),D(!1)},children:[l.jsx(Ta,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-purple-50 flex items-center gap-3 text-sm text-gray-700 hover:text-purple-700 transition-colors",onClick:()=>{var I;n({filters:{...e.filters,scale:Math.max(.1,(((I=e.filters)==null?void 0:I.scale)||1)-.1)}}),D(!1)},children:[l.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})}),"Reducir escala"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-red-50 flex items-center gap-3 text-sm text-gray-700 hover:text-red-700 transition-colors",onClick:()=>{a(),D(!1)},children:[l.jsx(Ut,{className:"h-4 w-4"}),"Eliminar imagen"]})]})]})]})}function Jl({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,workspaceSize:i={width:800,height:600}}){var T,ne,ve,Q,se,be,de,Pe,Ee,fe,Oe,Te,je,Ae,me,Re,ge;const[o,s]=x.useState(!1),c=x.useRef(null),f=x.useRef(null),[{isDragging:g},u]=Wa(()=>({type:"TEXT_ELEMENT",item:{id:e.id},collect:j=>({isDragging:!!j.isDragging()})})),[d,p]=x.useState(!1),[v,h]=x.useState({x:0,y:0}),[m,b]=x.useState(!1),[w,D]=x.useState({x:0,y:0}),N=()=>{s(!1)},k=j=>{n({content:j.target.value})},R=j=>{j.key==="Enter"&&s(!1)},z=j=>{if(t&&!o){j.stopPropagation(),p(!0);const X=j.currentTarget.parentElement.getBoundingClientRect(),le=e.position.x<=1?e.position.x*X.width:e.position.x,ue=e.position.y<=1?e.position.y*X.height:e.position.y;h({x:j.clientX-le,y:j.clientY-ue})}},V=j=>{if(d&&f.current){const X=f.current.parentElement.getBoundingClientRect(),le=j.clientX-v.x,ue=j.clientY-v.y,Se=X.width-f.current.offsetWidth,Be=X.height-f.current.offsetHeight,xe=Math.max(0,Math.min(le,Se)),I=Math.max(0,Math.min(ue,Be)),G=xe/X.width,J=I/X.height;n({position:{x:G,y:J}})}},O=()=>{p(!1)},F=j=>{j.preventDefault(),j.stopPropagation(),D({x:j.clientX,y:j.clientY}),b(!0)},B=()=>{const j={...JSON.parse(JSON.stringify(e)),id:`text-${Date.now()}`,position:{x:e.position.x<=1?Math.min(e.position.x+.02,.9):e.position.x+10,y:e.position.y<=1?Math.min(e.position.y+.02,.9):e.position.y+10}};n(j,!0),b(!1)};x.useEffect(()=>(d&&(window.addEventListener("mousemove",V),window.addEventListener("mouseup",O)),()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",O)}),[d,v]);const ie=x.useCallback(j=>{f.current=j,u(j)},[u]),E=(T=e.style)!=null&&T.textShadow?`${e.style.textShadowX||0}px ${e.style.textShadowY||0}px ${e.style.textShadowBlur||0}px ${e.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",ce=(()=>{var X,le,ue,Se,Be,xe,I,G,J,te,re,pe;const j={...e.style,position:"absolute",cursor:t&&!o?"move":"pointer",textShadow:E,zIndex:10,fontFamily:((X=e.style)==null?void 0:X.fontFamily)||"Arial",color:((le=e.style)==null?void 0:le.color)||"#000000",fontWeight:((ue=e.style)==null?void 0:ue.fontWeight)||"normal",fontStyle:((Se=e.style)==null?void 0:Se.fontStyle)||"normal",textDecoration:((Be=e.style)==null?void 0:Be.textDecoration)||"none",textAlign:((xe=e.style)==null?void 0:xe.textAlign)||"left",backgroundColor:((I=e.style)==null?void 0:I.backgroundColor)||"transparent",padding:((G=e.style)==null?void 0:G.padding)||"8px",borderRadius:((J=e.style)==null?void 0:J.borderRadius)||"0px",border:((te=e.style)==null?void 0:te.border)||"none",opacity:((re=e.style)==null?void 0:re.opacity)!==void 0?e.style.opacity:1};if(e.position.x<=1&&e.position.y<=1?(j.left=`${e.position.x*100}%`,j.top=`${e.position.y*100}%`):(j.left=`${e.position.x}px`,j.top=`${e.position.y}px`),(pe=e.style)!=null&&pe.fontSize){const ye=parseFloat(e.style.fontSize);if(ye&&i.width){const he=ye/800*i.width;j.fontSize=`${Math.max(12,he)}px`}else j.fontSize=e.style.fontSize}else{const ye=.02*i.width;j.fontSize=`${Math.max(12,ye)}px`}return j})();return x.useEffect(()=>{var X,le;const j=(le=(X=e.style)==null?void 0:X.fontFamily)==null?void 0:le.replace(/'/g,"");if(j&&!document.fonts.check(`12px ${j}`)){const ue=new FontFace(j,`local(${j})`);ue.load().then(()=>document.fonts.add(ue))}},[(ne=e.style)==null?void 0:ne.fontFamily]),l.jsxs("div",{ref:ie,className:`${t?"ring-2 ring-purple-500":""} ${g?"opacity-50":"opacity-100"}`,style:ce,onClick:j=>{j.stopPropagation(),r(),!o&&t&&(s(!0),setTimeout(()=>{c.current&&(c.current.focus(),c.current.select())},0))},onMouseDown:z,onContextMenu:F,children:[o?l.jsx("input",{ref:c,type:"text",value:e.content,onChange:k,onBlur:N,onKeyDown:R,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(ve=e.style)==null?void 0:ve.fontFamily,fontSize:(Q=e.style)==null?void 0:Q.fontSize,fontWeight:(se=e.style)==null?void 0:se.fontWeight,fontStyle:(be=e.style)==null?void 0:be.fontStyle,textDecoration:(de=e.style)==null?void 0:de.textDecoration,color:(Pe=e.style)==null?void 0:Pe.color,textAlign:(Ee=e.style)==null?void 0:Ee.textAlign,minWidth:"100px"},autoFocus:!0}):l.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((fe=e.style)==null?void 0:fe.backgroundColor)||"transparent",padding:((Oe=e.style)==null?void 0:Oe.padding)||"8px",borderRadius:((Te=e.style)==null?void 0:Te.borderRadius)||"0px",border:((je=e.style)==null?void 0:je.border)||"none",fontFamily:((Ae=e.style)==null?void 0:Ae.fontFamily)||"Arial"},children:e.content||"Editar texto"}),t&&l.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:j=>{var X;j.stopPropagation(),n({style:{...e.style,fontWeight:((X=e.style)==null?void 0:X.fontWeight)==="bold"?"normal":"bold"}})},children:l.jsx("span",{className:`text-xs ${((me=e.style)==null?void 0:me.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:j=>{var X;j.stopPropagation(),n({style:{...e.style,fontStyle:((X=e.style)==null?void 0:X.fontStyle)==="italic"?"normal":"italic"}})},children:l.jsx("span",{className:`text-xs ${((Re=e.style)==null?void 0:Re.fontStyle)==="italic"?"italic":""}`,children:"I"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:j=>{var X;j.stopPropagation(),n({style:{...e.style,textDecoration:((X=e.style)==null?void 0:X.textDecoration)==="underline"?"none":"underline"}})},children:l.jsx("span",{className:`text-xs ${((ge=e.style)==null?void 0:ge.textDecoration)==="underline"?"underline":""}`,children:"U"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:j=>{j.stopPropagation(),a()},children:l.jsx(Ut,{className:"h-3 w-3 text-gray-700"})})]}),m&&l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${w.x}px`,top:`${w.y}px`},onClick:j=>j.stopPropagation(),children:[l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{s(!0),b(!1)},children:[l.jsx(pt,{className:"h-4 w-4"}),"Editar texto"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:B,children:[l.jsx(Gr,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var j;n({style:{...e.style,opacity:Math.max(0,(((j=e.style)==null?void 0:j.opacity)||1)-.1)}}),b(!1)},children:[l.jsx(Ta,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),b(!1)},children:[l.jsx(Ut,{className:"h-4 w-4"}),"Eliminar"]})]})]})}function qa(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ao(e,t)}var Ua=oe.createContext(null);function Kl(e){e()}var Va=Kl,_l=function(t){return Va=t},Ql=function(){return Va};function Zl(){var e=Ql(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Vn={notify:function(){},get:function(){return[]}};function Ya(e,t){var r,n=Vn;function a(u){return c(),n.subscribe(u)}function i(){n.notify()}function o(){g.onStateChange&&g.onStateChange()}function s(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=Zl())}function f(){r&&(r(),r=void 0,n.clear(),n=Vn)}var g={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:s,trySubscribe:c,tryUnsubscribe:f,getListeners:function(){return n}};return g}var Xa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect;function ec(e){var t=e.store,r=e.context,n=e.children,a=x.useMemo(function(){var s=Ya(t);return{store:t,subscription:s}},[t]),i=x.useMemo(function(){return t.getState()},[t]);Xa(function(){var s=a.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),i!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[a,i]);var o=r||Ua;return oe.createElement(o.Provider,{value:a},n)}var vr={exports:{}},ae={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yn;function tc(){if(Yn)return ae;Yn=1;var e=60103,t=60106,r=60107,n=60108,a=60114,i=60109,o=60110,s=60112,c=60113,f=60120,g=60115,u=60116,d=60121,p=60122,v=60117,h=60129,m=60131;if(typeof Symbol=="function"&&Symbol.for){var b=Symbol.for;e=b("react.element"),t=b("react.portal"),r=b("react.fragment"),n=b("react.strict_mode"),a=b("react.profiler"),i=b("react.provider"),o=b("react.context"),s=b("react.forward_ref"),c=b("react.suspense"),f=b("react.suspense_list"),g=b("react.memo"),u=b("react.lazy"),d=b("react.block"),p=b("react.server.block"),v=b("react.fundamental"),h=b("react.debug_trace_mode"),m=b("react.legacy_hidden")}function w(E){if(typeof E=="object"&&E!==null){var Y=E.$$typeof;switch(Y){case e:switch(E=E.type,E){case r:case a:case n:case c:case f:return E;default:switch(E=E&&E.$$typeof,E){case o:case s:case u:case g:case i:return E;default:return Y}}case t:return Y}}}var D=i,N=e,k=s,R=r,z=u,V=g,O=t,F=a,B=n,ie=c;return ae.ContextConsumer=o,ae.ContextProvider=D,ae.Element=N,ae.ForwardRef=k,ae.Fragment=R,ae.Lazy=z,ae.Memo=V,ae.Portal=O,ae.Profiler=F,ae.StrictMode=B,ae.Suspense=ie,ae.isAsyncMode=function(){return!1},ae.isConcurrentMode=function(){return!1},ae.isContextConsumer=function(E){return w(E)===o},ae.isContextProvider=function(E){return w(E)===i},ae.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===e},ae.isForwardRef=function(E){return w(E)===s},ae.isFragment=function(E){return w(E)===r},ae.isLazy=function(E){return w(E)===u},ae.isMemo=function(E){return w(E)===g},ae.isPortal=function(E){return w(E)===t},ae.isProfiler=function(E){return w(E)===a},ae.isStrictMode=function(E){return w(E)===n},ae.isSuspense=function(E){return w(E)===c},ae.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===a||E===h||E===n||E===c||E===f||E===m||typeof E=="object"&&E!==null&&(E.$$typeof===u||E.$$typeof===g||E.$$typeof===i||E.$$typeof===o||E.$$typeof===s||E.$$typeof===v||E.$$typeof===d||E[0]===p)},ae.typeOf=w,ae}var Xn;function rc(){return Xn||(Xn=1,vr.exports=tc()),vr.exports}var nc=rc(),ac=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ic=["reactReduxForwardedRef"],oc=[],sc=[null,null];function lc(e,t){var r=e[1];return[t.payload,r+1]}function Jn(e,t,r){Xa(function(){return e.apply(void 0,t)},r)}function cc(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function dc(e,t,r,n,a,i,o,s,c,f){if(e){var g=!1,u=null,d=function(){if(!g){var h=t.getState(),m,b;try{m=n(h,a.current)}catch(w){b=w,u=w}b||(u=null),m===i.current?o.current||c():(i.current=m,s.current=m,o.current=!0,f({type:"STORE_UPDATED",payload:{error:b}}))}};r.onStateChange=d,r.trySubscribe(),d();var p=function(){if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return p}}var uc=function(){return[null,0]};function pc(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(D){return"ConnectAdvanced("+D+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,s=r.renderCountProp,c=s===void 0?void 0:s,f=r.shouldHandleStateChanges,g=f===void 0?!0:f,u=r.storeKey,d=u===void 0?"store":u;r.withRef;var p=r.forwardRef,v=p===void 0?!1:p,h=r.context,m=h===void 0?Ua:h,b=qt(r,ac),w=m;return function(N){var k=N.displayName||N.name||"Component",R=a(k),z=$({},b,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:g,storeKey:d,displayName:R,wrappedComponentName:k,WrappedComponent:N}),V=b.pure;function O(Y){return e(Y.dispatch,z)}var F=V?x.useMemo:function(Y){return Y()};function B(Y){var ce=x.useMemo(function(){var xe=Y.reactReduxForwardedRef,I=qt(Y,ic);return[Y.context,xe,I]},[Y]),T=ce[0],ne=ce[1],ve=ce[2],Q=x.useMemo(function(){return T&&T.Consumer&&nc.isContextConsumer(oe.createElement(T.Consumer,null))?T:w},[T,w]),se=x.useContext(Q),be=!!Y.store&&!!Y.store.getState&&!!Y.store.dispatch;se&&se.store;var de=be?Y.store:se.store,Pe=x.useMemo(function(){return O(de)},[de]),Ee=x.useMemo(function(){if(!g)return sc;var xe=Ya(de,be?null:se.subscription),I=xe.notifyNestedSubs.bind(xe);return[xe,I]},[de,be,se]),fe=Ee[0],Oe=Ee[1],Te=x.useMemo(function(){return be?se:$({},se,{subscription:fe})},[be,se,fe]),je=x.useReducer(lc,oc,uc),Ae=je[0],me=Ae[0],Re=je[1];if(me&&me.error)throw me.error;var ge=x.useRef(),j=x.useRef(ve),X=x.useRef(),le=x.useRef(!1),ue=F(function(){return X.current&&ve===j.current?X.current:Pe(de.getState(),ve)},[de,me,ve]);Jn(cc,[j,ge,le,ve,ue,X,Oe]),Jn(dc,[g,de,fe,Pe,j,ge,le,X,Oe,Re],[de,fe,Pe]);var Se=x.useMemo(function(){return oe.createElement(N,$({},ue,{ref:ne}))},[ne,N,ue]),Be=x.useMemo(function(){return g?oe.createElement(Q.Provider,{value:Te},Se):Se},[Q,Se,Te]);return Be}var ie=V?oe.memo(B):B;if(ie.WrappedComponent=N,ie.displayName=B.displayName=R,v){var E=oe.forwardRef(function(ce,T){return oe.createElement(ie,$({},ce,{reactReduxForwardedRef:T}))});return E.displayName=R,E.WrappedComponent=N,jn(E,N)}return jn(ie,N)}}function Kn(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function mr(e,t){if(Kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Kn(e[r[a]],t[r[a]]))return!1;return!0}function fc(e,t){var r={},n=function(o){var s=e[o];typeof s=="function"&&(r[o]=function(){return t(s.apply(void 0,arguments))})};for(var a in e)n(a);return r}function Kr(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function _n(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Ja(e,t){return function(n,a){a.displayName;var i=function(s,c){return i.dependsOnOwnProps?i.mapToProps(s,c):i.mapToProps(s)};return i.dependsOnOwnProps=!0,i.mapToProps=function(s,c){i.mapToProps=e,i.dependsOnOwnProps=_n(e);var f=i(s,c);return typeof f=="function"&&(i.mapToProps=f,i.dependsOnOwnProps=_n(f),f=i(s,c)),f},i}}function gc(e){return typeof e=="function"?Ja(e):void 0}function hc(e){return e?void 0:Kr(function(t){return{dispatch:t}})}function vc(e){return e&&typeof e=="object"?Kr(function(t){return fc(e,t)}):void 0}const mc=[gc,hc,vc];function bc(e){return typeof e=="function"?Ja(e):void 0}function xc(e){return e?void 0:Kr(function(){return{}})}const yc=[bc,xc];function wc(e,t,r){return $({},r,e,t)}function Dc(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,s;return function(f,g,u){var d=e(f,g,u);return o?(!a||!i(d,s))&&(s=d):(o=!0,s=d),s}}}function Cc(e){return typeof e=="function"?Dc(e):void 0}function Sc(e){return e?void 0:function(){return wc}}const Ic=[Cc,Sc];var Nc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Ec(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function Pc(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,s=a.areStatePropsEqual,c=!1,f,g,u,d,p;function v(D,N){return f=D,g=N,u=e(f,g),d=t(n,g),p=r(u,d,g),c=!0,p}function h(){return u=e(f,g),t.dependsOnOwnProps&&(d=t(n,g)),p=r(u,d,g),p}function m(){return e.dependsOnOwnProps&&(u=e(f,g)),t.dependsOnOwnProps&&(d=t(n,g)),p=r(u,d,g),p}function b(){var D=e(f,g),N=!s(D,u);return u=D,N&&(p=r(u,d,g)),p}function w(D,N){var k=!o(N,g),R=!i(D,f,N,g);return f=D,g=N,k&&R?h():k?m():R?b():p}return function(N,k){return c?w(N,k):v(N,k)}}function Oc(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=qt(t,Nc),o=r(e,i),s=n(e,i),c=a(e,i),f=i.pure?Pc:Ec;return f(o,s,c,e,i)}var Tc=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function br(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function jc(e,t){return e===t}function Rc(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?pc:r,a=t.mapStateToPropsFactories,i=a===void 0?yc:a,o=t.mapDispatchToPropsFactories,s=o===void 0?mc:o,c=t.mergePropsFactories,f=c===void 0?Ic:c,g=t.selectorFactory,u=g===void 0?Oc:g;return function(p,v,h,m){m===void 0&&(m={});var b=m,w=b.pure,D=w===void 0?!0:w,N=b.areStatesEqual,k=N===void 0?jc:N,R=b.areOwnPropsEqual,z=R===void 0?mr:R,V=b.areStatePropsEqual,O=V===void 0?mr:V,F=b.areMergedPropsEqual,B=F===void 0?mr:F,ie=qt(b,Tc),E=br(p,i,"mapStateToProps"),Y=br(v,s,"mapDispatchToProps"),ce=br(h,f,"mergeProps");return n(u,$({methodName:"connect",getDisplayName:function(ne){return"Connect("+ne+")"},shouldHandleStateChanges:!!p,initMapStateToProps:E,initMapDispatchToProps:Y,initMergeProps:ce,pure:D,areStatesEqual:k,areOwnPropsEqual:z,areStatePropsEqual:O,areMergedPropsEqual:B},ie))}}const Ka=Rc();_l(io.unstable_batchedUpdates);function Mc(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function _a(e,t){var r=x.useState(function(){return{inputs:t,result:e()}})[0],n=x.useRef(!0),a=x.useRef(r),i=n.current||!!(t&&a.current.inputs&&Mc(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return x.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function kc(e,t){return _a(function(){return e},t)}var _=_a,L=kc,Ac="Invariant failed";function Bc(e,t){throw new Error(Ac)}var Ke=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,s=a-r,c={top:r,right:n,bottom:a,left:i,width:o,height:s,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},_r=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Qn=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Lc=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},xr={top:0,right:0,bottom:0,left:0},Qr=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?xr:n,i=t.border,o=i===void 0?xr:i,s=t.padding,c=s===void 0?xr:s,f=Ke(_r(r,a)),g=Ke(Qn(r,o)),u=Ke(Qn(g,c));return{marginBox:f,borderBox:Ke(r),paddingBox:g,contentBox:u,margin:a,border:o,padding:c}},We=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&Bc(),a},Fc=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Vt=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,s=Lc(n,r);return Qr({borderBox:s,border:a,margin:i,padding:o})},Yt=function(t,r){return r===void 0&&(r=Fc()),Vt(t,r)},Qa=function(t,r){var n={top:We(r.marginTop),right:We(r.marginRight),bottom:We(r.marginBottom),left:We(r.marginLeft)},a={top:We(r.paddingTop),right:We(r.paddingRight),bottom:We(r.paddingBottom),left:We(r.paddingLeft)},i={top:We(r.borderTopWidth),right:We(r.borderRightWidth),bottom:We(r.borderBottomWidth),left:We(r.borderLeftWidth)};return Qr({borderBox:t,margin:n,padding:a,border:i})},Za=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Qa(r,n)},Zn=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function $c(e,t){return!!(e===t||Zn(e)&&Zn(t))}function Hc(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!$c(e[r],t[r]))return!1;return!0}function De(e,t){t===void 0&&(t=Hc);var r,n=[],a,i=!1;function o(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i&&r===this&&t(s,n)||(a=e.apply(this,s),i=!0,r=this,n=s),a}return o}var Et=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];r=s,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function ei(e,t){}ei.bind(null,"warn");ei.bind(null,"error");function Ze(){}function zc(e,t){return $({},e,{},t)}function Ye(e,t,r){var n=t.map(function(a){var i=zc(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var Gc="Invariant failed";function Xt(e){this.message=e}Xt.prototype.toString=function(){return this.message};function P(e,t){throw new Xt(Gc)}var Wc=function(e){qa(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Ze,n.onWindowError=function(s){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var f=s.error;f instanceof Xt&&s.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(s){n.callbacks=s},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Ye(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof Xt){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(oe.Component),qc=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Jt=function(t){return t+1},Uc=function(t){return`
  You have lifted an item in position `+Jt(t.source.index)+`
`},ti=function(t,r){var n=t.droppableId===r.droppableId,a=Jt(t.index),i=Jt(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},ri=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},Vc=function(t){var r=t.destination;if(r)return ti(t.source,r);var n=t.combine;return n?ri(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},ea=function(t){return`
  The item has returned to its starting position
  of `+Jt(t.index)+`
`},Yc=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+ea(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+ti(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+ri(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+ea(t.source)+`
  `},Wt={dragHandleUsageInstructions:qc,onDragStart:Uc,onDragUpdate:Vc,onDragEnd:Yc},Ce={x:0,y:0},Ne=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},He=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},et=function(t,r){return t.x===r.x&&t.y===r.y},mt=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},lt=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Pt=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},ta=function(t,r){return Math.min.apply(Math,r.map(function(n){return Pt(t,n)}))},ni=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},Xc=function(e,t){var r=Ke({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Rt=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ra=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Jc={top:0,right:0,bottom:0,left:0},Kc=function(t,r){return r?Rt(t,r.scroll.diff.displacement):t},_c=function(t,r,n){if(n&&n.increasedBy){var a;return $({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},Qc=function(t,r){return r&&r.shouldClipSubject?Xc(r.pageMarginBox,t):Ke(t)},ft=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=Kc(t.marginBox,a),o=_c(i,n,r),s=Qc(o,a);return{page:t,withPlaceholder:r,active:s}},Zr=function(e,t){e.frame||P();var r=e.frame,n=He(t,r.scroll.initial),a=mt(n),i=$({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=ft({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),s=$({},e,{frame:i,subject:o});return s};function Kt(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function en(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function nt(e,t){if(e.find)return e.find(t);var r=en(e,t);if(r!==-1)return e[r]}function ai(e){return Array.prototype.slice.call(e)}var ii=De(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),oi=De(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),ir=De(function(e){return Kt(e)}),Zc=De(function(e){return Kt(e)}),bt=De(function(e,t){var r=Zc(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function tn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function or(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var sr=De(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),ed=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=tn(i);if(!o)return null;function s(h){var m={type:"COMBINE",combine:{draggableId:h,droppableId:n.descriptor.id}};return $({},i,{at:m})}var c=i.displaced.all,f=c.length?c[0]:null;if(t)return f?s(f):null;var g=sr(r,a);if(!f){if(!g.length)return null;var u=g[g.length-1];return s(u.descriptor.id)}var d=en(g,function(h){return h.descriptor.id===f});d===-1&&P();var p=d-1;if(p<0)return null;var v=g[p];return s(v.descriptor.id)},xt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},si={point:Ce,value:0},Ot={invisible:{},visible:{},all:[]},td={displaced:Ot,displacedBy:si,at:null},Xe=function(e,t){return function(r){return e<=r&&r<=t}},li=function(e){var t=Xe(e.top,e.bottom),r=Xe(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),s=i&&o;if(s)return!0;var c=n.top<e.top&&n.bottom>e.bottom,f=n.left<e.left&&n.right>e.right,g=c&&f;if(g)return!0;var u=c&&o||f&&i;return u}},rd=function(e){var t=Xe(e.top,e.bottom),r=Xe(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},rn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ci={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},nd=function(e){return function(t){var r=Xe(t.top,t.bottom),n=Xe(t.left,t.right);return function(a){return e===rn?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},ad=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:Ce;return Rt(t,n)},id=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},od=function(t,r,n){return n(r)(t)},nn=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,s=i?ad(r,n):r;return id(s,n,o)&&od(s,a,o)},sd=function(t){return nn($({},t,{isVisibleThroughFrameFn:li}))},di=function(t){return nn($({},t,{isVisibleThroughFrameFn:rd}))},ld=function(t){return nn($({},t,{isVisibleThroughFrameFn:nd(t.destination.axis)}))},cd=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function dd(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ke(_r(r,n))}function Tt(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,f){var g=dd(f,n),u=f.descriptor.id;c.all.push(u);var d=sd({target:g,destination:r,viewport:a,withDroppableDisplacement:!0});if(!d)return c.invisible[f.descriptor.id]=!0,c;var p=cd(u,o,i),v={draggableId:u,shouldAnimate:p};return c.visible[u]=v,c},{all:[],visible:{},invisible:{}})}function ud(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function na(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=ud(t,{inHomeList:r});return{displaced:Ot,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function _t(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,c=e.forceShouldAnimate,f=xt(t,n);if(s==null)return na({insideDestination:r,inHomeList:f,displacedBy:i,destination:n});var g=nt(r,function(h){return h.descriptor.index===s});if(!g)return na({insideDestination:r,inHomeList:f,displacedBy:i,destination:n});var u=sr(t,r),d=r.indexOf(g),p=u.slice(d),v=Tt({afterDragging:p,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:v,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function rt(e,t){return!!t.effected[e]}var pd=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,s=n[o],c=s.descriptor.index,f=rt(o,i);return f?t?c:c-1:t?c+1:c},fd=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index,f=r?c:c+1;return o<s||o>f?null:o},gd=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,c=e.viewport,f=e.afterCritical,g=s.at;if(g||P(),g.type==="REORDER"){var u=fd({isMovingForward:t,isInHomeList:r,location:g.destination,insideDestination:o});return u==null?null:_t({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:u})}var d=pd({isMovingForward:t,destination:i,displaced:s.displaced,draggables:a,combine:g.combine,afterCritical:f});return d==null?null:_t({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})},hd=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return rt(n,r)?i?Ce:mt(a.point):i?a.point:Ce},vd=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=or(r);a||P();var i=a.draggableId,o=n[i].page.borderBox.center,s=hd({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Ne(o,s)},ui=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},md=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},an=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},aa=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return lt(r.line,n.marginBox[r.end]+ui(r,a),an(r,n.marginBox,a))},ia=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return lt(r.line,n.marginBox[r.start]-md(r,a),an(r,n.marginBox,a))},bd=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return lt(r.line,n.contentBox[r.start]+ui(r,a),an(r,n.contentBox,a))},xd=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=bt(a.descriptor.id,n),s=r.page,c=a.axis;if(!o.length)return bd({axis:c,moveInto:a.page,isMoving:s});var f=t.displaced,g=t.displacedBy,u=f.all[0];if(u){var d=n[u];if(rt(u,i))return ia({axis:c,moveRelativeTo:d.page,isMoving:s});var p=Vt(d.page,g.point);return ia({axis:c,moveRelativeTo:p,isMoving:s})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return s.borderBox.center;if(rt(v.descriptor.id,i)){var h=Vt(v.page,mt(i.displacedBy.point));return aa({axis:c,moveRelativeTo:h,isMoving:s})}return aa({axis:c,moveRelativeTo:v.page,isMoving:s})},Ar=function(e,t){var r=e.frame;return r?Ne(t,r.scroll.diff.displacement):t},yd=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,s=n.page.borderBox.center,c=r.at;return!a||!c?s:c.type==="REORDER"?xd({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):vd({impact:r,draggables:i,afterCritical:o})},lr=function(e){var t=yd(e),r=e.droppable,n=r?Ar(r,t):t;return n},pi=function(e,t){var r=He(t,e.scroll.initial),n=mt(r),a=Ke({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function oa(e,t){return e.map(function(r){return t[r]})}function wd(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var Dd=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=pi(r,Ne(r.scroll.current,i)),s=n.frame?Zr(n,Ne(n.frame.scroll.current,i)):n,c=t.displaced,f=Tt({afterDragging:oa(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),g=Tt({afterDragging:oa(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),u={},d={},p=[c,f,g];c.all.forEach(function(h){var m=wd(h,p);if(m){d[h]=m;return}u[h]=!0});var v=$({},t,{displaced:{all:c.all,invisible:u,visible:d}});return v},Cd=function(e,t){return Ne(e.scroll.diff.displacement,t)},on=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=Cd(n,t),i=He(a,r.page.borderBox.center);return Ne(r.client.borderBox.center,i)},fi=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,c=He(n,t.page.borderBox.center),f=Rt(t.page.borderBox,c),g={target:f,destination:r,withDroppableDisplacement:i,viewport:a};return s?ld(g):di(g)},Sd=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,f=e.afterCritical;if(!n.isEnabled)return null;var g=bt(n.descriptor.id,a),u=xt(r,n),d=ed({isMovingForward:t,draggable:r,destination:n,insideDestination:g,previousImpact:i})||gd({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:n,insideDestination:g,previousImpact:i,viewport:o,afterCritical:f});if(!d)return null;var p=lr({impact:d,draggable:r,droppable:n,draggables:a,afterCritical:f}),v=fi({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var h=on({pageBorderBoxCenter:p,draggable:r,viewport:o});return{clientSelection:h,impact:d,scrollJumpRequest:null}}var m=He(p,s),b=Dd({impact:d,viewport:o,destination:n,draggables:a,maxScrollChange:m});return{clientSelection:c,impact:b,scrollJumpRequest:m}},ke=function(t){var r=t.subject.active;return r||P(),r},Id=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var s=n.axis,c=Xe(o[s.start],o[s.end]),f=ir(a).filter(function(u){return u!==n}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return li(i.frame)(ke(u))}).filter(function(u){var d=ke(u);return t?o[s.crossAxisEnd]<d[s.crossAxisEnd]:d[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(u){var d=ke(u),p=Xe(d[s.start],d[s.end]);return c(d[s.start])||c(d[s.end])||p(o[s.start])||p(o[s.end])}).sort(function(u,d){var p=ke(u)[s.crossAxisStart],v=ke(d)[s.crossAxisStart];return t?p-v:v-p}).filter(function(u,d,p){return ke(u)[s.crossAxisStart]===ke(p[0])[s.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var g=f.filter(function(u){var d=Xe(ke(u)[s.start],ke(u)[s.end]);return d(r[s.line])});return g.length===1?g[0]:g.length>1?g.sort(function(u,d){return ke(u)[s.start]-ke(d)[s.start]})[0]:f.sort(function(u,d){var p=ta(r,ra(ke(u))),v=ta(r,ra(ke(d)));return p!==v?p-v:ke(u)[s.start]-ke(d)[s.start]})[0]},sa=function(t,r){var n=t.page.borderBox.center;return rt(t.descriptor.id,r)?He(n,r.displacedBy.point):n},Nd=function(t,r){var n=t.page.borderBox;return rt(t.descriptor.id,r)?Rt(n,mt(r.displacedBy.point)):n},Ed=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(s){return di({target:Nd(s,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(s,c){var f=Pt(t,Ar(n,sa(s,i))),g=Pt(t,Ar(n,sa(c,i)));return f<g?-1:g<f?1:s.descriptor.index-c.descriptor.index});return o[0]||null},Mt=De(function(t,r){var n=r[t.line];return{value:n,point:lt(t.line,n)}}),Pd=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return lt(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=bt(t.descriptor.id,n),s=o.reduce(function(g,u){return g+u.client.marginBox[a.size]},0),c=s+r[a.line],f=c-i;return f<=0?null:lt(a.line,f)},gi=function(t,r){return $({},t,{scroll:$({},t.scroll,{max:r})})},hi=function(t,r,n){var a=t.frame;xt(r,t)&&P(),t.subject.withPlaceholder&&P();var i=Mt(t.axis,r.displaceBy).point,o=Pd(t,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=ft({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return $({},t,{subject:c})}var f=o?Ne(a.scroll.max,o):a.scroll.max,g=gi(a,f),u=ft({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:g});return $({},t,{subject:u,frame:g})},Od=function(t){var r=t.subject.withPlaceholder;r||P();var n=t.frame;if(!n){var a=ft({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return $({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||P();var o=gi(n,i),s=ft({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return $({},t,{subject:s,frame:o})},Td=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var f={displaced:Ot,displacedBy:si,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},g=lr({impact:f,draggable:a,droppable:o,draggables:i,afterCritical:c}),u=xt(a,o)?o:hi(o,a,i),d=fi({draggable:a,destination:u,newPageBorderBoxCenter:g,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?f:null}var p=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var m=r.descriptor.index;return r.descriptor.id===a.descriptor.id||p?m:m+1}(),h=Mt(o.axis,a.displaceBy);return _t({draggable:a,insideDestination:n,destination:o,viewport:s,displacedBy:h,last:Ot,index:v})},jd=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,c=e.afterCritical,f=Id({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:s});if(!f)return null;var g=bt(f.descriptor.id,i),u=Ed({pageBorderBoxCenter:r,viewport:s,destination:f,insideDestination:g,afterCritical:c}),d=Td({previousPageBorderBoxCenter:r,destination:f,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:g,viewport:s,afterCritical:c});if(!d)return null;var p=lr({impact:d,draggable:n,droppable:f,draggables:i,afterCritical:c}),v=on({pageBorderBoxCenter:p,draggable:n,viewport:s});return{clientSelection:v,impact:d,scrollJumpRequest:null}},ze=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Rd=function(t,r){var n=ze(t);return n?r[n]:null},Md=function(e){var t=e.state,r=e.type,n=Rd(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,s=o.axis.direction,c=s==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||s==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var f=r==="MOVE_DOWN"||r==="MOVE_RIGHT",g=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,d=t.dimensions,p=d.draggables,v=d.droppables;return c?Sd({isMovingForward:f,previousPageBorderBoxCenter:u,draggable:g,destination:o,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):jd({isMovingForward:f,previousPageBorderBoxCenter:u,draggable:g,isOver:o,draggables:p,droppables:v,viewport:t.viewport,afterCritical:t.afterCritical})};function ot(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function vi(e){var t=Xe(e.top,e.bottom),r=Xe(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function kd(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Ad(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var s=o.axis,c=lt(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Pt(a,c)}}).sort(function(o,s){return s.distance-o.distance});return i[0]?i[0].id:null}function Bd(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=ir(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!kd(t,o))return!1;if(vi(o)(t.center))return!0;var s=i.axis,c=o.center[s.crossAxisLine],f=t[s.crossAxisStart],g=t[s.crossAxisEnd],u=Xe(o[s.crossAxisStart],o[s.crossAxisEnd]),d=u(f),p=u(g);return!d&&!p?!0:d?f<c:g>c});return a.length?a.length===1?a[0].descriptor.id:Ad({pageBorderBox:t,draggable:r,candidates:a}):null}var mi=function(t,r){return Ke(Rt(t,r))},Ld=function(e,t){var r=e.frame;return r?mi(t,r.scroll.diff.value):t};function bi(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function Fd(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var $d=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,c=n.axis,f=Mt(n.axis,r.displaceBy),g=f.value,u=t[c.start],d=t[c.end],p=sr(r,a),v=nt(p,function(m){var b=m.descriptor.id,w=m.page.borderBox.center[c.line],D=rt(b,s),N=bi({displaced:i,id:b});return D?N?d<=w:u<w-g:N?d<=w+g:u<w}),h=Fd({draggable:r,closest:v,inHomeList:xt(r,n)});return _t({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:f,index:h})},Hd=4,zd=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,c=Mt(a.axis,t.displaceBy),f=c.value,g=r[s.start],u=r[s.end],d=sr(t,i),p=nt(d,function(h){var m=h.descriptor.id,b=h.page.borderBox,w=b[s.size],D=w/Hd,N=rt(m,o),k=bi({displaced:n.displaced,id:m});return N?k?u>b[s.start]+D&&u<b[s.end]-D:g>b[s.start]-f+D&&g<b[s.end]-f-D:k?u>b[s.start]+f+D&&u<b[s.end]+f-D:g>b[s.start]+D&&g<b[s.end]-D});if(!p)return null;var v={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}};return v},xi=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,c=mi(r.page.borderBox,t),f=Bd({pageBorderBox:c,draggable:r,droppables:a});if(!f)return td;var g=a[f],u=bt(g.descriptor.id,n),d=Ld(g,c);return zd({pageBorderBoxWithDroppableScroll:d,draggable:r,previousImpact:i,destination:g,insideDestination:u,afterCritical:s})||$d({pageBorderBoxWithDroppableScroll:d,draggable:r,destination:g,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},sn=function(e,t){var r;return $({},e,(r={},r[t.descriptor.id]=t,r))},Gd=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=ze(r),o=ze(n);if(!i||i===o)return a;var s=a[i];if(!s.subject.withPlaceholder)return a;var c=Od(s);return sn(a,c)},Wd=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=Gd({previousImpact:a,impact:i,droppables:n}),s=ze(i);if(!s)return o;var c=n[s];if(xt(t,c)||c.subject.withPlaceholder)return o;var f=hi(c,t,r);return sn(o,f)},It=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||t.viewport,c=n||t.dimensions,f=r||t.current.client.selection,g=He(f,t.initial.client.selection),u={offset:g,selection:f,borderBoxCenter:Ne(t.initial.client.borderBoxCenter,g)},d={selection:Ne(u.selection,s.scroll.current),borderBoxCenter:Ne(u.borderBoxCenter,s.scroll.current),offset:Ne(u.offset,s.scroll.diff.value)},p={client:u,page:d};if(t.phase==="COLLECTING")return $({phase:"COLLECTING"},t,{dimensions:c,viewport:s,current:p});var v=c.draggables[t.critical.draggable.id],h=i||xi({pageOffset:d.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),m=Wd({draggable:v,impact:h,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),b=$({},t,{current:p,dimensions:{draggables:c.draggables,droppables:m},impact:h,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return b};function qd(e,t){return e.map(function(r){return t[r]})}var yi=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,s=qd(o.all,n),c=Tt({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return $({},t,{displaced:c})},wi=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=lr({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return on({pageBorderBoxCenter:s,draggable:r,viewport:i})},Di=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&P();var a=t.impact,i=n||t.viewport,o=r||t.dimensions,s=o.draggables,c=o.droppables,f=s[t.critical.draggable.id],g=ze(a);g||P();var u=c[g],d=yi({impact:a,viewport:i,destination:u,draggables:s}),p=wi({impact:d,draggable:f,droppable:u,draggables:s,viewport:i,afterCritical:t.afterCritical});return It({impact:d,clientSelection:p,state:t,dimensions:o,viewport:i})},Ud=function(e){return{index:e.index,droppableId:e.droppableId}},Ci=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=Mt(r.axis,t.displaceBy),o=bt(r.descriptor.id,n),s=o.indexOf(t);s===-1&&P();var c=o.slice(s+1),f=c.reduce(function(p,v){return p[v.descriptor.id]=!0,p},{}),g={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:f},u=Tt({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),d={displaced:u,displacedBy:i,at:{type:"REORDER",destination:Ud(t.descriptor)}};return{impact:d,afterCritical:g}},Vd=function(e,t){return{draggables:e.draggables,droppables:sn(e.droppables,t)}},Yd=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=Vt(t.client,r),i=Yt(a,n),o=$({},t,{placeholder:$({},t.placeholder,{client:a}),client:a,page:i});return o},Xd=function(e){var t=e.frame;return t||P(),t},Jd=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,s=r[o],c=Xd(s),f=c.scroll.diff.value,g=Ne(a,f),u=Yd({draggable:i,offset:g,initialWindowScroll:n.scroll.initial});return u})},Kd=function(e){var t=e.state,r=e.published,n=r.modified.map(function(D){var N=t.dimensions.droppables[D.droppableId],k=Zr(N,D.scroll);return k}),a=$({},t.dimensions.droppables,{},ii(n)),i=oi(Jd({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=$({},t.dimensions.draggables,{},i);r.removals.forEach(function(D){delete o[D]});var s={droppables:a,draggables:o},c=ze(t.impact),f=c?s.droppables[c]:null,g=s.draggables[t.critical.draggable.id],u=s.droppables[t.critical.droppable.id],d=Ci({draggable:g,home:u,draggables:o,viewport:t.viewport}),p=d.impact,v=d.afterCritical,h=f&&f.isCombineEnabled?t.impact:p,m=xi({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:h,viewport:t.viewport,afterCritical:v}),b=$({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:m,onLiftImpact:p,dimensions:s,afterCritical:v,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return b;var w=$({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return w},Br=function(t){return t.movementMode==="SNAP"},yr=function(t,r,n){var a=Vd(t.dimensions,r);return!Br(t)||n?It({state:t,dimensions:a}):Di({state:t,dimensions:a})};function wr(e){return e.isDragging&&e.movementMode==="SNAP"?$({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var la={phase:"IDLE",completed:null,shouldFlush:!1},_d=function(e,t){if(e===void 0&&(e=la),t.type==="FLUSH")return $({},la,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&P();var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,s=r.movementMode,c=o.draggables[n.draggable.id],f=o.droppables[n.droppable.id],g={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Ce},u={client:g,page:{selection:Ne(g.selection,i.scroll.initial),borderBoxCenter:Ne(g.selection,i.scroll.initial),offset:Ne(g.selection,i.scroll.diff.value)}},d=ir(o.droppables).every(function(Re){return!Re.isFixedOnPage}),p=Ci({draggable:c,home:f,draggables:o.draggables,viewport:i}),v=p.impact,h=p.afterCritical,m={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:d,impact:v,afterCritical:h,onLiftImpact:v,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return m}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var b=$({phase:"COLLECTING"},e,{phase:"COLLECTING"});return b}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||P(),Kd({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ot(e)||P();var w=t.payload.client;return et(w,e.current.client.selection)?e:It({state:e,clientSelection:w,impact:Br(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return wr(e);ot(e)||P();var D=t.payload,N=D.id,k=D.newScroll,R=e.dimensions.droppables[N];if(!R)return e;var z=Zr(R,k);return yr(e,z,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ot(e)||P();var V=t.payload,O=V.id,F=V.isEnabled,B=e.dimensions.droppables[O];B||P(),B.isEnabled===F&&P();var ie=$({},B,{isEnabled:F});return yr(e,ie,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ot(e)||P();var E=t.payload,Y=E.id,ce=E.isCombineEnabled,T=e.dimensions.droppables[Y];T||P(),T.isCombineEnabled===ce&&P();var ne=$({},T,{isCombineEnabled:ce});return yr(e,ne,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ot(e)||P(),e.isWindowScrollAllowed||P();var ve=t.payload.newScroll;if(et(e.viewport.scroll.current,ve))return wr(e);var Q=pi(e.viewport,ve);return Br(e)?Di({state:e,viewport:Q}):It({state:e,viewport:Q})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ot(e))return e;var se=t.payload.maxScroll;if(et(se,e.viewport.scroll.max))return e;var be=$({},e.viewport,{scroll:$({},e.viewport.scroll,{max:se})});return $({phase:"DRAGGING"},e,{viewport:be})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var de=Md({state:e,type:t.type});return de?It({state:e,impact:de.impact,clientSelection:de.clientSelection,scrollJumpRequest:de.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var Pe=t.payload.reason;e.phase!=="COLLECTING"&&P();var Ee=$({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Pe});return Ee}if(t.type==="DROP_ANIMATE"){var fe=t.payload,Oe=fe.completed,Te=fe.dropDuration,je=fe.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||P();var Ae={phase:"DROP_ANIMATING",completed:Oe,dropDuration:Te,newHomeClientOffset:je,dimensions:e.dimensions};return Ae}if(t.type==="DROP_COMPLETE"){var me=t.payload.completed;return{phase:"IDLE",completed:me,shouldFlush:!1}}return e},Qd=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Zd=function(t){return{type:"LIFT",payload:t}},eu=function(t){return{type:"INITIAL_PUBLISH",payload:t}},tu=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},ru=function(){return{type:"COLLECTION_STARTING",payload:null}},nu=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},au=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},iu=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Si=function(t){return{type:"MOVE",payload:t}},ou=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},su=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},lu=function(){return{type:"MOVE_UP",payload:null}},cu=function(){return{type:"MOVE_DOWN",payload:null}},du=function(){return{type:"MOVE_RIGHT",payload:null}},uu=function(){return{type:"MOVE_LEFT",payload:null}},ln=function(){return{type:"FLUSH",payload:null}},pu=function(t){return{type:"DROP_ANIMATE",payload:t}},cn=function(t){return{type:"DROP_COMPLETE",payload:t}},Ii=function(t){return{type:"DROP",payload:t}},fu=function(t){return{type:"DROP_PENDING",payload:t}},Ni=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},gu=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,s=o.id,c=o.clientSelection,f=o.movementMode,g=r();g.phase==="DROP_ANIMATING"&&n(cn({completed:g.completed})),r().phase!=="IDLE"&&P(),n(ln()),n(Qd({draggableId:s,movementMode:f}));var u={shouldPublishImmediately:f==="SNAP"},d={draggableId:s,scrollOptions:u},p=e.startPublishing(d),v=p.critical,h=p.dimensions,m=p.viewport;n(eu({critical:v,dimensions:h,clientSelection:c,movementMode:f,viewport:m}))}}}},hu=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},dn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},jt={opacity:{drop:0,combining:.7},scale:{drop:.75}},un={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},it=un.outOfTheWay+"s "+dn.outOfTheWay,Nt={fluid:"opacity "+it,snap:"transform "+it+", opacity "+it,drop:function(t){var r=t+"s "+dn.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+it,placeholder:"height "+it+", width "+it+", margin "+it},ca=function(t){return et(t,Ce)?null:"translate("+t.x+"px, "+t.y+"px)"},Lr={moveTo:ca,drop:function(t,r){var n=ca(t);return n?r?n+" scale("+jt.scale.drop+")":n:null}},Fr=un.minDropTime,Ei=un.maxDropTime,vu=Ei-Fr,da=1500,mu=.6,bu=function(e){var t=e.current,r=e.destination,n=e.reason,a=Pt(t,r);if(a<=0)return Fr;if(a>=da)return Ei;var i=a/da,o=Fr+vu*i,s=n==="CANCEL"?o*mu:o;return Number(s.toFixed(2))},xu=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,s=n.droppables,c=ze(t),f=c?s[c]:null,g=s[r.descriptor.droppableId],u=wi({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:f||g,viewport:a}),d=He(u,r.client.borderBox.center);return d},yu=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var s=yi({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=$({},n,{displaced:Ot});return{impact:c,didDropInsideDroppable:!0}},wu=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(fu({reason:o}));return}if(i.phase!=="IDLE"){var s=i.phase==="DROP_PENDING"&&i.isWaiting;s&&P(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||P();var c=i.critical,f=i.dimensions,g=f.draggables[i.critical.draggable.id],u=yu({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=u.impact,p=u.didDropInsideDroppable,v=p?tn(d):null,h=p?or(d):null,m={index:c.draggable.index,droppableId:c.droppable.id},b={draggableId:g.descriptor.id,type:g.descriptor.type,source:m,reason:o,mode:i.movementMode,destination:v,combine:h},w=xu({impact:d,draggable:g,dimensions:f,viewport:i.viewport,afterCritical:i.afterCritical}),D={critical:i.critical,afterCritical:i.afterCritical,result:b,impact:d},N=!et(i.current.client.offset,w)||!!b.combine;if(!N){r(cn({completed:D}));return}var k=bu({current:i.current.client.offset,destination:w,reason:o}),R={newHomeClientOffset:w,dropDuration:k,completed:D};r(pu(R))}}}},Pi=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Du(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Cu(e){var t=e.onWindowScroll;function r(){t(Pi())}var n=Et(r),a=Du(n),i=Ze;function o(){return i!==Ze}function s(){o()&&P(),i=Ye(window,[a])}function c(){o()||P(),n.cancel(),i(),i=Ze}return{start:s,stop:c,isActive:o}}var Su=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Iu=function(e){var t=Cu({onWindowScroll:function(n){e.dispatch(ou({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Su(n)&&t.stop(),r(n)}}},Nu=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},Eu=function(){var e=[],t=function(i){var o=en(e,function(f){return f.timerId===i});o===-1&&P();var s=e.splice(o,1),c=s[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),s={timerId:o,callback:i};e.push(s)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},Pu=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Ou=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Tu=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},wt=function(t,r){r()},At=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Dr=function(t,r,n,a){if(!t){n(a(r));return}var i=Nu(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},ju=function(e,t){var r=Eu(),n=null,a=function(d,p){n&&P(),wt("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var h={draggableId:d,mode:p};v(h)}})},i=function(d,p){n&&P(),wt("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(At(d,p))})},o=function(d,p){n&&P();var v=At(d,p);n={mode:p,lastCritical:d,lastLocation:v.source,lastCombine:null},r.add(function(){wt("onDragStart",function(){return Dr(e().onDragStart,v,t,Wt.onDragStart)})})},s=function(d,p){var v=tn(p),h=or(p);n||P();var m=!Tu(d,n.lastCritical);m&&(n.lastCritical=d);var b=!Pu(n.lastLocation,v);b&&(n.lastLocation=v);var w=!Ou(n.lastCombine,h);if(w&&(n.lastCombine=h),!(!m&&!b&&!w)){var D=$({},At(d,n.mode),{combine:h,destination:v});r.add(function(){wt("onDragUpdate",function(){return Dr(e().onDragUpdate,D,t,Wt.onDragUpdate)})})}},c=function(){n||P(),r.flush()},f=function(d){n||P(),n=null,wt("onDragEnd",function(){return Dr(e().onDragEnd,d,t,Wt.onDragEnd)})},g=function(){if(n){var d=$({},At(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});f(d)}};return{beforeCapture:a,beforeStart:i,start:o,update:s,flush:c,drop:f,abort:g}},Ru=function(e,t){var r=ju(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var s=i.payload.completed.result;r.flush(),a(i),r.drop(s);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Mu=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&P(),e.dispatch(cn({completed:n.completed}))}}},ku=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Ni())}};r=requestAnimationFrame(function(){r=null,t=Ye(window,[o])})}}}},Au=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},Bu=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Lu=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Fu=function(e){return function(t){return function(r){return function(n){if(Lu(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&P(),e.start(a);return}r(n),e.scroll(t.getState())}}}},$u=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Ii({reason:n.reason})))}}}},Hu=Ma,zu=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return Wr(_d,Hu(rs(hu(n),Au(t),gu(t),wu,Mu,ku,$u,Fu(o),Iu,Bu(r),Ru(a,i))))},Cr=function(){return{additions:{},removals:{},modified:{}}};function Gu(e){var t=e.registry,r=e.callbacks,n=Cr(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,u=g.additions,d=g.removals,p=g.modified,v=Object.keys(u).map(function(b){return t.draggable.getById(b).getDimension(Ce)}).sort(function(b,w){return b.descriptor.index-w.descriptor.index}),h=Object.keys(p).map(function(b){var w=t.droppable.getById(b),D=w.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:D}}),m={additions:v,removals:Object.keys(d),modified:h};n=Cr(),r.publish(m)}))},o=function(g){var u=g.descriptor.id;n.additions[u]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],i()},s=function(g){var u=g.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Cr())};return{add:o,remove:s,stop:c}}var Oi=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=He({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},Ti=function(){var e=document.documentElement;return e||P(),e},ji=function(){var e=Ti(),t=Oi({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},Wu=function(){var e=Pi(),t=ji(),r=e.y,n=e.x,a=Ti(),i=a.clientWidth,o=a.clientHeight,s=n+i,c=r+o,f=Ke({top:r,left:n,right:s,bottom:c}),g={frame:f,scroll:{initial:e,current:e,max:t,diff:{value:Ce,displacement:Ce}}};return g},qu=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=Wu(),i=a.scroll.current,o=t.droppable,s=n.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),f={draggables:oi(c),droppables:ii(s)},g={dimensions:f,critical:t,viewport:a};return g};function ua(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Uu=function(e,t){var r=null,n=Gu({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(p,v){e.droppable.exists(p)||P(),r&&t.updateDroppableIsEnabled({id:p,isEnabled:v})},i=function(p,v){r&&(e.droppable.exists(p)||P(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:v}))},o=function(p,v){r&&(e.droppable.exists(p)||P(),t.updateDroppableScroll({id:p,newScroll:v}))},s=function(p,v){r&&e.droppable.getById(p).callbacks.scroll(v)},c=function(){if(r){n.stop();var p=r.critical.droppable;e.droppable.getAllByType(p.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},f=function(p){r||P();var v=r.critical.draggable;p.type==="ADDITION"&&ua(e,v,p.value)&&n.add(p.value),p.type==="REMOVAL"&&ua(e,v,p.value)&&n.remove(p.value)},g=function(p){r&&P();var v=e.draggable.getById(p.draggableId),h=e.droppable.getById(v.descriptor.droppableId),m={draggable:v.descriptor,droppable:h.descriptor},b=e.subscribe(f);return r={critical:m,unsubscribe:b},qu({critical:m,registry:e,scrollOptions:p.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:s,updateDroppableScroll:o,startPublishing:g,stopPublishing:c};return u},Ri=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},Vu=function(e){window.scrollBy(e.x,e.y)},Yu=De(function(e){return ir(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Xu=function(t,r){var n=nt(Yu(r),function(a){return a.frame||P(),vi(a.frame.pageMarginBox)(t)});return n},Ju=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=Xu(t,n);return i},tt={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Ku=function(e,t){var r=e[t.size]*tt.startFromPercentage,n=e[t.size]*tt.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},Mi=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},pn=1,_u=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return tt.maxPixelScroll;if(e===t.startScrollingFrom)return pn;var r=Mi({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=tt.maxPixelScroll*tt.ease(n);return Math.ceil(a)},pa=tt.durationDampening.accelerateAt,fa=tt.durationDampening.stopDampeningAt,Qu=function(e,t){var r=t,n=fa,a=Date.now(),i=a-r;if(i>=fa)return e;if(i<pa)return pn;var o=Mi({startOfRange:pa,endOfRange:n,current:i}),s=e*tt.ease(o);return Math.ceil(s)},ga=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=_u(t,r);return i===0?0:a?Math.max(Qu(i,n),pn):i},ha=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=Ku(t,a),s=r[a.end]<r[a.start];return s?ga({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*ga({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},Zu=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},ep=ni(function(e){return e===0?0:e}),ki=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},s=ha({container:r,distanceToEdges:o,dragStartTime:t,axis:rn,shouldUseTimeDampening:i}),c=ha({container:r,distanceToEdges:o,dragStartTime:t,axis:ci,shouldUseTimeDampening:i}),f=ep({x:c,y:s});if(et(f,Ce))return null;var g=Zu({container:r,subject:n,proposedScroll:f});return g?et(g,Ce)?null:g:null},tp=ni(function(e){return e===0?0:e>0?1:-1}),fn=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Ne(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return et(o,Ce)?null:o}}(),Ai=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=tp(a),s=fn({max:i,current:n,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},gn=function(t,r){return Ai({current:t.scroll.current,max:t.scroll.max,change:r})},rp=function(t,r){if(!gn(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return fn({current:a,max:n,change:r})},hn=function(t,r){var n=t.frame;return n?Ai({current:n.scroll.current,max:n.scroll.max,change:r}):!1},np=function(t,r){var n=t.frame;return!n||!hn(t,r)?null:fn({current:n.scroll.current,max:n.scroll.max,change:r})},ap=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=ki({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&gn(t,o)?o:null},ip=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=ki({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return s&&hn(t,s)?s:null},va=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],c=s.page.marginBox;if(t.isWindowScrollAllowed){var f=t.viewport,g=ap({dragStartTime:r,viewport:f,subject:c,center:o,shouldUseTimeDampening:n});if(g){a(g);return}}var u=Ju({center:o,destination:ze(t.impact),droppables:t.dimensions.droppables});if(u){var d=ip({dragStartTime:r,droppable:u,subject:c,center:o,shouldUseTimeDampening:n});d&&i(u.descriptor.id,d)}},op=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Et(t),a=Et(r),i=null,o=function(g){i||P();var u=i,d=u.shouldUseTimeDampening,p=u.dragStartTime;va({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:p,shouldUseTimeDampening:d})},s=function(g){i&&P();var u=Date.now(),d=!1,p=function(){d=!0};va({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),i={dragStartTime:u,shouldUseTimeDampening:d},d&&o(g)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:s,stop:c,scroll:o}},sp=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(f,g){var u=Ne(f.current.client.selection,g);t({client:u})},i=function(f,g){if(!hn(f,g))return g;var u=np(f,g);if(!u)return r(f.descriptor.id,g),null;var d=He(g,u);r(f.descriptor.id,d);var p=He(g,d);return p},o=function(f,g,u){if(!f||!gn(g,u))return u;var d=rp(g,u);if(!d)return n(u),null;var p=He(u,d);n(p);var v=He(u,p);return v},s=function(f){var g=f.scrollJumpRequest;if(g){var u=ze(f.impact);u||P();var d=i(f.dimensions.droppables[u],g);if(d){var p=f.viewport,v=o(f.isWindowScrollAllowed,p,d);v&&a(f,v)}}};return s},lp=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=op({scrollWindow:r,scrollDroppable:t}),i=sp({move:n,scrollWindow:r,scrollDroppable:t}),o=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){a.scroll(f);return}f.scrollJumpRequest&&i(f)}},s={scroll:o,start:a.start,stop:a.stop};return s},gt="data-rbd",ht=function(){var e=gt+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),$r=function(){var e=gt+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),cp=function(){var e=gt+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),ma={contextId:gt+"-scroll-container-context-id"},dp=function(t){return function(r){return"["+r+'="'+t+'"]'}},Dt=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},up="pointer-events: none;",pp=function(e){var t=dp(e),r=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ht.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:up,dropAnimating:s}}}(),n=function(){var s=`
      transition: `+Nt.outOfTheWay+`;
    `;return{selector:t($r.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),a={selector:t(cp.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:Dt(o,"always"),resting:Dt(o,"resting"),dragging:Dt(o,"dragging"),dropAnimating:Dt(o,"dropAnimating"),userCancel:Dt(o,"userCancel")}},Ge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,Sr=function(){var t=document.querySelector("head");return t||P(),t},ba=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function fp(e,t){var r=_(function(){return pp(e)},[e]),n=x.useRef(null),a=x.useRef(null),i=L(De(function(u){var d=a.current;d||P(),d.textContent=u}),[]),o=L(function(u){var d=n.current;d||P(),d.textContent=u},[]);Ge(function(){!n.current&&!a.current||P();var u=ba(t),d=ba(t);return n.current=u,a.current=d,u.setAttribute(gt+"-always",e),d.setAttribute(gt+"-dynamic",e),Sr().appendChild(u),Sr().appendChild(d),o(r.always),i(r.resting),function(){var p=function(h){var m=h.current;m||P(),Sr().removeChild(m),h.current=null};p(n),p(a)}},[t,o,i,r.always,r.resting,e]);var s=L(function(){return i(r.dragging)},[i,r.dragging]),c=L(function(u){if(u==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),f=L(function(){a.current&&i(r.resting)},[i,r.resting]),g=_(function(){return{dragging:s,dropping:c,resting:f}},[s,c,f]);return g}var Bi=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function cr(e){return e instanceof Bi(e).HTMLElement}function gp(e,t){var r="["+ht.contextId+'="'+e+'"]',n=ai(document.querySelectorAll(r));if(!n.length)return null;var a=nt(n,function(i){return i.getAttribute(ht.draggableId)===t});return!a||!cr(a)?null:a}function hp(e){var t=x.useRef({}),r=x.useRef(null),n=x.useRef(null),a=x.useRef(!1),i=L(function(d,p){var v={id:d,focus:p};return t.current[d]=v,function(){var m=t.current,b=m[d];b!==v&&delete m[d]}},[]),o=L(function(d){var p=gp(e,d);p&&p!==document.activeElement&&p.focus()},[e]),s=L(function(d,p){r.current===d&&(r.current=p)},[]),c=L(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var d=r.current;d&&o(d)}))},[o]),f=L(function(d){r.current=null;var p=document.activeElement;p&&p.getAttribute(ht.draggableId)===d&&(r.current=d)},[]);Ge(function(){return a.current=!0,function(){a.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var g=_(function(){return{register:i,tryRecordFocus:f,tryRestoreFocusRecorded:c,tryShiftRecord:s}},[i,f,c,s]);return g}function vp(){var e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var p=t.indexOf(u);p!==-1&&t.splice(p,1)}}function n(u){t.length&&t.forEach(function(d){return d(u)})}function a(u){return e.draggables[u]||null}function i(u){var d=a(u);return d||P(),d}var o={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,p){var v=e.draggables[p.descriptor.id];v&&v.uniqueId===d.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var p=d.descriptor.id,v=a(p);v&&d.uniqueId===v.uniqueId&&(delete e.draggables[p],n({type:"REMOVAL",value:d}))},getById:i,findById:a,exists:function(d){return!!a(d)},getAllByType:function(d){return Kt(e.draggables).filter(function(p){return p.descriptor.type===d})}};function s(u){return e.droppables[u]||null}function c(u){var d=s(u);return d||P(),d}var f={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var p=s(d.descriptor.id);p&&d.uniqueId===p.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:s,exists:function(d){return!!s(d)},getAllByType:function(d){return Kt(e.droppables).filter(function(p){return p.descriptor.type===d})}};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:f,subscribe:r,clean:g}}function mp(){var e=_(vp,[]);return x.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var vn=oe.createContext(null),Qt=function(){var e=document.body;return e||P(),e},bp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},xp=function(t){return"rbd-announcement-"+t};function yp(e){var t=_(function(){return xp(e)},[e]),r=x.useRef(null);x.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),$(i.style,bp),Qt().appendChild(i),function(){setTimeout(function(){var c=Qt();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=L(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var wp=0,Dp={separator:"::"};function mn(e,t){return t===void 0&&(t=Dp),_(function(){return""+e+t.separator+wp++},[t.separator,e])}function Cp(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Sp(e){var t=e.contextId,r=e.text,n=mn("hidden-text",{separator:"-"}),a=_(function(){return Cp({contextId:t,uniqueId:n})},[n,t]);return x.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",Qt().appendChild(o),function(){var c=Qt();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var dr=oe.createContext(null);function Li(e){var t=x.useRef(e);return x.useEffect(function(){t.current=e}),t}function Ip(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&P();var s={abandon:o};return e=s,s}function a(){e||P(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var Np=9,Ep=13,bn=27,Fi=32,Pp=33,Op=34,Tp=35,jp=36,Rp=37,Mp=38,kp=39,Ap=40,Bt,Bp=(Bt={},Bt[Ep]=!0,Bt[Np]=!0,Bt),$i=function(e){Bp[e.keyCode]&&e.preventDefault()},ur=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=nt(t,function(n){return"on"+n in document});return r||e}(),Hi=0,xa=5;function Lp(e,t){return Math.abs(t.x-e.x)>=xa||Math.abs(t.y-e.y)>=xa}var ya={type:"IDLE"};function Fp(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,c=o.clientX,f=o.clientY;if(s===Hi){var g={x:c,y:f},u=n();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(g);return}u.type!=="PENDING"&&P();var d=u.point;if(Lp(d,g)){o.preventDefault();var p=u.actions.fluidLift(g);a({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(o){var s=n();if(s.type!=="DRAGGING"){t();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var s=n();if(s.type==="PENDING"){t();return}if(o.keyCode===bn){o.preventDefault(),t();return}$i(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=n();if(s.type==="IDLE"&&P(),s.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:ur,fn:t}]}function $p(e){var t=x.useRef(ya),r=x.useRef(Ze),n=_(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===Hi&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var d=e.findClosestDraggableId(u);if(d){var p=e.tryGetLock(d,o,{sourceEvent:u});if(p){u.preventDefault();var v={x:u.clientX,y:u.clientY};r.current(),f(p,v)}}}}}},[e]),a=_(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var d=e.findClosestDraggableId(u);if(d){var p=e.findOptionsForDraggable(d);p&&(p.shouldRespectForcePress||e.canGetLock(d)&&u.preventDefault())}}}}},[e]),i=L(function(){var u={passive:!1,capture:!0};r.current=Ye(window,[a,n],u)},[a,n]),o=L(function(){var g=t.current;g.type!=="IDLE"&&(t.current=ya,r.current(),i())},[i]),s=L(function(){var g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),c=L(function(){var u={capture:!0,passive:!1},d=Fp({cancel:s,completed:o,getPhase:function(){return t.current},setPhase:function(v){t.current=v}});r.current=Ye(window,d,u)},[s,o]),f=L(function(u,d){t.current.type!=="IDLE"&&P(),t.current={type:"PENDING",point:d,actions:u},c()},[c]);Ge(function(){return i(),function(){r.current()}},[i])}var ut;function Hp(){}var zp=(ut={},ut[Op]=!0,ut[Pp]=!0,ut[jp]=!0,ut[Tp]=!0,ut);function Gp(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===bn){i.preventDefault(),r();return}if(i.keyCode===Fi){i.preventDefault(),n();return}if(i.keyCode===Ap){i.preventDefault(),e.moveDown();return}if(i.keyCode===Mp){i.preventDefault(),e.moveUp();return}if(i.keyCode===kp){i.preventDefault(),e.moveRight();return}if(i.keyCode===Rp){i.preventDefault(),e.moveLeft();return}if(zp[i.keyCode]){i.preventDefault();return}$i(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:ur,fn:r}]}function Wp(e){var t=x.useRef(Hp),r=_(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Fi)return;var o=e.findClosestDraggableId(i);if(!o)return;var s=e.tryGetLock(o,g,{sourceEvent:i});if(!s)return;i.preventDefault();var c=!0,f=s.snapLift();t.current();function g(){c||P(),c=!1,t.current(),n()}t.current=Ye(window,Gp(f,g),{capture:!0,passive:!1})}}},[e]),n=L(function(){var i={passive:!1,capture:!0};t.current=Ye(window,[r],i)},[r]);Ge(function(){return n(),function(){t.current()}},[n])}var Ir={type:"IDLE"},qp=120,Up=.15;function Vp(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===bn&&a.preventDefault(),t()}},{eventName:ur,fn:t}]}function Yp(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var s=i.touches[0],c=s.clientX,f=s.clientY,g={x:c,y:f};i.preventDefault(),o.actions.move(g)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&P();var s=i.touches[0];if(s){var c=s.force>=Up;if(c){var f=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){f&&t();return}if(f){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:ur,fn:t}]}function Xp(e){var t=x.useRef(Ir),r=x.useRef(Ze),n=L(function(){return t.current},[]),a=L(function(p){t.current=p},[]),i=_(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var v=e.findClosestDraggableId(p);if(v){var h=e.tryGetLock(v,s,{sourceEvent:p});if(h){var m=p.touches[0],b=m.clientX,w=m.clientY,D={x:b,y:w};r.current(),u(h,D)}}}}}},[e]),o=L(function(){var p={capture:!0,passive:!1};r.current=Ye(window,[i],p)},[i]),s=L(function(){var d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),a(Ir),r.current(),o())},[o,a]),c=L(function(){var d=t.current;s(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[s]),f=L(function(){var p={capture:!0,passive:!1},v={cancel:c,completed:s,getPhase:n},h=Ye(window,Yp(v),p),m=Ye(window,Vp(v),p);r.current=function(){h(),m()}},[c,n,s]),g=L(function(){var p=n();p.type!=="PENDING"&&P();var v=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[n,a]),u=L(function(p,v){n().type!=="IDLE"&&P();var h=setTimeout(g,qp);a({type:"PENDING",point:v,actions:p,longPressTimerId:h}),f()},[f,n,a,g]);Ge(function(){return o(),function(){r.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(Ir))}},[n,o,a]),Ge(function(){var p=Ye(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var Jp={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function zi(e,t){if(t==null)return!1;var r=!!Jp[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:zi(e,t.parentElement)}function Kp(e,t){var r=t.target;return cr(r)?zi(e,r):!1}var _p=function(e){return Ke(e.getBoundingClientRect()).center};function Qp(e){return e instanceof Bi(e).Element}var Zp=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=nt(t,function(n){return n in Element.prototype});return r||e}();function Gi(e,t){return e==null?null:e[Zp](t)?e:Gi(e.parentElement,t)}function ef(e,t){return e.closest?e.closest(t):Gi(e,t)}function tf(e){return"["+ht.contextId+'="'+e+'"]'}function rf(e,t){var r=t.target;if(!Qp(r))return null;var n=tf(e),a=ef(r,n);return!a||!cr(a)?null:a}function nf(e,t){var r=rf(e,t);return r?r.getAttribute(ht.draggableId):null}function af(e,t){var r="["+$r.contextId+'="'+e+'"]',n=ai(document.querySelectorAll(r)),a=nt(n,function(i){return i.getAttribute($r.id)===t});return!a||!cr(a)?null:a}function of(e){e.preventDefault()}function Lt(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function Wi(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!Ri(r.getState(),a))}function sf(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,c=Wi({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var f=a.draggable.getById(i),g=af(r,f.descriptor.id);if(!g||s&&!f.options.canDragInteractiveElements&&Kp(g,s))return null;var u=t.claim(o||Ze),d="PRE_DRAG";function p(){return f.options.shouldRespectForcePress}function v(){return t.isActive(u)}function h(R,z){Lt({expected:R,phase:d,isLockActive:v,shouldWarn:!0})&&n.dispatch(z())}var m=h.bind(null,"DRAGGING");function b(R){function z(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(z(),d!=="PRE_DRAG"&&P()),n.dispatch(Zd(R.liftActionArgs)),d="DRAGGING";function V(O,F){if(F===void 0&&(F={shouldBlockNextClick:!1}),R.cleanup(),F.shouldBlockNextClick){var B=Ye(window,[{eventName:"click",fn:of,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(B)}z(),n.dispatch(Ii({reason:O}))}return $({isActive:function(){return Lt({expected:"DRAGGING",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(F){return V("DROP",F)},cancel:function(F){return V("CANCEL",F)}},R.actions)}function w(R){var z=Et(function(O){m(function(){return Si({client:O})})}),V=b({liftActionArgs:{id:i,clientSelection:R,movementMode:"FLUID"},cleanup:function(){return z.cancel()},actions:{move:z}});return $({},V,{move:z})}function D(){var R={moveUp:function(){return m(lu)},moveRight:function(){return m(du)},moveDown:function(){return m(cu)},moveLeft:function(){return m(uu)}};return b({liftActionArgs:{id:i,clientSelection:_p(g),movementMode:"SNAP"},cleanup:Ze,actions:R})}function N(){var R=Lt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!0});R&&t.release()}var k={isActive:function(){return Lt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:w,snapLift:D,abort:N};return k}var lf=[$p,Wp,Xp];function cf(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?lf:[],a||[]),s=x.useState(function(){return Ip()})[0],c=L(function(w,D){w.isDragging&&!D.isDragging&&s.tryAbandon()},[s]);Ge(function(){var w=r.getState(),D=r.subscribe(function(){var N=r.getState();c(w,N),w=N});return D},[s,r,c]),Ge(function(){return s.tryAbandon},[s.tryAbandon]);for(var f=L(function(b){return Wi({lockAPI:s,registry:n,store:r,draggableId:b})},[s,n,r]),g=L(function(b,w,D){return sf({lockAPI:s,registry:n,contextId:t,store:r,draggableId:b,forceSensorStop:w,sourceEvent:D&&D.sourceEvent?D.sourceEvent:null})},[t,s,n,r]),u=L(function(b){return nf(t,b)},[t]),d=L(function(b){var w=n.draggable.findById(b);return w?w.options:null},[n.draggable]),p=L(function(){s.isClaimed()&&(s.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(ln()))},[s,r]),v=L(s.isClaimed,[s]),h=_(function(){return{canGetLock:f,tryGetLock:g,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:p,isLockClaimed:v}},[f,g,u,d,p,v]),m=0;m<o.length;m++)o[m](h)}var df=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Ct(e){return e.current||P(),e.current}function uf(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=x.useRef(null),s=Li(e),c=L(function(){return df(s.current)},[s]),f=yp(t),g=Sp({contextId:t,text:i}),u=fp(t,a),d=L(function(O){Ct(o).dispatch(O)},[]),p=_(function(){return Fn({publishWhileDragging:tu,updateDroppableScroll:nu,updateDroppableIsEnabled:au,updateDroppableIsCombineEnabled:iu,collectionStarting:ru},d)},[d]),v=mp(),h=_(function(){return Uu(v,p)},[v,p]),m=_(function(){return lp($({scrollWindow:Vu,scrollDroppable:h.scrollDroppable},Fn({move:Si},d)))},[h.scrollDroppable,d]),b=hp(t),w=_(function(){return zu({announce:f,autoScroller:m,dimensionMarshal:h,focusMarshal:b,getResponders:c,styleMarshal:u})},[f,m,h,b,c,u]);o.current=w;var D=L(function(){var O=Ct(o),F=O.getState();F.phase!=="IDLE"&&O.dispatch(ln())},[]),N=L(function(){var O=Ct(o).getState();return O.isDragging||O.phase==="DROP_ANIMATING"},[]),k=_(function(){return{isDragging:N,tryAbort:D}},[N,D]);r(k);var R=L(function(O){return Ri(Ct(o).getState(),O)},[]),z=L(function(){return ot(Ct(o).getState())},[]),V=_(function(){return{marshal:h,focus:b,contextId:t,canLift:R,isMovementAllowed:z,dragHandleUsageInstructionsId:g,registry:v}},[t,h,g,b,R,z,v]);return cf({contextId:t,store:w,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(function(){return D},[D]),oe.createElement(dr.Provider,{value:V},oe.createElement(ec,{context:vn,store:w},e.children))}var pf=0;function ff(){return _(function(){return""+pf++},[])}function gf(e){var t=ff(),r=e.dragHandleUsageInstructions||Wt.dragHandleUsageInstructions;return oe.createElement(Wc,null,function(n){return oe.createElement(uf,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var qi=function(t){return function(r){return t===r}},hf=qi("scroll"),vf=qi("auto"),wa=function(t,r){return r(t.overflowX)||r(t.overflowY)},mf=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return wa(n,hf)||wa(n,vf)},bf=function(){return!1},xf=function e(t){return t==null?null:t===document.body?bf()?t:null:t===document.documentElement?null:mf(t)?t:e(t.parentElement)},Hr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},yf=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},wf=function(e){var t=xf(e),r=yf(e);return{closestScrollable:t,isFixedOnPage:r}},Df=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,c=e.closest,f=function(){if(!c)return null;var p=c.scrollSize,v=c.client,h=Oi({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:h,diff:{value:Ce,displacement:Ce}}}}(),g=i==="vertical"?rn:ci,u=ft({page:s,withPlaceholder:null,axis:g,frame:f}),d={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:r,client:o,page:s,frame:f,subject:u};return d},Cf=function(t,r){var n=Za(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,s=i+r.scrollWidth,c={top:a,right:s,bottom:o,left:i},f=_r(c,n.border),g=Qr({borderBox:f,margin:n.margin,border:n.border,padding:n.padding});return g},Sf=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,f=n.closestScrollable,g=Cf(t,f),u=Yt(g,a),d=function(){if(!f)return null;var v=Za(f),h={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:v,page:Yt(v,a),scroll:Hr(f),scrollSize:h,shouldClipSubject:c}}(),p=Df({descriptor:r,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:i,client:g,page:u,closest:d});return p},If={passive:!1},Nf={passive:!0},Da=function(e){return e.shouldPublishImmediately?If:Nf};function Zt(e){var t=x.useContext(e);return t||P(),t}var Ft=function(t){return t&&t.env.closestScrollable||null};function Ef(e){var t=x.useRef(null),r=Zt(dr),n=mn("droppable"),a=r.registry,i=r.marshal,o=Li(e),s=_(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=x.useRef(s),f=_(function(){return De(function(N,k){t.current||P();var R={x:N,y:k};i.updateDroppableScroll(s.id,R)})},[s.id,i]),g=L(function(){var N=t.current;return!N||!N.env.closestScrollable?Ce:Hr(N.env.closestScrollable)},[]),u=L(function(){var N=g();f(N.x,N.y)},[g,f]),d=_(function(){return Et(u)},[u]),p=L(function(){var N=t.current,k=Ft(N);N&&k||P();var R=N.scrollOptions;if(R.shouldPublishImmediately){u();return}d()},[d,u]),v=L(function(N,k){t.current&&P();var R=o.current,z=R.getDroppableRef();z||P();var V=wf(z),O={ref:z,descriptor:s,env:V,scrollOptions:k};t.current=O;var F=Sf({ref:z,descriptor:s,env:V,windowScroll:N,direction:R.direction,isDropDisabled:R.isDropDisabled,isCombineEnabled:R.isCombineEnabled,shouldClipSubject:!R.ignoreContainerClipping}),B=V.closestScrollable;return B&&(B.setAttribute(ma.contextId,r.contextId),B.addEventListener("scroll",p,Da(O.scrollOptions))),F},[r.contextId,s,p,o]),h=L(function(){var N=t.current,k=Ft(N);return N&&k||P(),Hr(k)},[]),m=L(function(){var N=t.current;N||P();var k=Ft(N);t.current=null,k&&(d.cancel(),k.removeAttribute(ma.contextId),k.removeEventListener("scroll",p,Da(N.scrollOptions)))},[p,d]),b=L(function(N){var k=t.current;k||P();var R=Ft(k);R||P(),R.scrollTop+=N.y,R.scrollLeft+=N.x},[]),w=_(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:h,dragStopped:m,scroll:b}},[m,v,h,b]),D=_(function(){return{uniqueId:n,descriptor:s,callbacks:w}},[w,s,n]);Ge(function(){return c.current=D.descriptor,a.droppable.register(D),function(){t.current&&m(),a.droppable.unregister(D)}},[w,s,m,D,i,a.droppable]),Ge(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Ge(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Nr(){}var Ca={width:0,height:0,margin:Jc},Pf=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?Ca:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Of=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=Pf({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Nt.placeholder:null}};function Tf(e){var t=x.useRef(null),r=L(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,s=x.useState(e.animate==="open"),c=s[0],f=s[1];x.useEffect(function(){return c?n!=="open"?(r(),f(!1),Nr):t.current?Nr:(t.current=setTimeout(function(){t.current=null,f(!1)}),r):Nr},[n,c,r]);var g=L(function(d){d.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),u=Of({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return oe.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:g,ref:e.innerRef})}var jf=oe.memo(Tf),xn=oe.createContext(null),Rf=function(e){qa(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(oe.PureComponent),Sa={dragging:5e3,dropAnimating:4500},Mf=function(t,r){return r?Nt.drop(r.duration):t?Nt.snap:Nt.fluid},kf=function(t,r){return t?r?jt.opacity.drop:jt.opacity.combining:null},Af=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Bf(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,s=Af(e),c=!!i,f=c?Lr.drop(n,o):Lr.moveTo(n),g={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Mf(s,i),transform:f,opacity:kf(o,c),zIndex:c?Sa.dropAnimating:Sa.dragging,pointerEvents:"none"};return g}function Lf(e){return{transform:Lr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Ff(e){return e.type==="DRAGGING"?Bf(e):Lf(e)}function $f(e,t,r){r===void 0&&(r=Ce);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=Qa(a,n),o=Yt(i,r),s={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},f={descriptor:e,placeholder:s,displaceBy:c,client:i,page:o};return f}function Hf(e){var t=mn("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,c=_(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:s}},[i,s,o]),f=L(function(p){var v=a();return v||P(),$f(r,v,p)},[r,a]),g=_(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:f}},[r,f,c,t]),u=x.useRef(g),d=x.useRef(!0);Ge(function(){return n.draggable.register(u.current),function(){return n.draggable.unregister(u.current)}},[n.draggable]),Ge(function(){if(d.current){d.current=!1;return}var p=u.current;u.current=g,n.draggable.update(g,p)},[g,n.draggable])}function zf(e){e.preventDefault()}function Gf(e){var t=x.useRef(null),r=L(function(O){t.current=O},[]),n=L(function(){return t.current},[]),a=Zt(dr),i=a.contextId,o=a.dragHandleUsageInstructionsId,s=a.registry,c=Zt(xn),f=c.type,g=c.droppableId,u=_(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:g}},[e.draggableId,e.index,f,g]),d=e.children,p=e.draggableId,v=e.isEnabled,h=e.shouldRespectForcePress,m=e.canDragInteractiveElements,b=e.isClone,w=e.mapped,D=e.dropAnimationFinished;if(!b){var N=_(function(){return{descriptor:u,registry:s,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:h,isEnabled:v}},[u,s,n,m,h,v]);Hf(N)}var k=_(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:zf}:null},[i,o,p,v]),R=L(function(O){w.type==="DRAGGING"&&w.dropping&&O.propertyName==="transform"&&D()},[D,w]),z=_(function(){var O=Ff(w),F=w.type==="DRAGGING"&&w.dropping?R:null,B={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":p,style:O,onTransitionEnd:F},dragHandleProps:k};return B},[i,k,p,w,R,r]),V=_(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return d(z,w.snapshot,V)}var Ui=function(e,t){return e===t},Vi=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},Wf=function(t){return t.combine?t.combine.draggableId:null},qf=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Uf(){var e=De(function(a,i){return{x:a,y:i}}),t=De(function(a,i,o,s,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:s,combineTargetFor:null}}),r=De(function(a,i,o,s,c,f,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:f,mode:i,offset:a,dimension:o,forceShouldAnimate:g,snapshot:t(i,s,c,f,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var s=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],f=ze(i.impact),g=qf(i.impact),u=i.forceShouldAnimate;return r(e(s.x,s.y),i.movementMode,c,o.isClone,f,g,u)}if(i.phase==="DROP_ANIMATING"){var d=i.completed;if(d.result.draggableId!==o.draggableId)return null;var p=o.isClone,v=i.dimensions.draggables[o.draggableId],h=d.result,m=h.mode,b=Vi(h),w=Wf(h),D=i.dropDuration,N={duration:D,curve:dn.drop,moveTo:i.newHomeClientOffset,opacity:w?jt.opacity.drop:null,scale:w?jt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:v,dropping:N,draggingOver:b,combineWith:w,mode:m,forceShouldAnimate:null,snapshot:t(m,p,b,w,N)}}}return null};return n}function Yi(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Vf={mapped:{type:"SECONDARY",offset:Ce,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Yi(null)}};function Yf(){var e=De(function(o,s){return{x:o,y:s}}),t=De(Yi),r=De(function(o,s,c){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:c,snapshot:t(s)}}}),n=function(s){return s?r(Ce,s,!0):null},a=function(s,c,f,g){var u=f.displaced.visible[s],d=!!(g.inVirtualList&&g.effected[s]),p=or(f),v=p&&p.draggableId===s?c:null;if(!u){if(!d)return n(v);if(f.displaced.invisible[s])return null;var h=mt(g.displacedBy.point),m=e(h.x,h.y);return r(m,v,!0)}if(d)return n(v);var b=f.displacedBy.point,w=e(b.x,b.y);return r(w,v,u.shouldAnimate)},i=function(s,c){if(s.isDragging)return s.critical.draggable.id===c.draggableId?null:a(c.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var f=s.completed;return f.result.draggableId===c.draggableId?null:a(c.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return i}var Xf=function(){var t=Uf(),r=Yf(),n=function(i,o){return t(i,o)||r(i,o)||Vf};return n},Jf={dropAnimationFinished:Ni},Kf=Ka(Xf,Jf,null,{context:vn,pure:!0,areStatePropsEqual:Ui})(Gf);function Xi(e){var t=Zt(xn),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:oe.createElement(Kf,e)}function _f(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return oe.createElement(Xi,$({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function Qf(e){var t=x.useContext(dr);t||P();var r=t.contextId,n=t.isMovementAllowed,a=x.useRef(null),i=x.useRef(null),o=e.children,s=e.droppableId,c=e.type,f=e.mode,g=e.direction,u=e.ignoreContainerClipping,d=e.isDropDisabled,p=e.isCombineEnabled,v=e.snapshot,h=e.useClone,m=e.updateViewportMaxScroll,b=e.getContainerForClone,w=L(function(){return a.current},[]),D=L(function(B){a.current=B},[]);L(function(){return i.current},[]);var N=L(function(B){i.current=B},[]),k=L(function(){n()&&m({maxScroll:ji()})},[n,m]);Ef({droppableId:s,type:c,mode:f,direction:g,isDropDisabled:d,isCombineEnabled:p,ignoreContainerClipping:u,getDroppableRef:w});var R=oe.createElement(Rf,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(B){var ie=B.onClose,E=B.data,Y=B.animate;return oe.createElement(jf,{placeholder:E,onClose:ie,innerRef:N,animate:Y,contextId:r,onTransitionEnd:k})}),z=_(function(){return{innerRef:D,placeholder:R,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}},[r,s,R,D]),V=h?h.dragging.draggableId:null,O=_(function(){return{droppableId:s,type:c,isUsingCloneFor:V}},[s,V,c]);function F(){if(!h)return null;var B=h.dragging,ie=h.render,E=oe.createElement(Xi,{draggableId:B.draggableId,index:B.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(Y,ce){return ie(Y,ce,B)});return oo.createPortal(E,b())}return oe.createElement(xn.Provider,{value:O},o(z,v),F())}var Er=function(t,r){return t===r.droppable.type},Ia=function(t,r){return r.draggables[t.draggable.id]},Zf=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=$({},t,{shouldAnimatePlaceholder:!1}),n=De(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=De(function(o,s,c,f,g,u){var d=g.descriptor.id,p=g.descriptor.droppableId===o;if(p){var v=u?{render:u,dragging:n(g.descriptor)}:null,h={isDraggingOver:c,draggingOverWith:c?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:v}}if(!s)return r;if(!f)return t;var m={isDraggingOver:c,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}}),i=function(s,c){var f=c.droppableId,g=c.type,u=!c.isDropDisabled,d=c.renderClone;if(s.isDragging){var p=s.critical;if(!Er(g,p))return r;var v=Ia(p,s.dimensions),h=ze(s.impact)===f;return a(f,u,h,h,v,d)}if(s.phase==="DROP_ANIMATING"){var m=s.completed;if(!Er(g,m.critical))return r;var b=Ia(m.critical,s.dimensions);return a(f,u,Vi(m.result)===f,ze(m.impact)===f,b,d)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var w=s.completed;if(!Er(g,w.critical))return r;var D=ze(w.impact)===f,N=!!(w.impact.at&&w.impact.at.type==="COMBINE"),k=w.critical.droppable.id===f;return D?N?t:r:k?t:r}return r};return i},eg={updateViewportMaxScroll:su};function tg(){return document.body||P(),document.body}var rg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:tg},Ji=Ka(Zf,eg,null,{context:vn,pure:!0,areStatePropsEqual:Ui})(Qf);Ji.defaultProps=rg;const Ie=[{id:"hero-fullpage",name:"Hero - Página Completa",description:"Una imagen protagonista que ocupa toda la página",category:"hero",template:"grid-cols-1 grid-rows-1",cells:1,style:{gap:"0px",padding:"0px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-2xl"},maskCategories:[{name:"Editorial",masks:["none","soft-vignette","magazine-crop","editorial-frame"]},{name:"Artístico",masks:["film-grain","vintage-border","polaroid-large"]}]},{id:"hero-split",name:"Hero - División Dramática",description:"Dos imágenes grandes con división vertical elegante",category:"hero",template:"grid-cols-2 grid-rows-1 gap-1",cells:2,style:{gap:"4px"},cellStyles:{0:"rounded-l-lg overflow-hidden shadow-xl",1:"rounded-r-lg overflow-hidden shadow-xl"},maskCategories:[{name:"Minimalista",masks:["none","soft-rounded","subtle-shadow"]}]},{id:"magazine-asymmetric",name:"Magazine - Asimétrico",description:"Layout editorial con jerarquía visual moderna",category:"editorial",template:"grid-cols-5 grid-rows-3 gap-2",cells:4,style:{gap:"6px"},cellStyles:{0:"col-span-3 row-span-2 rounded-lg overflow-hidden shadow-lg",1:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",2:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",3:"col-span-5 row-span-1 rounded-md overflow-hidden shadow-sm"},maskCategories:[{name:"Editorial",masks:["none","magazine-crop","editorial-frame","soft-vignette"]},{name:"Moderno",masks:["geometric-crop","minimal-frame","clean-border"]}]},{id:"magazine-grid",name:"Magazine - Grid Moderno",description:"Grid uniforme con espaciado editorial elegante",category:"editorial",template:"grid-cols-3 grid-rows-2 gap-3",cells:6,style:{gap:"8px",padding:"4px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",1:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",2:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",3:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",4:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",5:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow"},maskCategories:[{name:"Uniformes",masks:["none","rounded","soft-rounded","minimal-frame"]}]},{id:"minimal-duo",name:"Minimal - Dúo Elegante",description:"Dos imágenes con mucho espacio blanco",category:"minimal",template:"grid-cols-1 grid-rows-2 gap-8",cells:2,style:{gap:"32px",padding:"24px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-2xl",1:"rounded-xl overflow-hidden shadow-2xl"},maskCategories:[{name:"Limpio",masks:["none","clean-border","minimal-frame","soft-shadow"]}]},{id:"classic-quad",name:"Clásico - Cuadrícula Premium",description:"Cuatro imágenes con estilo editorial premium",category:"classic",template:"grid-cols-2 grid-rows-2 gap-4",cells:4,style:{gap:"12px",padding:"8px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",1:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",2:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",3:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300"},maskCategories:[{name:"Premium",masks:["none","rounded","soft-rounded","premium-frame","elegant-border","classic-shadow","editorial-crop"]},{name:"Artístico",masks:["vintage","film-grain","classic-vignette","sepia-tone","black-white-frame","retro-border"]}]},{id:"classic-portrait",name:"Clásico - Retrato Elegante",description:"Layout perfecto para retratos y fotos verticales",category:"classic",template:"grid-cols-3 grid-rows-2 gap-3",cells:3,style:{gap:"10px"},cellStyles:{0:"col-span-2 row-span-2 rounded-2xl overflow-hidden shadow-2xl",1:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg",2:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Retrato",masks:["none","portrait-frame","elegant-oval","classic-border"]}]}];function Ki(e){let t=null;return()=>(t==null&&(t=e()),t)}function ng(e,t){return e.filter(r=>r!==t)}function ag(e,t){const r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class ig{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=ag(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=ng(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class og{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const _i="__NATIVE_FILE__",Qi="__NATIVE_URL__",Zi="__NATIVE_TEXT__",eo="__NATIVE_HTML__",Na=Object.freeze(Object.defineProperty({__proto__:null,FILE:_i,HTML:eo,TEXT:Zi,URL:Qi},Symbol.toStringTag,{value:"Module"}));function Pr(e,t,r){const n=t.reduce((a,i)=>a||e.getData(i),"");return n??r}const zr={[_i]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[eo]:{exposeProperties:{html:(e,t)=>Pr(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Qi]:{exposeProperties:{urls:(e,t)=>Pr(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Zi]:{exposeProperties:{text:(e,t)=>Pr(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function sg(e,t){const r=zr[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new og(r);return n.loadDataTransfer(t),n}function Or(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(zr).filter(r=>{const n=zr[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const lg=Ki(()=>/firefox/i.test(navigator.userAgent)),to=Ki(()=>!!window.safari);class Ea{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let s=r.length-1;if(t===r[s])return n[s];let c=0,f=o.length-1,g;for(;c<=f;){g=Math.floor(.5*(c+f));const p=r[g];if(p<t)c=g+1;else if(p>t)f=g-1;else return n[g]}s=Math.max(0,f);const u=t-r[s],d=u*u;return n[s]+a[s]*u+i[s]*d+o[s]*u*d}constructor(t,r){const{length:n}=t,a=[];for(let p=0;p<n;p++)a.push(p);a.sort((p,v)=>t[p]<t[v]?-1:1);const i=[],o=[];let s,c;for(let p=0;p<n-1;p++)s=t[p+1]-t[p],c=r[p+1]-r[p],i.push(s),o.push(c/s);const f=[o[0]];for(let p=0;p<i.length-1;p++){const v=o[p],h=o[p+1];if(v*h<=0)f.push(0);else{s=i[p];const m=i[p+1],b=s+m;f.push(3*b/((b+m)/v+(b+s)/h))}}f.push(o[o.length-1]);const g=[],u=[];let d;for(let p=0;p<f.length-1;p++){d=o[p];const v=f[p],h=1/i[p],m=v+f[p+1]-d-d;g.push((d-v-m)*h),u.push(m*h*h)}this.xs=t,this.ys=r,this.c1s=f,this.c2s=g,this.c3s=u}}const cg=1;function ro(e){const t=e.nodeType===cg?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function $t(e){return{x:e.clientX,y:e.clientY}}function dg(e){var t;return e.nodeName==="IMG"&&(lg()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function ug(e,t,r,n){let a=e?t.width:r,i=e?t.height:n;return to()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function pg(e,t,r,n,a){const i=dg(t),s=ro(i?e:t),c={x:r.x-s.x,y:r.y-s.y},{offsetWidth:f,offsetHeight:g}=e,{anchorX:u,anchorY:d}=n,{dragPreviewWidth:p,dragPreviewHeight:v}=ug(i,t,f,g),h=()=>{let R=new Ea([0,.5,1],[c.y,c.y/g*v,c.y+v-g]).interpolate(d);return to()&&i&&(R+=(window.devicePixelRatio-1)*v),R},m=()=>new Ea([0,.5,1],[c.x,c.x/f*p,c.x+p-f]).interpolate(u),{offsetX:b,offsetY:w}=a,D=b===0||b,N=w===0||w;return{x:D?b:m(),y:N?w:h()}}class fg{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function gg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){gg(e,a,r[a])})}return e}class hg{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Pa({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return Pa({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(Na).some(r=>Na[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=sg(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&ro(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=$t(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,c=Or(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const g=this.monitor.getSourceId(),u=this.sourceNodes.get(g),d=this.sourcePreviewNodes.get(g)||u;if(d){const{anchorX:p,anchorY:v,offsetX:h,offsetY:m}=this.getCurrentSourcePreviewNodeOptions(),D=pg(u,d,o,{anchorX:p,anchorY:v},{offsetX:h,offsetY:m});s.setDragImage(d,D.x,D.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:f}=this.getCurrentSourcePreviewNodeOptions();f?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:s}=a,c=Or(s);c&&this.beginDragNativeItem(c,s)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:$t(a)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=$t(a),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else Or(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:$t(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new fg(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new ig(this.isNodeInDocument)}}const vg=function(t,r,n){return new hg(t,r,n)},mg=({elements:e,onReorder:t,onSelect:r,selectedElement:n})=>{const a=i=>{if(!i.destination)return;const o=Array.from(e),[s]=o.splice(i.source.index,1);o.splice(i.destination.index,0,s),t(o)};return l.jsx("div",{className:"bg-white ",children:l.jsx(gf,{onDragEnd:a,children:l.jsx(Ji,{droppableId:"layers",children:i=>l.jsxs("div",{...i.droppableProps,ref:i.innerRef,className:"space-y-2",children:[e.map((o,s)=>l.jsx(_f,{draggableId:o.id,index:s,children:c=>l.jsxs("div",{ref:c.innerRef,...c.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===o.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>r(o.id),children:[l.jsx("div",{...c.dragHandleProps,className:"mr-2",children:l.jsx(So,{size:16})}),o.type==="image"?l.jsx(Ht,{size:16,className:"mr-2"}):l.jsx(pt,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm truncate",children:o.type==="text"?o.content.substring(0,20):`Imagen ${s+1}`})]})},o.id)),i.placeholder]})})})})};function bg({id:e,elements:t=[],selectedElement:r,onSelectElement:n,onAddElement:a,onUpdateElement:i,onDeleteElement:o,availableMasks:s=[],workspaceSize:c={width:800,height:600},cellSize:f="auto",cellStyle:g=""}){const[{isOver:u},d]=Yl(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:h=>{if(h.files){const m=new FileReader;m.onload=b=>{var w;if((w=b.target)!=null&&w.result){const D={id:`img-${Date.now()}`,type:"image",content:b.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(D),n(D.id,e)}},m.readAsDataURL(h.files[0])}},collect:h=>({isOver:!!h.isOver({shallow:!0})})})),p=()=>{const h=document.createElement("input");h.type="file",h.accept="image/*",h.onchange=m=>{if(m.target.files&&m.target.files[0]){const b=new FileReader;b.onload=w=>{var D;if((D=w.target)!=null&&D.result){const N={id:`img-${Date.now()}`,type:"image",content:w.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(N),n(N.id,e)}},b.readAsDataURL(m.target.files[0])}},h.click()},v=t.length>0;return l.jsx("div",{ref:d,className:`relative w-full h-full ${g||"rounded-lg overflow-hidden"} ${u?"ring-2 ring-purple-500 bg-transparent":""} ${v?"bg-transparent":"border-2 border-dashed border-gray-300 bg-transparent hover:border-gray-400 hover:bg-gray-100"}`,onClick:h=>{h.target===h.currentTarget&&n(null,e)},style:{isolation:"isolate",background:v?"transparent":void 0,minHeight:"120px"},children:t.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer transition-colors",onClick:h=>{h.stopPropagation(),p()},children:[l.jsx(po,{className:"h-8 w-8 text-gray-300"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Haz clic o arrastra una imagen"})]}):t.map(h=>l.jsx("div",{className:"absolute inset-0",onClick:m=>m.stopPropagation(),children:h.type==="image"?l.jsx(Xl,{element:h,isSelected:r===h.id,onSelect:()=>n(h.id,e),onUpdate:m=>i(h.id,m),onDelete:()=>o(h.id),availableMasks:s,workspaceSize:c}):l.jsx(Jl,{element:h,workspaceSize:c,isSelected:r===h.id,onSelect:()=>n(h.id,e),onUpdate:m=>i(h.id,m),onDelete:()=>o(h.id)})},h.id))})}function xg({currentLayoutId:e,onLayoutChange:t}){const[r,n]=x.useState("all"),a={all:{name:"Todos",layouts:Ie},hero:{name:"Hero",layouts:Ie.filter(i=>i.category==="hero")},editorial:{name:"Editorial",layouts:Ie.filter(i=>i.category==="editorial")},storytelling:{name:"Historia",layouts:Ie.filter(i=>i.category==="storytelling")},minimal:{name:"Minimal",layouts:Ie.filter(i=>i.category==="minimal")},creative:{name:"Creativo",layouts:Ie.filter(i=>i.category==="creative")},classic:{name:"Clásico",layouts:Ie.filter(i=>i.category==="classic")}};return Object.keys(a).filter(i=>i==="all"||a[i].layouts.length>0),l.jsxs("div",{className:"w-full",children:[l.jsx("div",{className:"grid grid-cols-2  gap-3 overflow-x-hidden custom-scroll",children:a[r].layouts.map(i=>l.jsxs("div",{className:`relative group cursor-pointer transition-all duration-200 
                                 hover:shadow-md hover:scale-102
                        `,onClick:()=>t(i.id),children:[l.jsxs("div",{className:"aspect-square relative bg-white rounded-lg p-2 border border-gray-200",children:[l.jsx("div",{className:`w-full h-full grid ${i.template}`,style:{gap:"2px",padding:"4px"},children:Array.from({length:i.cells}).map((o,s)=>{var c,f;return l.jsx("div",{className:`bg-gradient-to-br from-purple-100 to-purple-200 ${(f=(c=i.cellStyles)==null?void 0:c[s])!=null&&f.includes("rounded")?"rounded":"rounded-sm"}`,style:{minHeight:"8px"}},s)})}),e===i.id&&l.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),l.jsxs("div",{className:"mt-2 text-center",children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 truncate",children:i.name}),i.description&&l.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:i.description}),l.jsx("div",{className:"flex items-center justify-center mt-1 space-x-2",children:l.jsxs("span",{className:"text-xs text-gray-400",children:[i.cells," ",i.cells===1?"celda":"celdas"]})})]})]},i.id))}),a[r].layouts.length===0&&l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No hay layouts disponibles en esta categoría."})})]})}const yg=({filters:e={},onFilterChange:t,selectedElement:r})=>{const[n,a]=x.useState("basic"),[i,o]=x.useState({basic:!0,color:!0,transform:!1,advanced:!1}),s=d=>{o(p=>({...p,[d]:!p[d]}))},c={brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal",flipHorizontal:!1,flipVertical:!1,...e},f=(d,p)=>{const v={...c,[d]:p};t(v)},g=()=>{t({brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal",flipHorizontal:!1,flipVertical:!1})},u=[{id:"basic",label:"Básico",icon:Uo},...(r==null?void 0:r.type)==="image"?[{id:"presets",label:"Presets",icon:Oa}]:[],{id:"advanced",label:"Avanzado",icon:qo}];return x.useEffect(()=>{n==="presets"&&(r==null?void 0:r.type)!=="image"&&a("basic")},[r==null?void 0:r.type,n]),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:u.map(d=>{const p=d.icon;return l.jsxs("button",{onClick:()=>a(d.id),className:`flex-1 flex items-center justify-center gap-1 py-2 px-3 rounded-md text-xs font-medium transition-colors ${n===d.id?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[l.jsx(p,{className:"h-3.5 w-3.5"}),d.label]},d.id)})}),"            ",l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-800",children:[n==="basic"&&"Controles básicos",n==="presets"&&"Filtros predefinidos",n==="advanced"&&"Configuración avanzada"]}),r&&l.jsxs("span",{className:"text-xs text-gray-500",children:[r.type==="image"?"Imagen":"Texto"," seleccionado"]})]}),l.jsx(qe,{variant:"ghost",size:"sm",onClick:g,className:"text-xs",icon:l.jsx(ja,{className:"h-3 w-3"}),children:"Reset"})]}),l.jsxs("div",{className:"space-y-4",children:[n==="basic"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ajustes básicos"}),l.jsx("button",{onClick:()=>s("basic"),className:"text-gray-400 hover:text-gray-600",children:i.basic?l.jsx(pr,{className:"h-4 w-4"}):l.jsx(zt,{className:"h-4 w-4"})})]}),i.basic&&l.jsxs("div",{className:"space-y-3",children:[l.jsx(Ue,{label:"Brillo",value:c.brightness,onChange:d=>f("brightness",d),min:0,max:200,step:1,unit:"%"}),l.jsx(Ue,{label:"Contraste",value:c.contrast,onChange:d=>f("contrast",d),min:0,max:200,step:1,unit:"%"}),l.jsx(Ue,{label:"Saturación",value:c.saturation,onChange:d=>f("saturation",d),min:0,max:200,step:1,unit:"%"}),l.jsx(Ue,{label:"Opacidad",value:c.opacity,onChange:d=>f("opacity",d),min:0,max:100,step:1,unit:"%"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Color"}),l.jsx("button",{onClick:()=>s("color"),className:"text-gray-400 hover:text-gray-600",children:i.color?l.jsx(pr,{className:"h-4 w-4"}):l.jsx(zt,{className:"h-4 w-4"})})]}),i.color&&l.jsxs("div",{className:"space-y-3",children:[l.jsx(Ue,{label:"Matiz",value:c.hue,onChange:d=>f("hue",d),min:-180,max:180,step:1,unit:"°"}),l.jsx(Ue,{label:"Tinte sepia",value:c.tint,onChange:d=>f("tint",d),min:0,max:100,step:1,unit:"%"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Transformar"}),l.jsx("button",{onClick:()=>s("transform"),className:"text-gray-400 hover:text-gray-600",children:i.transform?l.jsx(pr,{className:"h-4 w-4"}):l.jsx(zt,{className:"h-4 w-4"})})]}),i.transform&&l.jsxs("div",{className:"space-y-3",children:[l.jsx(Ue,{label:"Escala",value:c.scale,onChange:d=>f("scale",d),min:.1,max:3,step:.1,unit:"x"}),l.jsx(Ue,{label:"Rotación",value:c.rotate,onChange:d=>f("rotate",d),min:-180,max:180,step:1,unit:"°"}),l.jsx(Ue,{label:"Desenfoque",value:c.blur,onChange:d=>f("blur",d),min:0,max:20,step:.5,unit:"px"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(qe,{variant:c.flipHorizontal?"default":"outline",size:"sm",onClick:()=>f("flipHorizontal",!c.flipHorizontal),className:"text-xs",children:"Voltear H"}),l.jsx(qe,{variant:c.flipVertical?"default":"outline",size:"sm",onClick:()=>f("flipVertical",!c.flipVertical),className:"text-xs",children:"Voltear V"})]})]})]})]}),"                ",n==="presets"&&l.jsx(Zo,{onSelectPreset:d=>{t({...c,...d})},selectedImage:r||null}),"                ",n==="advanced"&&l.jsx(es,{filters:c,onFilterChange:t,selectedElement:r})]})]})},wg=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],Dg=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],Cg=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],Sg=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],Ig=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],Ng=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],Eg=({element:e,onUpdate:t,onClose:r})=>{var be,de,Pe,Ee,fe,Oe,Te,je,Ae,me,Re,ge,j,X,le,ue,Se,Be,xe,I,G,J,te,re,pe,ye,he,_e,at,yt,y,C,M,A,H,Z,K,ee,we,$e,Me;const[n,a]=x.useState(!1),[i,o]=x.useState(!1),[s,c]=x.useState(!1),[f,g]=x.useState(!1),[u,d]=x.useState(!1),[p,v]=x.useState(!1),[h,m]=x.useState(!1),[b,w]=x.useState(!1),[D,N]=x.useState("basic"),[k,R]=x.useState(((be=e==null?void 0:e.style)==null?void 0:be.color)||"#000000"),[z,V]=x.useState(((de=e==null?void 0:e.style)==null?void 0:de.backgroundColor)||"transparent"),O=x.useRef(null),F=x.useRef(null),B=x.useRef(null),ie=x.useRef(null),E=x.useRef(null),Y=x.useRef(null),ce=x.useRef(null);x.useEffect(()=>{function S(U){O.current&&!O.current.contains(U.target)&&a(!1),F.current&&!F.current.contains(U.target)&&o(!1),B.current&&!B.current.contains(U.target)&&g(!1),ie.current&&!ie.current.contains(U.target)&&d(!1),E.current&&!E.current.contains(U.target)&&v(!1),Y.current&&!Y.current.contains(U.target)&&c(!1),ce.current&&!ce.current.contains(U.target)&&m(!1)}return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const T=(S,U)=>{t({style:{...e==null?void 0:e.style,[S]:U}})},ne=(S,U,Le)=>{var Je;t({style:{...e==null?void 0:e.style,[S]:((Je=e==null?void 0:e.style)==null?void 0:Je[S])===U?Le:U}})},ve=(S,U)=>{T(S,U)};if(!e)return null;const Q=({active:S,onClick:U,icon:Le,title:Je,className:Qe=""})=>l.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${S?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${Qe}`,onClick:U,title:Je,children:Le}),se=({onClick:S,icon:U,text:Le,isOpen:Je,title:Qe})=>l.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${Je?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:S,title:Qe,children:[U&&l.jsx("span",{className:"flex-shrink-0",children:U}),Le&&l.jsx("span",{className:"text-sm truncate",children:Le}),l.jsx(zt,{className:"h-3.5 w-3.5 opacity-70"})]});return l.jsx("div",{className:"  bg-white  rounded-lg shadow-sm px-4  border-gray-200  z-50 transition-all duration-200",children:l.jsxs("div",{className:"w-full ",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[l.jsx(pt,{className:"h-4 w-4"}),"Formato de texto"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>w(!b),title:b?"Modo compacto":"Modo expandido",children:b?l.jsx(Lo,{className:"h-4 w-4"}):l.jsx(Bo,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:r,title:"Cerrar",children:l.jsx(fo,{className:"h-4 w-4"})})]})]}),b&&l.jsxs("div",{className:"flex border-b mb-2",children:[l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${D==="basic"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("basic"),children:"Básico"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${D==="paragraph"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("paragraph"),children:"Párrafo"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${D==="advanced"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("advanced"),children:"Avanzado"})]}),(D==="basic"||!b)&&l.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[l.jsx("div",{className:"relative",ref:B,children:l.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((Pe=e.style)==null?void 0:Pe.fontFamily)||"Arial",onChange:S=>{T("fontFamily",S.target.value)},children:wg.map(S=>l.jsx("option",{value:S.value,style:{fontFamily:S.value},children:S.name},S.value))})}),l.jsxs("div",{className:"relative",ref:ie,children:[l.jsx(se,{onClick:()=>d(!u),text:((Ee=e.style)==null?void 0:Ee.fontSize)||"16px",isOpen:u,title:"Tamaño de fuente"}),u&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:Dg.map(S=>l.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{T("fontSize",S),d(!1)},children:S},S))})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((fe=e.style)==null?void 0:fe.fontWeight)==="bold",onClick:()=>ne("fontWeight","bold","normal"),icon:l.jsx(yo,{className:"h-4 w-4"}),title:"Negrita"}),l.jsx(Q,{active:((Oe=e.style)==null?void 0:Oe.fontStyle)==="italic",onClick:()=>ne("fontStyle","italic","normal"),icon:l.jsx(Ro,{className:"h-4 w-4"}),title:"Cursiva"}),l.jsx(Q,{active:((Te=e.style)==null?void 0:Te.textDecoration)==="underline",onClick:()=>ne("textDecoration","underline","none"),icon:l.jsx(Ko,{className:"h-4 w-4"}),title:"Subrayado"}),l.jsx(Q,{active:((je=e.style)==null?void 0:je.textDecoration)==="line-through",onClick:()=>ne("textDecoration","line-through","none"),icon:l.jsx(Yo,{className:"h-4 w-4"}),title:"Tachado"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((Ae=e.style)==null?void 0:Ae.textAlign)==="left",onClick:()=>T("textAlign","left"),icon:l.jsx(bo,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),l.jsx(Q,{active:((me=e.style)==null?void 0:me.textAlign)==="center",onClick:()=>T("textAlign","center"),icon:l.jsx(vo,{className:"h-4 w-4"}),title:"Centrar"}),l.jsx(Q,{active:((Re=e.style)==null?void 0:Re.textAlign)==="right",onClick:()=>T("textAlign","right"),icon:l.jsx(xo,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),l.jsx(Q,{active:((ge=e.style)==null?void 0:ge.textAlign)==="justify",onClick:()=>T("textAlign","justify"),icon:l.jsx(mo,{className:"h-4 w-4"}),title:"Justificar"})]}),l.jsxs("div",{className:"relative",ref:O,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:k}}),l.jsx(Oa,{className:"h-4 w-4"})]}),n&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:k}})]}),l.jsx("input",{type:"color",value:k,onChange:S=>{R(S.target.value),T("color",S.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),l.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:Sg.map(S=>l.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${k===S.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:S.color},onClick:()=>{R(S.color),T("color",S.color)},title:S.name},S.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:F,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>o(!i),title:"Color de fondo",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:z,backgroundImage:z==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),l.jsx(Fo,{className:"h-4 w-4"})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:z,backgroundImage:z==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),l.jsx("input",{type:"color",value:z==="transparent"?"#ffffff":z,onChange:S=>{V(S.target.value),T("backgroundColor",S.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Ig.map(S=>l.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${z===S.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:S.color,backgroundImage:S.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{V(S.color),T("backgroundColor",S.color)},title:S.name},S.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:E,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>v(!p),title:"Transformación de texto",children:l.jsx(wo,{className:"h-4 w-4"})}),p&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:Cg.map(S=>{var U;return l.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((U=e.style)==null?void 0:U.textTransform)===S.value?"bg-gray-100":""}`,style:{textTransform:S.value},onClick:()=>{T("textTransform",S.value),v(!1)},children:S.label},S.value)})})]}),l.jsxs("div",{className:"relative",ref:ce,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>m(!h),title:"Encabezados",children:l.jsx(pt,{className:"h-4 w-4"})}),h&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{T("fontSize","32px"),T("fontWeight","bold"),m(!1)},children:[l.jsx(Io,{className:"h-4 w-4"})," ","Encabezado 1"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{T("fontSize","24px"),T("fontWeight","bold"),m(!1)},children:[l.jsx(No,{className:"h-4 w-4"})," ","Encabezado 2"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{T("fontSize","20px"),T("fontWeight","bold"),m(!1)},children:[l.jsx(Eo,{className:"h-4 w-4"})," ","Encabezado 3"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{T("fontSize","16px"),T("fontWeight","bold"),m(!1)},children:[l.jsx(Po,{className:"h-4 w-4"})," ","Encabezado 4"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{T("fontSize","16px"),T("fontWeight","normal"),m(!1)},children:[l.jsx(pt,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((j=e.style)==null?void 0:j.verticalAlign)==="super",onClick:()=>ne("verticalAlign","super","baseline"),icon:l.jsx(Jo,{className:"h-4 w-4"}),title:"Superíndice"}),l.jsx(Q,{active:((X=e.style)==null?void 0:X.verticalAlign)==="sub",onClick:()=>ne("verticalAlign","sub","baseline"),icon:l.jsx(Xo,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),b&&D==="paragraph"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((le=e.style)==null?void 0:le.listStyleType)==="disc",onClick:()=>{var S;return T("listStyleType",((S=e.style)==null?void 0:S.listStyleType)==="disc"?"none":"disc")},icon:l.jsx(ko,{className:"h-4 w-4"}),title:"Lista con viñetas"}),l.jsx(Q,{active:((ue=e.style)==null?void 0:ue.listStyleType)==="decimal",onClick:()=>{var S;return T("listStyleType",((S=e.style)==null?void 0:S.listStyleType)==="decimal"?"none":"decimal")},icon:l.jsx(Mo,{className:"h-4 w-4"}),title:"Lista numerada"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{onClick:()=>{var U;const S=Number.parseInt(((U=e.style)==null?void 0:U.textIndent)||"0");T("textIndent",`${S+20}px`)},icon:l.jsx(jo,{className:"h-4 w-4"}),title:"Aumentar sangría"}),l.jsx(Q,{onClick:()=>{var U;const S=Number.parseInt(((U=e.style)==null?void 0:U.textIndent)||"0");S>=20&&T("textIndent",`${S-20}px`)},icon:l.jsx(To,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Rn,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((Se=e.style)==null?void 0:Se.lineHeight)||"1.5"),onChange:S=>ve("lineHeight",S.target.value),className:"w-24"}),l.jsx(Mn,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((Be=e.style)==null?void 0:Be.lineHeight)||"1.5"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Rn,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((xe=e.style)==null?void 0:xe.letterSpacing)||"0"),onChange:S=>ve("letterSpacing",`${S.target.value}px`),className:"w-24"}),l.jsx(Mn,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((I=e.style)==null?void 0:I.letterSpacing)||"0px"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((G=e.style)==null?void 0:G.fontStyle)==="italic"&&((J=e.style)==null?void 0:J.paddingLeft)==="20px"&&((te=e.style)==null?void 0:te.borderLeft)==="4px solid #ccc",onClick:()=>{var S,U,Le;((S=e.style)==null?void 0:S.fontStyle)==="italic"&&((U=e.style)==null?void 0:U.paddingLeft)==="20px"&&((Le=e.style)==null?void 0:Le.borderLeft)==="4px solid #ccc"?(T("fontStyle","normal"),T("paddingLeft","0"),T("borderLeft","none")):(T("fontStyle","italic"),T("paddingLeft","20px"),T("borderLeft","4px solid #ccc"))},icon:l.jsx(Ho,{className:"h-4 w-4"}),title:"Formato de cita"}),l.jsx(Q,{active:((re=e.style)==null?void 0:re.fontFamily)==="'Courier New', monospace"&&((pe=e.style)==null?void 0:pe.backgroundColor)==="#f5f5f5"&&((ye=e.style)==null?void 0:ye.padding)==="2px 4px",onClick:()=>{var S,U;((S=e.style)==null?void 0:S.fontFamily)==="'Courier New', monospace"&&((U=e.style)==null?void 0:U.backgroundColor)==="#f5f5f5"?(T("fontFamily","Arial, sans-serif"),T("backgroundColor","transparent"),T("padding","0")):(T("fontFamily","'Courier New', monospace"),T("backgroundColor","#f5f5f5"),T("padding","2px 4px"))},icon:l.jsx(Do,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),b&&D==="advanced"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"relative",ref:Y,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>c(!s),title:"Opciones de borde",children:[l.jsx(Vo,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Bordes"})]}),s&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),l.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((he=e.style)==null?void 0:he.borderStyle)||"none",onChange:S=>T("borderStyle",S.target.value),children:Ng.map(S=>l.jsx("option",{value:S.value,children:S.label},S.value))})]}),((_e=e.style)==null?void 0:_e.borderStyle)&&((at=e.style)==null?void 0:at.borderStyle)!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((yt=e.style)==null?void 0:yt.borderWidth)||"1"),onChange:S=>T("borderWidth",`${S.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((y=e.style)==null?void 0:y.borderWidth)||"1px"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:((C=e.style)==null?void 0:C.borderColor)||"#000000",onChange:S=>T("borderColor",S.target.value),className:"w-8 h-8"}),l.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(S=>l.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:S},onClick:()=>T("borderColor",S)},S))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((M=e.style)==null?void 0:M.borderRadius)||"0"),onChange:S=>T("borderRadius",`${S.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((A=e.style)==null?void 0:A.borderRadius)||"0px"})]})]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),l.jsx("button",{className:`px-2 py-1 text-xs rounded ${(H=e.style)!=null&&H.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var S;(S=e.style)!=null&&S.textShadow?T("textShadow",""):T("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(Z=e.style)!=null&&Z.textShadow?"Quitar":"Añadir"}),((K=e.style)==null?void 0:K.textShadow)&&l.jsxs("select",{className:"text-xs p-1 border rounded",value:(ee=e.style)==null?void 0:ee.textShadow,onChange:S=>T("textShadow",S.target.value),children:[l.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),l.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),l.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),l.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),l.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((we=e.style)==null?void 0:we.opacity)||"1"),onChange:S=>ve("opacity",S.target.value),className:"w-24"})}),l.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat((($e=e.style)==null?void 0:$e.opacity)||"1")*100),"%"]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((Me=e.style)==null?void 0:Me.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var S;((S=e.style)==null?void 0:S.backgroundColor)==="#ffff00"?T("backgroundColor","transparent"):T("backgroundColor","#ffff00")},title:"Resaltar texto",children:[l.jsx(Oo,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[l.jsx(Q,{onClick:()=>{alert("Función deshacer (implementar)")},icon:l.jsx(ja,{className:"h-4 w-4"}),title:"Deshacer"}),l.jsx(Q,{onClick:()=>{alert("Función rehacer (implementar)")},icon:l.jsx(Wo,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},Pg=({currentSize:e,onSizeChange:t,presetData:r,workspaceDimensions:n})=>((()=>{if(r!=null&&r.canvas_config){const i=typeof r.canvas_config=="string"?JSON.parse(r.canvas_config):r.canvas_config;let o=i.width,s=i.height;return{width:o,height:s,unit:"cm"}}return null})(),l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:n&&l.jsx("div",{className:"text-sm customtext-neutral-dark font-medium ml-2",children:n.originalWidth&&l.jsxs("div",{children:["Dimensiones: ",n.originalWidth," cm x",n.originalHeight," cm"]})})}));function Zg({albumId:e,itemId:t,presetId:r,pages:n}){var he,_e,at,yt;const a=()=>{const y=fe();return`editor_progress_album_${y.albumId}_preset_${y.presetId}`},[i,o]=x.useState(null),[s,c]=x.useState(null),[f,g]=x.useState(!0),[u,d]=x.useState(null),[p,v]=x.useState([]),[h,m]=x.useState(0),[b,w]=x.useState(null),[D,N]=x.useState(null),[k,R]=x.useState("elements"),[z,V]=x.useState("basic"),[O,F]=x.useState([JSON.stringify(p)]),[B,ie]=x.useState(0),[E,Y]=x.useState(!1),[ce,T]=x.useState(null),[ne,ve]=x.useState({}),[Q,se]=x.useState(!1),[be,de]=x.useState({elementId:null,cellId:null}),[Pe,Ee]=x.useState(!1),fe=()=>{if(e&&t&&r)return{albumId:e,itemId:t,presetId:r,pages:n||20};const y=new URLSearchParams(window.location.search);return{albumId:y.get("album"),itemId:y.get("item"),presetId:y.get("preset"),pages:parseInt(y.get("pages"))||20}},Oe=async(y=!1)=>{try{g(!0),d(null);const C=fe();if(!C.albumId||!C.presetId)throw new Error("Faltan parámetros requeridos: albumId y presetId");const M=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",A=`${M}/api/albums/${C.albumId}`,H=`${M}/api/item-presets/${C.presetId}`,Z=await fetch(A,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!Z.ok){const S=await Z.text();throw new Error(`Error al cargar álbum: ${Z.status} ${Z.statusText}`)}const K=await Z.json(),ee=K.data||K;o(ee);const we=await fetch(H,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!we.ok){const S=await we.text();throw new Error(`Error al cargar preset: ${we.status} ${we.statusText}`)}const $e=await we.json(),Me=$e.data||$e;c(Me),y||await Te(Me,ee,C.pages)}catch(C){d(C.message)}finally{g(!1)}},Te=(y,C,M)=>{try{console.log("Creating pages from preset:",y),console.log("Album data:",C),console.log("Total pages requested:",M);const A=[];if(!y.cover_image||!y.content_layer_image||!y.final_layer_image)throw new Error("El preset no tiene todas las imágenes requeridas");const H=ee=>ee.startsWith("http")||ee.startsWith("/storage/")?ee:`/storage/${ee}`;console.log(y);const Z={id:"page-cover",type:"cover",layout:"layout-1",cells:[{id:"cell-cover-1",elements:[{id:"cover-base",type:"image",content:`/storage/images/item_preset/${y.cover_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0},...C.cover_image_path?[{id:"cover-custom",type:"image",content:`/storage/images/albums/covers/${C.cover_image_path}`,position:{x:10,y:10},size:{width:80,height:80},filters:{},mask:"none",zIndex:2}]:[]]}]};A.push(Z);for(let ee=1;ee<=M;ee++){const we={id:`page-content-${ee}`,type:"content",pageNumber:ee,layout:"layout-1",cells:[{id:`cell-content-${ee}-1`,elements:[{id:`content-base-${ee}`,type:"image",content:`/storage/images/item_preset/${y.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};A.push(we)}const K={id:"page-final",type:"final",layout:"layout-1",cells:[{id:"cell-final-1",elements:[{id:"final-base",type:"image",content:`/storage/images/item_preset/${y.final_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};A.push(K),console.log("✅ Created pages:",A),v(A),m(0),y.canvas_config&&(console.log("📐 Canvas config found, setting workspace to preset dimensions"),te("preset"))}catch(A){throw console.error("❌ Error creating pages:",A),A}};x.useEffect(()=>{fe();const y=a(),C=localStorage.getItem(y);let M=!1;if(C)try{const A=JSON.parse(C);A&&Array.isArray(A.pages)&&(v(A.pages),m(A.currentPage||0),M=!0)}catch{}Oe(M)},[]);const je=()=>{if(p.length===0)return"Cargando...";const y=p[h];if(!y)return"Página";switch(y.type){case"cover":return"Portada";case"content":return`Página ${y.pageNumber}`;case"final":return"Contraportada";default:return`Página ${h+1}`}},Ae=()=>{if(p.length===0)return!1;const y=p[h];return(y==null?void 0:y.type)==="content"},me=x.useCallback(()=>{if(!b||!D||p.length===0)return null;const y=p[h];if(!y)return null;const C=y.cells.find(M=>M.id===D);return C?C.elements.find(M=>M.id===b):null},[b,D,p,h]),Re=(y,C)=>{if(C){const M=p[h].cells.find(H=>H.id===C),A=M==null?void 0:M.elements.find(H=>H.id===y);if(A!=null&&A.locked){console.log("Elemento bloqueado, no se puede seleccionar");const H=document.createElement("div");H.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",H.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(H),setTimeout(()=>{document.body.contains(H)&&document.body.removeChild(H)},3e3);return}}if(C&&N(C),w(y),y){const M=p[h].cells.find(H=>H.id===(C||D)),A=M==null?void 0:M.elements.find(H=>H.id===y);(A==null?void 0:A.type)==="image"?(T(A),console.log(ce)):(A==null?void 0:A.type)==="text"?(se(!0),de({elementId:y,cellId:C||D})):se(!1)}else se(!1),T(null)},ge=()=>{if(p.length===0)return Ie[0];const y=p[h];return y&&Ie.find(C=>C.id===y.layout)||Ie[0]},j=y=>{v(y);const C=[...O.slice(0,B+1),JSON.stringify(y)];F(C),ie(C.length-1);const M=a();localStorage.setItem(M,JSON.stringify({pages:y,currentPage:h,savedAt:Date.now()}))};x.useEffect(()=>{const y=a();localStorage.setItem(y,JSON.stringify({pages:p,currentPage:h,savedAt:Date.now()}))},[h]);const X=y=>{const C=Ie.find(Z=>Z.id===y);if(!C)return;const M=[...p],A=M[h],H=Array.from({length:C.cells}).map((Z,K)=>A.cells[K]||{id:`cell-${A.id}-${K+1}`,elements:[]});M[h]={...A,layout:y,cells:H},j(M),w(null),N(null)},le=(y,C)=>{const M=[...p],A=M[h].cells.findIndex(H=>H.id===y);A!==-1&&(M[h].cells[A].elements.push(C),j(M),w(C.id),N(y))},ue=(y,C,M,A=!1)=>{const H=[...p],Z=H[h].cells.findIndex(K=>K.id===y);if(Z!==-1){if(A)H[h].cells[Z].elements.push({...H[h].cells[Z].elements.find(K=>K.id===C),...M});else{const K=H[h].cells[Z].elements.findIndex(ee=>ee.id===C);K!==-1&&(H[h].cells[Z].elements[K]={...H[h].cells[Z].elements[K],...M})}j(H)}},Se=(y,C)=>{const M=[...p],A=M[h].cells.findIndex(H=>H.id===y);A!==-1&&(M[h].cells[A].elements=M[h].cells[A].elements.filter(H=>H.id!==C),j(M),b===C&&w(null))},Be=()=>{B>0&&(ie(B-1),v(JSON.parse(O[B-1])),w(null),N(null))},xe=()=>{B<O.length-1&&(ie(B+1),v(JSON.parse(O[B+1])),w(null),N(null))},I=()=>{Y(!E)},G=()=>{const C={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:.05,y:.05},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};D?le(D,C):console.log("Selecciona una celda primero")},[J,te]=x.useState("preset"),re=()=>{if(s!=null&&s.canvas_config){const ee=typeof s.canvas_config=="string"?JSON.parse(s.canvas_config):s.canvas_config;let we=ee.width,$e=ee.height,Me=we*37.8,S=$e*37.8;if(Me&&S){const U=window.innerWidth*.6,Le=window.innerHeight*.7,Je=U/Me,Qe=Le/S,ct=Math.min(Je,Qe,1);return{width:Math.round(Me*ct),height:Math.round(S*ct),originalWidth:we,originalHeight:$e,scale:ct,unit:"cm",originalWidthPx:Math.round(Me),originalHeightPx:Math.round(S)}}}const y={square:{width:600,height:600},landscape:{width:1280,height:720},portrait:{width:600,height:800},wide:{width:1200,height:600},tall:{width:540,height:960},preset:{width:800,height:600}},C=y[J]||y.preset,M=window.innerWidth*.6,A=window.innerHeight*.7,H=M/C.width,Z=A/C.height,K=Math.min(H,Z,1);return{width:Math.round(C.width*K),height:Math.round(C.height*K),originalWidth:C.width,originalHeight:C.height,scale:K,unit:"px"}},[pe,ye]=x.useState({width:800,height:600});return x.useEffect(()=>{const y=re();ye(y)},[s,J]),x.useEffect(()=>{const y=()=>{const C=re();ye(C)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[s,J]),x.useEffect(()=>{const y=async()=>{const M={};await Promise.all(p.map(async(A,H)=>{const Z=document.getElementById(`page-${A.id}`);if(Z)try{const K=Z.getBoundingClientRect(),ee=Math.round(K.width),we=Math.round(K.height),$e=window.devicePixelRatio||1,Me=await co(Z,{scale:$e,width:ee,height:we,logging:!1,useCORS:!0,allowTaint:!0,ignoreElements:S=>S.classList.contains("ignore-thumbnail")});M[A.id]=Me.toDataURL()}catch(K){console.error("Error generating thumbnail:",K),M[A.id]=null}})),ve({...ne,...M})},C=setTimeout(()=>{y()},500);return()=>clearTimeout(C)},[p,h]),l.jsx(bl,{backend:vg,children:f?l.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold customtext-neutral-dark mb-2",children:"Cargando Editor"}),l.jsx("p",{className:"customtext-neutral-dark",children:"Preparando tu álbum personalizado..."})]})}):p.length===0||u?l.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),l.jsx("p",{className:"customtext-neutral-dark mb-4",children:u||"No se pudieron cargar los datos del álbum."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),l.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Volver"})]})]})}):l.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-gray-50 font-paragraph",children:[l.jsx(lo,{isOpen:Pe,onRequestClose:()=>Ee(!1),pages:p.map(y=>({...y,layout:Ie.find(C=>C.id===y.layout)||Ie[0]})),workspaceDimensions:pe,getCurrentLayout:y=>y&&Ie.find(C=>C.id===y.layout)||Ie[0],presetData:s,pageThumbnails:ne}),l.jsx("header",{className:"fixed top-0 left-0 right-0 h-16 border-b bg-primary shadow-sm flex items-center px-4 z-10",children:l.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:go.APP_NAME,className:"h-7 object-contain object-center invert brightness-0"}),l.jsx("div",{className:"h-6 w-px bg-white/20"}),l.jsx("h1",{className:"text-lg font-bold text-white truncate hidden sm:block",children:(i==null?void 0:i.title)||"Álbum Sin Título"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"bg-white/10 rounded-full px-4 py-1.5 flex items-center gap-2",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-secondary animate-pulse"}),l.jsx("p",{className:"text-sm text-white font-medium",children:je()})]}),l.jsx("div",{className:"text-xs text-white/70 hidden sm:block",children:p.length>0&&`${p.length} páginas total`}),Ae()?l.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:l.jsx($o,{className:"h-3 w-3"})}):l.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:l.jsx(Ao,{className:"h-3 w-3"})})]}),l.jsxs("div",{className:"flex gap-3 items-center",children:[l.jsx(qe,{variant:E?"secondary":"outline",size:"sm",onClick:I,icon:l.jsx(Co,{className:"h-4 w-4"}),className:"border-white/20 text-white hover:bg-white/10 hover:text-white",children:E?"Editar":"Vista previa"}),l.jsx(qe,{variant:"secondary",size:"sm",onClick:()=>Ee(!0),icon:l.jsx(kt,{className:"h-4 w-4"}),children:"Vista de Álbum"}),!1]})]})}),l.jsxs("div",{className:"flex w-full h-full pt-16",children:[l.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col",children:[l.jsx("div",{className:"p-3 border-b",children:l.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-md",children:[l.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${k==="elements"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>R("elements"),children:"Elementos"}),l.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${k==="filters"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>R("filters"),children:"Filtros"})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:[k==="elements"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Layouts"}),l.jsx(xg,{currentLayoutId:(he=p[h])==null?void 0:he.layout,onLayoutChange:X})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Capas"}),l.jsx(mg,{elements:((_e=p[h].cells.find(y=>y.id===D))==null?void 0:_e.elements)||[],onReorder:y=>{const C=[...p],M=C[h].cells.findIndex(A=>A.id===D);M!==-1&&(C[h].cells[M].elements=y,j(C))},onSelect:Re,selectedElement:b})]})]}),k==="filters"&&l.jsx("div",{className:"space-y-4",children:(()=>{const y=me();return console.log("🔍 Filter tab - Current element:",y),console.log("🔍 Filter tab - Selected element ID:",b),console.log("🔍 Filter tab - Selected cell ID:",D),y?l.jsxs(l.Fragment,{children:[y.type==="image"&&l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Ht,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"text-sm font-medium",children:"Imagen seleccionada"})]}),l.jsx("div",{className:"w-full h-16 rounded-md overflow-hidden bg-gray-200",children:l.jsx("img",{src:y.content,alt:"",className:"w-full h-full object-cover"})})]}),l.jsx(yg,{filters:y.filters||{},onFilterChange:C=>{ue(D,b,{filters:C})},selectedElement:y})]}):l.jsxs("div",{className:"text-center py-8 px-2",children:[l.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-3",children:l.jsx(Ht,{className:"h-6 w-6 text-gray-400 mx-auto"})}),l.jsx("h3",{className:"text-sm font-medium customtext-neutral-dark",children:"Selecciona un elemento"}),l.jsx("p",{className:"text-xs customtext-neutral-dark mt-1",children:"Para aplicar filtros y efectos, primero selecciona una imagen o texto en el lienzo"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Debug: selectedElement=",b,", selectedCell=",D]})]})})()})]})]}),l.jsxs("main",{className:"flex-1 flex flex-col h-full",children:[l.jsx("div",{className:"bg-white border-b px-4 py-2 flex items-center justify-between",children:Q?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>se(!1),className:"h-8 px-2",icon:l.jsx(ho,{className:"h-4 w-4"}),children:"Volver"}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"})]}),l.jsx("div",{className:"flex-1 flex justify-start",children:l.jsx(Eg,{element:me(),onUpdate:y=>{ue(be.cellId,be.elementId,y)},onClose:()=>se(!1)})})]}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(qe,{variant:"ghost",size:"sm",onClick:Be,disabled:B<=0,className:"h-8 px-2",icon:l.jsx(_o,{className:"h-4 w-4"}),children:"Deshacer"}),l.jsx(qe,{variant:"ghost",size:"sm",onClick:xe,disabled:B>=O.length-1,className:"h-8 px-2",icon:l.jsx(zo,{className:"h-4 w-4"}),children:"Rehacer"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{const y=document.createElement("input");y.type="file",y.accept="image/*",y.onchange=C=>{if(C.target.files&&C.target.files[0]){const A={id:`img-${Date.now()}`,type:"image",content:"",position:{x:.1,y:.1},size:{width:.3,height:.3},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},H=new FileReader;H.onload=Z=>{var K,ee;(K=Z.target)!=null&&K.result&&(A.content=Z.target.result,D?le(D,A):(ee=p[h])!=null&&ee.cells[0]&&le(p[h].cells[0].id,A))},H.readAsDataURL(C.target.files[0])}},y.click()},className:"h-8 px-2",icon:l.jsx(Ht,{className:"h-4 w-4"}),children:"Imagen"}),l.jsx(qe,{variant:"ghost",size:"sm",onClick:G,className:"h-8 px-2",icon:l.jsx(pt,{className:"h-4 w-4"}),children:"Texto"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),b&&l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{if(b&&D){const y=me();if(y){const C={...y,id:`${y.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,position:{x:y.position.x+.05,y:y.position.y+.05}};le(D,C)}}},className:"h-8 px-2",icon:l.jsx(Gr,{className:"h-4 w-4"}),children:"Duplicar"}),l.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{b&&D&&Se(D,b)},className:"h-8 px-2 text-red-600 hover:text-white",icon:l.jsx(Ut,{className:"h-4 w-4"}),children:"Eliminar"})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx(Pg,{currentSize:J,onSizeChange:te,presetData:s,workspaceDimensions:pe})})]})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-6 overflow-hidden bg-gray-100",children:E?l.jsx("div",{className:"bg-white rounded-lg shadow-lg",children:l.jsx("div",{className:"overflow-hidden",style:{width:pe.width,height:pe.height},children:l.jsx("div",{id:`page-${p[h].id}`,className:`grid ${ge().template} gap-6`,style:{width:"100%",height:"100%"},children:p[h].cells.map(y=>l.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:y.elements.map(C=>{var M,A,H,Z,K,ee,we,$e,Me,S,U,Le,Je,Qe,ct,yn,wn,Dn,Cn,Sn,In,Nn,En,Pn,On;return C.type==="image"?l.jsx("div",{className:`absolute ${((M=kr.find(no=>no.id===C.mask))==null?void 0:M.class)||""}`,style:{left:`${C.position.x}px`,top:`${C.position.y}px`,width:"100%",height:"100%"},children:l.jsx("img",{src:C.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                                                            brightness(${(((A=C.filters)==null?void 0:A.brightness)||100)/100})
                                                                            contrast(${(((H=C.filters)==null?void 0:H.contrast)||100)/100})
                                                                            saturate(${(((Z=C.filters)==null?void 0:Z.saturation)||100)/100})
                                                                            sepia(${(((K=C.filters)==null?void 0:K.tint)||0)/100})
                                                                            hue-rotate(${(((ee=C.filters)==null?void 0:ee.hue)||0)*3.6}deg)
                                                                            blur(${((we=C.filters)==null?void 0:we.blur)||0}px)
                                                                        `,transform:`scale(${(($e=C.filters)==null?void 0:$e.scale)||1}) rotate(${((Me=C.filters)==null?void 0:Me.rotate)||0}deg) ${(S=C.filters)!=null&&S.flipHorizontal?"scaleX(-1)":""} ${(U=C.filters)!=null&&U.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((Le=C.filters)==null?void 0:Le.blendMode)||"normal",opacity:(((Je=C.filters)==null?void 0:Je.opacity)||100)/100}})},C.id):l.jsx("div",{className:"absolute",style:{left:`${C.position.x}px`,top:`${C.position.y}px`,fontFamily:(Qe=C.style)==null?void 0:Qe.fontFamily,fontSize:(ct=C.style)==null?void 0:ct.fontSize,fontWeight:(yn=C.style)==null?void 0:yn.fontWeight,fontStyle:(wn=C.style)==null?void 0:wn.fontStyle,textDecoration:(Dn=C.style)==null?void 0:Dn.textDecoration,color:(Cn=C.style)==null?void 0:Cn.color,textAlign:(Sn=C.style)==null?void 0:Sn.textAlign,backgroundColor:((In=C.style)==null?void 0:In.backgroundColor)||"transparent",padding:((Nn=C.style)==null?void 0:Nn.padding)||"8px",borderRadius:((En=C.style)==null?void 0:En.borderRadius)||"0px",border:((Pn=C.style)==null?void 0:Pn.border)||"none",opacity:((On=C.style)==null?void 0:On.opacity)||1},children:C.content},C.id)})},y.id))})})}):l.jsxs("div",{id:`page-${p[h].id}`,className:"bg-white rounded-lg shadow-xl",style:{width:pe.width,height:pe.height,position:"relative"},children:[(()=>{const y=p[h];let C=null;return y.type==="cover"&&(s!=null&&s.cover_image)?C=s.cover_image.startsWith("http")?s.cover_image:`/storage/images/item_preset/${s.cover_image}`:y.type==="content"&&(s!=null&&s.content_layer_image)?C=s.content_layer_image.startsWith("http")?s.content_layer_image:`/storage/images/item_preset/${s.content_layer_image}`:y.type==="final"&&(s!=null&&s.final_layer_image)&&(C=s.final_layer_image.startsWith("http")?s.final_layer_image:`/storage/images/item_preset/${s.final_layer_image}`),C?l.jsx("img",{src:C,alt:"background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0,pointerEvents:"none"}}):null})(),l.jsx("div",{className:`grid ${ge().template}`,style:{position:"relative",zIndex:1,width:"100%",height:"100%",boxSizing:"border-box",gap:((at=ge().style)==null?void 0:at.gap)||"16px",padding:((yt=ge().style)==null?void 0:yt.padding)||"16px"},children:p[h].cells.map(y=>{var C;return l.jsx(bg,{id:y.id,elements:y.elements.filter(M=>!M.locked),workspaceSize:pe,cellStyle:(C=ge().cellStyles)==null?void 0:C[p[h].cells.indexOf(y)],selectedElement:D===y.id?b:null,onSelectElement:Re,onAddElement:M=>le(y.id,M),onUpdateElement:(M,A,H)=>ue(y.id,M,A,H),onDeleteElement:M=>Se(y.id,M),availableMasks:ge().maskCategories.flatMap(M=>M.masks)},y.id)})})]})})]}),l.jsxs("aside",{className:"w-52 bg-white border-l flex flex-col h-full",children:[l.jsx("div",{className:"p-4 border-b bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"font-medium text-sm text-gray-700 flex items-center gap-1.5",children:[l.jsx(kt,{className:"h-4 w-4 text-purple-600"}),"Páginas"]}),l.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded-full border",children:[p.length," total"]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 mr-1.5"}),"Portada"]}),p.filter(y=>y.type==="cover").map((y,C)=>l.jsx("div",{className:`relative group flex flex-col cursor-pointer rounded-lg transition-all duration-200 transform 
                            ${h===p.indexOf(y)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>m(p.indexOf(y)),children:l.jsxs("div",{className:"relative bg-purple-50 rounded-md overflow-hidden border mb-1 aspect-[4/3]",children:[ne[y.id]?l.jsx("img",{src:ne[y.id],alt:"Portada",className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:"text-purple-300",children:l.jsx(kt,{className:"h-8 w-8"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:l.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Portada"})})]})},y.id))]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400 mr-1.5"}),"Páginas de contenido"]}),l.jsx("div",{className:"space-y-2",children:p.filter(y=>y.type==="content").map((y,C)=>l.jsx("div",{className:`relative group flex flex-col cursor-pointer rounded-lg transition-all duration-200 transform 
                                ${h===p.indexOf(y)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                                mb-1`,onClick:()=>m(p.indexOf(y)),children:l.jsxs("div",{className:"relative bg-blue-50 rounded-md overflow-hidden border aspect-[4/3]",children:[ne[y.id]?l.jsx("img",{src:ne[y.id],alt:`Página ${y.pageNumber}`,className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:`grid ${ge().template} gap-0.5 w-full h-full p-1`,children:Array.from({length:ge().cells}).map((M,A)=>l.jsx("div",{className:"bg-gray-200 rounded-sm"},A))})}),l.jsx("div",{className:"absolute top-1 left-1 bg-white/90 rounded-full h-5 w-5 flex items-center justify-center text-[10px] font-bold shadow-sm",children:y.pageNumber}),l.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-[9px] px-1.5 py-0.5 rounded-full opacity-80 group-hover:opacity-100",children:"Editable"})]})},y.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400 mr-1.5"}),"Contraportada"]}),p.filter(y=>y.type==="final").map((y,C)=>l.jsx("div",{className:`relative group flex flex-col cursor-pointer rounded-lg transition-all duration-200 transform 
                            ${h===p.indexOf(y)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>m(p.indexOf(y)),children:l.jsxs("div",{className:"relative bg-green-50 rounded-md overflow-hidden border mb-1 aspect-[4/3]",children:[ne[y.id]?l.jsx("img",{src:ne[y.id],alt:"Contraportada",className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:"text-green-300",children:l.jsx(kt,{className:"h-8 w-8"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:l.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Contraportada"})})]})},y.id))]})]})})]})]})]})})}export{Zg as default};

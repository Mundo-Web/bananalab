var q=Object.defineProperty;var D=(a,r,c)=>r in a?q(a,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[r]=c;var P=(a,r,c)=>D(a,typeof r!="symbol"?r+"":r,c);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as u}from"./index-BH53Isel.js";import{I as B}from"./ItemPresetsRest-Dmbx2fkO.js";import{m as y}from"./main-BvVILmTO.js";import{m as t}from"./proxy-BTYtmp9V.js";import{C as G}from"./chevron-left-B2s3ZsB7.js";import{S as I,I as O,P as V}from"./sparkles-BeGvo0qS.js";import{U as J}from"./upload-qgEr5bIl.js";import{C}from"./chevron-down-DS-mdh9v.js";import{A as R}from"./arrow-right-DR00rP9v.js";import{A as X}from"./index-CFtDjG4d.js";import{c as T}from"./createLucideIcon-Cy5Ya80P.js";import"./index-yBjzXJbu.js";import"./ModalImportItem-edN7nyz1.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=T("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=T("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);class j{}P(j,"checkAuth",async()=>{var r;try{const{status:c,result:n}=await y.Fetch("./api/auth/check",{method:"GET"});return{authenticated:c&&n.status===200,user:((r=n==null?void 0:n.data)==null?void 0:r.user)||null,message:(n==null?void 0:n.message)||null}}catch(c){return console.error("Error checking authentication:",c),{authenticated:!1,user:null,message:"Error al verificar autenticación"}}}),P(j,"saveAlbum",async r=>{var c;try{console.log("Guardando álbum:",r);const n=new FormData;Object.keys(r).forEach(p=>{r[p]!==null&&r[p]!==void 0&&(p==="custom_options"&&typeof r[p]=="object"?n.append(p,JSON.stringify(r[p])):n.append(p,r[p]))}),r.selected_pages!==void 0&&n.append("pages",r.selected_pages),r.selected_cover_type!==void 0&&n.append("cover_type",r.selected_cover_type),r.selected_finish!==void 0&&n.append("finish_type",r.selected_finish),console.log("FormData preparada");const g=await fetch("./api/albums",{method:"POST",body:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},credentials:"include"});if(!g.ok){const p=await g.text();console.error("Respuesta RAW del backend:",p);let f;try{f=JSON.parse(p)}catch{f={message:p}}throw new Error((f==null?void 0:f.message)||"Error al guardar el álbum")}const x=await g.json();if(console.log("Respuesta del servidor:",x),!g.ok||x.status!==201)throw new Error((x==null?void 0:x.message)||"Error al guardar el álbum");return y.Notify.add({icon:"/assets/img/icon.svg",title:"Álbum guardado",body:"Tu álbum se ha guardado exitosamente",type:"success"}),x}catch(n){throw console.error("Error en saveAlbum:",n),y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:n.message,type:"danger"}),n}}),P(j,"getUserAlbums",async()=>{try{const{status:r,result:c}=await y.Fetch("./api/albums",{method:"GET"});if(!r||c.status!==200)throw new Error((c==null?void 0:c.message)||"Error al obtener álbumes");return c.data}catch(r){return y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),[]}}),P(j,"getAlbum",async r=>{try{const{status:c,result:n}=await y.Fetch(`./api/albums/${r}`,{method:"GET"});if(!c||n.status!==200)throw new Error((n==null?void 0:n.message)||"Error al obtener el álbum");return n.data}catch(c){throw y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:c.message,type:"danger"}),c}});const h={container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},item:{hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:120,damping:12,mass:.5}}},button:{hover:{x:-5,backgroundColor:"rgba(243, 244, 246, 0.8)",transition:{type:"spring",stiffness:400}},tap:{scale:.96,transition:{type:"spring",stiffness:400}}},formItem:{hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}},hover:{y:-2,transition:{type:"spring",stiffness:400,damping:10}}},image:{hidden:{opacity:0,scale:.95,rotate:-2},visible:{opacity:1,scale:1,rotate:0,transition:{type:"spring",stiffness:80,damping:15,delay:.3}},hover:{scale:1.02,transition:{type:"spring",stiffness:300}}},featureIcon:{hidden:{scale:0,opacity:0},visible:a=>({scale:1,opacity:1,transition:{delay:.5+a*.1,type:"spring",stiffness:300}})}},Z=[{icon:e.jsx(W,{size:20}),text:"50 páginas en blanco"},{icon:e.jsx(V,{size:20}),text:"Personalizable"},{icon:e.jsx(K,{size:20}),text:"Tapa dura premium"}];function ge(){const[a,r]=u.useState(null),[c,n]=u.useState(!0),[g,x]=u.useState(null),[p,f]=u.useState(null),[l,N]=u.useState({titulo:"",paginas:"",tapa:"",acabado:""}),[k,_]=u.useState(!1),[Q,S]=u.useState(null),[w,z]=u.useState(!1),[F,E]=u.useState(!1),H=new B;u.useEffect(()=>{(async()=>{try{const s=new URLSearchParams(window.location.search),o=s.get("preset"),m=s.get("item");if(console.log("URL params:",{presetId:o,itemId:m}),o){console.log("Cargando preset:",o),n(!0);const b=await H.getPresetById(o);if(console.log("Datos del preset recibidos:",b),b.success){const d=b.data;console.log("Preset data:",d),r(d),N(v=>({...v,titulo:d.name||"Momentos que no quiero olvidar",paginas:d.default_pages||d.pages_options&&d.pages_options[0]||"",tapa:d.default_cover||d.cover_options&&d.cover_options[0]||"",acabado:d.default_finish||d.finish_options&&d.finish_options[0]||""})),d.image&&f(d.image)}else console.error("Error al cargar preset:",b.message),r({id:o,name:"Preset no encontrado",description:"No se pudo cargar la información del preset",image:null});n(!1)}else console.log("No hay preset ID en URL, usando datos por defecto"),r({id:null,name:"Preset por defecto",description:"Diseño personalizable para tu regalo especial",image:null,item_id:m||null}),n(!1)}catch(s){console.error("Error al cargar preset:",s),r({id:null,name:"Error al cargar",description:"Hubo un problema al cargar el preset",image:null}),n(!1)}})()},[]),u.useEffect(()=>{(async()=>{try{const s=await j.checkAuth();_(s.authenticated),S(s.user)}catch(s){console.error("Error al verificar autenticación:",s),_(!1),S(null)}})()},[]);const M=i=>{const s=i.target.files[0];if(s){x(s);const o=new FileReader;o.onload=m=>{f(m.target.result)},o.readAsDataURL(s)}},U=async()=>{var i;if(!k){E(!0);return}if(!l.titulo.trim()){alert("Por favor, ingresa un título para tu álbum");return}if(!l.paginas){alert("Por favor, selecciona la cantidad de páginas");return}if(!l.tapa){alert("Por favor, selecciona el tipo de tapa");return}if(!l.acabado){alert("Por favor, selecciona el tipo de acabado");return}try{z(!0);const s=new URLSearchParams(window.location.search);let o=s.get("item"),m=s.get("preset");if(console.log("Parámetros URL:",{itemId:o,presetId:m}),console.log("Estado preset:",a),!o&&(a!=null&&a.item_id)&&(o=a.item_id.toString(),console.log("Usando item_id del preset:",o)),!m&&(a!=null&&a.id)&&(m=a.id.toString(),console.log("Usando preset.id:",m)),a!=null&&a.item_id&&(o=a.item_id.toString()),a!=null&&a.id&&(m=a.id.toString()),console.log("Corregido para backend:",{itemId:o,presetId:m}),!o||!m){const v=[];throw o||v.push("ID del item"),m||v.push("ID del preset"),console.error("Datos faltantes para guardar álbum:",{itemId:o,presetId:m,preset:a,urlParams:Object.fromEntries(s.entries())}),new Error(`Faltan datos requeridos: ${v.join(", ")}. 
                    Asegúrate de acceder desde la página de selección de productos.
                    
Información de debug:
- URL item: ${s.get("item")}
- URL preset: ${s.get("preset")}
- Estado preset.id: ${a==null?void 0:a.id}
- Estado preset.item_id: ${a==null?void 0:a.item_id}`)}console.log("Guardando álbum con:",{itemId:o,presetId:m,preset:a});const b={item_id:o,item_preset_id:m,title:l.titulo,description:`Álbum personalizado con ${l.paginas} páginas, tapa ${l.tapa}, acabado ${l.acabado}`,selected_pages:parseInt(l.paginas),selected_cover_type:l.tapa,selected_finish:l.acabado,cover_image:g,custom_options:{selected_options:{pages:l.paginas,cover:l.tapa,finish:l.acabado},preset_data:a}};console.log("Enviando datos del álbum:",b);const d=await j.saveAlbum(b);if(d&&d.data){const v=((i=d.data.album)==null?void 0:i.id)||d.data.id;console.log("Álbum guardado exitosamente:",d.data);const $=new URLSearchParams({album:v,item:o,preset:m,pages:l.paginas,cover:l.tapa,finish:l.acabado});setTimeout(()=>{window.location.href=`/editor?${$.toString()}`},1e3)}}catch(s){console.error("Error al guardar álbum:",s);let o="Error al guardar el álbum";s.message.includes("Faltan datos requeridos")?o=s.message:s.message.includes("401")?(o="Tu sesión ha expirado. Por favor, inicia sesión nuevamente.",_(!1),E(!0)):s.message.includes("500")?o="Error interno del servidor. Por favor, intenta nuevamente.":(s.message.includes("network")||s.message.includes("fetch"))&&(o="Error de conexión. Verifica tu conexión a internet e intenta nuevamente."),alert(o)}finally{z(!1)}},A=()=>{const i=encodeURIComponent(window.location.href);window.location.href=`/login?redirect=${i}`},L=()=>{E(!1)};return e.jsxs(t.div,{className:"container mx-auto px-4 py-8 max-w-7xl font-paragraph bg-gradient-to-b from-white to-purple-50 min-h-screen",initial:"hidden",animate:"visible",variants:h.container,children:[(()=>{const i=new URLSearchParams(window.location.search),s=i.get("item"),o=i.get("preset");return!s||!o?e.jsx(t.div,{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Advertencia:"})," No se detectaron parámetros válidos en la URL. Para una experiencia completa, accede desde la página de selección de productos.",e.jsx("br",{}),e.jsxs("span",{className:"text-xs text-yellow-600",children:["Parámetros esperados: item=",s?"✓":"✗",", preset=",o?"✓":"✗"]})]})})]})}):null})(),e.jsx(t.div,{className:"fixed inset-0 overflow-hidden pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[...Array(10)].map((i,s)=>e.jsx(t.div,{className:"absolute rounded-full bg-purple-100 opacity-20",style:{width:Math.random()*200+100,height:Math.random()*200+100,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,Math.random()*100-50],x:[0,Math.random()*100-50],opacity:[.2,.3,.2]},transition:{duration:Math.random()*10+10,repeat:1/0,repeatType:"reverse"}},s))}),e.jsxs(t.button,{className:"flex items-center customtext-primary mb-6 p-3 rounded-xl bg-white shadow-sm hover:shadow-md transition-all z-10 relative",variants:h.button,whileHover:"hover",whileTap:"tap",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,type:"spring"},children:[e.jsx(G,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2 font-medium",children:"Regresar"}),e.jsx(t.span,{className:"absolute -z-10 inset-0 bg-gradient-to-r from-purple-50 to-white rounded-xl opacity-0",whileHover:{opacity:1}})]}),e.jsxs("div",{className:"md:flex md:gap-10 md:items-start relative z-10",children:[e.jsxs("div",{className:"md:w-1/2",children:[e.jsxs(t.div,{className:"mb-8",variants:h.item,children:[c?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(t.h1,{className:"text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-500 bg-clip-text text-transparent",initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,type:"spring",stiffness:100},children:[(a==null?void 0:a.name)||"Libro Personalizado"," ",e.jsx("br",{className:"hidden lg:block"}),"«Buenos Deseos de Matrimonio»"]}),e.jsx(t.p,{className:"text-base md:text-lg text-gray-700 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:(a==null?void 0:a.description)||"El libro es de 22×22 cm, de tapa dura que tiene un diseño especial de boda personalizable para agregar una foto o imagen, nombres y fecha del evento. En su interior viene con 50 páginas de papel couché de 170 grs. en blanco para que los invitados puedan escribir sus mensajes."})]}),e.jsx(t.div,{className:"mt-6 flex flex-wrap gap-3",children:Z.map((i,s)=>e.jsxs(t.div,{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm",custom:s,variants:h.featureIcon,whileHover:{y:-2},children:[e.jsx(t.span,{whileHover:{scale:1.1},children:i.icon}),e.jsx("span",{className:"text-sm font-medium",children:i.text})]},s))})]}),e.jsx(t.form,{className:"space-y-6 bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white",variants:h.container,initial:"hidden",animate:"visible",children:e.jsxs(t.div,{className:"space-y-2",variants:h.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Título del Libro"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.input,{type:"text",value:l.titulo,onChange:i=>N({...l,titulo:i.target.value}),className:"w-full p-4 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100",placeholder:"Escribe el título de tu libro...",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"}}),e.jsx(t.span,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-400",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},children:e.jsx(I,{size:18})})]})]})})]}),e.jsxs(t.div,{className:"mt-8 md:mt-0 md:w-1/2 sticky top-6 space-y-6",variants:h.image,whileHover:"hover",children:[e.jsxs(t.div,{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(t.span,{animate:{rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:"⚙️"}),"Configuración"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(t.div,{className:"space-y-2",variants:h.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Imagen de Portada"}),p&&e.jsxs(t.div,{className:"mb-3 relative group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.02},children:[e.jsx("img",{src:p,alt:"Vista previa de portada",className:"w-full max-w-[150px] h-[150px] object-cover rounded-lg border-2 border-purple-100 shadow-sm mx-auto"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-2",children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Portada actual"})})]}),e.jsxs(t.div,{className:"relative border-2 border-dashed border-purple-300 rounded-xl p-4 hover:border-purple-400 transition-colors cursor-pointer bg-purple-50/30",whileHover:{backgroundColor:"rgba(245, 243, 255, 0.5)"},whileTap:{scale:.98},children:[e.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsxs("div",{className:"text-center",children:[e.jsx(t.div,{className:"mx-auto w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mb-2",whileHover:{scale:1.1},children:e.jsx(J,{className:"w-4 h-4 text-purple-600"})}),e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("span",{className:"font-medium text-purple-600",children:"Subir imagen"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, JPEG"}),g&&e.jsxs(t.p,{className:"text-xs text-green-600 mt-2 font-medium",initial:{opacity:0},animate:{opacity:1},children:["✓ ",g.name]})]})]})]}),e.jsxs(t.div,{className:"space-y-2",variants:h.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad de Páginas"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.select,{value:l.paginas,onChange:i=>N({...l,paginas:i.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.pages_options?a.pages_options.map((i,s)=>e.jsx("option",{value:i,children:i},s)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"24 páginas",children:"24 páginas"}),e.jsx("option",{value:"50 páginas",children:"50 páginas"}),e.jsx("option",{value:"100 páginas",children:"100 páginas"})]})}),e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsxs(t.div,{className:"space-y-2",variants:h.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Tapa"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.select,{value:l.tapa,onChange:i=>N({...l,tapa:i.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.cover_options?a.cover_options.map((i,s)=>e.jsx("option",{value:i,children:i},s)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Tapa Dura Personalizable",children:"Tapa Dura Personalizable"}),e.jsx("option",{value:"Tapa Blanda",children:"Tapa Blanda"})]})}),e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsxs(t.div,{className:"space-y-2",variants:h.formItem,whileHover:"hover",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Acabado"}),e.jsxs(t.div,{className:"relative",children:[e.jsx(t.select,{value:l.acabado,onChange:i=>N({...l,acabado:i.target.value}),className:"w-full p-3 bg-purple-50/50 rounded-xl text-sm focus:ring-2 focus:ring-primary focus:outline-none transition-all border border-purple-100 appearance-none",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.2)",backgroundColor:"rgba(245, 243, 255, 0.8)"},children:a!=null&&a.finish_options?a.finish_options.map((i,s)=>e.jsx("option",{value:i,children:i},s)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Limado",children:"Limado"}),e.jsx("option",{value:"Brillante",children:"Brillante"}),e.jsx("option",{value:"Mate",children:"Mate"})]})}),e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-purple-400 pointer-events-none"})]})]}),e.jsx(t.div,{className:"pt-4",children:e.jsxs(t.button,{onClick:U,disabled:w,className:`block text-center w-full py-3 px-4 rounded-xl font-bold text-sm shadow-lg hover:shadow-xl transition-all relative overflow-hidden group ${w?"bg-gray-400 cursor-not-allowed":k?"bg-gradient-to-r from-purple-600 to-pink-500 text-white":"bg-gradient-to-r from-orange-500 to-red-500 text-white"}`,whileHover:w?{}:{scale:1.02,boxShadow:"0 10px 25px -5px rgba(139, 92, 246, 0.4)"},whileTap:w?{}:{scale:.98},children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx(t.div,{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Guardando..."]}):k?e.jsxs(e.Fragment,{children:[e.jsx(I,{size:16}),"Crear proyecto",e.jsx(R,{size:16,className:"group-hover:translate-x-1 transition-transform"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"🔐"}),"Inicia sesión para crear",e.jsx(R,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})}),!w&&e.jsx(t.span,{className:`absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${k?"bg-gradient-to-r from-pink-600 to-purple-700":"bg-gradient-to-r from-red-600 to-orange-700"}`})]})})]})]}),e.jsxs(t.div,{className:"bg-white rounded-2xl p-6 flex flex-col items-center justify-center shadow-2xl border-2 border-white relative overflow-hidden",initial:{rotate:-2,scale:.95},animate:{rotate:0,scale:1},whileHover:{scale:1.03,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},children:[c?e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"w-full h-[300px] bg-gray-200 rounded-lg"})}):e.jsxs(e.Fragment,{children:[e.jsx(t.img,{src:p||(a==null?void 0:a.image)||"/assets/img/backgrounds/resources/default-image.png",alt:"Vista previa del libro personalizado",className:"max-w-full h-auto max-h-[400px] rounded-lg shadow-md transform transition-transform group-hover:scale-105",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}}),!p&&e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",initial:{opacity:0},whileHover:{opacity:1},children:e.jsxs("div",{className:"bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-sm flex items-center gap-2",children:[e.jsx(O,{size:16,className:"text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Sube tu portada"})]})}),p&&e.jsx(t.div,{className:"absolute top-4 right-4 bg-green-500 text-white px-2 py-1 rounded-full shadow-sm flex items-center gap-1",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,type:"spring"},children:e.jsx("span",{className:"text-xs font-medium",children:"✓ Personalizada"})})]}),e.jsxs(t.div,{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full shadow-sm flex items-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:[e.jsx(I,{size:14,className:"text-purple-500"}),e.jsx("span",{className:"text-xs font-medium",children:(a==null?void 0:a.name)||"Edición Especial"})]})]})]})]}),e.jsx(X,{children:F&&e.jsx(t.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L,children:e.jsx(t.div,{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:i=>i.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx(t.div,{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:e.jsx("span",{className:"text-2xl",children:"🔐"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"¡Inicia sesión para continuar!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Para guardar tu álbum personalizado necesitas tener una cuenta activa."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t.button,{onClick:A,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Iniciar sesión"}),e.jsx(t.button,{onClick:L,className:"w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Continuar sin guardar"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["¿No tienes cuenta?",e.jsx("a",{href:"/crear-cuenta",className:"text-purple-600 hover:underline ml-1",children:"Regístrate gratis"})]})]})})})})]})}export{ge as default};

var er=Object.defineProperty;var ar=(R,f,b)=>f in R?er(R,f,{enumerable:!0,configurable:!0,writable:!0,value:b}):R[f]=b;var oe=(R,f,b)=>ar(R,typeof f!="symbol"?f+"":f,b);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as rr}from"./Base-DDgVAx9J.js";import{S as Z}from"./SwitchFormGroup-CPKgKErd.js";import{T as Pa}from"./TextareaFormGroup-CgEriU3j.js";import{r as t}from"./index-BOnQTV8N.js";import{c as sr}from"./ReactAppend-DTVVXReZ.js";import{s as Je}from"./DxBox-C2WMS09E.js";import{S as _}from"./ProductCard-CwyKCVe-.js";import"./main-Bp3JhiuO.js";import{B as tr}from"./ModalImportItem-08p2KSos.js";import{M as Le}from"./Modal-D318Q6e0.js";import{T as nr}from"./Table-DaiyF0kF.js";import{I as G}from"./ImageFormGroup-BJgwOQgt.js";import{I as h}from"./InputFormGroup-BRr_So2P.js";import{Q as ir}from"./QuillFormGroup-ShbNmC_h.js";import{S as Sa}from"./SelectAPIFormGroup-ohdoPKKE.js";import{S as Ea}from"./SelectFormGroup-D5ZAG8Pz.js";import{D as ze}from"./DxButton-CsjWvhyj.js";import{C as lr}from"./CreateReactScript-CrlrjA2p.js";import{N as ee}from"./Number2Currency-e57Tgsuk.js";import{R as V}from"./ReactAppend-D7S498fx.js";import{S as or}from"./SetSelectValue-UxyCmHse.js";import{I as cr}from"./ItemPresetsRest-BDS9KUxS.js";import"./index-yBjzXJbu.js";import"./Global-BM4Id4Pw.js";import"./tippy-react.esm-BktTnHXY.js";import"./index-DE3dzT5W.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-BOnt0YF6.js";import"./MenuItemContainer-BFMpZmqE.js";import"./index.esm-DFiNGWUA.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";/* empty css               */import"./General-BmbBKdsB.js";const dr=({label:R,structure:f,onChange:b,typeOptions:N=[]})=>{const[p,y]=t.useState([]),I=()=>{y(typeof f=="object"?[...p,{...f}]:[...p,""])},A=o=>{const v=p.filter((g,d)=>d!==o);y(v),b(v)},F=(o,v,g)=>{const d=[...p];typeof d[o]=="object"?d[o][v]=g:d[o]=g,y(d),b(d)};return e.jsxs("div",{className:"dynamic-field-container",children:[e.jsx("label",{className:"form-label",children:R}),e.jsx("div",{className:"fields-list",children:p.map((o,v)=>e.jsxs("div",{className:"field-row",children:[typeof o=="object"?Object.keys(f).map(g=>e.jsx("div",{className:"field-input",children:g==="type"?e.jsxs("select",{className:"form-select select-type",value:o[g],onChange:d=>F(v,g,d.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar..."}),N.map(d=>e.jsx("option",{value:d,children:d},d))]}):e.jsx("input",{type:"text",className:"form-control ",value:o[g],onChange:d=>F(v,g,d.target.value),placeholder:g.charAt(0).toUpperCase()+g.slice(1)})},g)):e.jsx("div",{className:"field-input",children:e.jsx("input",{type:"text",className:"form-control ",value:o,onChange:g=>F(v,null,g.target.value),placeholder:"Nueva característica"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger remove-btn",onClick:()=>A(v),children:e.jsx("i",{className:"fas fa-times"})})]},v))}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary add-btn",onClick:I,children:[e.jsx("i",{className:"fas fa-plus me-1"})," Agregar"]}),e.jsx("style",{jsx:!0,children:`
                .dynamic-field-container {
                    margin-bottom: 1rem;
                }

                .fields-list {
                    margin-bottom: 0.5rem;
                }

                .field-row {
                    display: flex;
                    gap: 0.5rem;
                    margin-bottom: 0.5rem;
                    align-items: center;
                }

                .field-input {
                    flex: 1;
                }

                .remove-btn {
                    width: 32px;
                    height: 32px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 0;
                }

                .add-btn {
                    width: 100%;
                }
            `})]})};class Ia extends tr{constructor(){super(...arguments);oe(this,"path","admin/items");oe(this,"hasFiles",!0);oe(this,"importData",async b=>{console.log("FormData recibido en importData:",[...b.entries()]);try{const N=await fetch("/api/import-items",{method:"POST",body:b}),p=await N.json();if(console.log("Respuesta del servidor:",p),!N.ok)throw new Error((p==null?void 0:p.error)??(p==null?void 0:p.message)??"Error en la importación");return p}catch(N){throw console.error("Error en importData:",N.message),N}})}}const mr=new Ia,ur=({gridRef:R,modalRef:f})=>{const[b,N]=t.useState(null),[p,y]=t.useState(!1),[I,A]=t.useState(""),[F,o]=t.useState(!1),v=d=>{N(d.target.files[0])},g=async()=>{var E,C;if(!b){A("Por favor, selecciona un archivo."),o(!0);return}const d=new FormData;d.append("file",b),y(!0);try{const u=await mr.importData(d);if(console.log(u),u.error){const S=Array.isArray(u.error)?u.error.join(`
`):u.error;A(`Error en la importación:
${S}`),o(!0)}else A(u.message),o(!1),$(R.current).dxDataGrid("instance").refresh(),f.current&&f.current.close()}catch(u){A("Error al importar: "+(((C=(E=u.response)==null?void 0:E.data)==null?void 0:C.error)||u.message)),o(!0)}y(!1)};return e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{children:e.jsx("input",{className:"form-control",type:"file",accept:".xlsx",onChange:v})}),e.jsx("button",{onClick:g,disabled:p,className:"btn btn-primary mt-2",type:"button",children:p?"Subiendo...":"Subir Archivo"}),I&&e.jsx("div",{className:`alert ${F?"alert-danger":"alert-success"} mt-2`,role:"alert",children:e.jsx("div",{className:"alert-message",children:I})})]})})},ce=new Ia,O=new cr,fr=({categories:R,brands:f,collections:b})=>{const[N,p]=t.useState([]),y=t.useRef(),I=t.useRef(),[A,F]=t.useState(!1),[o,v]=t.useState(null),[g,d]=t.useState([]),E=t.useRef(),C=t.useRef(),u=t.useRef(null),S=t.useRef(),de=t.useRef(),ae=t.useRef(),me=t.useRef(),M=t.useRef(),ue=t.useRef(),re=t.useRef(),fe=t.useRef(),U=t.useRef(),pe=t.useRef(),H=t.useRef(),W=t.useRef(),Q=t.useRef(),X=t.useRef(),he=t.useRef(),ge=t.useRef(),xe=t.useRef(),ve=t.useRef(),be=t.useRef(),je=t.useRef(),Ne=t.useRef(),ye=t.useRef(),we=t.useRef(),Re=t.useRef(),_e=t.useRef(),D=t.useRef(),B=t.useRef(),k=t.useRef(),J=t.useRef(),T=t.useRef(),L=t.useRef(),[se,Fa]=t.useState(!1),[j,z]=t.useState("basic"),[Da,te]=t.useState(!1),[qe,Ve]=t.useState(!1),Ce=t.useRef(),Pe=t.useRef(),Se=t.useRef(),Ee=t.useRef(),Ie=t.useRef(),Fe=t.useRef(),De=t.useRef(),ke=t.useRef(),$e=t.useRef(),Te=t.useRef(),ne=t.useRef(),Oe=t.useRef(),Ae=t.useRef(),Ge=t.useRef();t.useRef([]);const[ka,$a]=t.useState(!1),[Ta,Oa]=t.useState(null),[Aa,Ga]=t.useState(null),[ie,q]=t.useState([]),Ue=t.useRef(),[Ma,Ba]=t.useState([]),[Ja,He]=t.useState([]),[pr,hr]=t.useState(!1),We=t.useRef(),La=async a=>{if(console.log("openPresetsModal called with item:",a),!a||!a.id){_.fire({title:"Error",text:"No se ha seleccionado un item válido para gestionar presets.",icon:"error"});return}console.log("Setting selectedItemForPresets:",a),v(a),u.current=a,F(!0),$(E.current).modal("show"),$(E.current).on("shown.bs.modal",async function(){console.log("Modal shown, loading presets for item:",a.id),await Qa(a.id),$(E.current).off("shown.bs.modal")})};t.useEffect(()=>{if(E.current){const a=E.current,r=()=>{if(C.current)try{const s=$(C.current).dxDataGrid("instance");s&&s.dispose()}catch(s){console.warn("Error disposing DataGrid:",s)}F(!1),v(null),u.current=null,d([])};return $(a).on("hidden.bs.modal",r),()=>{$(a).off("hidden.bs.modal",r)}}},[]),t.useEffect(()=>{const a=()=>{console.log("presetModal is opening - currentItemForPresetsRef:",u.current),console.log("presetModal is opening - selectedItemForPresets:",o)},r=()=>{console.log("presetModal is closing")};return $("#presetModal").on("shown.bs.modal",a),$("#presetModal").on("hidden.bs.modal",r),()=>{$("#presetModal").off("shown.bs.modal",a),$("#presetModal").off("hidden.bs.modal",r)}},[o]);const za=a=>{const s=Array.from(a.target.files).map(n=>({file:n,url:URL.createObjectURL(n)}));q(n=>[...n,...s])},qa=a=>{a.preventDefault();const s=Array.from(a.dataTransfer.files).map(n=>({file:n,url:URL.createObjectURL(n)}));q(n=>[...n,...s])},Va=a=>a.preventDefault(),Ua=(a,r)=>{a.preventDefault(),ie[r].id?q(n=>n.map((l,i)=>i===r?{...l,toDelete:!0}:l)):q(n=>n.filter((l,i)=>i!==r))};t.useEffect(()=>{if(N&&N.images){const a=N.images.map(r=>({id:r.id,url:`/storage/images/item_image/${r.url}`}));q(a)}},[N]);const Qe=a=>{var r,s;p(a||null),$a(!!(a!=null&&a.id)),Ce.current.value=(a==null?void 0:a.id)||"",$(Pe.current).val((a==null?void 0:a.category_id)||null).trigger("change"),$(Se.current).val((a==null?void 0:a.collection_id)||null).trigger("change"),or(Ee.current,(r=a==null?void 0:a.subcategory)==null?void 0:r.id,(s=a==null?void 0:a.subcategory)==null?void 0:s.name),$(Ie.current).val((a==null?void 0:a.brand_id)||null).trigger("change"),Fe.current.value=(a==null?void 0:a.name)||"",De.current.value=(a==null?void 0:a.color)||"",ke.current.value=(a==null?void 0:a.summary)||"",$e.current.value=(a==null?void 0:a.price)||0,Te.current.value=(a==null?void 0:a.discount)||0,Ge.current.value=(a==null?void 0:a.stock)||0,ne.current.value=null,ne.image.src=`/storage/images/item/${(a==null?void 0:a.image)??"undefined"}`,Oe.image.src=`/storage/images/item/${(a==null?void 0:a.texture)??"undefined"}`,Ae.editor.root.innerHTML=(a==null?void 0:a.description)??"",Ba((a==null?void 0:a.features)||[]),He((a==null?void 0:a.specifications)||[]),$(I.current).modal("show")},Ha=async a=>{a.preventDefault();const r={id:Ce.current.value||void 0,category_id:Pe.current.value,collection_id:Se.current.value||null,subcategory_id:Ee.current.value,brand_id:Ie.current.value,name:Fe.current.value,color:De.current.value,summary:ke.current.value,price:$e.current.value,discount:Te.current.value,description:Ae.current.value,stock:Ge.current.value},s=new FormData;for(const w in r)s.append(w,r[w]);s.append("features",JSON.stringify(Ma)),s.append("specifications",JSON.stringify(Ja));const n=ne.current.files[0];n&&s.append("image",n);const l=Oe.current.files[0];l&&s.append("texture",l),ie.forEach((w,Y)=>{w.toDelete||(w.file?s.append(`gallery[${Y}]`,w.file):s.append(`gallery_ids[${Y}]`,w.id))});const i=ie.filter(w=>w.toDelete).map(w=>parseInt(w.id,10));i.length>0&&s.append("deleted_images",JSON.stringify(i)),await ce.save(s)&&($(y.current).dxDataGrid("instance").refresh(),$(I.current).modal("hide"),q([]))},Wa=async({id:a,value:r})=>{await ce.boolean({id:a,field:"visible",value:r})&&$(y.current).dxDataGrid("instance").refresh()},le=async({id:a,field:r,value:s})=>{await ce.boolean({id:a,field:r,value:s})&&$(y.current).dxDataGrid("instance").refresh()};function Qa(a){if(!a){console.warn("loadPresets called without itemId");return}console.log("loadPresets called with itemId:",a),te(!0),d([]),O.getByItem(a).then(r=>{console.log("loadPresets result:",r);const s=r.data||[];d(s),setTimeout(()=>{console.log("Attempting to initialize presets grid with data:",s),Be(s)},300)}).catch(r=>{console.error("Error loading presets:",r),d([]),_.fire({title:"Error",text:"No se pudieron cargar los presets. Por favor, intenta nuevamente.",icon:"error"})}).finally(()=>{te(!1)})}const Xe=(a=null,r=null)=>{const s=r||o||u.current;if(!s||!s.id){_.fire({title:"Error",text:"No hay item seleccionado para gestionar presets. Por favor, selecciona un item válido.",icon:"error"});return}v(s),u.current=s,Fa(!!(a!=null&&a.id)),z("basic"),S.current.value=(a==null?void 0:a.id)||"",de.current.value=(s==null?void 0:s.id)||"",ae.current.value=(a==null?void 0:a.name)||"",me.current.value=(a==null?void 0:a.description)||"",M.current.value=(a==null?void 0:a.price)||"",ue.current.value=(a==null?void 0:a.discount)||0,fe.current.value=(a==null?void 0:a.sort_order)||0,U.current.value=a!=null&&a.configuration?JSON.stringify(a.configuration,null,2):"",pe.current.checked=(a==null?void 0:a.is_active)!==!1,re.image.src=`/storage/images/item_preset/${(a==null?void 0:a.image)??"undefined"}`,H.current&&(H.image.src=`/storage/images/item_preset/${(a==null?void 0:a.cover_image)??"undefined"}`),W.current&&(W.image.src=`/storage/images/item_preset/${(a==null?void 0:a.content_layer_image)??"undefined"}`),Q.current&&(Q.image.src=`/storage/images/item_preset/${(a==null?void 0:a.final_layer_image)??"undefined"}`),X.current&&(X.image.src=`/storage/images/item_preset/${(a==null?void 0:a.preview_image)??"undefined"}`);let n={};a!=null&&a.canvas_config&&(n=typeof a.canvas_config=="string"?JSON.parse(a.canvas_config):a.canvas_config),he.current.value=n.width||1e3,ge.current.value=n.height||1e3,xe.current.value=n.dpi||300,ve.current.value=n.background_color||"#ffffff";let l={};if(a!=null&&a.content_layer_config&&(l=typeof a.content_layer_config=="string"?JSON.parse(a.content_layer_config):a.content_layer_config),be.current.value=l.x||0,je.current.value=l.y||0,Ne.current.value=l.width||1e3,ye.current.value=l.height||1e3,we.current.value=l.rotation||0,Re.current.value=l.opacity||1,_e.current.value=l.fit_mode||"cover",console.log("Loading preset data:",a),console.log("Pages options from preset:",a==null?void 0:a.pages_options,typeof(a==null?void 0:a.pages_options)),console.log("Cover options from preset:",a==null?void 0:a.cover_options,typeof(a==null?void 0:a.cover_options)),console.log("Finish options from preset:",a==null?void 0:a.finish_options,typeof(a==null?void 0:a.finish_options)),a!=null&&a.pages_options){let i;if(typeof a.pages_options=="string")try{i=JSON.parse(a.pages_options)}catch{i=[]}else i=a.pages_options;Array.isArray(i)?(D.current.value=i.map(m=>typeof m=="object"?`${m.value}:${m.label}`:m).join(","),console.log("Pages options set to:",D.current.value)):D.current.value=""}else D.current.value="";if(B.current.value=(a==null?void 0:a.default_pages)||"",a!=null&&a.cover_options){let i;if(typeof a.cover_options=="string")try{i=JSON.parse(a.cover_options)}catch{i=[]}else i=a.cover_options;Array.isArray(i)?(k.current.value=i.map(m=>typeof m=="object"?`${m.value}:${m.label}`:m).join(","),console.log("Cover options set to:",k.current.value)):k.current.value=""}else k.current.value="";if(J.current.value=(a==null?void 0:a.default_cover)||"",a!=null&&a.finish_options){let i;if(typeof a.finish_options=="string")try{i=JSON.parse(a.finish_options)}catch{i=[]}else i=a.finish_options;Array.isArray(i)?(T.current.value=i.map(m=>typeof m=="object"?`${m.value}:${m.label}`:m).join(","),console.log("Finish options set to:",T.current.value)):T.current.value=""}else T.current.value="";L.current.value=(a==null?void 0:a.default_finish)||"",(!a||!a.id)&&(D.current.value="",B.current.value="",k.current.value="",J.current.value="",T.current.value="",L.current.value=""),console.log("onPresetModalOpen - antes de mostrar modal, selectedItemForPresets:",o,"targetItem:",s),$("#presetModal").modal("show")},Me=a=>{if(console.log("updatePresetsGrid called with data:",a),!C.current){console.warn("presetsGridRef.current is null in updatePresetsGrid");return}try{const r=$(C.current).dxDataGrid("instance");r?(console.log("Updating existing DataGrid instance"),r.option("dataSource",a)):(console.log("No DataGrid instance found, initializing new one"),Be(a))}catch(r){console.warn("DataGrid instance not available, will initialize on next load",r)}},Be=a=>{if(console.log("initializePresetsGrid called with data:",a),!C.current){console.warn("presetsGridRef.current is null in initializePresetsGrid");return}if(!$(C.current).is(":visible")){console.warn("Grid element is not visible, retrying in 500ms"),setTimeout(()=>Be(a),500);return}try{const r=$(C.current).dxDataGrid("instance");if(r){console.log("DataGrid already initialized, updating data"),r.option("dataSource",a);return}}catch{console.log("No existing DataGrid instance found, creating new one")}console.log("Creating new DataGrid instance"),$(C.current).dxDataGrid({dataSource:a,keyExpr:"id",showBorders:!0,columnAutoWidth:!0,searchPanel:{visible:!0,placeholder:"Buscar presets..."},filterRow:{visible:!0},headerFilter:{visible:!0},paging:{enabled:!1},onContentReady:function(){console.log("DataGrid content ready with",a.length,"items")},columns:[{dataField:"name",caption:"Nombre",width:"200px"},{dataField:"description",caption:"Descripción",width:"250px"},{dataField:"price",caption:"Precio",width:"80px",cellTemplate:(r,s)=>{r.text(`S/. ${ee(s.value)}`)}},{dataField:"discount",caption:"Descuento",width:"80px",cellTemplate:(r,s)=>{s.value>0?r.text(`S/. ${ee(s.value)}`):r.text("-")}},{caption:"Precio Final",width:"100px",cellTemplate:(r,s)=>{const n=s.data.discount>0?s.data.price-s.data.discount:s.data.price;r.html(`<span class="fw-bold text-success">S/. ${ee(n)}</span>`)}},{dataField:"sort_order",caption:"Orden",width:"70px"},{dataField:"is_active",caption:"Estado",width:"100px",cellTemplate:(r,s)=>{const n=document.createElement("div");n.className="form-check form-switch";const l=document.createElement("input");l.className="form-check-input",l.type="checkbox",l.checked=s.value,l.onchange=i=>Ya({id:s.data.id,value:i.target.checked}),n.appendChild(l),r.append(n)}},{caption:"Acciones",width:"120px",allowFiltering:!1,allowSorting:!1,cellTemplate:(r,s)=>{const n=document.createElement("div");n.className="d-flex gap-1";const l=document.createElement("button");l.className="btn btn-sm btn-outline-primary",l.innerHTML='<i class="fas fa-edit"></i>',l.title="Editar preset",l.onclick=()=>{const m=o||u.current;console.log("Edit preset clicked - item:",m,"preset:",s.data),Xe(s.data,m)};const i=document.createElement("button");i.className="btn btn-sm btn-outline-danger",i.innerHTML='<i class="fas fa-trash"></i>',i.title="Eliminar preset",i.onclick=()=>Ka(s.data.id),n.appendChild(l),n.appendChild(i),r.append(n)}}]})},Xa=async a=>{var l,i,m,w,Y,Ye,Ke,Ze,ea,aa,ra,sa,ta,na,ia,la,oa,ca,da,ma,ua,fa,pa,ha,ga,xa,va,ba,ja,Na,ya,wa,Ra;a.preventDefault();const r=o||u.current,s=(l=de.current)==null?void 0:l.value;console.log("onPresetSubmit - selectedItemForPresets:",o),console.log("onPresetSubmit - currentItemForPresetsRef.current:",u.current),console.log("onPresetSubmit - targetItem:",r),console.log("onPresetSubmit - itemIdFromForm:",s);const n=(r==null?void 0:r.id)||s;if(!n){_.fire({title:"Error",text:"No hay item seleccionado para asociar el preset. Por favor, cierra este modal y vuelve a abrir desde el botón 'Gestionar Presets' del item deseado.",icon:"error"});return}Ve(!0);try{if(!((m=(i=ae.current)==null?void 0:i.value)!=null&&m.trim()))throw new Error("El nombre es obligatorio");if(!((w=M.current)!=null&&w.value)||isNaN(parseFloat(M.current.value)))throw new Error("El precio debe ser un número válido");if(parseFloat(M.current.value)<0)throw new Error("El precio no puede ser negativo");const c=new FormData;if((Y=S.current)!=null&&Y.value&&c.append("id",S.current.value),c.append("item_id",n),c.append("name",ae.current.value.trim()),c.append("description",me.current.value||""),c.append("price",M.current.value),c.append("discount",ue.current.value||0),c.append("sort_order",fe.current.value||0),c.append("is_active",pe.current.checked?1:0),U.current.value.trim())try{JSON.parse(U.current.value),c.append("configuration",U.current.value)}catch{throw new Error("La configuración debe ser un JSON válido")}re.current.files[0]&&c.append("image",re.current.files[0]),(Ye=H.current)!=null&&Ye.files[0]&&c.append("cover_image",H.current.files[0]),(Ke=W.current)!=null&&Ke.files[0]&&c.append("content_layer_image",W.current.files[0]),(Ze=Q.current)!=null&&Ze.files[0]&&c.append("final_layer_image",Q.current.files[0]),(ea=X.current)!=null&&ea.files[0]&&c.append("preview_image",X.current.files[0]);const Za={width:parseInt((aa=he.current)==null?void 0:aa.value)||1e3,height:parseInt((ra=ge.current)==null?void 0:ra.value)||1e3,dpi:parseInt((sa=xe.current)==null?void 0:sa.value)||300,background_color:((ta=ve.current)==null?void 0:ta.value)||"#ffffff",format:"JPEG",quality:90};c.append("canvas_config",JSON.stringify(Za));const _a={x:parseInt((na=be.current)==null?void 0:na.value)||0,y:parseInt((ia=je.current)==null?void 0:ia.value)||0,width:parseInt((la=Ne.current)==null?void 0:la.value)||1e3,height:parseInt((oa=ye.current)==null?void 0:oa.value)||1e3,rotation:parseFloat((ca=we.current)==null?void 0:ca.value)||0,opacity:parseFloat((da=Re.current)==null?void 0:da.value)||1,blend_mode:"normal",fit_mode:((ma=_e.current)==null?void 0:ma.value)||"cover",allow_upload:!0,max_file_size:10,allowed_formats:["jpg","jpeg","png","gif"]};if(c.append("content_layer_config",JSON.stringify(_a)),console.log("Content Layer Config being sent:",_a),(fa=(ua=D.current)==null?void 0:ua.value)!=null&&fa.trim())try{const P=D.current.value.split(",").map(K=>{const x=K.trim().split(":");return x.length===2?{value:x[0].trim(),label:x[1].trim()}:{value:x[0].trim(),label:x[0].trim()}});c.append("pages_options",JSON.stringify(P)),console.log("Pages Options being sent:",P)}catch{throw new Error("Error al procesar las opciones de páginas")}if((ha=(pa=B.current)==null?void 0:pa.value)!=null&&ha.trim()&&(c.append("default_pages",B.current.value.trim()),console.log("Default Pages being sent:",B.current.value.trim())),(xa=(ga=k.current)==null?void 0:ga.value)!=null&&xa.trim())try{const P=k.current.value.split(",").map(K=>{const x=K.trim().split(":");return x.length===2?{value:x[0].trim(),label:x[1].trim()}:{value:x[0].trim(),label:x[0].trim()}});c.append("cover_options",JSON.stringify(P)),console.log("Cover Options being sent:",P)}catch{throw new Error("Error al procesar las opciones de tapa")}if((ba=(va=J.current)==null?void 0:va.value)!=null&&ba.trim()&&(c.append("default_cover",J.current.value.trim()),console.log("Default Cover being sent:",J.current.value.trim())),(Na=(ja=T.current)==null?void 0:ja.value)!=null&&Na.trim())try{const P=T.current.value.split(",").map(K=>{const x=K.trim().split(":");return x.length===2?{value:x[0].trim(),label:x[1].trim()}:{value:x[0].trim(),label:x[0].trim()}});c.append("finish_options",JSON.stringify(P)),console.log("Finish Options being sent:",P)}catch{throw new Error("Error al procesar las opciones de acabado")}(wa=(ya=L.current)==null?void 0:ya.value)!=null&&wa.trim()&&(c.append("default_finish",L.current.value.trim()),console.log("Default Finish being sent:",L.current.value.trim())),se&&((Ra=S.current)!=null&&Ra.value)?(c.has("id")?c.set("id",S.current.value):c.append("id",S.current.value),await O.updateForItem(n,S.current.value,c)):await O.saveForItem(n,c),te(!0);const Ca=await O.getByItem(n);d(Ca.data||[]),Me(Ca.data||[]),te(!1),$("#presetModal").modal("hide"),_.fire({title:"¡Éxito!",text:`Preset ${se?"actualizado":"creado"} correctamente`,icon:"success",timer:2e3})}catch(c){_.fire({title:"Error",text:c.message||"Error al guardar el preset",icon:"error"})}finally{Ve(!1)}},Ya=async({id:a,value:r})=>{const s=o||u.current;if(!s||!s.id){_.fire({title:"Error",text:"No hay item seleccionado. Por favor, selecciona un item válido.",icon:"error"});return}try{console.log("Cambiando estado del preset:",a,"del item:",s.id,"a:",r),await O.toggleStatusForItem(s.id,a);const n=await O.getByItem(s.id);d(n.data||[]),Me(n.data||[]),_.fire({title:"¡Éxito!",text:`Preset ${r?"activado":"desactivado"} correctamente`,icon:"success",timer:2e3,showConfirmButton:!1})}catch(n){console.error("Error al cambiar estado del preset:",n),_.fire({title:"Error",text:"Error al cambiar el estado del preset: "+n.message,icon:"error"})}},Ka=async a=>{const r=o||u.current;if(!r||!r.id){_.fire({title:"Error",text:"No hay item seleccionado. Por favor, selecciona un item válido.",icon:"error"});return}if((await _.fire({title:"¿Estás seguro?",text:"Esta acción eliminará permanentemente el preset",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{console.log("Eliminando preset:",a,"del item:",r.id),await O.deleteForItem(r.id,a);const n=await O.getByItem(r.id);d(n.data||[]),Me(n.data||[]),_.fire({title:"¡Eliminado!",text:"El preset ha sido eliminado correctamente",icon:"success",timer:2e3})}catch(n){console.error("Error al eliminar preset:",n),_.fire({title:"Error",text:"Error al eliminar el preset: "+n.message,icon:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsx(nr,{gridRef:y,title:"Items",rest:ce,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(y.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>Qe()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>onModalImportOpen()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(a,{data:r})=>{var s,n,l;a.html(Je.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(s=r.collection)==null?void 0:s.name}),e.jsx("b",{className:"d-block",children:(n=r.category)==null?void 0:n.name}),e.jsx("small",{className:"text-muted",children:(l=r.subcategory)==null?void 0:l.name})]})))}},{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},{dataField:"brand.name",caption:"Marca",width:"120px"},{dataField:"name",caption:"Nombre",width:"300px",cellTemplate:(a,{data:r})=>{a.html(Je.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:r.name}),e.jsx("br",{}),e.jsx("span",{className:"truncate",children:r.summary})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(a,{data:r})=>{a.html(Je.renderToString(e.jsxs(e.Fragment,{children:[r.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:["S/.",ee(r.price)]}),e.jsxs("span",{children:["S/.",ee(r.discount>0?r.discount:r.price)]})]})))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(a,{data:r})=>{V(a,e.jsx("img",{src:`/storage/images/item/${r.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:s=>s.target.src="/api/cover/thumbnail/null"}))}},{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(a,{data:r})=>{V(a,e.jsx(Z,{checked:r.is_new,onChange:s=>le({id:r.id,field:"is_new",value:s.target.checked})}))}},{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(a,{data:r})=>{V(a,e.jsx(Z,{checked:r.offering,onChange:s=>le({id:r.id,field:"offering",value:s.target.checked})}))}},{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(a,{data:r})=>{V(a,e.jsx(Z,{checked:r.recommended,onChange:s=>le({id:r.id,field:"recommended",value:s.target.checked})}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(a,{data:r})=>{V(a,e.jsx(Z,{checked:r.featured,onChange:s=>le({id:r.id,field:"featured",value:s.target.checked})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(a,{data:r})=>{V(a,e.jsx(Z,{checked:r.visible,onChange:s=>Wa({id:r.id,value:s.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(a,{data:r})=>{a.css("text-overflow","unset"),a.append(ze({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>Qe(r)})),a.append(ze({className:"btn btn-xs btn-soft-info",title:"Gestionar Presets",icon:"fa fa-layer-group",onClick:()=>La(r)})),a.append(ze({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>onDeleteClicked(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(Le,{modalRef:I,title:ka?"Editar Item":"Agregar Item",onSubmit:Ha,size:"xl",children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-4",id:"principal-container",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h5",{className:"card-title mb-0",children:"Información Básica"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("input",{ref:Ce,type:"hidden"}),e.jsx(Ea,{eRef:Se,label:"Colección",dropdownParent:"#principal-container",onChange:a=>Ga(a.target.value),children:b.map((a,r)=>e.jsx("option",{value:a.id,children:a.name},r))}),e.jsx(Sa,{onChange:a=>Oa(a.target.value),eRef:Pe,label:"Categoría",searchAPI:"/api/admin/categories/paginate",searchBy:"name",filter:["collection_id","=",Aa],dropdownParent:"#principal-container"}),e.jsx(Sa,{eRef:Ee,label:"Subcategoría",searchAPI:"/api/admin/subcategories/paginate",searchBy:"name",filter:["category_id","=",Ta],dropdownParent:"#principal-container"}),e.jsx(Ea,{eRef:Ie,label:"Marca",required:!0,dropdownParent:"#principal-container",children:f.map((a,r)=>e.jsx("option",{value:a.id,children:a.name},r))}),e.jsx(h,{eRef:Fe,label:"Nombre",required:!0}),e.jsx(h,{eRef:De,label:"Color",required:!0}),e.jsx(Pa,{eRef:ke,label:"Resumen",rows:3,required:!0})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h5",{className:"card-title mb-0",children:"Precios y Stock"})}),e.jsxs("div",{className:"card-body",children:[e.jsx(h,{eRef:$e,label:"Precio",type:"number",step:"0.01",required:!0}),e.jsx(h,{eRef:Te,label:"Descuento",type:"number",step:"0.01"}),e.jsx(h,{label:"Stock",eRef:Ge,type:"number"})]})]})]})}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"card mt-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h5",{className:"card-title mb-0",children:"Especificaciones"})}),e.jsx("div",{className:"card-body",children:e.jsx(dr,{onChange:He,label:"Especificaciones",structure:{type:"",title:"",description:""},typeOptions:["General","Principal"]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h5",{className:"card-title mb-0",children:"Imágenes"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(G,{eRef:ne,label:"Imagen Principal",aspect:1})}),e.jsx("div",{className:"col-md-6",children:e.jsx(G,{eRef:Oe,label:"Textura",aspect:1})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"form-label",children:"Galería de Imágenes"}),e.jsx("input",{id:"input-item-gallery",ref:Ue,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:za}),e.jsx("div",{className:"gallery-upload-area",onClick:()=>Ue.current.click(),onDrop:qa,onDragOver:Va,children:e.jsx("span",{className:"form-label d-block mb-1",children:"Arrastra y suelta imágenes aquí o haz clic para agregar"})}),e.jsx("div",{className:"gallery-preview mt-2",children:ie.map((a,r)=>e.jsxs("div",{className:"gallery-thumbnail",children:[e.jsx("img",{src:`${a.url}`,alt:"preview"}),e.jsx("button",{className:"btn btn-xs btn-danger gallery-remove-btn",onClick:s=>Ua(s,r),children:"×"})]},r))})]})]})]})]})]}),e.jsxs("div",{className:"card mt-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h5",{className:"card-title mb-0",children:"Descripción Completa"})}),e.jsx("div",{className:"card-body",children:e.jsx(ir,{eRef:Ae,label:""})})]})]}),e.jsx(Le,{modalRef:We,title:"Importar Datos",size:"sm",children:e.jsx(ur,{gridRef:y,modalRef:We})}),e.jsxs(Le,{modalRef:E,title:`Gestión de Presets - ${(o==null?void 0:o.name)||""}`,size:"xl",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:["Presets de ",o==null?void 0:o.name]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{const a=o||u.current;console.log("Nuevo Preset button clicked - currentItem:",a),Xe(null,a)},children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Nuevo Preset"]})]})})}),e.jsx("div",{className:"table-responsive",children:Da?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Cargando presets..."})]}):e.jsx("div",{ref:C,style:{height:"400px"}})})]}),e.jsx("div",{className:"modal fade",id:"presetModal",tabIndex:"-1","aria-labelledby":"presetModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"presetModalLabel",children:se?"Editar Preset":"Nuevo Preset"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("form",{onSubmit:Xa,children:[e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{ref:S,type:"hidden",name:"id"}),e.jsx("input",{ref:de,type:"hidden",name:"item_id"}),e.jsxs("ul",{className:"nav nav-tabs mb-3",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("a",{className:`nav-link ${j==="basic"?"active":""}`,onClick:()=>z("basic"),href:"#",children:"Información Básica"})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("a",{className:`nav-link ${j==="design"?"active":""}`,onClick:()=>z("design"),href:"#",children:"Capas de Diseño"})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("a",{className:`nav-link ${j==="canvas"?"active":""}`,onClick:()=>z("canvas"),href:"#",children:"Configuración Canvas"})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("a",{className:`nav-link ${j==="content"?"active":""}`,onClick:()=>z("content"),href:"#",children:"Área de Contenido"})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("a",{className:`nav-link ${j==="options"?"active":""}`,onClick:()=>z("options"),href:"#",children:"Opciones de Producto"})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:`tab-pane fade ${j==="basic"?"show active":""}`,style:{display:j==="basic"?"block":"none"},children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(h,{eRef:ae,name:"name",label:"Nombre del Preset",placeholder:"Ej: Álbum Premium 30x30"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:M,name:"price",label:"Precio",type:"number",step:"0.01",min:"0"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:ue,name:"discount",label:"Descuento (%)",type:"number",step:"0.01",min:"0",max:"100"})})]}),e.jsx(Pa,{eRef:me,name:"description",label:"Descripción",placeholder:"Descripción del preset...",rows:3}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(G,{eRef:re,name:"image",label:"Imagen Principal del Preset"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(G,{eRef:X,name:"preview_image",label:"Imagen de Vista Previa"})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:fe,name:"sort_order",label:"Orden",type:"number",min:"0",defaultValue:"0"})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Estado"}),e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{ref:pe,className:"form-check-input",type:"checkbox",defaultChecked:!0}),e.jsx("label",{className:"form-check-label",children:"Activo"})]})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Configuración Adicional (JSON)"}),e.jsx("textarea",{ref:U,className:"form-control",rows:"4",placeholder:'{"pages": 50, "size": "30x30", "cover": "hardcover"}'}),e.jsx("small",{className:"form-text text-muted",children:"Configuración técnica en formato JSON (opcional)"})]})]}),e.jsx("div",{className:`tab-pane fade ${j==="design"?"show active":""}`,style:{display:j==="design"?"block":"none"},children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{className:"mb-0",children:"Capa de Portada (Cover)"})}),e.jsxs("div",{className:"card-body",children:[e.jsx(G,{eRef:H,name:"cover_image",label:"Imagen de Portada"}),e.jsx("small",{className:"text-muted",children:"Esta es la imagen de fondo que aparecerá en el editor"})]})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{className:"mb-0",children:"Capa de Contenido"})}),e.jsxs("div",{className:"card-body",children:[e.jsx(G,{eRef:W,name:"content_layer_image",label:"Imagen de Contenido"}),e.jsx("small",{className:"text-muted",children:"Capa intermedia donde el usuario subirá su imagen"})]})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{className:"mb-0",children:"Capa Final (Tapa)"})}),e.jsxs("div",{className:"card-body",children:[e.jsx(G,{eRef:Q,name:"final_layer_image",label:"Imagen de Tapa Final"}),e.jsx("small",{className:"text-muted",children:"Esta es la capa superior que se superpone al contenido"})]})]})})]})}),e.jsxs("div",{className:`tab-pane fade ${j==="canvas"?"show active":""}`,style:{display:j==="canvas"?"block":"none"},children:[e.jsx("h6",{className:"mb-3",children:"Configuración del Canvas"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:he,name:"canvas_width",label:"Ancho (cm)",type:"number",min:"1",step:"0.1",defaultValue:"30"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:ge,name:"canvas_height",label:"Alto (cm)",type:"number",min:"1",step:"0.1",defaultValue:"30"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:xe,name:"canvas_dpi",label:"DPI (puntos por pulgada)",type:"number",min:"72",defaultValue:"300"})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Color de Fondo"}),e.jsx("input",{ref:ve,type:"color",className:"form-control form-control-color",defaultValue:"#ffffff"})]})})]}),e.jsx("div",{className:"mb-2",children:e.jsx("small",{className:"form-text text-muted",children:"El tamaño del canvas se ingresa en centímetros. El valor DPI recomendado para impresión es 300."})})]}),e.jsxs("div",{className:`tab-pane fade ${j==="content"?"show active":""}`,style:{display:j==="content"?"block":"none"},children:[e.jsx("h6",{className:"mb-3",children:"Configuración del Área de Contenido del Usuario"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:be,name:"content_x",label:"Posición X",type:"number",defaultValue:"0"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:je,name:"content_y",label:"Posición Y",type:"number",defaultValue:"0"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:Ne,name:"content_width",label:"Ancho",type:"number",min:"1",defaultValue:"1000"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:ye,name:"content_height",label:"Alto",type:"number",min:"1",defaultValue:"1000"})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:we,name:"content_rotation",label:"Rotación (grados)",type:"number",min:"-360",max:"360",step:"0.1",defaultValue:"0"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(h,{eRef:Re,name:"content_opacity",label:"Opacidad",type:"number",min:"0",max:"1",step:"0.1",defaultValue:"1"})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Modo de Ajuste"}),e.jsxs("select",{ref:_e,className:"form-control",children:[e.jsx("option",{value:"cover",children:"Cover (cubrir área)"}),e.jsx("option",{value:"contain",children:"Contain (ajustar manteniendo aspecto)"}),e.jsx("option",{value:"fill",children:"Fill (estirar para llenar)"}),e.jsx("option",{value:"none",children:"None (tamaño original)"})]})]})})]})]})]}),e.jsxs("div",{className:`tab-pane fade ${j==="options"?"show active":""}`,style:{display:j==="options"?"block":"none"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:"mb-3",children:"Opciones de Páginas"}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Cantidad de Páginas Disponibles"}),e.jsx("textarea",{ref:D,className:"form-control",rows:"3",placeholder:"Ej: 20,30,40,50 o 20:20 páginas,30:30 páginas,40:40 páginas",title:"Formato: valor:etiqueta separados por comas. Ej: 20:20 páginas,30:30 páginas"}),e.jsx("small",{className:"form-text text-muted",children:"Formato: valor:etiqueta separados por comas. Ej: 20:20 páginas,30:30 páginas"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cantidad de Páginas por Defecto"}),e.jsx("input",{ref:B,type:"text",className:"form-control",placeholder:"Ej: 20"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:"mb-3",children:"Opciones de Tapa"}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Tipos de Tapa Disponibles"}),e.jsx("textarea",{ref:k,className:"form-control",rows:"3",placeholder:"Ej: dura:Tapa Dura,blanda:Tapa Blanda,premium:Tapa Premium",title:"Formato: valor:etiqueta separados por comas"}),e.jsx("small",{className:"form-text text-muted",children:"Formato: valor:etiqueta separados por comas. Ej: dura:Tapa Dura,blanda:Tapa Blanda"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de Tapa por Defecto"}),e.jsx("input",{ref:J,type:"text",className:"form-control",placeholder:"Ej: dura"})]})]})]}),e.jsx("div",{className:"row mt-4",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("h5",{className:"mb-3",children:"Opciones de Acabado"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Tipos de Acabado Disponibles"}),e.jsx("textarea",{ref:T,className:"form-control",rows:"3",placeholder:"Ej: mate:Acabado Mate,brillante:Acabado Brillante,satinado:Acabado Satinado",title:"Formato: valor:etiqueta separados por comas"}),e.jsx("small",{className:"form-text text-muted",children:"Formato: valor:etiqueta separados por comas. Ej: mate:Acabado Mate,brillante:Acabado Brillante"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de Acabado por Defecto"}),e.jsx("input",{ref:L,type:"text",className:"form-control",placeholder:"Ej: mate"})]})})]})]})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:qe,children:qe?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Guardando..."]}):`${se?"Actualizar":"Crear"} Preset`})]})]})]})})}),e.jsx("style",{jsx:!0,children:`
                .gallery-upload-area {
                    border: 2px dashed #ccc;
                    padding: 0px;
                    text-align: center;
                    cursor: pointer;
                    border-radius: 4px;
                    box-shadow: 2.5px 2.5px 5px rgba(0, 0, 0, 0.125);

                    height: 100px;
                    width: 100%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background-color: #f8f9fa;
                    transition: all 0.3s ease;
                }

                .gallery-upload-area:hover {
                    border-color: #0d6efd;
                    background-color: #e9f0ff;
                }

                .gallery-preview {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 8px;
                }

                .gallery-thumbnail {
                    position: relative;
                    width: 80px;
                    height: 80px;
                    border-radius: 4px;
                    overflow: hidden;
                }

                .gallery-thumbnail img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                }

                .gallery-remove-btn {
                    position: absolute;
                    top: 0;
                    right: 0;
                    padding: 0;
                    width: 20px;
                    height: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 10px;
                }
            `})]})};lr((R,f)=>{sr.createRoot(R).render(e.jsx(rr,{...f,title:"Items",children:e.jsx(fr,{...f})}))});

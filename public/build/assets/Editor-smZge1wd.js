import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{r as b,R as le}from"./index-BH53Isel.js";import{a as aa,b as Mo,_ as ar,e as z}from"./objectWithoutPropertiesLoose-G_JZ8CQC.js";import{h as ia}from"./hoist-non-react-statics.cjs-lJxeXavk.js";import{r as jo,R as Ao}from"./index-rimy3MAc.js";import{c as J}from"./createLucideIcon-Cy5Ya80P.js";import{I as ri,S as ko,P as Bo}from"./sparkles-BeGvo0qS.js";import{B as Lo,h as Fo}from"./Editor-DXckd8bb.js";import{e as $o}from"./index-BSWw-p5k.js";import{T as ft}from"./trash-2-DK1wnsDn.js";import{U as Ho}from"./upload-qgEr5bIl.js";import{X as Go}from"./x-DBMwyD6F.js";import{M as oa}from"./minus-jyhodMPN.js";import{P as Wr}from"./plus-Bot15Khs.js";import{C as zo}from"./chevron-down-DS-mdh9v.js";import{C as Wo}from"./chevron-left-B2s3ZsB7.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./index.es-p8wkj5I3.js";import"./index-Bv81MoWS.js";import"./index-Chjiymov.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=J("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=J("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=J("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=J("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=J("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=J("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=J("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=J("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=J("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=J("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=J("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=J("FlipVertical",[["path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3",key:"14bfxa"}],["path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3",key:"14rx03"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=J("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=J("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=J("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=J("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=J("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=J("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=J("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=J("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=J("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=J("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=J("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=J("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=J("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=J("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=J("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=J("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=J("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=J("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=J("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=J("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=J("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=J("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=J("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=J("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=J("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function Je({children:e,onClick:t,className:r="",variant:n="default",size:a="default",disabled:i=!1,icon:o=null}){const s="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},p={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return l.jsxs("button",{className:`${s} ${c[n]} ${p[a]} ${r} gap-2`,onClick:t,disabled:i,children:[o&&l.jsx("span",{className:"w-4 h-4",children:o}),e]})}const _e=({value:e=[50],min:t=0,max:r=100,step:n=1,onValueChange:a,label:i,unit:o="%"})=>{const[s,c]=b.useState(e[0]),p=g=>{const u=Number.parseInt(g.target.value);c(u),a&&a([u])};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i}),l.jsxs("span",{className:"text-sm text-gray-500",children:[s,o]})]}),l.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:l.jsx("input",{type:"range",min:t,max:r,step:n,value:s,onChange:p,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},Is=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:105,contrast:115,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],ii=b.createContext({dragDropManager:void 0});function Be(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var sa=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),la=function(){return Math.random().toString(36).substring(7).split("").join(".")},ca={INIT:"@@redux/INIT"+la(),REPLACE:"@@redux/REPLACE"+la()};function Ns(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function rn(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Be(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Be(1));return r(rn)(e,t)}if(typeof e!="function")throw new Error(Be(2));var a=e,i=t,o=[],s=o,c=!1;function p(){s===o&&(s=o.slice())}function g(){if(c)throw new Error(Be(3));return i}function u(m){if(typeof m!="function")throw new Error(Be(4));if(c)throw new Error(Be(5));var v=!0;return p(),s.push(m),function(){if(v){if(c)throw new Error(Be(6));v=!1,p();var w=s.indexOf(m);s.splice(w,1),o=null}}}function d(m){if(!Ns(m))throw new Error(Be(7));if(typeof m.type>"u")throw new Error(Be(8));if(c)throw new Error(Be(9));try{c=!0,i=a(i,m)}finally{c=!1}for(var v=o=s,x=0;x<v.length;x++){var w=v[x];w()}return m}function f(m){if(typeof m!="function")throw new Error(Be(10));a=m,d({type:ca.REPLACE})}function h(){var m,v=u;return m={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Be(11));function C(){w.next&&w.next(g())}C();var N=v(C);return{unsubscribe:N}}},m[sa]=function(){return this},m}return d({type:ca.INIT}),n={dispatch:d,subscribe:u,getState:g,replaceReducer:f},n[sa]=h,n}function da(e,t){return function(){return t(e.apply(this,arguments))}}function ua(e,t){if(typeof e=="function")return da(e,t);if(typeof e!="object"||e===null)throw new Error(Be(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=da(a,t))}return r}function oi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function Es(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Be(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(c){return c(o)});return i=oi.apply(void 0,s)(a.dispatch),aa(aa({},a),{},{dispatch:i})}}}function Y(e,t,...r){if(Ps()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Ps(){return typeof process<"u"&&!0}function Os(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function Ts(e,t){return e.filter(r=>r!==t)}function si(e){return typeof e=="object"}function Rs(e,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function Ms(e,t){return e.filter(r=>t.indexOf(r)>-1)}const nn="dnd-core/INIT_COORDS",fr="dnd-core/BEGIN_DRAG",an="dnd-core/PUBLISH_DRAG_SOURCE",hr="dnd-core/HOVER",vr="dnd-core/DROP",mr="dnd-core/END_DRAG";function pa(e,t){return{type:nn,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const js={type:nn,payload:{clientOffset:null,sourceClientOffset:null}};function As(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,s=e.getMonitor(),c=e.getRegistry();e.dispatch(pa(i)),ks(r,s,c);const p=Fs(r,s);if(p==null){e.dispatch(js);return}let g=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");Bs(o),g=o(p)}e.dispatch(pa(i,g));const d=c.getSource(p).beginDrag(s,p);if(d==null)return;Ls(d),c.pinSource(p);const f=c.getSourceType(p);return{type:fr,payload:{itemType:f,item:d,sourceId:p,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!a}}}}function ks(e,t,r){Y(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){Y(r.getSource(n),"Expected sourceIds to be registered.")})}function Bs(e){Y(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ls(e){Y(si(e),"Item must be an object.")}function Fs(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function $s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){$s(e,a,r[a])})}return e}function Gs(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();zs(n),Us(n).forEach((o,s)=>{const c=Ws(o,s,a,n),p={type:vr,payload:{dropResult:Hs({},r,c)}};e.dispatch(p)})}}function zs(e){Y(e.isDragging(),"Cannot call drop while not dragging."),Y(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function Ws(e,t,r,n){const a=r.getTarget(e);let i=a?a.drop(n,e):void 0;return qs(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function qs(e){Y(typeof e>"u"||si(e),"Drop result must either be an object or undefined.")}function Us(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Vs(e){return function(){const r=e.getMonitor(),n=e.getRegistry();Ys(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:mr}}}function Ys(e){Y(e.isDragging(),"Cannot call endDrag while not dragging.")}function qr(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function Xs(e){return function(r,{clientOffset:n}={}){Js(r);const a=r.slice(0),i=e.getMonitor(),o=e.getRegistry(),s=i.getItemType();return _s(a,o,s),Ks(a,i,o),Qs(a,i,o),{type:hr,payload:{targetIds:a,clientOffset:n||null}}}}function Js(e){Y(Array.isArray(e),"Expected targetIds to be an array.")}function Ks(e,t,r){Y(t.isDragging(),"Cannot call hover while not dragging."),Y(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];Y(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);Y(i,"Expected targetIds to be registered.")}}function _s(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],i=t.getTargetType(a);qr(i,r)||e.splice(n,1)}}function Qs(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function Zs(e){return function(){if(e.getMonitor().isDragging())return{type:an}}}function el(e){return{beginDrag:As(e),publishDragSource:Zs(e),hover:Xs(e),drop:Gs(e),endDrag:Vs(e)}}class tl{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const s=i.apply(t,o);typeof s<"u"&&r(s)}}const a=el(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function rl(e,t){return{x:e.x+t.x,y:e.y+t.y}}function li(e,t){return{x:e.x-t.x,y:e.y-t.y}}function nl(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:li(rl(t,n),r)}function al(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:li(t,r)}const Lt=[],on=[];Lt.__IS_NONE__=!0;on.__IS_ALL__=!0;function il(e,t){return e===Lt?!1:e===on||typeof t>"u"?!0:Ms(t,e).length>0}class ol{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;Y(typeof t=="function","listener must be a function."),Y(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!il(o.dirtyHandlerIds,n)||t()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){Y(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return Y(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(Y(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return qr(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(Y(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!qr(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(t);return n?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return nl(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return al(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const ga=typeof global<"u"?global:self,ci=ga.MutationObserver||ga.WebKitMutationObserver;function di(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function sl(e){let t=1;const r=new ci(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const ll=typeof ci=="function"?sl:di;class cl{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=ll(this.flush),this.requestErrorThrow=di(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class dl{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class ul{create(t){const r=this.freeTasks,n=r.length?r.pop():new dl(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const ui=new cl,pl=new ul(ui.registerPendingError);function gl(e){ui.enqueueTask(pl.create(e))}const sn="dnd-core/ADD_SOURCE",ln="dnd-core/ADD_TARGET",cn="dnd-core/REMOVE_SOURCE",br="dnd-core/REMOVE_TARGET";function fl(e){return{type:sn,payload:{sourceId:e}}}function hl(e){return{type:ln,payload:{targetId:e}}}function vl(e){return{type:cn,payload:{sourceId:e}}}function ml(e){return{type:br,payload:{targetId:e}}}function bl(e){Y(typeof e.canDrag=="function","Expected canDrag to be a function."),Y(typeof e.beginDrag=="function","Expected beginDrag to be a function."),Y(typeof e.endDrag=="function","Expected endDrag to be a function.")}function xl(e){Y(typeof e.canDrop=="function","Expected canDrop to be a function."),Y(typeof e.hover=="function","Expected hover to be a function."),Y(typeof e.drop=="function","Expected beginDrag to be a function.")}function Ur(e,t){if(t&&Array.isArray(e)){e.forEach(r=>Ur(r,!1));return}Y(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var We;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(We||(We={}));let yl=0;function wl(){return yl++}function Dl(e){const t=wl().toString();switch(e){case We.SOURCE:return`S${t}`;case We.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function fa(e){switch(e[0]){case"S":return We.SOURCE;case"T":return We.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function ha(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class Cl{addSource(t,r){Ur(t),bl(r);const n=this.addHandler(We.SOURCE,t,r);return this.store.dispatch(fl(n)),n}addTarget(t,r){Ur(t,!0),xl(r);const n=this.addHandler(We.TARGET,t,r);return this.store.dispatch(hl(n)),n}containsHandler(t){return ha(this.dragSources,t)||ha(this.dropTargets,t)}getSource(t,r=!1){return Y(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return Y(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return Y(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return Y(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return fa(t)===We.SOURCE}isTargetId(t){return fa(t)===We.TARGET}removeSource(t){Y(this.getSource(t),"Expected an existing source."),this.store.dispatch(vl(t)),gl(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){Y(this.getTarget(t),"Expected an existing target."),this.store.dispatch(ml(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);Y(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){Y(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=Dl(t);return this.types.set(a,r),t===We.SOURCE?this.dragSources.set(a,n):t===We.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const Sl=(e,t)=>e===t;function Il(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Nl(e,t,r=Sl){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function El(e=Lt,t){switch(t.type){case hr:break;case sn:case ln:case br:case cn:return Lt;case fr:case an:case mr:case vr:default:return on}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=Rs(r,n);if(!(a.length>0||!Nl(r,n)))return Lt;const o=n[n.length-1],s=r[r.length-1];return o!==s&&(o&&a.push(o),s&&a.push(s)),a}function Pl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Pl(e,a,r[a])})}return e}const va={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Tl(e=va,t){const{payload:r}=t;switch(t.type){case nn:case fr:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case hr:return Il(e.clientOffset,r.clientOffset)?e:Ol({},e,{clientOffset:r.clientOffset});case mr:case vr:return va;default:return e}}function Rl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Rl(e,a,r[a])})}return e}const Ml={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function jl(e=Ml,t){const{payload:r}=t;switch(t.type){case fr:return ut({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case an:return ut({},e,{isSourcePublic:!0});case hr:return ut({},e,{targetIds:r.targetIds});case br:return e.targetIds.indexOf(r.targetId)===-1?e:ut({},e,{targetIds:Ts(e.targetIds,r.targetId)});case vr:return ut({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case mr:return ut({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function Al(e=0,t){switch(t.type){case sn:case ln:return e+1;case cn:case br:return e-1;default:return e}}function kl(e=0){return e+1}function Bl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Bl(e,a,r[a])})}return e}function Fl(e={},t){return{dirtyHandlerIds:El(e.dirtyHandlerIds,{type:t.type,payload:Ll({},t.payload,{prevTargetIds:Os(e,"dragOperation.targetIds",[])})}),dragOffset:Tl(e.dragOffset,t),refCount:Al(e.refCount,t),dragOperation:jl(e.dragOperation,t),stateId:kl(e.stateId)}}function $l(e,t=void 0,r={},n=!1){const a=Hl(n),i=new ol(a,new Cl(a)),o=new tl(a,i),s=e(o,t,r);return o.receiveBackend(s),o}function Hl(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return rn(Fl,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function Gl(e,t){if(e==null)return{};var r=zl(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zl(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let ma=0;const rr=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Wl=b.memo(function(t){var{children:r}=t,n=Gl(t,["children"]);const[a,i]=ql(n);return b.useEffect(()=>{if(i){const o=pi();return++ma,()=>{--ma===0&&(o[rr]=null)}}},[]),l.jsx(ii.Provider,{value:a,children:r})});function ql(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=Ul(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function Ul(e,t=pi(),r,n){const a=t;return a[rr]||(a[rr]={dragDropManager:$l(e,t,r,n)}),a[rr]}function pi(){return typeof global<"u"?global:window}const st=typeof window<"u"?b.useLayoutEffect:b.useEffect;function Vl(e,t,r){const[n,a]=b.useState(()=>t(e)),i=b.useCallback(()=>{const o=t(e);$o(n,o)||(a(o),r&&r())},[n,e,r]);return st(i),[n,i]}function Yl(e,t,r){const[n,a]=Vl(e,t,r);return st(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function gi(e,t,r){return Yl(t,e||(()=>({})),()=>r.reconnect())}function fi(e,t){const r=[];return typeof e!="function"&&r.push(e),b.useMemo(()=>typeof e=="function"?e():e,r)}function Xl(e){return b.useMemo(()=>e.hooks.dragSource(),[e])}function Jl(e){return b.useMemo(()=>e.hooks.dragPreview(),[e])}let Nr=!1,Er=!1;class Kl{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){Y(!Nr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Nr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Nr=!1}}isDragging(){if(!this.sourceId)return!1;Y(!Er,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Er=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Er=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let Pr=!1;class _l{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;Y(!Pr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Pr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Pr=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function Ql(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function Zl(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function Vr(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const p=i[c];if(!s(p))return!1;const g=e[p],u=t[p];if(a=void 0,a===!1||a===void 0&&g!==u)return!1}return!0}function Yr(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ec(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function tc(e){return(t=null,r=null)=>{if(!b.isValidElement(t)){const i=t;return e(i,r),i}const n=t;return ec(n),rc(n,r?i=>e(i,r):e)}}function hi(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=tc(n);t[r]=()=>a}}),t}function ba(e,t){typeof e=="function"?e(t):e.current=t}function rc(e,t){const r=e.ref;return Y(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?b.cloneElement(e,{ref:n=>{ba(r,n),ba(t,n)}}):b.cloneElement(e,{ref:t})}class nc{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Vr(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Vr(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=hi({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Yr(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Yr(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class ac{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Vr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=hi({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Yr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function bt(){const{dragDropManager:e}=b.useContext(ii);return Y(e!=null,"Expected drag drop context"),e}function ic(e,t){const r=bt(),n=b.useMemo(()=>new nc(r.getBackend()),[r]);return st(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),st(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function oc(){const e=bt();return b.useMemo(()=>new Kl(e),[e])}class sc{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function lc(e,t,r){const n=b.useMemo(()=>new sc(e,t,r),[t,r]);return b.useEffect(()=>{n.spec=e},[e]),n}function cc(e){return b.useMemo(()=>{const t=e.type;return Y(t!=null,"spec.type must be defined"),t},[e])}function dc(e,t,r){const n=bt(),a=lc(e,t,r),i=cc(e);st(function(){if(i!=null){const[s,c]=Zl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c}},[n,t,r,a,i])}function vi(e,t){const r=fi(e);Y(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=oc(),a=ic(r.options,r.previewOptions);return dc(r,n,a),[gi(r.collect,n,a),Xl(a),Jl(a)]}function uc(e){return b.useMemo(()=>e.hooks.dropTarget(),[e])}function pc(e){const t=bt(),r=b.useMemo(()=>new ac(t.getBackend()),[t]);return st(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function gc(){const e=bt();return b.useMemo(()=>new _l(e),[e])}function fc(e){const{accept:t}=e;return b.useMemo(()=>(Y(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class hc{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function vc(e,t){const r=b.useMemo(()=>new hc(e,t),[t]);return b.useEffect(()=>{r.spec=e},[e]),r}function mc(e,t,r){const n=bt(),a=vc(e,t),i=fc(e);st(function(){const[s,c]=Ql(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c},[n,t,a,r,i.map(o=>o.toString()).join("|")])}function bc(e,t){const r=fi(e),n=gc(),a=pc(r.options);return mc(r,n,a),[gi(r.collect,n,a),uc(a)]}const ir=[{id:"none",name:"Sin máscara",class:"",category:"Básicas"},{id:"circle",name:"Círculo",class:"mask-circle",category:"Básicas"},{id:"rounded",name:"Redondeado",class:"mask-rounded",category:"Básicas"},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas"},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas"},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas"},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas"},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos"},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos"},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos"},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos"},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas"},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas"},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas"},{id:"rounded-sm",name:"Redondeado pequeño",class:"mask-rounded-sm",category:"Básicas"},{id:"rounded-lg",name:"Redondeado grande",class:"mask-rounded-lg",category:"Básicas"},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas"},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas"},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas"}];function xc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,availableMasks:i=[],workspaceSize:o={width:800,height:600}}){var Me,ye,je,Ae,Re,X,we,ue,pe,k,Z,ve,he,De,oe,Ce;const[{isDragging:s},c]=vi(()=>({type:"IMAGE_ELEMENT",item:{id:e.id},collect:S=>({isDragging:!!S.isDragging()})})),p=b.useRef(null),[g,u]=b.useState(!1),[d,f]=b.useState(null),[h,m]=b.useState(null),[v,x]=b.useState({mouseX:0,mouseY:0,elementX:0,elementY:0,elementWidth:0,elementHeight:0}),[w,C]=b.useState(!1),[N,B]=b.useState({x:0,y:0}),j={filter:`
            brightness(${(((Me=e.filters)==null?void 0:Me.brightness)||100)/100})
            contrast(${(((ye=e.filters)==null?void 0:ye.contrast)||100)/100})
            saturate(${(((je=e.filters)==null?void 0:je.saturation)||100)/100})
            sepia(${(((Ae=e.filters)==null?void 0:Ae.tint)||0)/100})
            hue-rotate(${(((Re=e.filters)==null?void 0:Re.hue)||0)*3.6}deg)
            blur(${((X=e.filters)==null?void 0:X.blur)||0}px)
        `,transform:`scale(${((we=e.filters)==null?void 0:we.scale)||1}) rotate(${((ue=e.filters)==null?void 0:ue.rotate)||0}deg) ${(pe=e.filters)!=null&&pe.flipHorizontal?"scaleX(-1)":""} ${(k=e.filters)!=null&&k.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((Z=e.filters)==null?void 0:Z.blendMode)||"normal",opacity:(((ve=e.filters)==null?void 0:ve.opacity)||100)/100},q=ir.find(S=>S.id===e.mask)||ir[0],V=b.useCallback((S,W)=>typeof S=="number"?S<=1?S*W:S:0,[]),A=b.useCallback((S,W)=>typeof S=="number"&&W>0?S>1?Math.min(S/W,1):S:0,[]),L={x:Math.max(0,V(((he=e.position)==null?void 0:he.x)||0,o.width)),y:Math.max(0,V(((De=e.position)==null?void 0:De.y)||0,o.height))},$={width:Math.max(50,(oe=e.size)!=null&&oe.width?V(e.size.width,o.width):200),height:Math.max(50,(Ce=e.size)!=null&&Ce.height?V(e.size.height,o.height):200)},se=b.useCallback(S=>{t&&(S.stopPropagation(),S.preventDefault(),u(!0),f("move"),x({mouseX:S.clientX,mouseY:S.clientY,elementX:L.x,elementY:L.y,elementWidth:$.width,elementHeight:$.height}))},[t,L,$]),E=b.useCallback((S,W)=>{t&&(S.stopPropagation(),S.preventDefault(),u(!0),f("resize"),m(W),x({mouseX:S.clientX,mouseY:S.clientY,elementX:L.x,elementY:L.y,elementWidth:$.width,elementHeight:$.height}))},[t,L,$]),K=b.useCallback(S=>{if(!g)return;const W=S.clientX-v.mouseX,te=S.clientY-v.mouseY;if(d==="move"){const re=Math.max(0,Math.min(o.width-$.width,v.elementX+W)),ne=Math.max(0,Math.min(o.height-$.height,v.elementY+te)),me={position:{x:A(re,o.width),y:A(ne,o.height)}};n(me)}else if(d==="resize"){let re=v.elementWidth,ne=v.elementHeight,me=v.elementX,Se=v.elementY;const be=50,Ie=v.elementWidth/v.elementHeight;switch(h){case"nw":re=Math.max(be,v.elementWidth-W),ne=Math.max(be,v.elementHeight-te),S.shiftKey&&(ne=re/Ie),me=v.elementX+(v.elementWidth-re),Se=v.elementY+(v.elementHeight-ne);break;case"n":ne=Math.max(be,v.elementHeight-te),Se=v.elementY+(v.elementHeight-ne);break;case"ne":re=Math.max(be,v.elementWidth+W),ne=Math.max(be,v.elementHeight-te),S.shiftKey&&(ne=re/Ie),Se=v.elementY+(v.elementHeight-ne);break;case"e":re=Math.max(be,v.elementWidth+W);break;case"se":re=Math.max(be,v.elementWidth+W),ne=Math.max(be,v.elementHeight+te),S.shiftKey&&(ne=re/Ie);break;case"s":ne=Math.max(be,v.elementHeight+te);break;case"sw":re=Math.max(be,v.elementWidth-W),ne=Math.max(be,v.elementHeight+te),S.shiftKey&&(ne=re/Ie),me=v.elementX+(v.elementWidth-re);break;case"w":re=Math.max(be,v.elementWidth-W),me=v.elementX+(v.elementWidth-re);break}me=Math.max(0,Math.min(o.width-re,me)),Se=Math.max(0,Math.min(o.height-ne,Se)),re=Math.min(re,o.width-me),ne=Math.min(ne,o.height-Se);const nt={position:{x:A(me,o.width),y:A(Se,o.height)},size:{width:A(re,o.width),height:A(ne,o.height)}};n(nt)}},[g,d,v,h,o,$,n,A]),ce=b.useCallback(()=>{u(!1),f(null),m(null)},[]),R=b.useCallback(S=>{S.stopPropagation();const W={width:200,height:200};n({size:{width:A(W.width,o.width),height:A(W.height,o.height)}})},[n,A,o]),ge=b.useCallback(S=>{if(!t)return;const W=S.shiftKey?10:1;let te={};switch(S.key){case"ArrowLeft":S.preventDefault(),te.position={x:Math.max(0,A(L.x-W,o.width)),y:A(L.y,o.height)};break;case"ArrowRight":S.preventDefault(),te.position={x:Math.min(1,A(L.x+W,o.width)),y:A(L.y,o.height)};break;case"ArrowUp":S.preventDefault(),te.position={x:A(L.x,o.width),y:Math.max(0,A(L.y-W,o.height))};break;case"ArrowDown":S.preventDefault(),te.position={x:A(L.x,o.width),y:Math.min(1,A(L.y+W,o.height))};break;case"Delete":case"Backspace":S.preventDefault(),a();break;case"Escape":S.preventDefault(),r();break}Object.keys(te).length>0&&n(te)},[t,L,o,A,n,a,r]);b.useEffect(()=>{if(t)return document.addEventListener("keydown",ge),()=>document.removeEventListener("keydown",ge)},[t,ge]),b.useEffect(()=>{if(g){const S=te=>K(te),W=()=>ce();return document.addEventListener("mousemove",S),document.addEventListener("mouseup",W),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",W)}}},[g,K,ce]),b.useEffect(()=>{const S=W=>{w&&!W.target.closest(".context-menu")&&C(!1)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[w]);const xe=b.useCallback(S=>{p.current=S,c(S)},[c]),Q=S=>{S.preventDefault(),S.stopPropagation(),B({x:S.clientX,y:S.clientY}),C(!0)},fe=()=>{const S=document.createElement("input");S.type="file",S.accept="image/*",S.onchange=W=>{if(W.target.files&&W.target.files[0]){const te=new FileReader;te.onload=re=>{var ne;(ne=re.target)!=null&&ne.result&&n({content:re.target.result})},te.readAsDataURL(W.target.files[0])}},S.click(),C(!1)},Pe=()=>{var W,te;const S={...JSON.parse(JSON.stringify(e)),id:`img-${Date.now()}`,position:{x:Math.min(.9,(((W=e.position)==null?void 0:W.x)||0)+.05),y:Math.min(.9,(((te=e.position)==null?void 0:te.y)||0)+.05)}};n(S,!0),C(!1)},de=()=>{if(g){if(d==="move")return"grabbing";if(d==="resize")return Te(h)}return t?"grab":"pointer"},Te=S=>({n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize",nw:"nw-resize"})[S]||"default";return l.jsxs("div",{ref:xe,className:`absolute ${q.class} ${t?"ring-2 ring-blue-500 ring-opacity-75":""} ${s?"opacity-50":"opacity-100"}`,style:{left:`${L.x}px`,top:`${L.y}px`,width:`${$.width}px`,height:`${$.height}px`,cursor:de(),zIndex:t?1e3:e.zIndex||1,transition:g?"none":"all 0.1s ease-out",pointerEvents:"all",userSelect:"none",transformOrigin:"center"},onClick:S=>{S.stopPropagation(),r()},onMouseDown:se,onContextMenu:Q,onDoubleClick:R,children:[l.jsxs("div",{className:"w-full h-full overflow-hidden relative bg-transparent",children:[l.jsx("img",{src:e.content,alt:"Imagen editada",className:"w-full h-full object-cover select-none",style:j,draggable:!1,onLoad:()=>{p.current&&(p.current.style.visibility="visible")}}),t&&!s&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-nw-resize",style:{top:-8,left:-8},onMouseDown:S=>E(S,"nw"),title:"Redimensionar desde esquina superior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-ne-resize",style:{top:-8,right:-8},onMouseDown:S=>E(S,"ne"),title:"Redimensionar desde esquina superior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-se-resize",style:{bottom:-8,right:-8},onMouseDown:S=>E(S,"se"),title:"Redimensionar desde esquina inferior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-sw-resize",style:{bottom:-8,left:-8},onMouseDown:S=>E(S,"sw"),title:"Redimensionar desde esquina inferior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-n-resize",style:{top:-8,left:"calc(50% - 8px)"},onMouseDown:S=>E(S,"n"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-e-resize",style:{right:-8,top:"calc(50% - 8px)"},onMouseDown:S=>E(S,"e"),title:"Redimensionar horizontalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-s-resize",style:{bottom:-8,left:"calc(50% - 8px)"},onMouseDown:S=>E(S,"s"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-w-resize",style:{left:-8,top:"calc(50% - 8px)"},onMouseDown:S=>E(S,"w"),title:"Redimensionar horizontalmente"}),g&&l.jsx("div",{className:"absolute -inset-2 border-2 border-blue-300 border-dashed rounded animate-pulse"})]})]}),t&&!g&&l.jsxs("div",{className:"absolute -top-12 right-0 flex gap-1 bg-white rounded-lg shadow-lg px-2 py-1",children:[l.jsx("button",{className:"bg-white rounded-md p-1.5 shadow-sm hover:bg-gray-100 transition-colors",onClick:S=>{var W;S.stopPropagation(),n({filters:{...e.filters,rotate:(((W=e.filters)==null?void 0:W.rotate)||0)+90}})},title:"Rotar 90°",children:l.jsx(ai,{className:"h-4 w-4 text-gray-700"})}),l.jsx("button",{className:"bg-white rounded-md p-1.5 shadow-sm hover:bg-red-100 transition-colors",onClick:S=>{S.stopPropagation(),a()},title:"Eliminar imagen",children:l.jsx(ft,{className:"h-4 w-4 text-red-600"})})]}),w&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>C(!1)}),l.jsxs("div",{className:"fixed bg-white shadow-xl rounded-lg z-50 py-2 w-56 context-menu border border-gray-200",style:{left:`${Math.min(N.x,window.innerWidth-240)}px`,top:`${Math.min(N.y,window.innerHeight-200)}px`},onClick:S=>S.stopPropagation(),children:[l.jsx("button",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 text-gray-500 z-10",onClick:()=>C(!1),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsx("div",{className:"px-3 py-2 border-b border-gray-100",children:l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Opciones de imagen"})}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-3 text-sm text-gray-700 hover:text-blue-700 transition-colors",onClick:fe,children:[l.jsx(ms,{className:"h-4 w-4"}),"Reemplazar imagen"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-green-50 flex items-center gap-3 text-sm text-gray-700 hover:text-green-700 transition-colors",onClick:Pe,children:[l.jsx(tn,{className:"h-4 w-4"}),"Duplicar elemento"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-yellow-50 flex items-center gap-3 text-sm text-gray-700 hover:text-yellow-700 transition-colors",onClick:()=>{var S;n({filters:{...e.filters,opacity:Math.max(0,(((S=e.filters)==null?void 0:S.opacity)||100)-20)}}),C(!1)},children:[l.jsx(ni,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-purple-50 flex items-center gap-3 text-sm text-gray-700 hover:text-purple-700 transition-colors",onClick:()=>{var S;n({filters:{...e.filters,scale:Math.max(.1,(((S=e.filters)==null?void 0:S.scale)||1)-.1)}}),C(!1)},children:[l.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})}),"Reducir escala"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-red-50 flex items-center gap-3 text-sm text-gray-700 hover:text-red-700 transition-colors",onClick:()=>{a(),C(!1)},children:[l.jsx(ft,{className:"h-4 w-4"}),"Eliminar imagen"]})]})]}),!1]})}function yc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,workspaceSize:i={width:800,height:600}}){var R,ge,xe,Q,fe,Pe,de,Te,Me,ye,je,Ae,Re,X,we,ue,pe;const[o,s]=b.useState(!1),c=b.useRef(null),p=b.useRef(null),[{isDragging:g},u]=vi(()=>({type:"TEXT_ELEMENT",item:{id:e.id},collect:k=>({isDragging:!!k.isDragging()})})),[d,f]=b.useState(!1),[h,m]=b.useState({x:0,y:0}),[v,x]=b.useState(!1),[w,C]=b.useState({x:0,y:0}),N=()=>{s(!1)},B=k=>{n({content:k.target.value})},j=k=>{k.key==="Enter"&&s(!1)},q=k=>{if(t&&!o){k.stopPropagation(),f(!0);const Z=k.currentTarget.parentElement.getBoundingClientRect(),ve=e.position.x<=1?e.position.x*Z.width:e.position.x,he=e.position.y<=1?e.position.y*Z.height:e.position.y;m({x:k.clientX-ve,y:k.clientY-he})}},V=k=>{if(d&&p.current){const Z=p.current.parentElement.getBoundingClientRect(),ve=k.clientX-h.x,he=k.clientY-h.y,De=Z.width-p.current.offsetWidth,oe=Z.height-p.current.offsetHeight,Ce=Math.max(0,Math.min(ve,De)),S=Math.max(0,Math.min(he,oe)),W=Ce/Z.width,te=S/Z.height;n({position:{x:W,y:te}})}},A=()=>{f(!1)},L=k=>{k.preventDefault(),k.stopPropagation(),C({x:k.clientX,y:k.clientY}),x(!0)},$=()=>{const k={...JSON.parse(JSON.stringify(e)),id:`text-${Date.now()}`,position:{x:e.position.x<=1?Math.min(e.position.x+.02,.9):e.position.x+10,y:e.position.y<=1?Math.min(e.position.y+.02,.9):e.position.y+10}};n(k,!0),x(!1)};b.useEffect(()=>(d&&(window.addEventListener("mousemove",V),window.addEventListener("mouseup",A)),()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",A)}),[d,h]);const se=b.useCallback(k=>{p.current=k,u(k)},[u]),E=(R=e.style)!=null&&R.textShadow?`${e.style.textShadowX||0}px ${e.style.textShadowY||0}px ${e.style.textShadowBlur||0}px ${e.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",ce=(()=>{var Z,ve,he,De,oe,Ce,S,W,te,re,ne,me;const k={...e.style,position:"absolute",cursor:t&&!o?"move":"pointer",textShadow:E,zIndex:10,fontFamily:((Z=e.style)==null?void 0:Z.fontFamily)||"Arial",color:((ve=e.style)==null?void 0:ve.color)||"#000000",fontWeight:((he=e.style)==null?void 0:he.fontWeight)||"normal",fontStyle:((De=e.style)==null?void 0:De.fontStyle)||"normal",textDecoration:((oe=e.style)==null?void 0:oe.textDecoration)||"none",textAlign:((Ce=e.style)==null?void 0:Ce.textAlign)||"left",backgroundColor:((S=e.style)==null?void 0:S.backgroundColor)||"transparent",padding:((W=e.style)==null?void 0:W.padding)||"8px",borderRadius:((te=e.style)==null?void 0:te.borderRadius)||"0px",border:((re=e.style)==null?void 0:re.border)||"none",opacity:((ne=e.style)==null?void 0:ne.opacity)!==void 0?e.style.opacity:1};if(e.position.x<=1&&e.position.y<=1?(k.left=`${e.position.x*100}%`,k.top=`${e.position.y*100}%`):(k.left=`${e.position.x}px`,k.top=`${e.position.y}px`),(me=e.style)!=null&&me.fontSize){const Se=parseFloat(e.style.fontSize);if(Se&&i.width){const be=Se/800*i.width;k.fontSize=`${Math.max(12,be)}px`}else k.fontSize=e.style.fontSize}else{const Se=.02*i.width;k.fontSize=`${Math.max(12,Se)}px`}return k})();return b.useEffect(()=>{var Z,ve;const k=(ve=(Z=e.style)==null?void 0:Z.fontFamily)==null?void 0:ve.replace(/'/g,"");if(k&&!document.fonts.check(`12px ${k}`)){const he=new FontFace(k,`local(${k})`);he.load().then(()=>document.fonts.add(he))}},[(ge=e.style)==null?void 0:ge.fontFamily]),l.jsxs("div",{ref:se,className:`${t?"ring-2 ring-purple-500":""} ${g?"opacity-50":"opacity-100"}`,style:ce,onClick:k=>{k.stopPropagation(),r(),!o&&t&&(s(!0),setTimeout(()=>{c.current&&(c.current.focus(),c.current.select())},0))},onMouseDown:q,onContextMenu:L,children:[o?l.jsx("input",{ref:c,type:"text",value:e.content,onChange:B,onBlur:N,onKeyDown:j,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(xe=e.style)==null?void 0:xe.fontFamily,fontSize:(Q=e.style)==null?void 0:Q.fontSize,fontWeight:(fe=e.style)==null?void 0:fe.fontWeight,fontStyle:(Pe=e.style)==null?void 0:Pe.fontStyle,textDecoration:(de=e.style)==null?void 0:de.textDecoration,color:(Te=e.style)==null?void 0:Te.color,textAlign:(Me=e.style)==null?void 0:Me.textAlign,minWidth:"100px"},autoFocus:!0}):l.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((ye=e.style)==null?void 0:ye.backgroundColor)||"transparent",padding:((je=e.style)==null?void 0:je.padding)||"8px",borderRadius:((Ae=e.style)==null?void 0:Ae.borderRadius)||"0px",border:((Re=e.style)==null?void 0:Re.border)||"none",fontFamily:((X=e.style)==null?void 0:X.fontFamily)||"Arial"},children:e.content||"Editar texto"}),t&&l.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:k=>{var Z;k.stopPropagation(),n({style:{...e.style,fontWeight:((Z=e.style)==null?void 0:Z.fontWeight)==="bold"?"normal":"bold"}})},children:l.jsx("span",{className:`text-xs ${((we=e.style)==null?void 0:we.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:k=>{var Z;k.stopPropagation(),n({style:{...e.style,fontStyle:((Z=e.style)==null?void 0:Z.fontStyle)==="italic"?"normal":"italic"}})},children:l.jsx("span",{className:`text-xs ${((ue=e.style)==null?void 0:ue.fontStyle)==="italic"?"italic":""}`,children:"I"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:k=>{var Z;k.stopPropagation(),n({style:{...e.style,textDecoration:((Z=e.style)==null?void 0:Z.textDecoration)==="underline"?"none":"underline"}})},children:l.jsx("span",{className:`text-xs ${((pe=e.style)==null?void 0:pe.textDecoration)==="underline"?"underline":""}`,children:"U"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:k=>{k.stopPropagation(),a()},children:l.jsx(ft,{className:"h-3 w-3 text-gray-700"})})]}),v&&l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${w.x}px`,top:`${w.y}px`},onClick:k=>k.stopPropagation(),children:[l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{s(!0),x(!1)},children:[l.jsx(gt,{className:"h-4 w-4"}),"Editar texto"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:$,children:[l.jsx(tn,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var k;n({style:{...e.style,opacity:Math.max(0,(((k=e.style)==null?void 0:k.opacity)||1)-.1)}}),x(!1)},children:[l.jsx(ni,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),x(!1)},children:[l.jsx(ft,{className:"h-4 w-4"}),"Eliminar"]})]})]})}function mi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Mo(e,t)}var bi=le.createContext(null);function wc(e){e()}var xi=wc,Dc=function(t){return xi=t},Cc=function(){return xi};function Sc(){var e=Cc(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var xa={notify:function(){},get:function(){return[]}};function yi(e,t){var r,n=xa;function a(u){return c(),n.subscribe(u)}function i(){n.notify()}function o(){g.onStateChange&&g.onStateChange()}function s(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=Sc())}function p(){r&&(r(),r=void 0,n.clear(),n=xa)}var g={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:s,trySubscribe:c,tryUnsubscribe:p,getListeners:function(){return n}};return g}var wi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect;function Ic(e){var t=e.store,r=e.context,n=e.children,a=b.useMemo(function(){var s=yi(t);return{store:t,subscription:s}},[t]),i=b.useMemo(function(){return t.getState()},[t]);wi(function(){var s=a.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),i!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[a,i]);var o=r||bi;return le.createElement(o.Provider,{value:a},n)}var Or={exports:{}},ie={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya;function Nc(){if(ya)return ie;ya=1;var e=60103,t=60106,r=60107,n=60108,a=60114,i=60109,o=60110,s=60112,c=60113,p=60120,g=60115,u=60116,d=60121,f=60122,h=60117,m=60129,v=60131;if(typeof Symbol=="function"&&Symbol.for){var x=Symbol.for;e=x("react.element"),t=x("react.portal"),r=x("react.fragment"),n=x("react.strict_mode"),a=x("react.profiler"),i=x("react.provider"),o=x("react.context"),s=x("react.forward_ref"),c=x("react.suspense"),p=x("react.suspense_list"),g=x("react.memo"),u=x("react.lazy"),d=x("react.block"),f=x("react.server.block"),h=x("react.fundamental"),m=x("react.debug_trace_mode"),v=x("react.legacy_hidden")}function w(E){if(typeof E=="object"&&E!==null){var K=E.$$typeof;switch(K){case e:switch(E=E.type,E){case r:case a:case n:case c:case p:return E;default:switch(E=E&&E.$$typeof,E){case o:case s:case u:case g:case i:return E;default:return K}}case t:return K}}}var C=i,N=e,B=s,j=r,q=u,V=g,A=t,L=a,$=n,se=c;return ie.ContextConsumer=o,ie.ContextProvider=C,ie.Element=N,ie.ForwardRef=B,ie.Fragment=j,ie.Lazy=q,ie.Memo=V,ie.Portal=A,ie.Profiler=L,ie.StrictMode=$,ie.Suspense=se,ie.isAsyncMode=function(){return!1},ie.isConcurrentMode=function(){return!1},ie.isContextConsumer=function(E){return w(E)===o},ie.isContextProvider=function(E){return w(E)===i},ie.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===e},ie.isForwardRef=function(E){return w(E)===s},ie.isFragment=function(E){return w(E)===r},ie.isLazy=function(E){return w(E)===u},ie.isMemo=function(E){return w(E)===g},ie.isPortal=function(E){return w(E)===t},ie.isProfiler=function(E){return w(E)===a},ie.isStrictMode=function(E){return w(E)===n},ie.isSuspense=function(E){return w(E)===c},ie.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===a||E===m||E===n||E===c||E===p||E===v||typeof E=="object"&&E!==null&&(E.$$typeof===u||E.$$typeof===g||E.$$typeof===i||E.$$typeof===o||E.$$typeof===s||E.$$typeof===h||E.$$typeof===d||E[0]===f)},ie.typeOf=w,ie}var wa;function Ec(){return wa||(wa=1,Or.exports=Nc()),Or.exports}var Pc=Ec(),Oc=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Tc=["reactReduxForwardedRef"],Rc=[],Mc=[null,null];function jc(e,t){var r=e[1];return[t.payload,r+1]}function Da(e,t,r){wi(function(){return e.apply(void 0,t)},r)}function Ac(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function kc(e,t,r,n,a,i,o,s,c,p){if(e){var g=!1,u=null,d=function(){if(!g){var m=t.getState(),v,x;try{v=n(m,a.current)}catch(w){x=w,u=w}x||(u=null),v===i.current?o.current||c():(i.current=v,s.current=v,o.current=!0,p({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=d,r.trySubscribe(),d();var f=function(){if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return f}}var Bc=function(){return[null,0]};function Lc(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(C){return"ConnectAdvanced("+C+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,s=r.renderCountProp,c=s===void 0?void 0:s,p=r.shouldHandleStateChanges,g=p===void 0?!0:p,u=r.storeKey,d=u===void 0?"store":u;r.withRef;var f=r.forwardRef,h=f===void 0?!1:f,m=r.context,v=m===void 0?bi:m,x=ar(r,Oc),w=v;return function(N){var B=N.displayName||N.name||"Component",j=a(B),q=z({},x,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:g,storeKey:d,displayName:j,wrappedComponentName:B,WrappedComponent:N}),V=x.pure;function A(K){return e(K.dispatch,q)}var L=V?b.useMemo:function(K){return K()};function $(K){var ce=b.useMemo(function(){var Ce=K.reactReduxForwardedRef,S=ar(K,Tc);return[K.context,Ce,S]},[K]),R=ce[0],ge=ce[1],xe=ce[2],Q=b.useMemo(function(){return R&&R.Consumer&&Pc.isContextConsumer(le.createElement(R.Consumer,null))?R:w},[R,w]),fe=b.useContext(Q),Pe=!!K.store&&!!K.store.getState&&!!K.store.dispatch;fe&&fe.store;var de=Pe?K.store:fe.store,Te=b.useMemo(function(){return A(de)},[de]),Me=b.useMemo(function(){if(!g)return Mc;var Ce=yi(de,Pe?null:fe.subscription),S=Ce.notifyNestedSubs.bind(Ce);return[Ce,S]},[de,Pe,fe]),ye=Me[0],je=Me[1],Ae=b.useMemo(function(){return Pe?fe:z({},fe,{subscription:ye})},[Pe,fe,ye]),Re=b.useReducer(jc,Rc,Bc),X=Re[0],we=X[0],ue=Re[1];if(we&&we.error)throw we.error;var pe=b.useRef(),k=b.useRef(xe),Z=b.useRef(),ve=b.useRef(!1),he=L(function(){return Z.current&&xe===k.current?Z.current:Te(de.getState(),xe)},[de,we,xe]);Da(Ac,[k,pe,ve,xe,he,Z,je]),Da(kc,[g,de,ye,Te,k,pe,ve,Z,je,ue],[de,ye,Te]);var De=b.useMemo(function(){return le.createElement(N,z({},he,{ref:ge}))},[ge,N,he]),oe=b.useMemo(function(){return g?le.createElement(Q.Provider,{value:Ae},De):De},[Q,De,Ae]);return oe}var se=V?le.memo($):$;if(se.WrappedComponent=N,se.displayName=$.displayName=j,h){var E=le.forwardRef(function(ce,R){return le.createElement(se,z({},ce,{reactReduxForwardedRef:R}))});return E.displayName=j,E.WrappedComponent=N,ia(E,N)}return ia(se,N)}}function Ca(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Tr(e,t){if(Ca(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Ca(e[r[a]],t[r[a]]))return!1;return!0}function Fc(e,t){var r={},n=function(o){var s=e[o];typeof s=="function"&&(r[o]=function(){return t(s.apply(void 0,arguments))})};for(var a in e)n(a);return r}function dn(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function Sa(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Di(e,t){return function(n,a){a.displayName;var i=function(s,c){return i.dependsOnOwnProps?i.mapToProps(s,c):i.mapToProps(s)};return i.dependsOnOwnProps=!0,i.mapToProps=function(s,c){i.mapToProps=e,i.dependsOnOwnProps=Sa(e);var p=i(s,c);return typeof p=="function"&&(i.mapToProps=p,i.dependsOnOwnProps=Sa(p),p=i(s,c)),p},i}}function $c(e){return typeof e=="function"?Di(e):void 0}function Hc(e){return e?void 0:dn(function(t){return{dispatch:t}})}function Gc(e){return e&&typeof e=="object"?dn(function(t){return Fc(e,t)}):void 0}const zc=[$c,Hc,Gc];function Wc(e){return typeof e=="function"?Di(e):void 0}function qc(e){return e?void 0:dn(function(){return{}})}const Uc=[Wc,qc];function Vc(e,t,r){return z({},r,e,t)}function Yc(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,s;return function(p,g,u){var d=e(p,g,u);return o?(!a||!i(d,s))&&(s=d):(o=!0,s=d),s}}}function Xc(e){return typeof e=="function"?Yc(e):void 0}function Jc(e){return e?void 0:function(){return Vc}}const Kc=[Xc,Jc];var _c=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Qc(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function Zc(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,s=a.areStatePropsEqual,c=!1,p,g,u,d,f;function h(C,N){return p=C,g=N,u=e(p,g),d=t(n,g),f=r(u,d,g),c=!0,f}function m(){return u=e(p,g),t.dependsOnOwnProps&&(d=t(n,g)),f=r(u,d,g),f}function v(){return e.dependsOnOwnProps&&(u=e(p,g)),t.dependsOnOwnProps&&(d=t(n,g)),f=r(u,d,g),f}function x(){var C=e(p,g),N=!s(C,u);return u=C,N&&(f=r(u,d,g)),f}function w(C,N){var B=!o(N,g),j=!i(C,p,N,g);return p=C,g=N,B&&j?m():B?v():j?x():f}return function(N,B){return c?w(N,B):h(N,B)}}function ed(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=ar(t,_c),o=r(e,i),s=n(e,i),c=a(e,i),p=i.pure?Zc:Qc;return p(o,s,c,e,i)}var td=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Rr(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function rd(e,t){return e===t}function nd(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?Lc:r,a=t.mapStateToPropsFactories,i=a===void 0?Uc:a,o=t.mapDispatchToPropsFactories,s=o===void 0?zc:o,c=t.mergePropsFactories,p=c===void 0?Kc:c,g=t.selectorFactory,u=g===void 0?ed:g;return function(f,h,m,v){v===void 0&&(v={});var x=v,w=x.pure,C=w===void 0?!0:w,N=x.areStatesEqual,B=N===void 0?rd:N,j=x.areOwnPropsEqual,q=j===void 0?Tr:j,V=x.areStatePropsEqual,A=V===void 0?Tr:V,L=x.areMergedPropsEqual,$=L===void 0?Tr:L,se=ar(x,td),E=Rr(f,i,"mapStateToProps"),K=Rr(h,s,"mapDispatchToProps"),ce=Rr(m,p,"mergeProps");return n(u,z({methodName:"connect",getDisplayName:function(ge){return"Connect("+ge+")"},shouldHandleStateChanges:!!f,initMapStateToProps:E,initMapDispatchToProps:K,initMergeProps:ce,pure:C,areStatesEqual:B,areOwnPropsEqual:q,areStatePropsEqual:A,areMergedPropsEqual:$},se))}}const Ci=nd();Dc(jo.unstable_batchedUpdates);function ad(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Si(e,t){var r=b.useState(function(){return{inputs:t,result:e()}})[0],n=b.useRef(!0),a=b.useRef(r),i=n.current||!!(t&&a.current.inputs&&ad(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return b.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function id(e,t){return Si(function(){return e},t)}var ee=Si,F=id,od="Invariant failed";function sd(e,t){throw new Error(od)}var Xe=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,s=a-r,c={top:r,right:n,bottom:a,left:i,width:o,height:s,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},un=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Ia=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},ld=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Mr={top:0,right:0,bottom:0,left:0},pn=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?Mr:n,i=t.border,o=i===void 0?Mr:i,s=t.padding,c=s===void 0?Mr:s,p=Xe(un(r,a)),g=Xe(Ia(r,o)),u=Xe(Ia(g,c));return{marginBox:p,borderBox:Xe(r),paddingBox:g,contentBox:u,margin:a,border:o,padding:c}},ze=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&sd(),a},cd=function(){return{x:window.pageXOffset,y:window.pageYOffset}},or=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,s=ld(n,r);return pn({borderBox:s,border:a,margin:i,padding:o})},sr=function(t,r){return r===void 0&&(r=cd()),or(t,r)},Ii=function(t,r){var n={top:ze(r.marginTop),right:ze(r.marginRight),bottom:ze(r.marginBottom),left:ze(r.marginLeft)},a={top:ze(r.paddingTop),right:ze(r.paddingRight),bottom:ze(r.paddingBottom),left:ze(r.paddingLeft)},i={top:ze(r.borderTopWidth),right:ze(r.borderRightWidth),bottom:ze(r.borderBottomWidth),left:ze(r.borderLeftWidth)};return pn({borderBox:t,margin:n,padding:a,border:i})},Ni=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Ii(r,n)},Na=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function dd(e,t){return!!(e===t||Na(e)&&Na(t))}function ud(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!dd(e[r],t[r]))return!1;return!0}function Ne(e,t){t===void 0&&(t=ud);var r,n=[],a,i=!1;function o(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i&&r===this&&t(s,n)||(a=e.apply(this,s),i=!0,r=this,n=s),a}return o}var Ht=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];r=s,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function Ei(e,t){}Ei.bind(null,"warn");Ei.bind(null,"error");function Qe(){}function pd(e,t){return z({},e,{},t)}function qe(e,t,r){var n=t.map(function(a){var i=pd(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var gd="Invariant failed";function lr(e){this.message=e}lr.prototype.toString=function(){return this.message};function P(e,t){throw new lr(gd)}var fd=function(e){mi(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Qe,n.onWindowError=function(s){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var p=s.error;p instanceof lr&&s.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(s){n.callbacks=s},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=qe(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof lr){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(le.Component),hd=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,cr=function(t){return t+1},vd=function(t){return`
  You have lifted an item in position `+cr(t.source.index)+`
`},Pi=function(t,r){var n=t.droppableId===r.droppableId,a=cr(t.index),i=cr(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},Oi=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},md=function(t){var r=t.destination;if(r)return Pi(t.source,r);var n=t.combine;return n?Oi(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Ea=function(t){return`
  The item has returned to its starting position
  of `+cr(t.index)+`
`},bd=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Ea(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+Pi(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+Oi(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ea(t.source)+`
  `},nr={dragHandleUsageInstructions:hd,onDragStart:vd,onDragUpdate:md,onDragEnd:bd},Ee={x:0,y:0},Oe=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},Fe=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Ze=function(t,r){return t.x===r.x&&t.y===r.y},xt=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},lt=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Gt=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Pa=function(t,r){return Math.min.apply(Math,r.map(function(n){return Gt(t,n)}))},Ti=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},xd=function(e,t){var r=Xe({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Ut=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Oa=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},yd={top:0,right:0,bottom:0,left:0},wd=function(t,r){return r?Ut(t,r.scroll.diff.displacement):t},Dd=function(t,r,n){if(n&&n.increasedBy){var a;return z({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},Cd=function(t,r){return r&&r.shouldClipSubject?xd(r.pageMarginBox,t):Xe(t)},ht=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=wd(t.marginBox,a),o=Dd(i,n,r),s=Cd(o,a);return{page:t,withPlaceholder:r,active:s}},gn=function(e,t){e.frame||P();var r=e.frame,n=Fe(t,r.scroll.initial),a=xt(n),i=z({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=ht({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),s=z({},e,{frame:i,subject:o});return s};function dr(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function fn(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function rt(e,t){if(e.find)return e.find(t);var r=fn(e,t);if(r!==-1)return e[r]}function Ri(e){return Array.prototype.slice.call(e)}var Mi=Ne(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),ji=Ne(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),xr=Ne(function(e){return dr(e)}),Sd=Ne(function(e){return dr(e)}),yt=Ne(function(e,t){var r=Sd(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function hn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function yr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var wr=Ne(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),Id=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=hn(i);if(!o)return null;function s(m){var v={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return z({},i,{at:v})}var c=i.displaced.all,p=c.length?c[0]:null;if(t)return p?s(p):null;var g=wr(r,a);if(!p){if(!g.length)return null;var u=g[g.length-1];return s(u.descriptor.id)}var d=fn(g,function(m){return m.descriptor.id===p});d===-1&&P();var f=d-1;if(f<0)return null;var h=g[f];return s(h.descriptor.id)},wt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ai={point:Ee,value:0},zt={invisible:{},visible:{},all:[]},Nd={displaced:zt,displacedBy:Ai,at:null},Ue=function(e,t){return function(r){return e<=r&&r<=t}},ki=function(e){var t=Ue(e.top,e.bottom),r=Ue(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),s=i&&o;if(s)return!0;var c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,g=c&&p;if(g)return!0;var u=c&&o||p&&i;return u}},Ed=function(e){var t=Ue(e.top,e.bottom),r=Ue(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},vn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Bi={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Pd=function(e){return function(t){var r=Ue(t.top,t.bottom),n=Ue(t.left,t.right);return function(a){return e===vn?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},Od=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:Ee;return Ut(t,n)},Td=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},Rd=function(t,r,n){return n(r)(t)},mn=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,s=i?Od(r,n):r;return Td(s,n,o)&&Rd(s,a,o)},Md=function(t){return mn(z({},t,{isVisibleThroughFrameFn:ki}))},Li=function(t){return mn(z({},t,{isVisibleThroughFrameFn:Ed}))},jd=function(t){return mn(z({},t,{isVisibleThroughFrameFn:Pd(t.destination.axis)}))},Ad=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function kd(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Xe(un(r,n))}function Wt(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,p){var g=kd(p,n),u=p.descriptor.id;c.all.push(u);var d=Md({target:g,destination:r,viewport:a,withDroppableDisplacement:!0});if(!d)return c.invisible[p.descriptor.id]=!0,c;var f=Ad(u,o,i),h={draggableId:u,shouldAnimate:f};return c.visible[u]=h,c},{all:[],visible:{},invisible:{}})}function Bd(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Ta(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=Bd(t,{inHomeList:r});return{displaced:zt,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function ur(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,c=e.forceShouldAnimate,p=wt(t,n);if(s==null)return Ta({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var g=rt(r,function(m){return m.descriptor.index===s});if(!g)return Ta({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var u=wr(t,r),d=r.indexOf(g),f=u.slice(d),h=Wt({afterDragging:f,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:h,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function tt(e,t){return!!t.effected[e]}var Ld=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,s=n[o],c=s.descriptor.index,p=tt(o,i);return p?t?c:c-1:t?c+1:c},Fd=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index,p=r?c:c+1;return o<s||o>p?null:o},$d=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,c=e.viewport,p=e.afterCritical,g=s.at;if(g||P(),g.type==="REORDER"){var u=Fd({isMovingForward:t,isInHomeList:r,location:g.destination,insideDestination:o});return u==null?null:ur({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:u})}var d=Ld({isMovingForward:t,destination:i,displaced:s.displaced,draggables:a,combine:g.combine,afterCritical:p});return d==null?null:ur({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})},Hd=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return tt(n,r)?i?Ee:xt(a.point):i?a.point:Ee},Gd=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=yr(r);a||P();var i=a.draggableId,o=n[i].page.borderBox.center,s=Hd({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Oe(o,s)},Fi=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},zd=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},bn=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},Ra=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return lt(r.line,n.marginBox[r.end]+Fi(r,a),bn(r,n.marginBox,a))},Ma=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return lt(r.line,n.marginBox[r.start]-zd(r,a),bn(r,n.marginBox,a))},Wd=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return lt(r.line,n.contentBox[r.start]+Fi(r,a),bn(r,n.contentBox,a))},qd=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=yt(a.descriptor.id,n),s=r.page,c=a.axis;if(!o.length)return Wd({axis:c,moveInto:a.page,isMoving:s});var p=t.displaced,g=t.displacedBy,u=p.all[0];if(u){var d=n[u];if(tt(u,i))return Ma({axis:c,moveRelativeTo:d.page,isMoving:s});var f=or(d.page,g.point);return Ma({axis:c,moveRelativeTo:f,isMoving:s})}var h=o[o.length-1];if(h.descriptor.id===r.descriptor.id)return s.borderBox.center;if(tt(h.descriptor.id,i)){var m=or(h.page,xt(i.displacedBy.point));return Ra({axis:c,moveRelativeTo:m,isMoving:s})}return Ra({axis:c,moveRelativeTo:h.page,isMoving:s})},Xr=function(e,t){var r=e.frame;return r?Oe(t,r.scroll.diff.displacement):t},Ud=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,s=n.page.borderBox.center,c=r.at;return!a||!c?s:c.type==="REORDER"?qd({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):Gd({impact:r,draggables:i,afterCritical:o})},Dr=function(e){var t=Ud(e),r=e.droppable,n=r?Xr(r,t):t;return n},$i=function(e,t){var r=Fe(t,e.scroll.initial),n=xt(r),a=Xe({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function ja(e,t){return e.map(function(r){return t[r]})}function Vd(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var Yd=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=$i(r,Oe(r.scroll.current,i)),s=n.frame?gn(n,Oe(n.frame.scroll.current,i)):n,c=t.displaced,p=Wt({afterDragging:ja(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),g=Wt({afterDragging:ja(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),u={},d={},f=[c,p,g];c.all.forEach(function(m){var v=Vd(m,f);if(v){d[m]=v;return}u[m]=!0});var h=z({},t,{displaced:{all:c.all,invisible:u,visible:d}});return h},Xd=function(e,t){return Oe(e.scroll.diff.displacement,t)},xn=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=Xd(n,t),i=Fe(a,r.page.borderBox.center);return Oe(r.client.borderBox.center,i)},Hi=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,c=Fe(n,t.page.borderBox.center),p=Ut(t.page.borderBox,c),g={target:p,destination:r,withDroppableDisplacement:i,viewport:a};return s?jd(g):Li(g)},Jd=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var g=yt(n.descriptor.id,a),u=wt(r,n),d=Id({isMovingForward:t,draggable:r,destination:n,insideDestination:g,previousImpact:i})||$d({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:n,insideDestination:g,previousImpact:i,viewport:o,afterCritical:p});if(!d)return null;var f=Dr({impact:d,draggable:r,droppable:n,draggables:a,afterCritical:p}),h=Hi({draggable:r,destination:n,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(h){var m=xn({pageBorderBoxCenter:f,draggable:r,viewport:o});return{clientSelection:m,impact:d,scrollJumpRequest:null}}var v=Fe(f,s),x=Yd({impact:d,viewport:o,destination:n,draggables:a,maxScrollChange:v});return{clientSelection:c,impact:x,scrollJumpRequest:v}},ke=function(t){var r=t.subject.active;return r||P(),r},Kd=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var s=n.axis,c=Ue(o[s.start],o[s.end]),p=xr(a).filter(function(u){return u!==n}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return ki(i.frame)(ke(u))}).filter(function(u){var d=ke(u);return t?o[s.crossAxisEnd]<d[s.crossAxisEnd]:d[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(u){var d=ke(u),f=Ue(d[s.start],d[s.end]);return c(d[s.start])||c(d[s.end])||f(o[s.start])||f(o[s.end])}).sort(function(u,d){var f=ke(u)[s.crossAxisStart],h=ke(d)[s.crossAxisStart];return t?f-h:h-f}).filter(function(u,d,f){return ke(u)[s.crossAxisStart]===ke(f[0])[s.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var g=p.filter(function(u){var d=Ue(ke(u)[s.start],ke(u)[s.end]);return d(r[s.line])});return g.length===1?g[0]:g.length>1?g.sort(function(u,d){return ke(u)[s.start]-ke(d)[s.start]})[0]:p.sort(function(u,d){var f=Pa(r,Oa(ke(u))),h=Pa(r,Oa(ke(d)));return f!==h?f-h:ke(u)[s.start]-ke(d)[s.start]})[0]},Aa=function(t,r){var n=t.page.borderBox.center;return tt(t.descriptor.id,r)?Fe(n,r.displacedBy.point):n},_d=function(t,r){var n=t.page.borderBox;return tt(t.descriptor.id,r)?Ut(n,xt(r.displacedBy.point)):n},Qd=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(s){return Li({target:_d(s,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(s,c){var p=Gt(t,Xr(n,Aa(s,i))),g=Gt(t,Xr(n,Aa(c,i)));return p<g?-1:g<p?1:s.descriptor.index-c.descriptor.index});return o[0]||null},Vt=Ne(function(t,r){var n=r[t.line];return{value:n,point:lt(t.line,n)}}),Zd=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return lt(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=yt(t.descriptor.id,n),s=o.reduce(function(g,u){return g+u.client.marginBox[a.size]},0),c=s+r[a.line],p=c-i;return p<=0?null:lt(a.line,p)},Gi=function(t,r){return z({},t,{scroll:z({},t.scroll,{max:r})})},zi=function(t,r,n){var a=t.frame;wt(r,t)&&P(),t.subject.withPlaceholder&&P();var i=Vt(t.axis,r.displaceBy).point,o=Zd(t,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=ht({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return z({},t,{subject:c})}var p=o?Oe(a.scroll.max,o):a.scroll.max,g=Gi(a,p),u=ht({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:g});return z({},t,{subject:u,frame:g})},eu=function(t){var r=t.subject.withPlaceholder;r||P();var n=t.frame;if(!n){var a=ht({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return z({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||P();var o=Gi(n,i),s=ht({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return z({},t,{subject:s,frame:o})},tu=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var p={displaced:zt,displacedBy:Ai,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},g=Dr({impact:p,draggable:a,droppable:o,draggables:i,afterCritical:c}),u=wt(a,o)?o:zi(o,a,i),d=Hi({draggable:a,destination:u,newPageBorderBoxCenter:g,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?p:null}var f=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],h=function(){var v=r.descriptor.index;return r.descriptor.id===a.descriptor.id||f?v:v+1}(),m=Vt(o.axis,a.displaceBy);return ur({draggable:a,insideDestination:n,destination:o,viewport:s,displacedBy:m,last:zt,index:h})},ru=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,c=e.afterCritical,p=Kd({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:s});if(!p)return null;var g=yt(p.descriptor.id,i),u=Qd({pageBorderBoxCenter:r,viewport:s,destination:p,insideDestination:g,afterCritical:c}),d=tu({previousPageBorderBoxCenter:r,destination:p,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:g,viewport:s,afterCritical:c});if(!d)return null;var f=Dr({impact:d,draggable:n,droppable:p,draggables:i,afterCritical:c}),h=xn({pageBorderBoxCenter:f,draggable:n,viewport:s});return{clientSelection:h,impact:d,scrollJumpRequest:null}},$e=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},nu=function(t,r){var n=$e(t);return n?r[n]:null},au=function(e){var t=e.state,r=e.type,n=nu(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,s=o.axis.direction,c=s==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||s==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var p=r==="MOVE_DOWN"||r==="MOVE_RIGHT",g=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,d=t.dimensions,f=d.draggables,h=d.droppables;return c?Jd({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):ru({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,isOver:o,draggables:f,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function ot(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Wi(e){var t=Ue(e.top,e.bottom),r=Ue(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function iu(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function ou(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var s=o.axis,c=lt(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Gt(a,c)}}).sort(function(o,s){return s.distance-o.distance});return i[0]?i[0].id:null}function su(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=xr(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!iu(t,o))return!1;if(Wi(o)(t.center))return!0;var s=i.axis,c=o.center[s.crossAxisLine],p=t[s.crossAxisStart],g=t[s.crossAxisEnd],u=Ue(o[s.crossAxisStart],o[s.crossAxisEnd]),d=u(p),f=u(g);return!d&&!f?!0:d?p<c:g>c});return a.length?a.length===1?a[0].descriptor.id:ou({pageBorderBox:t,draggable:r,candidates:a}):null}var qi=function(t,r){return Xe(Ut(t,r))},lu=function(e,t){var r=e.frame;return r?qi(t,r.scroll.diff.value):t};function Ui(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function cu(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var du=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,c=n.axis,p=Vt(n.axis,r.displaceBy),g=p.value,u=t[c.start],d=t[c.end],f=wr(r,a),h=rt(f,function(v){var x=v.descriptor.id,w=v.page.borderBox.center[c.line],C=tt(x,s),N=Ui({displaced:i,id:x});return C?N?d<=w:u<w-g:N?d<=w+g:u<w}),m=cu({draggable:r,closest:h,inHomeList:wt(r,n)});return ur({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:p,index:m})},uu=4,pu=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,c=Vt(a.axis,t.displaceBy),p=c.value,g=r[s.start],u=r[s.end],d=wr(t,i),f=rt(d,function(m){var v=m.descriptor.id,x=m.page.borderBox,w=x[s.size],C=w/uu,N=tt(v,o),B=Ui({displaced:n.displaced,id:v});return N?B?u>x[s.start]+C&&u<x[s.end]-C:g>x[s.start]-p+C&&g<x[s.end]-p-C:B?u>x[s.start]+p+C&&u<x[s.end]+p-C:g>x[s.start]+C&&g<x[s.end]-C});if(!f)return null;var h={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:a.descriptor.id}}};return h},Vi=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,c=qi(r.page.borderBox,t),p=su({pageBorderBox:c,draggable:r,droppables:a});if(!p)return Nd;var g=a[p],u=yt(g.descriptor.id,n),d=lu(g,c);return pu({pageBorderBoxWithDroppableScroll:d,draggable:r,previousImpact:i,destination:g,insideDestination:u,afterCritical:s})||du({pageBorderBoxWithDroppableScroll:d,draggable:r,destination:g,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},yn=function(e,t){var r;return z({},e,(r={},r[t.descriptor.id]=t,r))},gu=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=$e(r),o=$e(n);if(!i||i===o)return a;var s=a[i];if(!s.subject.withPlaceholder)return a;var c=eu(s);return yn(a,c)},fu=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=gu({previousImpact:a,impact:i,droppables:n}),s=$e(i);if(!s)return o;var c=n[s];if(wt(t,c)||c.subject.withPlaceholder)return o;var p=zi(c,t,r);return yn(o,p)},Ft=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||t.viewport,c=n||t.dimensions,p=r||t.current.client.selection,g=Fe(p,t.initial.client.selection),u={offset:g,selection:p,borderBoxCenter:Oe(t.initial.client.borderBoxCenter,g)},d={selection:Oe(u.selection,s.scroll.current),borderBoxCenter:Oe(u.borderBoxCenter,s.scroll.current),offset:Oe(u.offset,s.scroll.diff.value)},f={client:u,page:d};if(t.phase==="COLLECTING")return z({phase:"COLLECTING"},t,{dimensions:c,viewport:s,current:f});var h=c.draggables[t.critical.draggable.id],m=i||Vi({pageOffset:d.offset,draggable:h,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=fu({draggable:h,impact:m,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),x=z({},t,{current:f,dimensions:{draggables:c.draggables,droppables:v},impact:m,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function hu(e,t){return e.map(function(r){return t[r]})}var Yi=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,s=hu(o.all,n),c=Wt({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return z({},t,{displaced:c})},Xi=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=Dr({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return xn({pageBorderBoxCenter:s,draggable:r,viewport:i})},Ji=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&P();var a=t.impact,i=n||t.viewport,o=r||t.dimensions,s=o.draggables,c=o.droppables,p=s[t.critical.draggable.id],g=$e(a);g||P();var u=c[g],d=Yi({impact:a,viewport:i,destination:u,draggables:s}),f=Xi({impact:d,draggable:p,droppable:u,draggables:s,viewport:i,afterCritical:t.afterCritical});return Ft({impact:d,clientSelection:f,state:t,dimensions:o,viewport:i})},vu=function(e){return{index:e.index,droppableId:e.droppableId}},Ki=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=Vt(r.axis,t.displaceBy),o=yt(r.descriptor.id,n),s=o.indexOf(t);s===-1&&P();var c=o.slice(s+1),p=c.reduce(function(f,h){return f[h.descriptor.id]=!0,f},{}),g={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:p},u=Wt({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),d={displaced:u,displacedBy:i,at:{type:"REORDER",destination:vu(t.descriptor)}};return{impact:d,afterCritical:g}},mu=function(e,t){return{draggables:e.draggables,droppables:yn(e.droppables,t)}},bu=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=or(t.client,r),i=sr(a,n),o=z({},t,{placeholder:z({},t.placeholder,{client:a}),client:a,page:i});return o},xu=function(e){var t=e.frame;return t||P(),t},yu=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,s=r[o],c=xu(s),p=c.scroll.diff.value,g=Oe(a,p),u=bu({draggable:i,offset:g,initialWindowScroll:n.scroll.initial});return u})},wu=function(e){var t=e.state,r=e.published,n=r.modified.map(function(C){var N=t.dimensions.droppables[C.droppableId],B=gn(N,C.scroll);return B}),a=z({},t.dimensions.droppables,{},Mi(n)),i=ji(yu({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=z({},t.dimensions.draggables,{},i);r.removals.forEach(function(C){delete o[C]});var s={droppables:a,draggables:o},c=$e(t.impact),p=c?s.droppables[c]:null,g=s.draggables[t.critical.draggable.id],u=s.droppables[t.critical.droppable.id],d=Ki({draggable:g,home:u,draggables:o,viewport:t.viewport}),f=d.impact,h=d.afterCritical,m=p&&p.isCombineEnabled?t.impact:f,v=Vi({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:m,viewport:t.viewport,afterCritical:h}),x=z({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:s,afterCritical:h,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return x;var w=z({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return w},Jr=function(t){return t.movementMode==="SNAP"},jr=function(t,r,n){var a=mu(t.dimensions,r);return!Jr(t)||n?Ft({state:t,dimensions:a}):Ji({state:t,dimensions:a})};function Ar(e){return e.isDragging&&e.movementMode==="SNAP"?z({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ka={phase:"IDLE",completed:null,shouldFlush:!1},Du=function(e,t){if(e===void 0&&(e=ka),t.type==="FLUSH")return z({},ka,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&P();var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,s=r.movementMode,c=o.draggables[n.draggable.id],p=o.droppables[n.droppable.id],g={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Ee},u={client:g,page:{selection:Oe(g.selection,i.scroll.initial),borderBoxCenter:Oe(g.selection,i.scroll.initial),offset:Oe(g.selection,i.scroll.diff.value)}},d=xr(o.droppables).every(function(ue){return!ue.isFixedOnPage}),f=Ki({draggable:c,home:p,draggables:o.draggables,viewport:i}),h=f.impact,m=f.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:d,impact:h,afterCritical:m,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var x=z({phase:"COLLECTING"},e,{phase:"COLLECTING"});return x}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||P(),wu({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ot(e)||P();var w=t.payload.client;return Ze(w,e.current.client.selection)?e:Ft({state:e,clientSelection:w,impact:Jr(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ar(e);ot(e)||P();var C=t.payload,N=C.id,B=C.newScroll,j=e.dimensions.droppables[N];if(!j)return e;var q=gn(j,B);return jr(e,q,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ot(e)||P();var V=t.payload,A=V.id,L=V.isEnabled,$=e.dimensions.droppables[A];$||P(),$.isEnabled===L&&P();var se=z({},$,{isEnabled:L});return jr(e,se,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ot(e)||P();var E=t.payload,K=E.id,ce=E.isCombineEnabled,R=e.dimensions.droppables[K];R||P(),R.isCombineEnabled===ce&&P();var ge=z({},R,{isCombineEnabled:ce});return jr(e,ge,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ot(e)||P(),e.isWindowScrollAllowed||P();var xe=t.payload.newScroll;if(Ze(e.viewport.scroll.current,xe))return Ar(e);var Q=$i(e.viewport,xe);return Jr(e)?Ji({state:e,viewport:Q}):Ft({state:e,viewport:Q})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ot(e))return e;var fe=t.payload.maxScroll;if(Ze(fe,e.viewport.scroll.max))return e;var Pe=z({},e.viewport,{scroll:z({},e.viewport.scroll,{max:fe})});return z({phase:"DRAGGING"},e,{viewport:Pe})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var de=au({state:e,type:t.type});return de?Ft({state:e,impact:de.impact,clientSelection:de.clientSelection,scrollJumpRequest:de.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var Te=t.payload.reason;e.phase!=="COLLECTING"&&P();var Me=z({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Te});return Me}if(t.type==="DROP_ANIMATE"){var ye=t.payload,je=ye.completed,Ae=ye.dropDuration,Re=ye.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||P();var X={phase:"DROP_ANIMATING",completed:je,dropDuration:Ae,newHomeClientOffset:Re,dimensions:e.dimensions};return X}if(t.type==="DROP_COMPLETE"){var we=t.payload.completed;return{phase:"IDLE",completed:we,shouldFlush:!1}}return e},Cu=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Su=function(t){return{type:"LIFT",payload:t}},Iu=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Nu=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},Eu=function(){return{type:"COLLECTION_STARTING",payload:null}},Pu=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Ou=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Tu=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},_i=function(t){return{type:"MOVE",payload:t}},Ru=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},Mu=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},ju=function(){return{type:"MOVE_UP",payload:null}},Au=function(){return{type:"MOVE_DOWN",payload:null}},ku=function(){return{type:"MOVE_RIGHT",payload:null}},Bu=function(){return{type:"MOVE_LEFT",payload:null}},wn=function(){return{type:"FLUSH",payload:null}},Lu=function(t){return{type:"DROP_ANIMATE",payload:t}},Dn=function(t){return{type:"DROP_COMPLETE",payload:t}},Qi=function(t){return{type:"DROP",payload:t}},Fu=function(t){return{type:"DROP_PENDING",payload:t}},Zi=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},$u=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,s=o.id,c=o.clientSelection,p=o.movementMode,g=r();g.phase==="DROP_ANIMATING"&&n(Dn({completed:g.completed})),r().phase!=="IDLE"&&P(),n(wn()),n(Cu({draggableId:s,movementMode:p}));var u={shouldPublishImmediately:p==="SNAP"},d={draggableId:s,scrollOptions:u},f=e.startPublishing(d),h=f.critical,m=f.dimensions,v=f.viewport;n(Iu({critical:h,dimensions:m,clientSelection:c,movementMode:p,viewport:v}))}}}},Hu=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},Cn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},qt={opacity:{drop:0,combining:.7},scale:{drop:.75}},Sn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},it=Sn.outOfTheWay+"s "+Cn.outOfTheWay,$t={fluid:"opacity "+it,snap:"transform "+it+", opacity "+it,drop:function(t){var r=t+"s "+Cn.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+it,placeholder:"height "+it+", width "+it+", margin "+it},Ba=function(t){return Ze(t,Ee)?null:"translate("+t.x+"px, "+t.y+"px)"},Kr={moveTo:Ba,drop:function(t,r){var n=Ba(t);return n?r?n+" scale("+qt.scale.drop+")":n:null}},_r=Sn.minDropTime,eo=Sn.maxDropTime,Gu=eo-_r,La=1500,zu=.6,Wu=function(e){var t=e.current,r=e.destination,n=e.reason,a=Gt(t,r);if(a<=0)return _r;if(a>=La)return eo;var i=a/La,o=_r+Gu*i,s=n==="CANCEL"?o*zu:o;return Number(s.toFixed(2))},qu=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,s=n.droppables,c=$e(t),p=c?s[c]:null,g=s[r.descriptor.droppableId],u=Xi({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:p||g,viewport:a}),d=Fe(u,r.client.borderBox.center);return d},Uu=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var s=Yi({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=z({},n,{displaced:zt});return{impact:c,didDropInsideDroppable:!0}},Vu=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(Fu({reason:o}));return}if(i.phase!=="IDLE"){var s=i.phase==="DROP_PENDING"&&i.isWaiting;s&&P(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||P();var c=i.critical,p=i.dimensions,g=p.draggables[i.critical.draggable.id],u=Uu({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=u.impact,f=u.didDropInsideDroppable,h=f?hn(d):null,m=f?yr(d):null,v={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:g.descriptor.id,type:g.descriptor.type,source:v,reason:o,mode:i.movementMode,destination:h,combine:m},w=qu({impact:d,draggable:g,dimensions:p,viewport:i.viewport,afterCritical:i.afterCritical}),C={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:d},N=!Ze(i.current.client.offset,w)||!!x.combine;if(!N){r(Dn({completed:C}));return}var B=Wu({current:i.current.client.offset,destination:w,reason:o}),j={newHomeClientOffset:w,dropDuration:B,completed:C};r(Lu(j))}}}},to=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Yu(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Xu(e){var t=e.onWindowScroll;function r(){t(to())}var n=Ht(r),a=Yu(n),i=Qe;function o(){return i!==Qe}function s(){o()&&P(),i=qe(window,[a])}function c(){o()||P(),n.cancel(),i(),i=Qe}return{start:s,stop:c,isActive:o}}var Ju=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Ku=function(e){var t=Xu({onWindowScroll:function(n){e.dispatch(Ru({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Ju(n)&&t.stop(),r(n)}}},_u=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},Qu=function(){var e=[],t=function(i){var o=fn(e,function(p){return p.timerId===i});o===-1&&P();var s=e.splice(o,1),c=s[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),s={timerId:o,callback:i};e.push(s)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},Zu=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},ep=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},tp=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},At=function(t,r){r()},_t=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},kr=function(t,r,n,a){if(!t){n(a(r));return}var i=_u(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},rp=function(e,t){var r=Qu(),n=null,a=function(d,f){n&&P(),At("onBeforeCapture",function(){var h=e().onBeforeCapture;if(h){var m={draggableId:d,mode:f};h(m)}})},i=function(d,f){n&&P(),At("onBeforeDragStart",function(){var h=e().onBeforeDragStart;h&&h(_t(d,f))})},o=function(d,f){n&&P();var h=_t(d,f);n={mode:f,lastCritical:d,lastLocation:h.source,lastCombine:null},r.add(function(){At("onDragStart",function(){return kr(e().onDragStart,h,t,nr.onDragStart)})})},s=function(d,f){var h=hn(f),m=yr(f);n||P();var v=!tp(d,n.lastCritical);v&&(n.lastCritical=d);var x=!Zu(n.lastLocation,h);x&&(n.lastLocation=h);var w=!ep(n.lastCombine,m);if(w&&(n.lastCombine=m),!(!v&&!x&&!w)){var C=z({},_t(d,n.mode),{combine:m,destination:h});r.add(function(){At("onDragUpdate",function(){return kr(e().onDragUpdate,C,t,nr.onDragUpdate)})})}},c=function(){n||P(),r.flush()},p=function(d){n||P(),n=null,At("onDragEnd",function(){return kr(e().onDragEnd,d,t,nr.onDragEnd)})},g=function(){if(n){var d=z({},_t(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(d)}};return{beforeCapture:a,beforeStart:i,start:o,update:s,flush:c,drop:p,abort:g}},np=function(e,t){var r=rp(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var s=i.payload.completed.result;r.flush(),a(i),r.drop(s);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},ap=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&P(),e.dispatch(Dn({completed:n.completed}))}}},ip=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Zi())}};r=requestAnimationFrame(function(){r=null,t=qe(window,[o])})}}}},op=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},sp=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},lp=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},cp=function(e){return function(t){return function(r){return function(n){if(lp(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&P(),e.start(a);return}r(n),e.scroll(t.getState())}}}},dp=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Qi({reason:n.reason})))}}}},up=oi,pp=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return rn(Du,up(Es(Hu(n),op(t),$u(t),Vu,ap,ip,dp,cp(o),Ku,sp(r),np(a,i))))},Br=function(){return{additions:{},removals:{},modified:{}}};function gp(e){var t=e.registry,r=e.callbacks,n=Br(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,u=g.additions,d=g.removals,f=g.modified,h=Object.keys(u).map(function(x){return t.draggable.getById(x).getDimension(Ee)}).sort(function(x,w){return x.descriptor.index-w.descriptor.index}),m=Object.keys(f).map(function(x){var w=t.droppable.getById(x),C=w.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:C}}),v={additions:h,removals:Object.keys(d),modified:m};n=Br(),r.publish(v)}))},o=function(g){var u=g.descriptor.id;n.additions[u]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],i()},s=function(g){var u=g.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Br())};return{add:o,remove:s,stop:c}}var ro=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=Fe({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},no=function(){var e=document.documentElement;return e||P(),e},ao=function(){var e=no(),t=ro({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},fp=function(){var e=to(),t=ao(),r=e.y,n=e.x,a=no(),i=a.clientWidth,o=a.clientHeight,s=n+i,c=r+o,p=Xe({top:r,left:n,right:s,bottom:c}),g={frame:p,scroll:{initial:e,current:e,max:t,diff:{value:Ee,displacement:Ee}}};return g},hp=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=fp(),i=a.scroll.current,o=t.droppable,s=n.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),p={draggables:ji(c),droppables:Mi(s)},g={dimensions:p,critical:t,viewport:a};return g};function Fa(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var vp=function(e,t){var r=null,n=gp({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(f,h){e.droppable.exists(f)||P(),r&&t.updateDroppableIsEnabled({id:f,isEnabled:h})},i=function(f,h){r&&(e.droppable.exists(f)||P(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:h}))},o=function(f,h){r&&(e.droppable.exists(f)||P(),t.updateDroppableScroll({id:f,newScroll:h}))},s=function(f,h){r&&e.droppable.getById(f).callbacks.scroll(h)},c=function(){if(r){n.stop();var f=r.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(h){return h.callbacks.dragStopped()}),r.unsubscribe(),r=null}},p=function(f){r||P();var h=r.critical.draggable;f.type==="ADDITION"&&Fa(e,h,f.value)&&n.add(f.value),f.type==="REMOVAL"&&Fa(e,h,f.value)&&n.remove(f.value)},g=function(f){r&&P();var h=e.draggable.getById(f.draggableId),m=e.droppable.getById(h.descriptor.droppableId),v={draggable:h.descriptor,droppable:m.descriptor},x=e.subscribe(p);return r={critical:v,unsubscribe:x},hp({critical:v,registry:e,scrollOptions:f.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:s,updateDroppableScroll:o,startPublishing:g,stopPublishing:c};return u},io=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},mp=function(e){window.scrollBy(e.x,e.y)},bp=Ne(function(e){return xr(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),xp=function(t,r){var n=rt(bp(r),function(a){return a.frame||P(),Wi(a.frame.pageMarginBox)(t)});return n},yp=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=xp(t,n);return i},et={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},wp=function(e,t){var r=e[t.size]*et.startFromPercentage,n=e[t.size]*et.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},oo=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},In=1,Dp=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return et.maxPixelScroll;if(e===t.startScrollingFrom)return In;var r=oo({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=et.maxPixelScroll*et.ease(n);return Math.ceil(a)},$a=et.durationDampening.accelerateAt,Ha=et.durationDampening.stopDampeningAt,Cp=function(e,t){var r=t,n=Ha,a=Date.now(),i=a-r;if(i>=Ha)return e;if(i<$a)return In;var o=oo({startOfRange:$a,endOfRange:n,current:i}),s=e*et.ease(o);return Math.ceil(s)},Ga=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=Dp(t,r);return i===0?0:a?Math.max(Cp(i,n),In):i},za=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=wp(t,a),s=r[a.end]<r[a.start];return s?Ga({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*Ga({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},Sp=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},Ip=Ti(function(e){return e===0?0:e}),so=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},s=za({container:r,distanceToEdges:o,dragStartTime:t,axis:vn,shouldUseTimeDampening:i}),c=za({container:r,distanceToEdges:o,dragStartTime:t,axis:Bi,shouldUseTimeDampening:i}),p=Ip({x:c,y:s});if(Ze(p,Ee))return null;var g=Sp({container:r,subject:n,proposedScroll:p});return g?Ze(g,Ee)?null:g:null},Np=Ti(function(e){return e===0?0:e>0?1:-1}),Nn=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Oe(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return Ze(o,Ee)?null:o}}(),lo=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=Np(a),s=Nn({max:i,current:n,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},En=function(t,r){return lo({current:t.scroll.current,max:t.scroll.max,change:r})},Ep=function(t,r){if(!En(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return Nn({current:a,max:n,change:r})},Pn=function(t,r){var n=t.frame;return n?lo({current:n.scroll.current,max:n.scroll.max,change:r}):!1},Pp=function(t,r){var n=t.frame;return!n||!Pn(t,r)?null:Nn({current:n.scroll.current,max:n.scroll.max,change:r})},Op=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=so({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&En(t,o)?o:null},Tp=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=so({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return s&&Pn(t,s)?s:null},Wa=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],c=s.page.marginBox;if(t.isWindowScrollAllowed){var p=t.viewport,g=Op({dragStartTime:r,viewport:p,subject:c,center:o,shouldUseTimeDampening:n});if(g){a(g);return}}var u=yp({center:o,destination:$e(t.impact),droppables:t.dimensions.droppables});if(u){var d=Tp({dragStartTime:r,droppable:u,subject:c,center:o,shouldUseTimeDampening:n});d&&i(u.descriptor.id,d)}},Rp=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Ht(t),a=Ht(r),i=null,o=function(g){i||P();var u=i,d=u.shouldUseTimeDampening,f=u.dragStartTime;Wa({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:f,shouldUseTimeDampening:d})},s=function(g){i&&P();var u=Date.now(),d=!1,f=function(){d=!0};Wa({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),i={dragStartTime:u,shouldUseTimeDampening:d},d&&o(g)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:s,stop:c,scroll:o}},Mp=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(p,g){var u=Oe(p.current.client.selection,g);t({client:u})},i=function(p,g){if(!Pn(p,g))return g;var u=Pp(p,g);if(!u)return r(p.descriptor.id,g),null;var d=Fe(g,u);r(p.descriptor.id,d);var f=Fe(g,d);return f},o=function(p,g,u){if(!p||!En(g,u))return u;var d=Ep(g,u);if(!d)return n(u),null;var f=Fe(u,d);n(f);var h=Fe(u,f);return h},s=function(p){var g=p.scrollJumpRequest;if(g){var u=$e(p.impact);u||P();var d=i(p.dimensions.droppables[u],g);if(d){var f=p.viewport,h=o(p.isWindowScrollAllowed,f,d);h&&a(p,h)}}};return s},jp=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=Rp({scrollWindow:r,scrollDroppable:t}),i=Mp({move:n,scrollWindow:r,scrollDroppable:t}),o=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&i(p)}},s={scroll:o,start:a.start,stop:a.stop};return s},vt="data-rbd",mt=function(){var e=vt+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Qr=function(){var e=vt+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ap=function(){var e=vt+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),qa={contextId:vt+"-scroll-container-context-id"},kp=function(t){return function(r){return"["+r+'="'+t+'"]'}},kt=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},Bp="pointer-events: none;",Lp=function(e){var t=kp(e),r=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(mt.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:Bp,dropAnimating:s}}}(),n=function(){var s=`
      transition: `+$t.outOfTheWay+`;
    `;return{selector:t(Qr.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),a={selector:t(Ap.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:kt(o,"always"),resting:kt(o,"resting"),dragging:kt(o,"dragging"),dropAnimating:kt(o,"dropAnimating"),userCancel:kt(o,"userCancel")}},He=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect,Lr=function(){var t=document.querySelector("head");return t||P(),t},Ua=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function Fp(e,t){var r=ee(function(){return Lp(e)},[e]),n=b.useRef(null),a=b.useRef(null),i=F(Ne(function(u){var d=a.current;d||P(),d.textContent=u}),[]),o=F(function(u){var d=n.current;d||P(),d.textContent=u},[]);He(function(){!n.current&&!a.current||P();var u=Ua(t),d=Ua(t);return n.current=u,a.current=d,u.setAttribute(vt+"-always",e),d.setAttribute(vt+"-dynamic",e),Lr().appendChild(u),Lr().appendChild(d),o(r.always),i(r.resting),function(){var f=function(m){var v=m.current;v||P(),Lr().removeChild(v),m.current=null};f(n),f(a)}},[t,o,i,r.always,r.resting,e]);var s=F(function(){return i(r.dragging)},[i,r.dragging]),c=F(function(u){if(u==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),p=F(function(){a.current&&i(r.resting)},[i,r.resting]),g=ee(function(){return{dragging:s,dropping:c,resting:p}},[s,c,p]);return g}var co=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Cr(e){return e instanceof co(e).HTMLElement}function $p(e,t){var r="["+mt.contextId+'="'+e+'"]',n=Ri(document.querySelectorAll(r));if(!n.length)return null;var a=rt(n,function(i){return i.getAttribute(mt.draggableId)===t});return!a||!Cr(a)?null:a}function Hp(e){var t=b.useRef({}),r=b.useRef(null),n=b.useRef(null),a=b.useRef(!1),i=F(function(d,f){var h={id:d,focus:f};return t.current[d]=h,function(){var v=t.current,x=v[d];x!==h&&delete v[d]}},[]),o=F(function(d){var f=$p(e,d);f&&f!==document.activeElement&&f.focus()},[e]),s=F(function(d,f){r.current===d&&(r.current=f)},[]),c=F(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var d=r.current;d&&o(d)}))},[o]),p=F(function(d){r.current=null;var f=document.activeElement;f&&f.getAttribute(mt.draggableId)===d&&(r.current=d)},[]);He(function(){return a.current=!0,function(){a.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var g=ee(function(){return{register:i,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:s}},[i,p,c,s]);return g}function Gp(){var e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var f=t.indexOf(u);f!==-1&&t.splice(f,1)}}function n(u){t.length&&t.forEach(function(d){return d(u)})}function a(u){return e.draggables[u]||null}function i(u){var d=a(u);return d||P(),d}var o={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,f){var h=e.draggables[f.descriptor.id];h&&h.uniqueId===d.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var f=d.descriptor.id,h=a(f);h&&d.uniqueId===h.uniqueId&&(delete e.draggables[f],n({type:"REMOVAL",value:d}))},getById:i,findById:a,exists:function(d){return!!a(d)},getAllByType:function(d){return dr(e.draggables).filter(function(f){return f.descriptor.type===d})}};function s(u){return e.droppables[u]||null}function c(u){var d=s(u);return d||P(),d}var p={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var f=s(d.descriptor.id);f&&d.uniqueId===f.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:s,exists:function(d){return!!s(d)},getAllByType:function(d){return dr(e.droppables).filter(function(f){return f.descriptor.type===d})}};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:p,subscribe:r,clean:g}}function zp(){var e=ee(Gp,[]);return b.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var On=le.createContext(null),pr=function(){var e=document.body;return e||P(),e},Wp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},qp=function(t){return"rbd-announcement-"+t};function Up(e){var t=ee(function(){return qp(e)},[e]),r=b.useRef(null);b.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),z(i.style,Wp),pr().appendChild(i),function(){setTimeout(function(){var c=pr();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=F(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var Vp=0,Yp={separator:"::"};function Tn(e,t){return t===void 0&&(t=Yp),ee(function(){return""+e+t.separator+Vp++},[t.separator,e])}function Xp(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Jp(e){var t=e.contextId,r=e.text,n=Tn("hidden-text",{separator:"-"}),a=ee(function(){return Xp({contextId:t,uniqueId:n})},[n,t]);return b.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",pr().appendChild(o),function(){var c=pr();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var Sr=le.createContext(null);function uo(e){var t=b.useRef(e);return b.useEffect(function(){t.current=e}),t}function Kp(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&P();var s={abandon:o};return e=s,s}function a(){e||P(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var _p=9,Qp=13,Rn=27,po=32,Zp=33,eg=34,tg=35,rg=36,ng=37,ag=38,ig=39,og=40,Qt,sg=(Qt={},Qt[Qp]=!0,Qt[_p]=!0,Qt),go=function(e){sg[e.keyCode]&&e.preventDefault()},Ir=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=rt(t,function(n){return"on"+n in document});return r||e}(),fo=0,Va=5;function lg(e,t){return Math.abs(t.x-e.x)>=Va||Math.abs(t.y-e.y)>=Va}var Ya={type:"IDLE"};function cg(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,c=o.clientX,p=o.clientY;if(s===fo){var g={x:c,y:p},u=n();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(g);return}u.type!=="PENDING"&&P();var d=u.point;if(lg(d,g)){o.preventDefault();var f=u.actions.fluidLift(g);a({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(o){var s=n();if(s.type!=="DRAGGING"){t();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var s=n();if(s.type==="PENDING"){t();return}if(o.keyCode===Rn){o.preventDefault(),t();return}go(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=n();if(s.type==="IDLE"&&P(),s.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:Ir,fn:t}]}function dg(e){var t=b.useRef(Ya),r=b.useRef(Qe),n=ee(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===fo&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var d=e.findClosestDraggableId(u);if(d){var f=e.tryGetLock(d,o,{sourceEvent:u});if(f){u.preventDefault();var h={x:u.clientX,y:u.clientY};r.current(),p(f,h)}}}}}},[e]),a=ee(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var d=e.findClosestDraggableId(u);if(d){var f=e.findOptionsForDraggable(d);f&&(f.shouldRespectForcePress||e.canGetLock(d)&&u.preventDefault())}}}}},[e]),i=F(function(){var u={passive:!1,capture:!0};r.current=qe(window,[a,n],u)},[a,n]),o=F(function(){var g=t.current;g.type!=="IDLE"&&(t.current=Ya,r.current(),i())},[i]),s=F(function(){var g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),c=F(function(){var u={capture:!0,passive:!1},d=cg({cancel:s,completed:o,getPhase:function(){return t.current},setPhase:function(h){t.current=h}});r.current=qe(window,d,u)},[s,o]),p=F(function(u,d){t.current.type!=="IDLE"&&P(),t.current={type:"PENDING",point:d,actions:u},c()},[c]);He(function(){return i(),function(){r.current()}},[i])}var pt;function ug(){}var pg=(pt={},pt[eg]=!0,pt[Zp]=!0,pt[rg]=!0,pt[tg]=!0,pt);function gg(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===Rn){i.preventDefault(),r();return}if(i.keyCode===po){i.preventDefault(),n();return}if(i.keyCode===og){i.preventDefault(),e.moveDown();return}if(i.keyCode===ag){i.preventDefault(),e.moveUp();return}if(i.keyCode===ig){i.preventDefault(),e.moveRight();return}if(i.keyCode===ng){i.preventDefault(),e.moveLeft();return}if(pg[i.keyCode]){i.preventDefault();return}go(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Ir,fn:r}]}function fg(e){var t=b.useRef(ug),r=ee(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==po)return;var o=e.findClosestDraggableId(i);if(!o)return;var s=e.tryGetLock(o,g,{sourceEvent:i});if(!s)return;i.preventDefault();var c=!0,p=s.snapLift();t.current();function g(){c||P(),c=!1,t.current(),n()}t.current=qe(window,gg(p,g),{capture:!0,passive:!1})}}},[e]),n=F(function(){var i={passive:!1,capture:!0};t.current=qe(window,[r],i)},[r]);He(function(){return n(),function(){t.current()}},[n])}var Fr={type:"IDLE"},hg=120,vg=.15;function mg(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===Rn&&a.preventDefault(),t()}},{eventName:Ir,fn:t}]}function bg(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var s=i.touches[0],c=s.clientX,p=s.clientY,g={x:c,y:p};i.preventDefault(),o.actions.move(g)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&P();var s=i.touches[0];if(s){var c=s.force>=vg;if(c){var p=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){p&&t();return}if(p){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:Ir,fn:t}]}function xg(e){var t=b.useRef(Fr),r=b.useRef(Qe),n=F(function(){return t.current},[]),a=F(function(f){t.current=f},[]),i=ee(function(){return{eventName:"touchstart",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var m=e.tryGetLock(h,s,{sourceEvent:f});if(m){var v=f.touches[0],x=v.clientX,w=v.clientY,C={x,y:w};r.current(),u(m,C)}}}}}},[e]),o=F(function(){var f={capture:!0,passive:!1};r.current=qe(window,[i],f)},[i]),s=F(function(){var d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),a(Fr),r.current(),o())},[o,a]),c=F(function(){var d=t.current;s(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[s]),p=F(function(){var f={capture:!0,passive:!1},h={cancel:c,completed:s,getPhase:n},m=qe(window,bg(h),f),v=qe(window,mg(h),f);r.current=function(){m(),v()}},[c,n,s]),g=F(function(){var f=n();f.type!=="PENDING"&&P();var h=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:h,hasMoved:!1})},[n,a]),u=F(function(f,h){n().type!=="IDLE"&&P();var m=setTimeout(g,hg);a({type:"PENDING",point:h,actions:f,longPressTimerId:m}),p()},[p,n,a,g]);He(function(){return o(),function(){r.current();var h=n();h.type==="PENDING"&&(clearTimeout(h.longPressTimerId),a(Fr))}},[n,o,a]),He(function(){var f=qe(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return f},[])}var yg={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function ho(e,t){if(t==null)return!1;var r=!!yg[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:ho(e,t.parentElement)}function wg(e,t){var r=t.target;return Cr(r)?ho(e,r):!1}var Dg=function(e){return Xe(e.getBoundingClientRect()).center};function Cg(e){return e instanceof co(e).Element}var Sg=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=rt(t,function(n){return n in Element.prototype});return r||e}();function vo(e,t){return e==null?null:e[Sg](t)?e:vo(e.parentElement,t)}function Ig(e,t){return e.closest?e.closest(t):vo(e,t)}function Ng(e){return"["+mt.contextId+'="'+e+'"]'}function Eg(e,t){var r=t.target;if(!Cg(r))return null;var n=Ng(e),a=Ig(r,n);return!a||!Cr(a)?null:a}function Pg(e,t){var r=Eg(e,t);return r?r.getAttribute(mt.draggableId):null}function Og(e,t){var r="["+Qr.contextId+'="'+e+'"]',n=Ri(document.querySelectorAll(r)),a=rt(n,function(i){return i.getAttribute(Qr.id)===t});return!a||!Cr(a)?null:a}function Tg(e){e.preventDefault()}function Zt(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function mo(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!io(r.getState(),a))}function Rg(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,c=mo({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var p=a.draggable.getById(i),g=Og(r,p.descriptor.id);if(!g||s&&!p.options.canDragInteractiveElements&&wg(g,s))return null;var u=t.claim(o||Qe),d="PRE_DRAG";function f(){return p.options.shouldRespectForcePress}function h(){return t.isActive(u)}function m(j,q){Zt({expected:j,phase:d,isLockActive:h,shouldWarn:!0})&&n.dispatch(q())}var v=m.bind(null,"DRAGGING");function x(j){function q(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(q(),d!=="PRE_DRAG"&&P()),n.dispatch(Su(j.liftActionArgs)),d="DRAGGING";function V(A,L){if(L===void 0&&(L={shouldBlockNextClick:!1}),j.cleanup(),L.shouldBlockNextClick){var $=qe(window,[{eventName:"click",fn:Tg,options:{once:!0,passive:!1,capture:!0}}]);setTimeout($)}q(),n.dispatch(Qi({reason:A}))}return z({isActive:function(){return Zt({expected:"DRAGGING",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:f,drop:function(L){return V("DROP",L)},cancel:function(L){return V("CANCEL",L)}},j.actions)}function w(j){var q=Ht(function(A){v(function(){return _i({client:A})})}),V=x({liftActionArgs:{id:i,clientSelection:j,movementMode:"FLUID"},cleanup:function(){return q.cancel()},actions:{move:q}});return z({},V,{move:q})}function C(){var j={moveUp:function(){return v(ju)},moveRight:function(){return v(ku)},moveDown:function(){return v(Au)},moveLeft:function(){return v(Bu)}};return x({liftActionArgs:{id:i,clientSelection:Dg(g),movementMode:"SNAP"},cleanup:Qe,actions:j})}function N(){var j=Zt({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!0});j&&t.release()}var B={isActive:function(){return Zt({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:f,fluidLift:w,snapLift:C,abort:N};return B}var Mg=[dg,fg,xg];function jg(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?Mg:[],a||[]),s=b.useState(function(){return Kp()})[0],c=F(function(w,C){w.isDragging&&!C.isDragging&&s.tryAbandon()},[s]);He(function(){var w=r.getState(),C=r.subscribe(function(){var N=r.getState();c(w,N),w=N});return C},[s,r,c]),He(function(){return s.tryAbandon},[s.tryAbandon]);for(var p=F(function(x){return mo({lockAPI:s,registry:n,store:r,draggableId:x})},[s,n,r]),g=F(function(x,w,C){return Rg({lockAPI:s,registry:n,contextId:t,store:r,draggableId:x,forceSensorStop:w,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[t,s,n,r]),u=F(function(x){return Pg(t,x)},[t]),d=F(function(x){var w=n.draggable.findById(x);return w?w.options:null},[n.draggable]),f=F(function(){s.isClaimed()&&(s.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(wn()))},[s,r]),h=F(s.isClaimed,[s]),m=ee(function(){return{canGetLock:p,tryGetLock:g,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:f,isLockClaimed:h}},[p,g,u,d,f,h]),v=0;v<o.length;v++)o[v](m)}var Ag=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Bt(e){return e.current||P(),e.current}function kg(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=b.useRef(null),s=uo(e),c=F(function(){return Ag(s.current)},[s]),p=Up(t),g=Jp({contextId:t,text:i}),u=Fp(t,a),d=F(function(A){Bt(o).dispatch(A)},[]),f=ee(function(){return ua({publishWhileDragging:Nu,updateDroppableScroll:Pu,updateDroppableIsEnabled:Ou,updateDroppableIsCombineEnabled:Tu,collectionStarting:Eu},d)},[d]),h=zp(),m=ee(function(){return vp(h,f)},[h,f]),v=ee(function(){return jp(z({scrollWindow:mp,scrollDroppable:m.scrollDroppable},ua({move:_i},d)))},[m.scrollDroppable,d]),x=Hp(t),w=ee(function(){return pp({announce:p,autoScroller:v,dimensionMarshal:m,focusMarshal:x,getResponders:c,styleMarshal:u})},[p,v,m,x,c,u]);o.current=w;var C=F(function(){var A=Bt(o),L=A.getState();L.phase!=="IDLE"&&A.dispatch(wn())},[]),N=F(function(){var A=Bt(o).getState();return A.isDragging||A.phase==="DROP_ANIMATING"},[]),B=ee(function(){return{isDragging:N,tryAbort:C}},[N,C]);r(B);var j=F(function(A){return io(Bt(o).getState(),A)},[]),q=F(function(){return ot(Bt(o).getState())},[]),V=ee(function(){return{marshal:m,focus:x,contextId:t,canLift:j,isMovementAllowed:q,dragHandleUsageInstructionsId:g,registry:h}},[t,m,g,x,j,q,h]);return jg({contextId:t,store:w,registry:h,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),b.useEffect(function(){return C},[C]),le.createElement(Sr.Provider,{value:V},le.createElement(Ic,{context:On,store:w},e.children))}var Bg=0;function Lg(){return ee(function(){return""+Bg++},[])}function Fg(e){var t=Lg(),r=e.dragHandleUsageInstructions||nr.dragHandleUsageInstructions;return le.createElement(fd,null,function(n){return le.createElement(kg,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var bo=function(t){return function(r){return t===r}},$g=bo("scroll"),Hg=bo("auto"),Xa=function(t,r){return r(t.overflowX)||r(t.overflowY)},Gg=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return Xa(n,$g)||Xa(n,Hg)},zg=function(){return!1},Wg=function e(t){return t==null?null:t===document.body?zg()?t:null:t===document.documentElement?null:Gg(t)?t:e(t.parentElement)},Zr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},qg=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Ug=function(e){var t=Wg(e),r=qg(e);return{closestScrollable:t,isFixedOnPage:r}},Vg=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,c=e.closest,p=function(){if(!c)return null;var f=c.scrollSize,h=c.client,m=ro({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:h.paddingBox.height,width:h.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:h,scrollSize:f,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:m,diff:{value:Ee,displacement:Ee}}}}(),g=i==="vertical"?vn:Bi,u=ht({page:s,withPlaceholder:null,axis:g,frame:p}),d={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:r,client:o,page:s,frame:p,subject:u};return d},Yg=function(t,r){var n=Ni(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,s=i+r.scrollWidth,c={top:a,right:s,bottom:o,left:i},p=un(c,n.border),g=pn({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return g},Xg=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,p=n.closestScrollable,g=Yg(t,p),u=sr(g,a),d=function(){if(!p)return null;var h=Ni(p),m={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:h,page:sr(h,a),scroll:Zr(p),scrollSize:m,shouldClipSubject:c}}(),f=Vg({descriptor:r,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:i,client:g,page:u,closest:d});return f},Jg={passive:!1},Kg={passive:!0},Ja=function(e){return e.shouldPublishImmediately?Jg:Kg};function gr(e){var t=b.useContext(e);return t||P(),t}var er=function(t){return t&&t.env.closestScrollable||null};function _g(e){var t=b.useRef(null),r=gr(Sr),n=Tn("droppable"),a=r.registry,i=r.marshal,o=uo(e),s=ee(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=b.useRef(s),p=ee(function(){return Ne(function(N,B){t.current||P();var j={x:N,y:B};i.updateDroppableScroll(s.id,j)})},[s.id,i]),g=F(function(){var N=t.current;return!N||!N.env.closestScrollable?Ee:Zr(N.env.closestScrollable)},[]),u=F(function(){var N=g();p(N.x,N.y)},[g,p]),d=ee(function(){return Ht(u)},[u]),f=F(function(){var N=t.current,B=er(N);N&&B||P();var j=N.scrollOptions;if(j.shouldPublishImmediately){u();return}d()},[d,u]),h=F(function(N,B){t.current&&P();var j=o.current,q=j.getDroppableRef();q||P();var V=Ug(q),A={ref:q,descriptor:s,env:V,scrollOptions:B};t.current=A;var L=Xg({ref:q,descriptor:s,env:V,windowScroll:N,direction:j.direction,isDropDisabled:j.isDropDisabled,isCombineEnabled:j.isCombineEnabled,shouldClipSubject:!j.ignoreContainerClipping}),$=V.closestScrollable;return $&&($.setAttribute(qa.contextId,r.contextId),$.addEventListener("scroll",f,Ja(A.scrollOptions))),L},[r.contextId,s,f,o]),m=F(function(){var N=t.current,B=er(N);return N&&B||P(),Zr(B)},[]),v=F(function(){var N=t.current;N||P();var B=er(N);t.current=null,B&&(d.cancel(),B.removeAttribute(qa.contextId),B.removeEventListener("scroll",f,Ja(N.scrollOptions)))},[f,d]),x=F(function(N){var B=t.current;B||P();var j=er(B);j||P(),j.scrollTop+=N.y,j.scrollLeft+=N.x},[]),w=ee(function(){return{getDimensionAndWatchScroll:h,getScrollWhileDragging:m,dragStopped:v,scroll:x}},[v,h,m,x]),C=ee(function(){return{uniqueId:n,descriptor:s,callbacks:w}},[w,s,n]);He(function(){return c.current=C.descriptor,a.droppable.register(C),function(){t.current&&v(),a.droppable.unregister(C)}},[w,s,v,C,i,a.droppable]),He(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),He(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function $r(){}var Ka={width:0,height:0,margin:yd},Qg=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?Ka:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Zg=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=Qg({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?$t.placeholder:null}};function ef(e){var t=b.useRef(null),r=F(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,s=b.useState(e.animate==="open"),c=s[0],p=s[1];b.useEffect(function(){return c?n!=="open"?(r(),p(!1),$r):t.current?$r:(t.current=setTimeout(function(){t.current=null,p(!1)}),r):$r},[n,c,r]);var g=F(function(d){d.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),u=Zg({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return le.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:g,ref:e.innerRef})}var tf=le.memo(ef),Mn=le.createContext(null),rf=function(e){mi(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(le.PureComponent),_a={dragging:5e3,dropAnimating:4500},nf=function(t,r){return r?$t.drop(r.duration):t?$t.snap:$t.fluid},af=function(t,r){return t?r?qt.opacity.drop:qt.opacity.combining:null},of=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function sf(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,s=of(e),c=!!i,p=c?Kr.drop(n,o):Kr.moveTo(n),g={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:nf(s,i),transform:p,opacity:af(o,c),zIndex:c?_a.dropAnimating:_a.dragging,pointerEvents:"none"};return g}function lf(e){return{transform:Kr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function cf(e){return e.type==="DRAGGING"?sf(e):lf(e)}function df(e,t,r){r===void 0&&(r=Ee);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=Ii(a,n),o=sr(i,r),s={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},p={descriptor:e,placeholder:s,displaceBy:c,client:i,page:o};return p}function uf(e){var t=Tn("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,c=ee(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:s}},[i,s,o]),p=F(function(f){var h=a();return h||P(),df(r,h,f)},[r,a]),g=ee(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:p}},[r,p,c,t]),u=b.useRef(g),d=b.useRef(!0);He(function(){return n.draggable.register(u.current),function(){return n.draggable.unregister(u.current)}},[n.draggable]),He(function(){if(d.current){d.current=!1;return}var f=u.current;u.current=g,n.draggable.update(g,f)},[g,n.draggable])}function pf(e){e.preventDefault()}function gf(e){var t=b.useRef(null),r=F(function(A){t.current=A},[]),n=F(function(){return t.current},[]),a=gr(Sr),i=a.contextId,o=a.dragHandleUsageInstructionsId,s=a.registry,c=gr(Mn),p=c.type,g=c.droppableId,u=ee(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:g}},[e.draggableId,e.index,p,g]),d=e.children,f=e.draggableId,h=e.isEnabled,m=e.shouldRespectForcePress,v=e.canDragInteractiveElements,x=e.isClone,w=e.mapped,C=e.dropAnimationFinished;if(!x){var N=ee(function(){return{descriptor:u,registry:s,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:h}},[u,s,n,v,m,h]);uf(N)}var B=ee(function(){return h?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:pf}:null},[i,o,f,h]),j=F(function(A){w.type==="DRAGGING"&&w.dropping&&A.propertyName==="transform"&&C()},[C,w]),q=ee(function(){var A=cf(w),L=w.type==="DRAGGING"&&w.dropping?j:null,$={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":f,style:A,onTransitionEnd:L},dragHandleProps:B};return $},[i,B,f,w,j,r]),V=ee(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return d(q,w.snapshot,V)}var xo=function(e,t){return e===t},yo=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},ff=function(t){return t.combine?t.combine.draggableId:null},hf=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function vf(){var e=Ne(function(a,i){return{x:a,y:i}}),t=Ne(function(a,i,o,s,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:s,combineTargetFor:null}}),r=Ne(function(a,i,o,s,c,p,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:i,offset:a,dimension:o,forceShouldAnimate:g,snapshot:t(i,s,c,p,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var s=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],p=$e(i.impact),g=hf(i.impact),u=i.forceShouldAnimate;return r(e(s.x,s.y),i.movementMode,c,o.isClone,p,g,u)}if(i.phase==="DROP_ANIMATING"){var d=i.completed;if(d.result.draggableId!==o.draggableId)return null;var f=o.isClone,h=i.dimensions.draggables[o.draggableId],m=d.result,v=m.mode,x=yo(m),w=ff(m),C=i.dropDuration,N={duration:C,curve:Cn.drop,moveTo:i.newHomeClientOffset,opacity:w?qt.opacity.drop:null,scale:w?qt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:N,draggingOver:x,combineWith:w,mode:v,forceShouldAnimate:null,snapshot:t(v,f,x,w,N)}}}return null};return n}function wo(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var mf={mapped:{type:"SECONDARY",offset:Ee,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:wo(null)}};function bf(){var e=Ne(function(o,s){return{x:o,y:s}}),t=Ne(wo),r=Ne(function(o,s,c){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:c,snapshot:t(s)}}}),n=function(s){return s?r(Ee,s,!0):null},a=function(s,c,p,g){var u=p.displaced.visible[s],d=!!(g.inVirtualList&&g.effected[s]),f=yr(p),h=f&&f.draggableId===s?c:null;if(!u){if(!d)return n(h);if(p.displaced.invisible[s])return null;var m=xt(g.displacedBy.point),v=e(m.x,m.y);return r(v,h,!0)}if(d)return n(h);var x=p.displacedBy.point,w=e(x.x,x.y);return r(w,h,u.shouldAnimate)},i=function(s,c){if(s.isDragging)return s.critical.draggable.id===c.draggableId?null:a(c.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var p=s.completed;return p.result.draggableId===c.draggableId?null:a(c.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return i}var xf=function(){var t=vf(),r=bf(),n=function(i,o){return t(i,o)||r(i,o)||mf};return n},yf={dropAnimationFinished:Zi},wf=Ci(xf,yf,null,{context:On,pure:!0,areStatePropsEqual:xo})(gf);function Do(e){var t=gr(Mn),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:le.createElement(wf,e)}function Df(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return le.createElement(Do,z({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function Cf(e){var t=b.useContext(Sr);t||P();var r=t.contextId,n=t.isMovementAllowed,a=b.useRef(null),i=b.useRef(null),o=e.children,s=e.droppableId,c=e.type,p=e.mode,g=e.direction,u=e.ignoreContainerClipping,d=e.isDropDisabled,f=e.isCombineEnabled,h=e.snapshot,m=e.useClone,v=e.updateViewportMaxScroll,x=e.getContainerForClone,w=F(function(){return a.current},[]),C=F(function($){a.current=$},[]);F(function(){return i.current},[]);var N=F(function($){i.current=$},[]),B=F(function(){n()&&v({maxScroll:ao()})},[n,v]);_g({droppableId:s,type:c,mode:p,direction:g,isDropDisabled:d,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:w});var j=le.createElement(rf,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function($){var se=$.onClose,E=$.data,K=$.animate;return le.createElement(tf,{placeholder:E,onClose:se,innerRef:N,animate:K,contextId:r,onTransitionEnd:B})}),q=ee(function(){return{innerRef:C,placeholder:j,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}},[r,s,j,C]),V=m?m.dragging.draggableId:null,A=ee(function(){return{droppableId:s,type:c,isUsingCloneFor:V}},[s,V,c]);function L(){if(!m)return null;var $=m.dragging,se=m.render,E=le.createElement(Do,{draggableId:$.draggableId,index:$.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(K,ce){return se(K,ce,$)});return Ao.createPortal(E,x())}return le.createElement(Mn.Provider,{value:A},o(q,h),L())}var Hr=function(t,r){return t===r.droppable.type},Qa=function(t,r){return r.draggables[t.draggable.id]},Sf=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=z({},t,{shouldAnimatePlaceholder:!1}),n=Ne(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=Ne(function(o,s,c,p,g,u){var d=g.descriptor.id,f=g.descriptor.droppableId===o;if(f){var h=u?{render:u,dragging:n(g.descriptor)}:null,m={isDraggingOver:c,draggingOverWith:c?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:m,useClone:h}}if(!s)return r;if(!p)return t;var v={isDraggingOver:c,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),i=function(s,c){var p=c.droppableId,g=c.type,u=!c.isDropDisabled,d=c.renderClone;if(s.isDragging){var f=s.critical;if(!Hr(g,f))return r;var h=Qa(f,s.dimensions),m=$e(s.impact)===p;return a(p,u,m,m,h,d)}if(s.phase==="DROP_ANIMATING"){var v=s.completed;if(!Hr(g,v.critical))return r;var x=Qa(v.critical,s.dimensions);return a(p,u,yo(v.result)===p,$e(v.impact)===p,x,d)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var w=s.completed;if(!Hr(g,w.critical))return r;var C=$e(w.impact)===p,N=!!(w.impact.at&&w.impact.at.type==="COMBINE"),B=w.critical.droppable.id===p;return C?N?t:r:B?t:r}return r};return i},If={updateViewportMaxScroll:Mu};function Nf(){return document.body||P(),document.body}var Ef={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Nf},Co=Ci(Sf,If,null,{context:On,pure:!0,areStatePropsEqual:xo})(Cf);Co.defaultProps=Ef;const Le=[{id:"hero-fullpage",name:"Hero - Página Completa",description:"Una imagen protagonista que ocupa toda la página",category:"hero",template:"grid-cols-1 grid-rows-1",cells:1,style:{gap:"0px",padding:"0px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-2xl"},maskCategories:[{name:"Editorial",masks:["none","soft-vignette","magazine-crop","editorial-frame"]},{name:"Artístico",masks:["film-grain","vintage-border","polaroid-large"]}]},{id:"hero-split",name:"Hero - División Dramática",description:"Dos imágenes grandes con división vertical elegante",category:"hero",template:"grid-cols-2 grid-rows-1 gap-1",cells:2,style:{gap:"4px"},cellStyles:{0:"rounded-l-lg overflow-hidden shadow-xl",1:"rounded-r-lg overflow-hidden shadow-xl"},maskCategories:[{name:"Minimalista",masks:["none","soft-rounded","subtle-shadow"]}]},{id:"magazine-asymmetric",name:"Magazine - Asimétrico",description:"Layout editorial con jerarquía visual moderna",category:"editorial",template:"grid-cols-5 grid-rows-3 gap-2",cells:4,style:{gap:"6px"},cellStyles:{0:"col-span-3 row-span-2 rounded-lg overflow-hidden shadow-lg",1:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",2:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",3:"col-span-5 row-span-1 rounded-md overflow-hidden shadow-sm"},maskCategories:[{name:"Editorial",masks:["none","magazine-crop","editorial-frame","soft-vignette"]},{name:"Moderno",masks:["geometric-crop","minimal-frame","clean-border"]}]},{id:"magazine-grid",name:"Magazine - Grid Moderno",description:"Grid uniforme con espaciado editorial elegante",category:"editorial",template:"grid-cols-3 grid-rows-2 gap-3",cells:6,style:{gap:"8px",padding:"4px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",1:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",2:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",3:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",4:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",5:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow"},maskCategories:[{name:"Uniformes",masks:["none","rounded","soft-rounded","minimal-frame"]}]},{id:"minimal-duo",name:"Minimal - Dúo Elegante",description:"Dos imágenes con mucho espacio blanco",category:"minimal",template:"grid-cols-1 grid-rows-2 gap-8",cells:2,style:{gap:"32px",padding:"24px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-2xl",1:"rounded-xl overflow-hidden shadow-2xl"},maskCategories:[{name:"Limpio",masks:["none","clean-border","minimal-frame","soft-shadow"]}]},{id:"classic-quad",name:"Clásico - Cuadrícula Premium",description:"Cuatro imágenes con estilo editorial premium",category:"classic",template:"grid-cols-2 grid-rows-2 gap-4",cells:4,style:{gap:"12px",padding:"8px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",1:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",2:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",3:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300"},maskCategories:[{name:"Premium",masks:["none","rounded","soft-rounded","premium-frame","elegant-border","classic-shadow","editorial-crop"]},{name:"Artístico",masks:["vintage","film-grain","classic-vignette","sepia-tone","black-white-frame","retro-border"]}]},{id:"classic-portrait",name:"Clásico - Retrato Elegante",description:"Layout perfecto para retratos y fotos verticales",category:"classic",template:"grid-cols-3 grid-rows-2 gap-3",cells:3,style:{gap:"10px"},cellStyles:{0:"col-span-2 row-span-2 rounded-2xl overflow-hidden shadow-2xl",1:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg",2:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Retrato",masks:["none","portrait-frame","elegant-oval","classic-border"]}]}];function So(e){let t=null;return()=>(t==null&&(t=e()),t)}function Pf(e,t){return e.filter(r=>r!==t)}function Of(e,t){const r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class Tf{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=Of(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=Pf(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class Rf{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const Io="__NATIVE_FILE__",No="__NATIVE_URL__",Eo="__NATIVE_TEXT__",Po="__NATIVE_HTML__",Za=Object.freeze(Object.defineProperty({__proto__:null,FILE:Io,HTML:Po,TEXT:Eo,URL:No},Symbol.toStringTag,{value:"Module"}));function Gr(e,t,r){const n=t.reduce((a,i)=>a||e.getData(i),"");return n??r}const en={[Io]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Po]:{exposeProperties:{html:(e,t)=>Gr(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[No]:{exposeProperties:{urls:(e,t)=>Gr(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Eo]:{exposeProperties:{text:(e,t)=>Gr(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Mf(e,t){const r=en[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new Rf(r);return n.loadDataTransfer(t),n}function zr(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(en).filter(r=>{const n=en[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const jf=So(()=>/firefox/i.test(navigator.userAgent)),Oo=So(()=>!!window.safari);class ei{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let s=r.length-1;if(t===r[s])return n[s];let c=0,p=o.length-1,g;for(;c<=p;){g=Math.floor(.5*(c+p));const f=r[g];if(f<t)c=g+1;else if(f>t)p=g-1;else return n[g]}s=Math.max(0,p);const u=t-r[s],d=u*u;return n[s]+a[s]*u+i[s]*d+o[s]*u*d}constructor(t,r){const{length:n}=t,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,h)=>t[f]<t[h]?-1:1);const i=[],o=[];let s,c;for(let f=0;f<n-1;f++)s=t[f+1]-t[f],c=r[f+1]-r[f],i.push(s),o.push(c/s);const p=[o[0]];for(let f=0;f<i.length-1;f++){const h=o[f],m=o[f+1];if(h*m<=0)p.push(0);else{s=i[f];const v=i[f+1],x=s+v;p.push(3*x/((x+v)/h+(x+s)/m))}}p.push(o[o.length-1]);const g=[],u=[];let d;for(let f=0;f<p.length-1;f++){d=o[f];const h=p[f],m=1/i[f],v=h+p[f+1]-d-d;g.push((d-h-v)*m),u.push(v*m*m)}this.xs=t,this.ys=r,this.c1s=p,this.c2s=g,this.c3s=u}}const Af=1;function To(e){const t=e.nodeType===Af?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function tr(e){return{x:e.clientX,y:e.clientY}}function kf(e){var t;return e.nodeName==="IMG"&&(jf()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function Bf(e,t,r,n){let a=e?t.width:r,i=e?t.height:n;return Oo()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function Lf(e,t,r,n,a){const i=kf(t),s=To(i?e:t),c={x:r.x-s.x,y:r.y-s.y},{offsetWidth:p,offsetHeight:g}=e,{anchorX:u,anchorY:d}=n,{dragPreviewWidth:f,dragPreviewHeight:h}=Bf(i,t,p,g),m=()=>{let j=new ei([0,.5,1],[c.y,c.y/g*h,c.y+h-g]).interpolate(d);return Oo()&&i&&(j+=(window.devicePixelRatio-1)*h),j},v=()=>new ei([0,.5,1],[c.x,c.x/p*f,c.x+f-p]).interpolate(u),{offsetX:x,offsetY:w}=a,C=x===0||x,N=w===0||w;return{x:C?x:v(),y:N?w:m()}}class Ff{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function $f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ti(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){$f(e,a,r[a])})}return e}class Hf{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return ti({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return ti({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(Za).some(r=>Za[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Mf(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&To(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=tr(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,c=zr(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const g=this.monitor.getSourceId(),u=this.sourceNodes.get(g),d=this.sourcePreviewNodes.get(g)||u;if(d){const{anchorX:f,anchorY:h,offsetX:m,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),C=Lf(u,d,o,{anchorX:f,anchorY:h},{offsetX:m,offsetY:v});s.setDragImage(d,C.x,C.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:s}=a,c=zr(s);c&&this.beginDragNativeItem(c,s)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:tr(a)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=tr(a),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else zr(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:tr(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new Ff(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Tf(this.isNodeInDocument)}}const Gf=function(t,r,n){return new Hf(t,r,n)},zf=({elements:e,onReorder:t,onSelect:r,selectedElement:n})=>{const a=i=>{if(!i.destination)return;const o=Array.from(e),[s]=o.splice(i.source.index,1);o.splice(i.destination.index,0,s),t(o)};return l.jsxs("div",{className:"bg-white ",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Capas"}),l.jsx(Fg,{onDragEnd:a,children:l.jsx(Co,{droppableId:"layers",children:i=>l.jsxs("div",{...i.droppableProps,ref:i.innerRef,className:"space-y-2",children:[e.map((o,s)=>l.jsx(Df,{draggableId:o.id,index:s,children:c=>l.jsxs("div",{ref:c.innerRef,...c.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===o.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>r(o.id),children:[l.jsx("div",{...c.dragHandleProps,className:"mr-2",children:l.jsx(ts,{size:16})}),o.type==="image"?l.jsx(ri,{size:16,className:"mr-2"}):l.jsx(gt,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm truncate",children:o.type==="text"?o.content.substring(0,20):`Imagen ${s+1}`})]})},o.id)),i.placeholder]})})})]})};function Wf({id:e,elements:t=[],selectedElement:r,onSelectElement:n,onAddElement:a,onUpdateElement:i,onDeleteElement:o,availableMasks:s=[],workspaceSize:c={width:800,height:600},cellSize:p="auto",cellStyle:g=""}){const[{isOver:u},d]=bc(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:m=>{if(m.files){const v=new FileReader;v.onload=x=>{var w;if((w=x.target)!=null&&w.result){const C={id:`img-${Date.now()}`,type:"image",content:x.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(C),n(C.id,e)}},v.readAsDataURL(m.files[0])}},collect:m=>({isOver:!!m.isOver({shallow:!0})})})),f=()=>{const m=document.createElement("input");m.type="file",m.accept="image/*",m.onchange=v=>{if(v.target.files&&v.target.files[0]){const x=new FileReader;x.onload=w=>{var C;if((C=w.target)!=null&&C.result){const N={id:`img-${Date.now()}`,type:"image",content:w.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(N),n(N.id,e)}},x.readAsDataURL(v.target.files[0])}},m.click()},h=t.length>0;return l.jsx("div",{ref:d,className:`relative w-full h-full ${g||"rounded-lg overflow-hidden"} ${u?"ring-2 ring-purple-500 bg-transparent":""} ${h?"bg-transparent":"border-2 border-dashed border-gray-300 bg-transparent hover:border-gray-400 hover:bg-gray-100"}`,onClick:m=>{m.target===m.currentTarget&&n(null,e)},style:{isolation:"isolate",background:h?"transparent":void 0,minHeight:"120px"},children:t.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer transition-colors",onClick:m=>{m.stopPropagation(),f()},children:[l.jsx(Ho,{className:"h-8 w-8 text-gray-300"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Haz clic o arrastra una imagen"})]}):t.map(m=>l.jsx("div",{className:"absolute inset-0",onClick:v=>v.stopPropagation(),children:m.type==="image"?l.jsx(xc,{element:m,isSelected:r===m.id,onSelect:()=>n(m.id,e),onUpdate:v=>i(m.id,v),onDelete:()=>o(m.id),availableMasks:s,workspaceSize:c}):l.jsx(yc,{element:m,workspaceSize:c,isSelected:r===m.id,onSelect:()=>n(m.id,e),onUpdate:v=>i(m.id,v),onDelete:()=>o(m.id)})},m.id))})}function qf({currentLayoutId:e,onLayoutChange:t}){const[r,n]=b.useState("all"),a={all:{name:"Todos",layouts:Le},hero:{name:"Hero",layouts:Le.filter(i=>i.category==="hero")},editorial:{name:"Editorial",layouts:Le.filter(i=>i.category==="editorial")},storytelling:{name:"Historia",layouts:Le.filter(i=>i.category==="storytelling")},minimal:{name:"Minimal",layouts:Le.filter(i=>i.category==="minimal")},creative:{name:"Creativo",layouts:Le.filter(i=>i.category==="creative")},classic:{name:"Clásico",layouts:Le.filter(i=>i.category==="classic")}};return Object.keys(a).filter(i=>i==="all"||a[i].layouts.length>0),l.jsxs("div",{className:"w-full",children:[l.jsx("div",{className:"grid grid-cols-2  gap-3 max-h-96 overflow-y-auto overflow-x-hidden custom-scroll",children:a[r].layouts.map(i=>l.jsxs("div",{className:`relative group cursor-pointer transition-all duration-200 
                                 hover:shadow-md hover:scale-102
                        `,onClick:()=>t(i.id),children:[l.jsxs("div",{className:"aspect-square relative bg-white rounded-lg p-2 border border-gray-200",children:[l.jsx("div",{className:`w-full h-full grid ${i.template}`,style:{gap:"2px",padding:"4px"},children:Array.from({length:i.cells}).map((o,s)=>{var c,p;return l.jsx("div",{className:`bg-gradient-to-br from-purple-100 to-purple-200 ${(p=(c=i.cellStyles)==null?void 0:c[s])!=null&&p.includes("rounded")?"rounded":"rounded-sm"}`,style:{minHeight:"8px"}},s)})}),e===i.id&&l.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),l.jsxs("div",{className:"mt-2 text-center",children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 truncate",children:i.name}),i.description&&l.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:i.description}),l.jsx("div",{className:"flex items-center justify-center mt-1 space-x-2",children:l.jsxs("span",{className:"text-xs text-gray-400",children:[i.cells," ",i.cells===1?"celda":"celdas"]})})]})]},i.id))}),a[r].layouts.length===0&&l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No hay layouts disponibles en esta categoría."})})]})}const Uf=({element:e,onUpdate:t,selectedImage:r})=>{var n;return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),l.jsx(_e,{label:"Opacidad",value:[((n=e.filters)==null?void 0:n.opacity)||100],min:0,max:100,onValueChange:a=>t({filters:{...e.filters,opacity:a[0]}})})]})},Vf=({onSelectPreset:e,selectedImage:t})=>{const r=n=>({filter:`
            brightness(${n.brightness}%)
            contrast(${n.contrast}%)
            saturate(${n.saturation}%)
            sepia(${n.tint}%)
            hue-rotate(${n.hue}deg)
            blur(${n.blur}px)
        `});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:Is.map(n=>l.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>e(n.filters),children:[l.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:t?l.jsx("img",{src:t.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r(n.filters)}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:l.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:l.jsx(ko,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},Yf=({selectedMask:e,onSelect:t,availableMasks:r=[],selectedImage:n})=>{var s;const[a,i]=b.useState("Básicas"),o={};return ir.forEach(c=>{o[c.category]||(o[c.category]=[]),(r.includes(c.id)||c.id==="none")&&o[c.category].push(c)}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Máscaras de imagen"}),l.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 border-b",children:Object.keys(o).map(c=>o[c].length>0&&l.jsx("button",{onClick:()=>i(c),className:`px-4 py-2 text-sm rounded-t-md transition font-medium ${a===c?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600"}`,children:c},c))}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:(s=o[a])==null?void 0:s.map(c=>l.jsxs("div",{onClick:()=>t(c.id),className:`cursor-pointer border rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all ${e===c.id?"ring-2 ring-purple-500 border-purple-300":"border-gray-200"}`,children:[l.jsx("div",{className:"aspect-square bg-white flex items-center justify-center p-2",children:l.jsx("img",{src:n==null?void 0:n.content,alt:c.name,className:`w-full h-full object-cover ${c.class}`})}),l.jsx("p",{className:"text-center text-sm text-gray-700 p-1 truncate",children:c.name})]},c.id))})]})},Xf=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],Jf=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],Kf=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],_f=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],Qf=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],Zf=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],eh=({element:e,onUpdate:t,onClose:r})=>{var Pe,de,Te,Me,ye,je,Ae,Re,X,we,ue,pe,k,Z,ve,he,De,oe,Ce,S,W,te,re,ne,me,Se,be,Ie,nt,Dt,Ct,St,It,Nt,Et,Pt,Ot,Tt,Rt,Mt,jt;const[n,a]=b.useState(!1),[i,o]=b.useState(!1),[s,c]=b.useState(!1),[p,g]=b.useState(!1),[u,d]=b.useState(!1),[f,h]=b.useState(!1),[m,v]=b.useState(!1),[x,w]=b.useState(!1),[C,N]=b.useState("basic"),[B,j]=b.useState(((Pe=e==null?void 0:e.style)==null?void 0:Pe.color)||"#000000"),[q,V]=b.useState(((de=e==null?void 0:e.style)==null?void 0:de.backgroundColor)||"transparent"),A=b.useRef(null),L=b.useRef(null),$=b.useRef(null),se=b.useRef(null),E=b.useRef(null),K=b.useRef(null),ce=b.useRef(null);b.useEffect(()=>{function I(_){A.current&&!A.current.contains(_.target)&&a(!1),L.current&&!L.current.contains(_.target)&&o(!1),$.current&&!$.current.contains(_.target)&&g(!1),se.current&&!se.current.contains(_.target)&&d(!1),E.current&&!E.current.contains(_.target)&&h(!1),K.current&&!K.current.contains(_.target)&&c(!1),ce.current&&!ce.current.contains(_.target)&&v(!1)}return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]);const R=(I,_)=>{t({style:{...e==null?void 0:e.style,[I]:_}})},ge=(I,_,Ge)=>{var Ke;t({style:{...e==null?void 0:e.style,[I]:((Ke=e==null?void 0:e.style)==null?void 0:Ke[I])===_?Ge:_}})},xe=(I,_)=>{R(I,_)};if(!e)return null;const Q=({active:I,onClick:_,icon:Ge,title:Ke,className:ct=""})=>l.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${I?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${ct}`,onClick:_,title:Ke,children:Ge}),fe=({onClick:I,icon:_,text:Ge,isOpen:Ke,title:ct})=>l.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${Ke?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:I,title:ct,children:[_&&l.jsx("span",{className:"flex-shrink-0",children:_}),Ge&&l.jsx("span",{className:"text-sm truncate",children:Ge}),l.jsx(zo,{className:"h-3.5 w-3.5 opacity-70"})]});return l.jsx("div",{className:"  bg-white  rounded-lg shadow-sm p-4  border-gray-200  z-50 transition-all duration-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto p-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[l.jsx(gt,{className:"h-4 w-4"}),"Formato de texto"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>w(!x),title:x?"Modo compacto":"Modo expandido",children:x?l.jsx(gs,{className:"h-4 w-4"}):l.jsx(ps,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:r,title:"Cerrar",children:l.jsx(Go,{className:"h-4 w-4"})})]})]}),x&&l.jsxs("div",{className:"flex border-b mb-2",children:[l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="basic"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>N("basic"),children:"Básico"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="paragraph"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>N("paragraph"),children:"Párrafo"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="advanced"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>N("advanced"),children:"Avanzado"})]}),(C==="basic"||!x)&&l.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[l.jsx("div",{className:"relative",ref:$,children:l.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((Te=e.style)==null?void 0:Te.fontFamily)||"Arial",onChange:I=>{R("fontFamily",I.target.value)},children:Xf.map(I=>l.jsx("option",{value:I.value,style:{fontFamily:I.value},children:I.name},I.value))})}),l.jsxs("div",{className:"relative",ref:se,children:[l.jsx(fe,{onClick:()=>d(!u),text:((Me=e.style)==null?void 0:Me.fontSize)||"16px",isOpen:u,title:"Tamaño de fuente"}),u&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:Jf.map(I=>l.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{R("fontSize",I),d(!1)},children:I},I))})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((ye=e.style)==null?void 0:ye.fontWeight)==="bold",onClick:()=>ge("fontWeight","bold","normal"),icon:l.jsx(Xo,{className:"h-4 w-4"}),title:"Negrita"}),l.jsx(Q,{active:((je=e.style)==null?void 0:je.fontStyle)==="italic",onClick:()=>ge("fontStyle","italic","normal"),icon:l.jsx(cs,{className:"h-4 w-4"}),title:"Cursiva"}),l.jsx(Q,{active:((Ae=e.style)==null?void 0:Ae.textDecoration)==="underline",onClick:()=>ge("textDecoration","underline","none"),icon:l.jsx(Cs,{className:"h-4 w-4"}),title:"Subrayado"}),l.jsx(Q,{active:((Re=e.style)==null?void 0:Re.textDecoration)==="line-through",onClick:()=>ge("textDecoration","line-through","none"),icon:l.jsx(ys,{className:"h-4 w-4"}),title:"Tachado"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((X=e.style)==null?void 0:X.textAlign)==="left",onClick:()=>R("textAlign","left"),icon:l.jsx(Vo,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),l.jsx(Q,{active:((we=e.style)==null?void 0:we.textAlign)==="center",onClick:()=>R("textAlign","center"),icon:l.jsx(qo,{className:"h-4 w-4"}),title:"Centrar"}),l.jsx(Q,{active:((ue=e.style)==null?void 0:ue.textAlign)==="right",onClick:()=>R("textAlign","right"),icon:l.jsx(Yo,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),l.jsx(Q,{active:((pe=e.style)==null?void 0:pe.textAlign)==="justify",onClick:()=>R("textAlign","justify"),icon:l.jsx(Uo,{className:"h-4 w-4"}),title:"Justificar"})]}),l.jsxs("div",{className:"relative",ref:A,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:B}}),l.jsx(Bo,{className:"h-4 w-4"})]}),n&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:B}})]}),l.jsx("input",{type:"color",value:B,onChange:I=>{j(I.target.value),R("color",I.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),l.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:_f.map(I=>l.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${B===I.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:I.color},onClick:()=>{j(I.color),R("color",I.color)},title:I.name},I.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:L,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>o(!i),title:"Color de fondo",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:q,backgroundImage:q==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),l.jsx(fs,{className:"h-4 w-4"})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:q,backgroundImage:q==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),l.jsx("input",{type:"color",value:q==="transparent"?"#ffffff":q,onChange:I=>{V(I.target.value),R("backgroundColor",I.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Qf.map(I=>l.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${q===I.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:I.color,backgroundImage:I.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{V(I.color),R("backgroundColor",I.color)},title:I.name},I.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:E,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>h(!f),title:"Transformación de texto",children:l.jsx(Ko,{className:"h-4 w-4"})}),f&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:Kf.map(I=>{var _;return l.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((_=e.style)==null?void 0:_.textTransform)===I.value?"bg-gray-100":""}`,style:{textTransform:I.value},onClick:()=>{R("textTransform",I.value),h(!1)},children:I.label},I.value)})})]}),l.jsxs("div",{className:"relative",ref:ce,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>v(!m),title:"Encabezados",children:l.jsx(gt,{className:"h-4 w-4"})}),m&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","32px"),R("fontWeight","bold"),v(!1)},children:[l.jsx(rs,{className:"h-4 w-4"})," ","Encabezado 1"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","24px"),R("fontWeight","bold"),v(!1)},children:[l.jsx(ns,{className:"h-4 w-4"})," ","Encabezado 2"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","20px"),R("fontWeight","bold"),v(!1)},children:[l.jsx(as,{className:"h-4 w-4"})," ","Encabezado 3"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","16px"),R("fontWeight","bold"),v(!1)},children:[l.jsx(is,{className:"h-4 w-4"})," ","Encabezado 4"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","16px"),R("fontWeight","normal"),v(!1)},children:[l.jsx(gt,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((k=e.style)==null?void 0:k.verticalAlign)==="super",onClick:()=>ge("verticalAlign","super","baseline"),icon:l.jsx(Ds,{className:"h-4 w-4"}),title:"Superíndice"}),l.jsx(Q,{active:((Z=e.style)==null?void 0:Z.verticalAlign)==="sub",onClick:()=>ge("verticalAlign","sub","baseline"),icon:l.jsx(ws,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),x&&C==="paragraph"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((ve=e.style)==null?void 0:ve.listStyleType)==="disc",onClick:()=>{var I;return R("listStyleType",((I=e.style)==null?void 0:I.listStyleType)==="disc"?"none":"disc")},icon:l.jsx(us,{className:"h-4 w-4"}),title:"Lista con viñetas"}),l.jsx(Q,{active:((he=e.style)==null?void 0:he.listStyleType)==="decimal",onClick:()=>{var I;return R("listStyleType",((I=e.style)==null?void 0:I.listStyleType)==="decimal"?"none":"decimal")},icon:l.jsx(ds,{className:"h-4 w-4"}),title:"Lista numerada"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{onClick:()=>{var _;const I=Number.parseInt(((_=e.style)==null?void 0:_.textIndent)||"0");R("textIndent",`${I+20}px`)},icon:l.jsx(ls,{className:"h-4 w-4"}),title:"Aumentar sangría"}),l.jsx(Q,{onClick:()=>{var _;const I=Number.parseInt(((_=e.style)==null?void 0:_.textIndent)||"0");I>=20&&R("textIndent",`${I-20}px`)},icon:l.jsx(ss,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(oa,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((De=e.style)==null?void 0:De.lineHeight)||"1.5"),onChange:I=>xe("lineHeight",I.target.value),className:"w-24"}),l.jsx(Wr,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((oe=e.style)==null?void 0:oe.lineHeight)||"1.5"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(oa,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((Ce=e.style)==null?void 0:Ce.letterSpacing)||"0"),onChange:I=>xe("letterSpacing",`${I.target.value}px`),className:"w-24"}),l.jsx(Wr,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((S=e.style)==null?void 0:S.letterSpacing)||"0px"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((W=e.style)==null?void 0:W.fontStyle)==="italic"&&((te=e.style)==null?void 0:te.paddingLeft)==="20px"&&((re=e.style)==null?void 0:re.borderLeft)==="4px solid #ccc",onClick:()=>{var I,_,Ge;((I=e.style)==null?void 0:I.fontStyle)==="italic"&&((_=e.style)==null?void 0:_.paddingLeft)==="20px"&&((Ge=e.style)==null?void 0:Ge.borderLeft)==="4px solid #ccc"?(R("fontStyle","normal"),R("paddingLeft","0"),R("borderLeft","none")):(R("fontStyle","italic"),R("paddingLeft","20px"),R("borderLeft","4px solid #ccc"))},icon:l.jsx(hs,{className:"h-4 w-4"}),title:"Formato de cita"}),l.jsx(Q,{active:((ne=e.style)==null?void 0:ne.fontFamily)==="'Courier New', monospace"&&((me=e.style)==null?void 0:me.backgroundColor)==="#f5f5f5"&&((Se=e.style)==null?void 0:Se.padding)==="2px 4px",onClick:()=>{var I,_;((I=e.style)==null?void 0:I.fontFamily)==="'Courier New', monospace"&&((_=e.style)==null?void 0:_.backgroundColor)==="#f5f5f5"?(R("fontFamily","Arial, sans-serif"),R("backgroundColor","transparent"),R("padding","0")):(R("fontFamily","'Courier New', monospace"),R("backgroundColor","#f5f5f5"),R("padding","2px 4px"))},icon:l.jsx(_o,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),x&&C==="advanced"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"relative",ref:K,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>c(!s),title:"Opciones de borde",children:[l.jsx(xs,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Bordes"})]}),s&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),l.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((be=e.style)==null?void 0:be.borderStyle)||"none",onChange:I=>R("borderStyle",I.target.value),children:Zf.map(I=>l.jsx("option",{value:I.value,children:I.label},I.value))})]}),((Ie=e.style)==null?void 0:Ie.borderStyle)&&((nt=e.style)==null?void 0:nt.borderStyle)!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((Dt=e.style)==null?void 0:Dt.borderWidth)||"1"),onChange:I=>R("borderWidth",`${I.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((Ct=e.style)==null?void 0:Ct.borderWidth)||"1px"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:((St=e.style)==null?void 0:St.borderColor)||"#000000",onChange:I=>R("borderColor",I.target.value),className:"w-8 h-8"}),l.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(I=>l.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:I},onClick:()=>R("borderColor",I)},I))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((It=e.style)==null?void 0:It.borderRadius)||"0"),onChange:I=>R("borderRadius",`${I.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((Nt=e.style)==null?void 0:Nt.borderRadius)||"0px"})]})]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),l.jsx("button",{className:`px-2 py-1 text-xs rounded ${(Et=e.style)!=null&&Et.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var I;(I=e.style)!=null&&I.textShadow?R("textShadow",""):R("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(Pt=e.style)!=null&&Pt.textShadow?"Quitar":"Añadir"}),((Ot=e.style)==null?void 0:Ot.textShadow)&&l.jsxs("select",{className:"text-xs p-1 border rounded",value:(Tt=e.style)==null?void 0:Tt.textShadow,onChange:I=>R("textShadow",I.target.value),children:[l.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),l.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),l.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),l.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),l.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((Rt=e.style)==null?void 0:Rt.opacity)||"1"),onChange:I=>xe("opacity",I.target.value),className:"w-24"})}),l.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((Mt=e.style)==null?void 0:Mt.opacity)||"1")*100),"%"]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((jt=e.style)==null?void 0:jt.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var I;((I=e.style)==null?void 0:I.backgroundColor)==="#ffff00"?R("backgroundColor","transparent"):R("backgroundColor","#ffff00")},title:"Resaltar texto",children:[l.jsx(os,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[l.jsx(Q,{onClick:()=>{alert("Función deshacer (implementar)")},icon:l.jsx(bs,{className:"h-4 w-4"}),title:"Deshacer"}),l.jsx(Q,{onClick:()=>{alert("Función rehacer (implementar)")},icon:l.jsx(ai,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},th=({currentSize:e,onSizeChange:t,presetData:r,workspaceDimensions:n})=>((()=>{if(r!=null&&r.canvas_config){const i=typeof r.canvas_config=="string"?JSON.parse(r.canvas_config):r.canvas_config;let o=i.width,s=i.height;return{width:o,height:s,unit:"cm"}}return null})(),l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:n&&l.jsxs("div",{className:"text-xs text-gray-500 ml-2",children:[l.jsxs("div",{children:["Actual: ",n.width,"x",n.height," px"]}),n.originalWidth&&l.jsxs("div",{children:["Original: ",n.originalWidth,"x",n.originalHeight," cm"]}),n.originalWidthPx&&l.jsxs("div",{children:["Original en px: ",n.originalWidthPx,"x",n.originalHeightPx," px"]}),n.scale&&n.scale<1&&l.jsxs("div",{children:["Escala: ",Math.round(n.scale*100),"%"]})]})}));function Sh({albumId:e,itemId:t,presetId:r,pages:n}){var Dt,Ct,St,It,Nt,Et,Pt,Ot,Tt,Rt,Mt,jt,I,_,Ge,Ke,ct,jn,An,kn,Bn,Ln,Fn,$n,Hn,Gn,zn,Wn,qn,Un,Vn,Yn;const[a,i]=b.useState(null),[o,s]=b.useState(null),[c,p]=b.useState(!0),[g,u]=b.useState(null),[d,f]=b.useState([]),[h,m]=b.useState(0),[v,x]=b.useState(null),[w,C]=b.useState(null),[N,B]=b.useState("elements"),[j,q]=b.useState("basic"),[V,A]=b.useState([JSON.stringify(d)]),[L,$]=b.useState(0),[se,E]=b.useState(!1),[K,ce]=b.useState(null),[R,ge]=b.useState({}),[xe,Q]=b.useState(!1),[fe,Pe]=b.useState({elementId:null,cellId:null}),[de,Te]=b.useState(!1),Me=()=>{if(e&&t&&r)return{albumId:e,itemId:t,presetId:r,pages:n||20};const y=new URLSearchParams(window.location.search);return{albumId:y.get("album"),itemId:y.get("item"),presetId:y.get("preset"),pages:parseInt(y.get("pages"))||20}},ye=async()=>{try{p(!0),u(null);const y=Me();if(console.log("🔍 Editor params:",y),!y.albumId||!y.presetId)throw new Error("Faltan parámetros requeridos: albumId y presetId");const D=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",M=`${D}/api/albums/${y.albumId}`,O=`${D}/api/item-presets/${y.presetId}`;console.log("🌐 Using endpoints:",{albumEndpoint:M,presetEndpoint:O,baseUrl:D}),console.log("📚 Cargando álbum...");const T=await fetch(M,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("📚 Album response status:",T.status),!T.ok){const Ye=await T.text();throw console.error("❌ Album response error:",Ye),new Error(`Error al cargar álbum: ${T.status} ${T.statusText}`)}const U=await T.json();console.log("✅ Album response data:",U);const H=U.data||U;console.log("📚 Album loaded:",H),i(H),console.log("🎨 Cargando preset...");const G=await fetch(O,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("🎨 Preset response status:",G.status),!G.ok){const Ye=await G.text();throw console.error("❌ Preset response error:",Ye),new Error(`Error al cargar preset: ${G.status} ${G.statusText}`)}const ae=await G.json();console.log("✅ Preset response data:",ae);const Ve=ae.data||ae;console.log("🎨 Preset loaded:",Ve),s(Ve),console.log("📄 Creando páginas..."),await je(Ve,H,y.pages)}catch(y){console.error("💥 Error loading album data:",y),u(y.message)}finally{p(!1)}},je=(y,D,M)=>{try{console.log("Creating pages from preset:",y),console.log("Album data:",D),console.log("Total pages requested:",M);const O=[];if(!y.cover_image||!y.content_layer_image||!y.final_layer_image)throw new Error("El preset no tiene todas las imágenes requeridas");const T=G=>G.startsWith("http")||G.startsWith("/storage/")?G:`/storage/${G}`;console.log(y);const U={id:"page-cover",type:"cover",layout:"layout-1",cells:[{id:"cell-cover-1",elements:[{id:"cover-base",type:"image",content:`/storage/images/item_preset/${y.cover_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0},...D.cover_image_path?[{id:"cover-custom",type:"image",content:`/storage/images/albums/covers/${D.cover_image_path}`,position:{x:10,y:10},size:{width:80,height:80},filters:{},mask:"none",zIndex:2}]:[]]}]};O.push(U);for(let G=1;G<=M;G++){const ae={id:`page-content-${G}`,type:"content",pageNumber:G,layout:"layout-1",cells:[{id:`cell-content-${G}-1`,elements:[{id:`content-base-${G}`,type:"image",content:`/storage/images/item_preset/${y.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};O.push(ae)}const H={id:"page-final",type:"final",layout:"layout-1",cells:[{id:"cell-final-1",elements:[{id:"final-base",type:"image",content:`/storage/images/item_preset/${y.final_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};O.push(H),console.log("✅ Created pages:",O),f(O),m(0),y.canvas_config&&(console.log("📐 Canvas config found, setting workspace to preset dimensions"),Se("preset"))}catch(O){throw console.error("❌ Error creating pages:",O),O}};b.useEffect(()=>{ye()},[]);const Ae=()=>{if(d.length===0)return"Cargando...";const y=d[h];if(!y)return"Página";switch(y.type){case"cover":return"Portada";case"content":return`Página ${y.pageNumber}`;case"final":return"Contraportada";default:return`Página ${h+1}`}},Re=()=>{if(d.length===0)return!1;const y=d[h];return(y==null?void 0:y.type)==="content"},X=b.useCallback(()=>{if(!v||!w||d.length===0)return null;const y=d[h];if(!y)return null;const D=y.cells.find(M=>M.id===w);return D?D.elements.find(M=>M.id===v):null},[v,w,d,h]),we=(y,D)=>{if(D){const M=d[h].cells.find(T=>T.id===D),O=M==null?void 0:M.elements.find(T=>T.id===y);if(O!=null&&O.locked){console.log("Elemento bloqueado, no se puede seleccionar");const T=document.createElement("div");T.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",T.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(T),setTimeout(()=>{document.body.contains(T)&&document.body.removeChild(T)},3e3);return}}if(D&&C(D),x(y),y){const M=d[h].cells.find(T=>T.id===(D||w)),O=M==null?void 0:M.elements.find(T=>T.id===y);(O==null?void 0:O.type)==="image"?(ce(O),console.log(K)):(O==null?void 0:O.type)==="text"?(Q(!0),Pe({elementId:y,cellId:D||w})):Q(!1)}else Q(!1),ce(null)},ue=()=>{if(d.length===0)return Le[0];const y=d[h];return y&&Le.find(D=>D.id===y.layout)||Le[0]},pe=y=>{f(y);const D=[...V.slice(0,L+1),JSON.stringify(y)];A(D),$(D.length-1)},k=y=>{const D=Le.find(U=>U.id===y);if(!D)return;const M=[...d],O=M[h],T=Array.from({length:D.cells}).map((U,H)=>O.cells[H]||{id:`cell-${O.id}-${H+1}`,elements:[]});M[h]={...O,layout:y,cells:T},pe(M),x(null),C(null)},Z=()=>{if(!o)return;const y=d.filter(ae=>ae.type==="content"),M=(y.length>0?Math.max(...y.map(ae=>ae.pageNumber)):0)+1,O=`page-content-${M}`,T={id:O,type:"content",pageNumber:M,layout:"layout-1",cells:[{id:`cell-content-${M}-1`,elements:[{id:`content-base-${M}`,type:"image",content:`/storage/${o.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]},U=[...d],H=U.findIndex(ae=>ae.type==="final");H>-1?U.splice(H,0,T):U.push(T),pe(U);const G=U.findIndex(ae=>ae.id===O);m(G)},ve=()=>{if(d.length<=3)return;const y=d[h];if(y.type==="cover"||y.type==="final"){console.log("No se puede eliminar la portada o contraportada");return}if(!confirm(`¿Estás seguro de eliminar la ${y.type==="content"?`página ${y.pageNumber}`:"página"}?`))return;const D=d.filter((M,O)=>O!==h);pe(D),m(Math.min(h,D.length-1))},he=()=>{const y=d[h];if(y.type!=="content"){console.log("Solo se pueden duplicar páginas de contenido");return}const M=Math.max(...d.filter(G=>G.type==="content").map(G=>G.pageNumber))+1,O={...JSON.parse(JSON.stringify(y)),id:`page-content-${M}`,pageNumber:M,cells:y.cells.map(G=>({...G,id:`cell-content-${M}-${G.id.split("-").pop()}`,elements:G.elements.map(ae=>({...ae,id:`${ae.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}))},T=[...d],U=T.findIndex(G=>G.type==="final");U>-1?T.splice(U,0,O):T.push(O),pe(T);const H=T.findIndex(G=>G.id===O.id);m(H)},De=(y,D)=>{const M=[...d],O=M[h].cells.findIndex(T=>T.id===y);O!==-1&&(M[h].cells[O].elements.push(D),pe(M),x(D.id),C(y))},oe=(y,D,M,O=!1)=>{const T=[...d],U=T[h].cells.findIndex(H=>H.id===y);if(U!==-1){if(O)T[h].cells[U].elements.push({...T[h].cells[U].elements.find(H=>H.id===D),...M});else{const H=T[h].cells[U].elements.findIndex(G=>G.id===D);H!==-1&&(T[h].cells[U].elements[H]={...T[h].cells[U].elements[H],...M})}pe(T)}},Ce=(y,D)=>{const M=[...d],O=M[h].cells.findIndex(T=>T.id===y);O!==-1&&(M[h].cells[O].elements=M[h].cells[O].elements.filter(T=>T.id!==D),pe(M),v===D&&x(null))},S=()=>{L>0&&($(L-1),f(JSON.parse(V[L-1])),x(null),C(null))},W=()=>{L<V.length-1&&($(L+1),f(JSON.parse(V[L+1])),x(null),C(null))},te=()=>{E(!se)},re=()=>{const D={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:.05,y:.05},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};w?De(w,D):console.log("Selecciona una celda primero")},ne=y=>{var D;!v||!w||oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,...y}})},[me,Se]=b.useState("preset"),be=()=>{if(o!=null&&o.canvas_config){const G=typeof o.canvas_config=="string"?JSON.parse(o.canvas_config):o.canvas_config;let ae=G.width,Ve=G.height,Ye=ae*37.8,at=Ve*37.8;if(Ye&&at){const Yt=window.innerWidth*.6,Xt=window.innerHeight*.7,Jt=Yt/Ye,Kt=Xt/at,dt=Math.min(Jt,Kt,1);return{width:Math.round(Ye*dt),height:Math.round(at*dt),originalWidth:ae,originalHeight:Ve,scale:dt,unit:"cm",originalWidthPx:Math.round(Ye),originalHeightPx:Math.round(at)}}}const y={square:{width:600,height:600},landscape:{width:1280,height:720},portrait:{width:600,height:800},wide:{width:1200,height:600},tall:{width:540,height:960},preset:{width:800,height:600}},D=y[me]||y.preset,M=window.innerWidth*.6,O=window.innerHeight*.7,T=M/D.width,U=O/D.height,H=Math.min(T,U,1);return{width:Math.round(D.width*H),height:Math.round(D.height*H),originalWidth:D.width,originalHeight:D.height,scale:H,unit:"px"}},[Ie,nt]=b.useState({width:800,height:600});return b.useEffect(()=>{const y=be();nt(y)},[o,me]),b.useEffect(()=>{const y=()=>{const D=be();nt(D)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[o,me]),b.useEffect(()=>{const y=async()=>{const M={};await Promise.all(d.map(async(O,T)=>{const U=document.getElementById(`page-${O.id}`);if(U)try{const H=await Fo(U,{scale:.2,logging:!1,useCORS:!0,allowTaint:!0,ignoreElements:G=>G.classList.contains("ignore-thumbnail")});M[O.id]=H.toDataURL()}catch(H){console.error("Error generating thumbnail:",H),M[O.id]=null}})),ge({...R,...M})},D=setTimeout(()=>{y()},500);return()=>clearTimeout(D)},[d,h]),l.jsx(Wl,{backend:Gf,children:c?l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cargando Editor"}),l.jsx("p",{className:"text-gray-600",children:"Preparando tu álbum personalizado..."})]})}):d.length===0||g?l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-4",children:g||"No se pudieron cargar los datos del álbum."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),l.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Volver"})]})]})}):l.jsx("div",{className:"bg-white py-4",children:l.jsxs("div",{className:"flex flex-col min-h-screen  mx-auto  max-w-[82rem]",children:[l.jsxs("header",{className:"border-b bg-white py-4 flex items-center justify-between ",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(Je,{variant:"ghost",size:"sm",children:[l.jsx(Wo,{className:"h-5 w-5 mr-1"}),"Regresar"]}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:(a==null?void 0:a.title)||"Álbum Sin Título"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("p",{className:"text-sm text-gray-600",children:[Ae()," ",d.length>0&&`• ${d.length} páginas total`]}),d.length>0&&l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Re()?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:Re()?"✏️ Editable":"🔒 Solo vista"})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Je,{variant:"secondary",onClick:te,icon:l.jsx(Qo,{className:"h-4 w-4"}),children:se?"Editar":"Vista previa"}),l.jsx(Je,{variant:"secondary",onClick:()=>Te(!0),icon:l.jsx(Jo,{className:"h-4 w-4"}),children:"Vista de Álbum"})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx("aside",{className:"w-64 border-r bg-white p-4 overflow-y-auto shadow-sm",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex border-b pb-4",children:[l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${N==="elements"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>B("elements"),children:"Elementos"}),l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${N==="filters"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>B("filters"),children:"Filtros"})]}),N==="elements"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-3",children:"Layouts Disponibles"}),l.jsx(qf,{currentLayoutId:(Dt=d[h])==null?void 0:Dt.layout,onLayoutChange:k})]}),l.jsx("div",{children:l.jsx(zf,{elements:((Ct=d[h].cells.find(y=>y.id===w))==null?void 0:Ct.elements)||[],onReorder:y=>{const D=[...d],M=D[h].cells.findIndex(O=>O.id===w);M!==-1&&(D[h].cells[M].elements=y,pe(D))},onSelect:we,selectedElement:v})})]}),N==="filters"&&l.jsx(l.Fragment,{children:v?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl w-full max-w-md mx-auto",children:[{key:"basic",label:"Básicos"},{key:"transform",label:"Avanzados"}].map(y=>l.jsx("button",{onClick:()=>q(y.key),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200
                ${j===y.key?"bg-purple-600 text-white shadow":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:y.label},y.key))}),j==="basic"&&l.jsxs(l.Fragment,{children:[l.jsx(Vf,{onSelectPreset:ne,selectedImage:K}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes básicos"}),l.jsx(_e,{label:"Brillo",value:[((It=(St=X())==null?void 0:St.filters)==null?void 0:It.brightness)||100],min:0,max:200,onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,brightness:y[0]}})}}),l.jsx(_e,{label:"Contraste",value:[((Et=(Nt=X())==null?void 0:Nt.filters)==null?void 0:Et.contrast)||100],min:0,max:200,onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,contrast:y[0]}})}}),l.jsx(_e,{label:"Saturación",value:[((Ot=(Pt=X())==null?void 0:Pt.filters)==null?void 0:Ot.saturation)||100],min:0,max:200,onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,saturation:y[0]}})}}),l.jsx(_e,{label:"Tono",value:[((Rt=(Tt=X())==null?void 0:Tt.filters)==null?void 0:Rt.hue)||0],min:0,max:360,unit:"°",onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,hue:y[0]}})}}),l.jsx(_e,{label:"Sepia",value:[((jt=(Mt=X())==null?void 0:Mt.filters)==null?void 0:jt.tint)||0],min:0,max:100,onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,tint:y[0]}})}}),l.jsx(_e,{label:"Desenfoque",value:[((_=(I=X())==null?void 0:I.filters)==null?void 0:_.blur)||0],min:0,max:20,unit:"px",onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,blur:y[0]}})}})]})]}),j==="transform"&&l.jsxs("div",{className:"space-y-4",children:[((Ge=X())==null?void 0:Ge.type)==="image"&&l.jsx(Yf,{onSelect:y=>oe(w,v,{mask:y}),selectedMask:((Ke=X())==null?void 0:Ke.mask)||"none",availableMasks:ue().maskCategories.flatMap(y=>y.masks),selectedImage:K}),l.jsx(Uf,{selectedImage:K,element:X(),onUpdate:y=>oe(w,v,y)}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h3",{className:" font-medium pt-4",children:"Transformación"})}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(Je,{variant:(jn=(ct=X())==null?void 0:ct.filters)!=null&&jn.flipHorizontal?"secondary":"outline",size:"sm",icon:l.jsx(Zo,{className:"h-4 w-4"}),className:"justify-start ",onClick:()=>{var y,D,M;return oe(w,v,{filters:{...(y=X())==null?void 0:y.filters,flipHorizontal:!((M=(D=X())==null?void 0:D.filters)!=null&&M.flipHorizontal)}})},children:"Giro Horizontal"}),l.jsx(Je,{variant:(kn=(An=X())==null?void 0:An.filters)!=null&&kn.flipVertical?"secondary":"outline",size:"sm",icon:l.jsx(es,{className:"h-4 w-4"}),className:"justify-start",onClick:()=>{var y,D,M;return oe(w,v,{filters:{...(y=X())==null?void 0:y.filters,flipVertical:!((M=(D=X())==null?void 0:D.filters)!=null&&M.flipVertical)}})},children:"Giro Vertical"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(_e,{label:"Rotación",value:[((Ln=(Bn=X())==null?void 0:Bn.filters)==null?void 0:Ln.rotate)||0],min:0,max:360,unit:"°",onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,rotate:y[0]}})}}),l.jsx(_e,{label:"Escala",value:[((($n=(Fn=X())==null?void 0:Fn.filters)==null?void 0:$n.scale)||1)*100],min:10,max:200,unit:"%",onValueChange:y=>{var D;return oe(w,v,{filters:{...(D=X())==null?void 0:D.filters,scale:y[0]/100}})}})]})]})]})]}):l.jsx("h2",{className:"font-medium text-center",children:"Agrega imágenes y textos al área de trabajo y selecciona tu imagen para ver nuevas opciones"})})]})}),l.jsx(Lo,{isOpen:de,onRequestClose:()=>Te(!1),pages:d.map(y=>({...y,layout:Le.find(D=>D.id===y.layout)||Le[0]}))}),l.jsxs("main",{className:"flex-1 overflow-auto bg-gray-100 p-6",children:[l.jsx("div",{className:"max-w-5xl mx-auto ",children:se?l.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg page-preview",children:l.jsx("div",{className:`grid ${ue().template} gap-6 aspect-[4/3]`,children:d[h].cells.map(y=>l.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:y.elements.map(D=>{var M,O,T,U,H,G,ae,Ve,Ye,at,Yt,Xt,Jt,Kt,dt,Xn,Jn,Kn,_n,Qn,Zn,ea,ta,ra,na;return D.type==="image"?l.jsx("div",{className:`absolute ${((M=ir.find(Ro=>Ro.id===D.mask))==null?void 0:M.class)||""}`,style:{left:`${D.position.x}px`,top:`${D.position.y}px`,width:"100%",height:"100%"},children:l.jsx("img",{src:D.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                    brightness(${(((O=D.filters)==null?void 0:O.brightness)||100)/100})
                                    contrast(${(((T=D.filters)==null?void 0:T.contrast)||100)/100})
                                    saturate(${(((U=D.filters)==null?void 0:U.saturation)||100)/100})
                                    sepia(${(((H=D.filters)==null?void 0:H.tint)||0)/100})
                                    hue-rotate(${(((G=D.filters)==null?void 0:G.hue)||0)*3.6}deg)
                                    blur(${((ae=D.filters)==null?void 0:ae.blur)||0}px)
                                  `,transform:`scale(${((Ve=D.filters)==null?void 0:Ve.scale)||1}) rotate(${((Ye=D.filters)==null?void 0:Ye.rotate)||0}deg) ${(at=D.filters)!=null&&at.flipHorizontal?"scaleX(-1)":""} ${(Yt=D.filters)!=null&&Yt.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((Xt=D.filters)==null?void 0:Xt.blendMode)||"normal",opacity:(((Jt=D.filters)==null?void 0:Jt.opacity)||100)/100}})},D.id):l.jsx("div",{className:"absolute",style:{left:`${D.position.x}px`,top:`${D.position.y}px`,fontFamily:(Kt=D.style)==null?void 0:Kt.fontFamily,fontSize:(dt=D.style)==null?void 0:dt.fontSize,fontWeight:(Xn=D.style)==null?void 0:Xn.fontWeight,fontStyle:(Jn=D.style)==null?void 0:Jn.fontStyle,textDecoration:(Kn=D.style)==null?void 0:Kn.textDecoration,color:(_n=D.style)==null?void 0:_n.color,textAlign:(Qn=D.style)==null?void 0:Qn.textAlign,backgroundColor:((Zn=D.style)==null?void 0:Zn.backgroundColor)||"transparent",padding:((ea=D.style)==null?void 0:ea.padding)||"8px",borderRadius:((ta=D.style)==null?void 0:ta.borderRadius)||"0px",border:((ra=D.style)==null?void 0:ra.border)||"none",opacity:((na=D.style)==null?void 0:na.opacity)||1},children:D.content},D.id)})},y.id))})}):l.jsxs("div",{className:"space-y-6",children:[xe?l.jsx(eh,{element:X(),onUpdate:y=>{oe(fe.cellId,fe.elementId,y)},onClose:()=>Q(!1)}):l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center gap-4",children:[l.jsx(Je,{variant:"ghost",size:"icon",onClick:S,disabled:L<=0,children:l.jsx(Ss,{className:"h-5 w-5"})}),l.jsx(Je,{variant:"ghost",size:"icon",onClick:W,disabled:L>=V.length-1,children:l.jsx(vs,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(Je,{variant:"ghost",size:"icon",onClick:()=>{const y=document.createElement("input");y.type="file",y.accept="image/*",y.onchange=D=>{if(D.target.files&&D.target.files[0]){const O={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},T=new FileReader;T.onload=U=>{var H;(H=U.target)!=null&&H.result&&(O.content=U.target.result,De(w||d[h].cells[0].id,O))},T.readAsDataURL(D.target.files[0])}},y.click()},children:l.jsx(ri,{className:"h-5 w-5"})}),l.jsx(Je,{variant:"ghost",size:"icon",onClick:re,children:l.jsx(gt,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(Je,{variant:"ghost",size:"icon",onClick:()=>{v&&w&&Ce(w,v)},disabled:!v,children:l.jsx(ft,{className:"h-5 w-5"})}),l.jsx(th,{currentSize:me,onSizeChange:Se,presetData:o,workspaceDimensions:Ie})]}),Ie&&l.jsx("div",{className:"text-center mb-2 text-sm text-gray-600",children:l.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:["Área de trabajo: ",Ie.width," × ",Ie.height,"px",Ie.originalWidth&&l.jsxs("span",{className:"ml-2 text-gray-500",children:["(Original: ",Ie.originalWidth," × ",Ie.originalHeight,"px)"]})]})}),l.jsxs("div",{id:`page-${d[h].id}`,className:`bg-white rounded-lg shadow-lg overflow-hidden page-preview ${ue().cells<=4,""}`,style:{width:Ie.width,height:Ie.height,position:"relative",margin:"0 auto",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"2px solid #e5e7eb"},children:[(()=>{const y=d[h];let D=null;return y.type==="cover"&&(o!=null&&o.cover_image)?D=o.cover_image.startsWith("http")?o.cover_image:`/storage/images/item_preset/${o.cover_image}`:y.type==="content"&&(o!=null&&o.content_layer_image)?D=o.content_layer_image.startsWith("http")?o.content_layer_image:`/storage/images/item_preset/${o.content_layer_image}`:y.type==="final"&&(o!=null&&o.final_layer_image)&&(D=o.final_layer_image.startsWith("http")?o.final_layer_image:`/storage/images/item_preset/${o.final_layer_image}`),D?l.jsx("img",{src:D,alt:"background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0,pointerEvents:"none"}}):null})(),l.jsx("div",{className:`grid ${ue().template}`,style:{position:"relative",zIndex:1,width:"100%",height:"100%",boxSizing:"border-box",gap:((Hn=ue().style)==null?void 0:Hn.gap)||"16px",padding:((Gn=ue().style)==null?void 0:Gn.padding)||"16px"},children:d[h].cells.map((y,D)=>{var M;return l.jsx(Wf,{id:y.id,elements:y.elements.filter(O=>!O.locked),workspaceSize:Ie,cellStyle:(M=ue().cellStyles)==null?void 0:M[D],selectedElement:w===y.id?v:null,onSelectElement:we,onAddElement:O=>{const T=[...d],U=T[h].cells.findIndex(H=>H.id===y.id);U!==-1&&(T[h].cells[U].elements.push(O),pe(T),x(O.id),C(y.id))},onUpdateElement:(O,T,U)=>{const H=[...d],G=H[h].cells.findIndex(ae=>ae.id===y.id);if(G!==-1){if(U)H[h].cells[G].elements.push({...H[h].cells[G].elements.find(ae=>ae.id===O),...T});else{const ae=H[h].cells[G].elements.findIndex(Ve=>Ve.id===O);ae!==-1&&(H[h].cells[G].elements[ae]={...H[h].cells[G].elements[ae],...T})}pe(H)}},onDeleteElement:O=>{const T=[...d],U=T[h].cells.findIndex(H=>H.id===y.id);U!==-1&&(T[h].cells[U].elements=T[h].cells[U].elements.filter(H=>H.id!==O),pe(T),v===O&&x(null))},availableMasks:ue().maskCategories.flatMap(O=>O.masks)},y.id)})})]})]})}),l.jsx("aside",{className:"max-w-5xl mt-6 mx-auto bg-white p-4 rounded-lg border",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"font-medium",children:"Páginas"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:he,disabled:((zn=d[h])==null?void 0:zn.type)!=="content",title:((Wn=d[h])==null?void 0:Wn.type)!=="content"?"Solo se pueden duplicar páginas de contenido":"Duplicar página",children:l.jsx(tn,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:ve,disabled:d.length<=3||((qn=d[h])==null?void 0:qn.type)==="cover"||((Un=d[h])==null?void 0:Un.type)==="final",title:((Vn=d[h])==null?void 0:Vn.type)==="cover"||((Yn=d[h])==null?void 0:Yn.type)==="final"?"No se puede eliminar la portada o contraportada":d.length<=3?"Debe haber al menos una página de contenido":"Eliminar página",children:l.jsx(ft,{className:"h-4 w-4"})}),l.jsxs("button",{className:"flex items-center gap-1 px-3 py-1 text-sm border rounded-md hover:bg-gray-50",onClick:Z,children:[l.jsx(Wr,{className:"h-4 w-4"}),l.jsx("span",{children:"Nueva página"})]})]})]}),l.jsx("div",{className:"flex overflow-x-auto gap-3 custom-scroll",children:d==null?void 0:d.map((y,D)=>{let M="Página",O="",T="bg-gray-100";return y.type==="cover"?(M="Portada",O="📖",T="bg-purple-100"):y.type==="content"?(M=`Pág. ${y.pageNumber}`,O="📄",T="bg-blue-100"):y.type==="final"&&(M="Contraportada",O="📚",T="bg-green-100"),l.jsx("div",{className:"flex-shrink-0 w-40 p-4 cursor-pointer hover:bg-gray-50 rounded-lg transition-colors",onClick:()=>m(D),children:l.jsxs("div",{className:`relative ${T} h-48 rounded-md overflow-hidden border-2 transition-all ${h===D?"border-purple-500 shadow-lg":"border-transparent"}`,children:[l.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start z-10",children:[l.jsxs("span",{className:"text-xs bg-white/90 px-2 py-1 rounded-full font-medium flex items-center gap-1",children:[O," ",M]}),y.type==="content"&&l.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:"Editable"})]}),R[y.id]?l.jsx("img",{src:R[y.id],alt:`Miniatura página ${D+1}`,className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:`grid ${ue().template} gap-1 w-full h-full p-1`,children:Array.from({length:ue().cells}).map((U,H)=>l.jsx("div",{className:"bg-gray-200 rounded-sm"},H))})})]})},y.id)})})]})})]})]})]})})})}export{Sh as default};

import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BH53Isel.js";import{I as F}from"./ItemPresetsRest-Dmbx2fkO.js";import{m as a}from"./proxy-BTYtmp9V.js";import{C as P}from"./chevron-left-B2s3ZsB7.js";import{A as u}from"./index-CFtDjG4d.js";import{c as b}from"./createLucideIcon-Cy5Ya80P.js";import{X as k}from"./x-DBMwyD6F.js";import{H as C}from"./heart-ChuvJi-4.js";import"./index-yBjzXJbu.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./ModalImportItem-edN7nyz1.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=b("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=b("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),d={container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},item:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}},hover:{y:-5,scale:1.03,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",transition:{duration:.2}}},modal:{overlay:{hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},content:{hidden:{scale:.9,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",damping:25}},exit:{scale:.9,opacity:0}}},button:{hover:{x:-3},tap:{scale:.95}},title:{hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{duration:.5}}}},f=[{id:1,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]},{id:2,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]},{id:3,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]},{id:4,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]},{id:5,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]},{id:6,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]},{id:8,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]},{id:9,imagen:"/assets/img/backgrounds/resources/default-image.png",titulo:"Poster Fotográfico 75×108 Vertical",descripcion:"Impresión de alta calidad en papel fotográfico brillante. Perfecto para decorar tus espacios.",precio:89.9,descuento:15,colores:["#FF5733","#33FF57","#3357FF"],tags:["Popular","Nuevo"]}],I=({producto:s,onClick:g})=>{const[m,p]=n.useState(!1);return e.jsxs(a.a,{href:`/canva2?item=${s.item_id||s.id}&preset=${s.item_preset_id||s.id}`,className:"block bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition-all cursor-pointer relative",variants:d.item,whileHover:{scale:1.02,boxShadow:"0px 8px 16px rgba(0, 0, 0, 0.2)",transition:{duration:.3}},whileTap:{scale:.98},onClick:()=>g(s.id),onHoverStart:()=>p(!0),onHoverEnd:()=>p(!1),children:[s.tags&&e.jsx("div",{className:"absolute top-2 left-2 z-10 flex gap-1",children:s.tags.map((i,l)=>e.jsx(a.span,{className:"text-xs px-2 py-1 rounded-full bg-primary text-white font-medium",initial:{scale:0},animate:{scale:1},transition:{delay:l*.1},children:i},l))}),e.jsxs("div",{className:"aspect-square bg-gray-100 relative overflow-hidden",children:[e.jsx(a.img,{src:s.imagen,alt:s.titulo,className:"w-full h-full object-cover",initial:{scale:1},animate:{scale:m?1.05:1},transition:{duration:.3},onError:i=>i.target.src="/assets/img/backgrounds/resources/default-image.png"}),e.jsx(u,{children:m&&e.jsx(a.div,{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(a.div,{className:"bg-white customtext-primary rounded-full p-3 shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(H,{size:20})})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-1 line-clamp-1",children:s.titulo}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-2",children:s.descripcion}),s.item_preset_id&&e.jsx("div",{className:"text-xs text-primary font-medium",children:"Diseño personalizable"})]})]})},_=({producto:s,onClose:g})=>{const[m,p]=n.useState(s.colores[0]),[i,l]=n.useState(1);return e.jsx(a.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",variants:d.modal.overlay,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(a.div,{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",variants:d.modal.content,children:[e.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-bold",children:s.titulo}),e.jsx(a.button,{className:"p-2 rounded-full hover:bg-gray-100",onClick:g,whileHover:{rotate:90,scale:1.1},whileTap:{scale:.9},children:e.jsx(k,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-100 rounded-lg overflow-hidden aspect-square",children:e.jsx("img",{src:s.imagen,alt:s.titulo,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(o=>e.jsx(a.div,{className:"bg-gray-100 rounded-md aspect-square cursor-pointer",whileHover:{scale:1.05},children:e.jsx("img",{src:s.imagen,alt:`Vista ${o}`,className:"w-full h-full object-cover"})},o))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 mb-6",children:s.descripcion}),e.jsxs("div",{className:"mb-6",children:[s.descuento>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["S/ ",s.precio.toFixed(2)]}),e.jsxs("span",{className:"bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded",children:["-",s.descuento,"%"]})]}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["S/ ",(s.precio*(1-s.descuento/100)).toFixed(2)]})]}),s.colores&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Color:"}),e.jsx("div",{className:"flex gap-2",children:s.colores.map(o=>e.jsx(a.button,{className:`w-8 h-8 rounded-full border-2 ${m===o?"border-primary":"border-transparent"}`,style:{backgroundColor:o},onClick:()=>p(o),whileHover:{scale:1.1},whileTap:{scale:.9}},o))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Cantidad:"}),e.jsxs("div",{className:"flex items-center border rounded-lg w-max overflow-hidden",children:[e.jsx(a.button,{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200",onClick:()=>l(Math.max(1,i-1)),whileTap:{scale:.9},children:e.jsx(Minus,{size:16})}),e.jsx("span",{className:"px-4 py-2 w-12 text-center",children:i}),e.jsx(a.button,{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200",onClick:()=>l(i+1),whileTap:{scale:.9},children:e.jsx(Plus,{size:16})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(a.button,{className:"w-full bg-primary text-white py-3 rounded-lg font-medium flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Agregar al carrito"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(a.button,{className:"flex-1 border border-primary text-primary py-3 rounded-lg font-medium flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(C,{size:18})," Guardar"]}),e.jsxs(a.button,{className:"flex-1 border border-primary text-primary py-3 rounded-lg font-medium flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(S,{size:18})," Compartir"]})]})]})]})]})]})})};function Q({data:s,filteredData:g}){const[m,p]=n.useState(null),[i,l]=n.useState([]),[o,x]=n.useState(!0),[h,y]=n.useState(null),v=new F;n.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("item");r?j(r):(l(f),x(!1))},[]);const j=async t=>{try{x(!0),console.log("Cargando presets para item:",t);const r=await v.getByItem(t);if(r&&r.data){console.log("Presets cargados:",r.data);const w=r.data.map(c=>({id:c.id,imagen:c.preview_image?`/storage/images/item_presets/${c.preview_image}`:"/assets/img/backgrounds/resources/default-image.png",titulo:c.name||`Preset ${c.id}`,descripcion:c.description||"Diseño predefinido personalizable",precio:0,descuento:0,colores:["#FF5733","#33FF57","#3357FF"],tags:c.is_active?["Disponible"]:["No disponible"],item_preset_id:c.id,design_layers:c.design_layers}));l(w),y({id:t})}else console.warn("No se encontraron presets para el item:",t),l([])}catch(r){console.error("Error al cargar presets:",r),l(f)}finally{x(!1)}},N=t=>{p(i.find(r=>r.id===t))};return e.jsxs(a.div,{className:"container mx-auto px-4 py-8 max-w-7xl font-paragraph",initial:"hidden",animate:"visible",variants:d.container,children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs(a.button,{className:"flex items-center customtext-primary",variants:d.button,whileHover:"hover",whileTap:"tap",onClick:()=>window.history.back(),children:[e.jsx(P,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-1",children:"Regresar"})]})}),e.jsx(a.h1,{className:"text-3xl md:text-4xl font-bold mb-8 text-start",variants:d.title,children:"Elige el diseño predefinido"}),o&&e.jsxs("div",{className:"flex justify-center items-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("span",{className:"ml-4 text-lg",children:"Cargando diseños..."})]}),!o&&e.jsx(e.Fragment,{children:i.length>0?e.jsx(a.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",variants:d.container,children:e.jsx(u,{children:i.map(t=>e.jsx(a.div,{variants:d.item,layoutId:`product-${t.id}`,children:e.jsx(I,{producto:t,onClick:N})},t.id))})}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-gray-500 text-lg mb-4",children:h?"No hay diseños predefinidos disponibles para este producto.":"No se encontraron diseños predefinidos."}),e.jsx(a.button,{className:"bg-primary text-white px-6 py-3 rounded-xl hover:opacity-90 transition-all",onClick:()=>window.history.back(),whileHover:{scale:1.02},whileTap:{scale:.98},children:"Regresar al producto"})]})}),e.jsx(u,{children:m&&e.jsx(_,{producto:m,onClose:()=>p(null)})})]})}export{Q as default};

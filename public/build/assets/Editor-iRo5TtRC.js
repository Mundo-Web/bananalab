import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{r as w,R as ie}from"./index-BH53Isel.js";import{a as ra,b as Oo,_ as ar,e as L}from"./objectWithoutPropertiesLoose-G_JZ8CQC.js";import{h as na}from"./hoist-non-react-statics.cjs-lJxeXavk.js";import{r as To,R as Ro}from"./index-rimy3MAc.js";import{c as J}from"./createLucideIcon-Cy5Ya80P.js";import{I as Wr,S as jo,P as Mo}from"./sparkles-BeGvo0qS.js";import{B as Ao,h as ko}from"./Editor-DXckd8bb.js";import{e as Bo}from"./index-BSWw-p5k.js";import{T as ft}from"./trash-2-DK1wnsDn.js";import{U as Lo}from"./upload-qgEr5bIl.js";import{X as Fo}from"./x-DBMwyD6F.js";import{M as aa}from"./minus-jyhodMPN.js";import{P as Ur}from"./plus-Bot15Khs.js";import{C as $o}from"./chevron-down-DS-mdh9v.js";import{C as Ho}from"./chevron-left-B2s3ZsB7.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./index.es-p8wkj5I3.js";import"./index-Bv81MoWS.js";import"./index-Chjiymov.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=J("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=J("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=J("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=J("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=J("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=J("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=J("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=J("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=J("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=J("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=J("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=J("FlipVertical",[["path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3",key:"14bfxa"}],["path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3",key:"14rx03"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=J("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=J("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=J("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=J("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=J("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=J("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=J("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=J("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=J("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=J("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=J("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=J("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=J("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=J("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=J("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=J("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=J("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=J("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=J("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=J("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=J("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=J("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=J("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=J("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=J("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function Ye({children:e,onClick:t,className:r="",variant:n="default",size:a="default",disabled:i=!1,icon:o=null}){const s="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},p={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return l.jsxs("button",{className:`${s} ${c[n]} ${p[a]} ${r} gap-2`,onClick:t,disabled:i,children:[o&&l.jsx("span",{className:"w-4 h-4",children:o}),e]})}const Ke=({value:e=[50],min:t=0,max:r=100,step:n=1,onValueChange:a,label:i,unit:o="%"})=>{const[s,c]=w.useState(e[0]),p=f=>{const d=Number.parseInt(f.target.value);c(d),a&&a([d])};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i}),l.jsxs("span",{className:"text-sm text-gray-500",children:[s,o]})]}),l.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:l.jsx("input",{type:"range",min:t,max:r,step:n,value:s,onChange:p,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},Ds=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:105,contrast:115,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],ri=w.createContext({dragDropManager:void 0});function Ae(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ia=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),oa=function(){return Math.random().toString(36).substring(7).split("").join(".")},sa={INIT:"@@redux/INIT"+oa(),REPLACE:"@@redux/REPLACE"+oa()};function Ss(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function nn(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ae(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ae(1));return r(nn)(e,t)}if(typeof e!="function")throw new Error(Ae(2));var a=e,i=t,o=[],s=o,c=!1;function p(){s===o&&(s=o.slice())}function f(){if(c)throw new Error(Ae(3));return i}function d(b){if(typeof b!="function")throw new Error(Ae(4));if(c)throw new Error(Ae(5));var m=!0;return p(),s.push(b),function(){if(m){if(c)throw new Error(Ae(6));m=!1,p();var D=s.indexOf(b);s.splice(D,1),o=null}}}function u(b){if(!Ss(b))throw new Error(Ae(7));if(typeof b.type>"u")throw new Error(Ae(8));if(c)throw new Error(Ae(9));try{c=!0,i=a(i,b)}finally{c=!1}for(var m=o=s,x=0;x<m.length;x++){var D=m[x];D()}return b}function g(b){if(typeof b!="function")throw new Error(Ae(10));a=b,u({type:sa.REPLACE})}function v(){var b,m=d;return b={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(Ae(11));function S(){D.next&&D.next(f())}S();var I=m(S);return{unsubscribe:I}}},b[ia]=function(){return this},b}return u({type:sa.INIT}),n={dispatch:u,subscribe:d,getState:f,replaceReducer:g},n[ia]=v,n}function la(e,t){return function(){return t(e.apply(this,arguments))}}function ca(e,t){if(typeof e=="function")return la(e,t);if(typeof e!="object"||e===null)throw new Error(Ae(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=la(a,t))}return r}function ni(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function Cs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Ae(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(c){return c(o)});return i=ni.apply(void 0,s)(a.dispatch),ra(ra({},a),{},{dispatch:i})}}}function q(e,t,...r){if(Is()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Is(){return typeof process<"u"&&!0}function Es(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function Ns(e,t){return e.filter(r=>r!==t)}function ai(e){return typeof e=="object"}function Ps(e,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function Os(e,t){return e.filter(r=>t.indexOf(r)>-1)}const an="dnd-core/INIT_COORDS",gr="dnd-core/BEGIN_DRAG",on="dnd-core/PUBLISH_DRAG_SOURCE",vr="dnd-core/HOVER",hr="dnd-core/DROP",mr="dnd-core/END_DRAG";function ua(e,t){return{type:an,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const Ts={type:an,payload:{clientOffset:null,sourceClientOffset:null}};function Rs(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,s=e.getMonitor(),c=e.getRegistry();e.dispatch(ua(i)),js(r,s,c);const p=ks(r,s);if(p==null){e.dispatch(Ts);return}let f=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");Ms(o),f=o(p)}e.dispatch(ua(i,f));const u=c.getSource(p).beginDrag(s,p);if(u==null)return;As(u),c.pinSource(p);const g=c.getSourceType(p);return{type:gr,payload:{itemType:g,item:u,sourceId:p,clientOffset:i||null,sourceClientOffset:f||null,isSourcePublic:!!a}}}}function js(e,t,r){q(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){q(r.getSource(n),"Expected sourceIds to be registered.")})}function Ms(e){q(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function As(e){q(ai(e),"Item must be an object.")}function ks(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function Bs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Bs(e,a,r[a])})}return e}function Fs(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();$s(n),zs(n).forEach((o,s)=>{const c=Hs(o,s,a,n),p={type:hr,payload:{dropResult:Ls({},r,c)}};e.dispatch(p)})}}function $s(e){q(e.isDragging(),"Cannot call drop while not dragging."),q(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function Hs(e,t,r,n){const a=r.getTarget(e);let i=a?a.drop(n,e):void 0;return Gs(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function Gs(e){q(typeof e>"u"||ai(e),"Drop result must either be an object or undefined.")}function zs(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Ws(e){return function(){const r=e.getMonitor(),n=e.getRegistry();Us(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:mr}}}function Us(e){q(e.isDragging(),"Cannot call endDrag while not dragging.")}function Vr(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function Vs(e){return function(r,{clientOffset:n}={}){qs(r);const a=r.slice(0),i=e.getMonitor(),o=e.getRegistry(),s=i.getItemType();return Xs(a,o,s),Ys(a,i,o),Js(a,i,o),{type:vr,payload:{targetIds:a,clientOffset:n||null}}}}function qs(e){q(Array.isArray(e),"Expected targetIds to be an array.")}function Ys(e,t,r){q(t.isDragging(),"Cannot call hover while not dragging."),q(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];q(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);q(i,"Expected targetIds to be registered.")}}function Xs(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],i=t.getTargetType(a);Vr(i,r)||e.splice(n,1)}}function Js(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function Ks(e){return function(){if(e.getMonitor().isDragging())return{type:on}}}function _s(e){return{beginDrag:Rs(e),publishDragSource:Ks(e),hover:Vs(e),drop:Fs(e),endDrag:Ws(e)}}class Qs{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const s=i.apply(t,o);typeof s<"u"&&r(s)}}const a=_s(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function Zs(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ii(e,t){return{x:e.x-t.x,y:e.y-t.y}}function el(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:ii(Zs(t,n),r)}function tl(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:ii(t,r)}const Lt=[],sn=[];Lt.__IS_NONE__=!0;sn.__IS_ALL__=!0;function rl(e,t){return e===Lt?!1:e===sn||typeof t>"u"?!0:Os(t,e).length>0}class nl{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;q(typeof t=="function","listener must be a function."),q(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!rl(o.dirtyHandlerIds,n)||t()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){q(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return q(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(q(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return Vr(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(q(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!Vr(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(t);return n?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return el(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return tl(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const da=typeof global<"u"?global:self,oi=da.MutationObserver||da.WebKitMutationObserver;function si(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function al(e){let t=1;const r=new oi(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const il=typeof oi=="function"?al:si;class ol{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=il(this.flush),this.requestErrorThrow=si(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class sl{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class ll{create(t){const r=this.freeTasks,n=r.length?r.pop():new sl(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const li=new ol,cl=new ll(li.registerPendingError);function ul(e){li.enqueueTask(cl.create(e))}const ln="dnd-core/ADD_SOURCE",cn="dnd-core/ADD_TARGET",un="dnd-core/REMOVE_SOURCE",br="dnd-core/REMOVE_TARGET";function dl(e){return{type:ln,payload:{sourceId:e}}}function pl(e){return{type:cn,payload:{targetId:e}}}function fl(e){return{type:un,payload:{sourceId:e}}}function gl(e){return{type:br,payload:{targetId:e}}}function vl(e){q(typeof e.canDrag=="function","Expected canDrag to be a function."),q(typeof e.beginDrag=="function","Expected beginDrag to be a function."),q(typeof e.endDrag=="function","Expected endDrag to be a function.")}function hl(e){q(typeof e.canDrop=="function","Expected canDrop to be a function."),q(typeof e.hover=="function","Expected hover to be a function."),q(typeof e.drop=="function","Expected beginDrag to be a function.")}function qr(e,t){if(t&&Array.isArray(e)){e.forEach(r=>qr(r,!1));return}q(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var ze;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(ze||(ze={}));let ml=0;function bl(){return ml++}function xl(e){const t=bl().toString();switch(e){case ze.SOURCE:return`S${t}`;case ze.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function pa(e){switch(e[0]){case"S":return ze.SOURCE;case"T":return ze.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function fa(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class yl{addSource(t,r){qr(t),vl(r);const n=this.addHandler(ze.SOURCE,t,r);return this.store.dispatch(dl(n)),n}addTarget(t,r){qr(t,!0),hl(r);const n=this.addHandler(ze.TARGET,t,r);return this.store.dispatch(pl(n)),n}containsHandler(t){return fa(this.dragSources,t)||fa(this.dropTargets,t)}getSource(t,r=!1){return q(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return q(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return q(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return q(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return pa(t)===ze.SOURCE}isTargetId(t){return pa(t)===ze.TARGET}removeSource(t){q(this.getSource(t),"Expected an existing source."),this.store.dispatch(fl(t)),ul(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){q(this.getTarget(t),"Expected an existing target."),this.store.dispatch(gl(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);q(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){q(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=xl(t);return this.types.set(a,r),t===ze.SOURCE?this.dragSources.set(a,n):t===ze.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const wl=(e,t)=>e===t;function Dl(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Sl(e,t,r=wl){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function Cl(e=Lt,t){switch(t.type){case vr:break;case ln:case cn:case br:case un:return Lt;case gr:case on:case mr:case hr:default:return sn}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=Ps(r,n);if(!(a.length>0||!Sl(r,n)))return Lt;const o=n[n.length-1],s=r[r.length-1];return o!==s&&(o&&a.push(o),s&&a.push(s)),a}function Il(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Il(e,a,r[a])})}return e}const ga={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Nl(e=ga,t){const{payload:r}=t;switch(t.type){case an:case gr:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case vr:return Dl(e.clientOffset,r.clientOffset)?e:El({},e,{clientOffset:r.clientOffset});case mr:case hr:return ga;default:return e}}function Pl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Pl(e,a,r[a])})}return e}const Ol={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Tl(e=Ol,t){const{payload:r}=t;switch(t.type){case gr:return ut({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case on:return ut({},e,{isSourcePublic:!0});case vr:return ut({},e,{targetIds:r.targetIds});case br:return e.targetIds.indexOf(r.targetId)===-1?e:ut({},e,{targetIds:Ns(e.targetIds,r.targetId)});case hr:return ut({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case mr:return ut({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function Rl(e=0,t){switch(t.type){case ln:case cn:return e+1;case un:case br:return e-1;default:return e}}function jl(e=0){return e+1}function Ml(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Ml(e,a,r[a])})}return e}function kl(e={},t){return{dirtyHandlerIds:Cl(e.dirtyHandlerIds,{type:t.type,payload:Al({},t.payload,{prevTargetIds:Es(e,"dragOperation.targetIds",[])})}),dragOffset:Nl(e.dragOffset,t),refCount:Rl(e.refCount,t),dragOperation:Tl(e.dragOperation,t),stateId:jl(e.stateId)}}function Bl(e,t=void 0,r={},n=!1){const a=Ll(n),i=new nl(a,new yl(a)),o=new Qs(a,i),s=e(o,t,r);return o.receiveBackend(s),o}function Ll(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return nn(kl,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function Fl(e,t){if(e==null)return{};var r=$l(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $l(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let va=0;const rr=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Hl=w.memo(function(t){var{children:r}=t,n=Fl(t,["children"]);const[a,i]=Gl(n);return w.useEffect(()=>{if(i){const o=ci();return++va,()=>{--va===0&&(o[rr]=null)}}},[]),l.jsx(ri.Provider,{value:a,children:r})});function Gl(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=zl(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function zl(e,t=ci(),r,n){const a=t;return a[rr]||(a[rr]={dragDropManager:Bl(e,t,r,n)}),a[rr]}function ci(){return typeof global<"u"?global:window}const ot=typeof window<"u"?w.useLayoutEffect:w.useEffect;function Wl(e,t,r){const[n,a]=w.useState(()=>t(e)),i=w.useCallback(()=>{const o=t(e);Bo(n,o)||(a(o),r&&r())},[n,e,r]);return ot(i),[n,i]}function Ul(e,t,r){const[n,a]=Wl(e,t,r);return ot(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function ui(e,t,r){return Ul(t,e||(()=>({})),()=>r.reconnect())}function di(e,t){const r=[];return typeof e!="function"&&r.push(e),w.useMemo(()=>typeof e=="function"?e():e,r)}function Vl(e){return w.useMemo(()=>e.hooks.dragSource(),[e])}function ql(e){return w.useMemo(()=>e.hooks.dragPreview(),[e])}let Er=!1,Nr=!1;class Yl{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){q(!Er,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Er=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Er=!1}}isDragging(){if(!this.sourceId)return!1;q(!Nr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Nr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Nr=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let Pr=!1;class Xl{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;q(!Pr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Pr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Pr=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function Jl(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function Kl(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function Yr(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const p=i[c];if(!s(p))return!1;const f=e[p],d=t[p];if(a=void 0,a===!1||a===void 0&&f!==d)return!1}return!0}function Xr(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function _l(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function Ql(e){return(t=null,r=null)=>{if(!w.isValidElement(t)){const i=t;return e(i,r),i}const n=t;return _l(n),Zl(n,r?i=>e(i,r):e)}}function pi(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=Ql(n);t[r]=()=>a}}),t}function ha(e,t){typeof e=="function"?e(t):e.current=t}function Zl(e,t){const r=e.ref;return q(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?w.cloneElement(e,{ref:n=>{ha(r,n),ha(t,n)}}):w.cloneElement(e,{ref:t})}class ec{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Yr(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Yr(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=pi({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Xr(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Xr(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class tc{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Yr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=pi({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Xr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function mt(){const{dragDropManager:e}=w.useContext(ri);return q(e!=null,"Expected drag drop context"),e}function rc(e,t){const r=mt(),n=w.useMemo(()=>new ec(r.getBackend()),[r]);return ot(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),ot(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function nc(){const e=mt();return w.useMemo(()=>new Yl(e),[e])}class ac{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function ic(e,t,r){const n=w.useMemo(()=>new ac(e,t,r),[t,r]);return w.useEffect(()=>{n.spec=e},[e]),n}function oc(e){return w.useMemo(()=>{const t=e.type;return q(t!=null,"spec.type must be defined"),t},[e])}function sc(e,t,r){const n=mt(),a=ic(e,t,r),i=oc(e);ot(function(){if(i!=null){const[s,c]=Kl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c}},[n,t,r,a,i])}function fi(e,t){const r=di(e);q(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=nc(),a=rc(r.options,r.previewOptions);return sc(r,n,a),[ui(r.collect,n,a),Vl(a),ql(a)]}function lc(e){return w.useMemo(()=>e.hooks.dropTarget(),[e])}function cc(e){const t=mt(),r=w.useMemo(()=>new tc(t.getBackend()),[t]);return ot(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function uc(){const e=mt();return w.useMemo(()=>new Xl(e),[e])}function dc(e){const{accept:t}=e;return w.useMemo(()=>(q(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class pc{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function fc(e,t){const r=w.useMemo(()=>new pc(e,t),[t]);return w.useEffect(()=>{r.spec=e},[e]),r}function gc(e,t,r){const n=mt(),a=fc(e,t),i=dc(e);ot(function(){const[s,c]=Jl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c},[n,t,a,r,i.map(o=>o.toString()).join("|")])}function vc(e,t){const r=di(e),n=uc(),a=cc(r.options);return gc(r,n,a),[ui(r.collect,n,a),lc(a)]}const ir=[{id:"none",name:"Sin máscara",class:"",category:"Básicas"},{id:"circle",name:"Círculo",class:"mask-circle",category:"Básicas"},{id:"rounded",name:"Redondeado",class:"mask-rounded",category:"Básicas"},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas"},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas"},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas"},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas"},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos"},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos"},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos"},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos"},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas"},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas"},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas"},{id:"rounded-sm",name:"Redondeado pequeño",class:"mask-rounded-sm",category:"Básicas"},{id:"rounded-lg",name:"Redondeado grande",class:"mask-rounded-lg",category:"Básicas"},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas"},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas"},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas"}];function hc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,availableMasks:i=[]}){var Te,Ne,X,xe,ve,le,A,Q,he,de,ye,re,we,Pe,Fe,$e;const[{isDragging:o},s]=fi(()=>({type:"IMAGE_ELEMENT",item:{id:e.id},collect:j=>({isDragging:!!j.isDragging()})})),c=w.useRef(null),[p,f]=w.useState(!1),[d,u]=w.useState({x:0,y:0}),[g,v]=w.useState(!1),[b,m]=w.useState({x:0,y:0}),x={filter:`
      brightness(${(((Te=e.filters)==null?void 0:Te.brightness)||100)/100})
      contrast(${(((Ne=e.filters)==null?void 0:Ne.contrast)||100)/100})
      saturate(${(((X=e.filters)==null?void 0:X.saturation)||100)/100})
      sepia(${(((xe=e.filters)==null?void 0:xe.tint)||0)/100})
      hue-rotate(${(((ve=e.filters)==null?void 0:ve.hue)||0)*3.6}deg)
      blur(${((le=e.filters)==null?void 0:le.blur)||0}px)
    `,transform:`scale(${((A=e.filters)==null?void 0:A.scale)||1}) rotate(${((Q=e.filters)==null?void 0:Q.rotate)||0}deg) ${(he=e.filters)!=null&&he.flipHorizontal?"scaleX(-1)":""} ${(de=e.filters)!=null&&de.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((ye=e.filters)==null?void 0:ye.blendMode)||"normal",opacity:(((re=e.filters)==null?void 0:re.opacity)||100)/100},D=ir.find(j=>j.id===e.mask)||ir[0],S=j=>{t&&(j.stopPropagation(),f(!0),u({x:j.clientX-e.position.x,y:j.clientY-e.position.y}))},I=j=>{if(p&&c.current){const ne=j.clientX-d.x,pe=j.clientY-d.y;n({position:{x:ne,y:pe}})}},k=()=>{f(!1)};w.useEffect(()=>{p&&(window.addEventListener("mousemove",I),window.addEventListener("mouseup",k));const j=ne=>{g&&!ne.target.closest(".context-menu")&&v(!1)};return document.addEventListener("click",j),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",k),document.removeEventListener("click",j)}},[p,d,g]);const M=w.useCallback(j=>{c.current=j,s(j)},[s]),$=j=>{j.preventDefault(),j.stopPropagation(),m({x:j.clientX,y:j.clientY}),v(!0)},Y=()=>{const j=document.createElement("input");j.type="file",j.accept="image/*",j.onchange=ne=>{if(ne.target.files&&ne.target.files[0]){const pe=new FileReader;pe.onload=me=>{var Ce;(Ce=me.target)!=null&&Ce.result&&n({content:me.target.result})},pe.readAsDataURL(ne.target.files[0])}},j.click(),v(!1)},F=()=>{const j={...JSON.parse(JSON.stringify(e)),id:`img-${Date.now()}`,position:{x:e.position.x+20,y:e.position.y+20}};n(j,!0),v(!1)},[H,W]=w.useState(!1),[ee,P]=w.useState(null),[U,oe]=w.useState({width:0,height:0}),[R,fe]=w.useState({x:0,y:0}),ue=(j,ne)=>{var pe,me,Ce,Oe;j.stopPropagation(),j.preventDefault(),W(!0),P(ne),fe({x:j.clientX,y:j.clientY}),oe({width:((pe=e.size)==null?void 0:pe.width)||((me=c.current)==null?void 0:me.offsetWidth)||200,height:((Ce=e.size)==null?void 0:Ce.height)||((Oe=c.current)==null?void 0:Oe.offsetHeight)||200})},K=w.useCallback(j=>{if(!H||!c.current)return;const ne=j.clientX-R.x,pe=j.clientY-R.y;c.current.parentElement.getBoundingClientRect();let me=U.width,Ce=U.height;switch(ee){case"right":me=Math.max(50,U.width+ne);break;case"bottom":Ce=Math.max(50,U.height+pe);break;case"bottomRight":me=Math.max(50,U.width+ne),Ce=Math.max(50,U.height+pe);break}n({size:{width:me,height:ee==="right"?U.height:Ce}})},[H,R,U,ee,e.position]),se=w.useCallback(()=>{W(!1),P(null)},[]);w.useEffect(()=>(H&&(window.addEventListener("mousemove",K),window.addEventListener("mouseup",se)),()=>{window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",se)}),[H,K,se]);const ge=(j,ne)=>j<=1?j*ne:j,ae=e.workspaceSize||{width:800,height:600},Ee=ge(e.position.x,ae.width),je=ge(e.position.y,ae.height),be=(we=e.size)!=null&&we.width?ge(e.size.width,ae.width):200,Me=(Pe=e.size)!=null&&Pe.height?ge(e.size.height,ae.height):200;return l.jsxs("div",{ref:M,className:`absolute ${D.class} ${t?"ring-2 ring-purple-500":""} ${o?"opacity-50":"opacity-100"}`,style:{position:"absolute",left:Ee,top:je,width:be,height:Me,cursor:t?"move":"pointer",zIndex:t?1:0,opacity:t?.9:1,transition:"opacity 0.2s, z-index 0.2s",pointerEvents:"all",overflow:"visible"},onClick:j=>{j.stopPropagation(),r()},onMouseDown:j=>{j.stopPropagation(),S(j),t||n({zIndex:Math.max(...elements.map(ne=>ne.zIndex||0))+1})},onContextMenu:$,children:[l.jsxs("div",{className:"w-full h-full overflow-hidden relative",children:[l.jsx("img",{src:e.content,alt:"Imagen cargada",className:"w-full h-full object-cover",style:{...x,mixBlendMode:((Fe=e.filters)==null?void 0:Fe.blendMode)||"normal",opacity:((($e=e.filters)==null?void 0:$e.opacity)||100)/100}}),t&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-purple-500 rounded-full cursor-se-resize",style:{transform:"translate(50%, 50%)"},onMouseDown:j=>{j.stopPropagation(),ue(j,"bottomRight")}}),l.jsx("div",{className:"absolute bottom-0 w-3 h-3 bg-purple-500 rounded-full cursor-s-resize",style:{left:"50%",transform:"translateX(-50%) translateY(50%)"},onMouseDown:j=>{j.stopPropagation(),ue(j,"bottom")}}),l.jsx("div",{className:"absolute right-0 w-3 h-3 bg-purple-500 rounded-full cursor-e-resize",style:{top:"50%",transform:"translateY(-50%) translateX(50%)"},onMouseDown:j=>{j.stopPropagation(),ue(j,"right")}})]})]}),t&&l.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[l.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:j=>{var ne;j.stopPropagation(),n({filters:{...e.filters,rotate:(((ne=e.filters)==null?void 0:ne.rotate)||0)+90}})},children:l.jsx(ti,{className:"h-4 w-4 text-gray-700"})}),l.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:j=>{j.stopPropagation(),a()},children:l.jsx(ft,{className:"h-4 w-4 text-gray-700"})})]}),g&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48 context-menu",style:{left:`${b.x}px`,top:`${b.y}px`},onClick:j=>j.stopPropagation(),children:[l.jsx("button",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 text-gray-500",onClick:()=>v(!1),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:Y,children:[l.jsx(gs,{className:"h-4 w-4"}),"Reemplazar imagen"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:F,children:[l.jsx(rn,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var j;n({filters:{...e.filters,opacity:Math.max(0,(((j=e.filters)==null?void 0:j.opacity)||100)-10)}}),v(!1)},children:[l.jsx(ei,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),v(!1)},children:[l.jsx(ft,{className:"h-4 w-4"}),"Eliminar"]})]})]})]})}function mc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,workspaceSize:i={width:800,height:600}}){var R,fe,ue,K,se,ge,ae,Ee,je,be,Me,Te,Ne,X,xe,ve,le;const[o,s]=w.useState(!1),c=w.useRef(null),p=w.useRef(null),[{isDragging:f},d]=fi(()=>({type:"TEXT_ELEMENT",item:{id:e.id},collect:A=>({isDragging:!!A.isDragging()})})),[u,g]=w.useState(!1),[v,b]=w.useState({x:0,y:0}),[m,x]=w.useState(!1),[D,S]=w.useState({x:0,y:0}),I=()=>{s(!1)},k=A=>{n({content:A.target.value})},M=A=>{A.key==="Enter"&&s(!1)},$=A=>{if(t&&!o){A.stopPropagation(),g(!0);const Q=A.currentTarget.parentElement.getBoundingClientRect(),he=e.position.x<=1?e.position.x*Q.width:e.position.x,de=e.position.y<=1?e.position.y*Q.height:e.position.y;b({x:A.clientX-he,y:A.clientY-de})}},Y=A=>{if(u&&p.current){const Q=p.current.parentElement.getBoundingClientRect(),he=A.clientX-v.x,de=A.clientY-v.y,ye=Q.width-p.current.offsetWidth,re=Q.height-p.current.offsetHeight,we=Math.max(0,Math.min(he,ye)),Pe=Math.max(0,Math.min(de,re)),Fe=we/Q.width,$e=Pe/Q.height;n({position:{x:Fe,y:$e}})}},F=()=>{g(!1)},H=A=>{A.preventDefault(),A.stopPropagation(),S({x:A.clientX,y:A.clientY}),x(!0)},W=()=>{const A={...JSON.parse(JSON.stringify(e)),id:`text-${Date.now()}`,position:{x:e.position.x<=1?Math.min(e.position.x+.02,.9):e.position.x+10,y:e.position.y<=1?Math.min(e.position.y+.02,.9):e.position.y+10}};n(A,!0),x(!1)};w.useEffect(()=>(u&&(window.addEventListener("mousemove",Y),window.addEventListener("mouseup",F)),()=>{window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",F)}),[u,v]);const ee=w.useCallback(A=>{p.current=A,d(A)},[d]),P=(R=e.style)!=null&&R.textShadow?`${e.style.textShadowX||0}px ${e.style.textShadowY||0}px ${e.style.textShadowBlur||0}px ${e.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",oe=(()=>{var Q,he,de,ye,re,we,Pe,Fe,$e,j,ne,pe;const A={...e.style,position:"absolute",cursor:t&&!o?"move":"pointer",textShadow:P,zIndex:10,fontFamily:((Q=e.style)==null?void 0:Q.fontFamily)||"Arial",color:((he=e.style)==null?void 0:he.color)||"#000000",fontWeight:((de=e.style)==null?void 0:de.fontWeight)||"normal",fontStyle:((ye=e.style)==null?void 0:ye.fontStyle)||"normal",textDecoration:((re=e.style)==null?void 0:re.textDecoration)||"none",textAlign:((we=e.style)==null?void 0:we.textAlign)||"left",backgroundColor:((Pe=e.style)==null?void 0:Pe.backgroundColor)||"transparent",padding:((Fe=e.style)==null?void 0:Fe.padding)||"8px",borderRadius:(($e=e.style)==null?void 0:$e.borderRadius)||"0px",border:((j=e.style)==null?void 0:j.border)||"none",opacity:((ne=e.style)==null?void 0:ne.opacity)!==void 0?e.style.opacity:1};if(e.position.x<=1&&e.position.y<=1?(A.left=`${e.position.x*100}%`,A.top=`${e.position.y*100}%`):(A.left=`${e.position.x}px`,A.top=`${e.position.y}px`),(pe=e.style)!=null&&pe.fontSize){const me=parseFloat(e.style.fontSize);if(me&&i.width){const Ce=me/800*i.width;A.fontSize=`${Math.max(12,Ce)}px`}else A.fontSize=e.style.fontSize}else{const me=.02*i.width;A.fontSize=`${Math.max(12,me)}px`}return A})();return w.useEffect(()=>{var Q,he;const A=(he=(Q=e.style)==null?void 0:Q.fontFamily)==null?void 0:he.replace(/'/g,"");if(A&&!document.fonts.check(`12px ${A}`)){const de=new FontFace(A,`local(${A})`);de.load().then(()=>document.fonts.add(de))}},[(fe=e.style)==null?void 0:fe.fontFamily]),l.jsxs("div",{ref:ee,className:`${t?"ring-2 ring-purple-500":""} ${f?"opacity-50":"opacity-100"}`,style:oe,onClick:A=>{A.stopPropagation(),r(),!o&&t&&(s(!0),setTimeout(()=>{c.current&&(c.current.focus(),c.current.select())},0))},onMouseDown:$,onContextMenu:H,children:[o?l.jsx("input",{ref:c,type:"text",value:e.content,onChange:k,onBlur:I,onKeyDown:M,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(ue=e.style)==null?void 0:ue.fontFamily,fontSize:(K=e.style)==null?void 0:K.fontSize,fontWeight:(se=e.style)==null?void 0:se.fontWeight,fontStyle:(ge=e.style)==null?void 0:ge.fontStyle,textDecoration:(ae=e.style)==null?void 0:ae.textDecoration,color:(Ee=e.style)==null?void 0:Ee.color,textAlign:(je=e.style)==null?void 0:je.textAlign,minWidth:"100px"},autoFocus:!0}):l.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((be=e.style)==null?void 0:be.backgroundColor)||"transparent",padding:((Me=e.style)==null?void 0:Me.padding)||"8px",borderRadius:((Te=e.style)==null?void 0:Te.borderRadius)||"0px",border:((Ne=e.style)==null?void 0:Ne.border)||"none",fontFamily:((X=e.style)==null?void 0:X.fontFamily)||"Arial"},children:e.content||"Editar texto"}),t&&l.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:A=>{var Q;A.stopPropagation(),n({style:{...e.style,fontWeight:((Q=e.style)==null?void 0:Q.fontWeight)==="bold"?"normal":"bold"}})},children:l.jsx("span",{className:`text-xs ${((xe=e.style)==null?void 0:xe.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:A=>{var Q;A.stopPropagation(),n({style:{...e.style,fontStyle:((Q=e.style)==null?void 0:Q.fontStyle)==="italic"?"normal":"italic"}})},children:l.jsx("span",{className:`text-xs ${((ve=e.style)==null?void 0:ve.fontStyle)==="italic"?"italic":""}`,children:"I"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:A=>{var Q;A.stopPropagation(),n({style:{...e.style,textDecoration:((Q=e.style)==null?void 0:Q.textDecoration)==="underline"?"none":"underline"}})},children:l.jsx("span",{className:`text-xs ${((le=e.style)==null?void 0:le.textDecoration)==="underline"?"underline":""}`,children:"U"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:A=>{A.stopPropagation(),a()},children:l.jsx(ft,{className:"h-3 w-3 text-gray-700"})})]}),m&&l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${D.x}px`,top:`${D.y}px`},onClick:A=>A.stopPropagation(),children:[l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{s(!0),x(!1)},children:[l.jsx(pt,{className:"h-4 w-4"}),"Editar texto"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:W,children:[l.jsx(rn,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var A;n({style:{...e.style,opacity:Math.max(0,(((A=e.style)==null?void 0:A.opacity)||1)-.1)}}),x(!1)},children:[l.jsx(ei,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),x(!1)},children:[l.jsx(ft,{className:"h-4 w-4"}),"Eliminar"]})]})]})}function gi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Oo(e,t)}var vi=ie.createContext(null);function bc(e){e()}var hi=bc,xc=function(t){return hi=t},yc=function(){return hi};function wc(){var e=yc(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var ma={notify:function(){},get:function(){return[]}};function mi(e,t){var r,n=ma;function a(d){return c(),n.subscribe(d)}function i(){n.notify()}function o(){f.onStateChange&&f.onStateChange()}function s(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=wc())}function p(){r&&(r(),r=void 0,n.clear(),n=ma)}var f={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:s,trySubscribe:c,tryUnsubscribe:p,getListeners:function(){return n}};return f}var bi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function Dc(e){var t=e.store,r=e.context,n=e.children,a=w.useMemo(function(){var s=mi(t);return{store:t,subscription:s}},[t]),i=w.useMemo(function(){return t.getState()},[t]);bi(function(){var s=a.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),i!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[a,i]);var o=r||vi;return ie.createElement(o.Provider,{value:a},n)}var Or={exports:{}},te={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba;function Sc(){if(ba)return te;ba=1;var e=60103,t=60106,r=60107,n=60108,a=60114,i=60109,o=60110,s=60112,c=60113,p=60120,f=60115,d=60116,u=60121,g=60122,v=60117,b=60129,m=60131;if(typeof Symbol=="function"&&Symbol.for){var x=Symbol.for;e=x("react.element"),t=x("react.portal"),r=x("react.fragment"),n=x("react.strict_mode"),a=x("react.profiler"),i=x("react.provider"),o=x("react.context"),s=x("react.forward_ref"),c=x("react.suspense"),p=x("react.suspense_list"),f=x("react.memo"),d=x("react.lazy"),u=x("react.block"),g=x("react.server.block"),v=x("react.fundamental"),b=x("react.debug_trace_mode"),m=x("react.legacy_hidden")}function D(P){if(typeof P=="object"&&P!==null){var U=P.$$typeof;switch(U){case e:switch(P=P.type,P){case r:case a:case n:case c:case p:return P;default:switch(P=P&&P.$$typeof,P){case o:case s:case d:case f:case i:return P;default:return U}}case t:return U}}}var S=i,I=e,k=s,M=r,$=d,Y=f,F=t,H=a,W=n,ee=c;return te.ContextConsumer=o,te.ContextProvider=S,te.Element=I,te.ForwardRef=k,te.Fragment=M,te.Lazy=$,te.Memo=Y,te.Portal=F,te.Profiler=H,te.StrictMode=W,te.Suspense=ee,te.isAsyncMode=function(){return!1},te.isConcurrentMode=function(){return!1},te.isContextConsumer=function(P){return D(P)===o},te.isContextProvider=function(P){return D(P)===i},te.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},te.isForwardRef=function(P){return D(P)===s},te.isFragment=function(P){return D(P)===r},te.isLazy=function(P){return D(P)===d},te.isMemo=function(P){return D(P)===f},te.isPortal=function(P){return D(P)===t},te.isProfiler=function(P){return D(P)===a},te.isStrictMode=function(P){return D(P)===n},te.isSuspense=function(P){return D(P)===c},te.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===a||P===b||P===n||P===c||P===p||P===m||typeof P=="object"&&P!==null&&(P.$$typeof===d||P.$$typeof===f||P.$$typeof===i||P.$$typeof===o||P.$$typeof===s||P.$$typeof===v||P.$$typeof===u||P[0]===g)},te.typeOf=D,te}var xa;function Cc(){return xa||(xa=1,Or.exports=Sc()),Or.exports}var Ic=Cc(),Ec=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Nc=["reactReduxForwardedRef"],Pc=[],Oc=[null,null];function Tc(e,t){var r=e[1];return[t.payload,r+1]}function ya(e,t,r){bi(function(){return e.apply(void 0,t)},r)}function Rc(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function jc(e,t,r,n,a,i,o,s,c,p){if(e){var f=!1,d=null,u=function(){if(!f){var b=t.getState(),m,x;try{m=n(b,a.current)}catch(D){x=D,d=D}x||(d=null),m===i.current?o.current||c():(i.current=m,s.current=m,o.current=!0,p({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=u,r.trySubscribe(),u();var g=function(){if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d};return g}}var Mc=function(){return[null,0]};function Ac(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(S){return"ConnectAdvanced("+S+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,s=r.renderCountProp,c=s===void 0?void 0:s,p=r.shouldHandleStateChanges,f=p===void 0?!0:p,d=r.storeKey,u=d===void 0?"store":d;r.withRef;var g=r.forwardRef,v=g===void 0?!1:g,b=r.context,m=b===void 0?vi:b,x=ar(r,Ec),D=m;return function(I){var k=I.displayName||I.name||"Component",M=a(k),$=L({},x,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:f,storeKey:u,displayName:M,wrappedComponentName:k,WrappedComponent:I}),Y=x.pure;function F(U){return e(U.dispatch,$)}var H=Y?w.useMemo:function(U){return U()};function W(U){var oe=w.useMemo(function(){var we=U.reactReduxForwardedRef,Pe=ar(U,Nc);return[U.context,we,Pe]},[U]),R=oe[0],fe=oe[1],ue=oe[2],K=w.useMemo(function(){return R&&R.Consumer&&Ic.isContextConsumer(ie.createElement(R.Consumer,null))?R:D},[R,D]),se=w.useContext(K),ge=!!U.store&&!!U.store.getState&&!!U.store.dispatch;se&&se.store;var ae=ge?U.store:se.store,Ee=w.useMemo(function(){return F(ae)},[ae]),je=w.useMemo(function(){if(!f)return Oc;var we=mi(ae,ge?null:se.subscription),Pe=we.notifyNestedSubs.bind(we);return[we,Pe]},[ae,ge,se]),be=je[0],Me=je[1],Te=w.useMemo(function(){return ge?se:L({},se,{subscription:be})},[ge,se,be]),Ne=w.useReducer(Tc,Pc,Mc),X=Ne[0],xe=X[0],ve=Ne[1];if(xe&&xe.error)throw xe.error;var le=w.useRef(),A=w.useRef(ue),Q=w.useRef(),he=w.useRef(!1),de=H(function(){return Q.current&&ue===A.current?Q.current:Ee(ae.getState(),ue)},[ae,xe,ue]);ya(Rc,[A,le,he,ue,de,Q,Me]),ya(jc,[f,ae,be,Ee,A,le,he,Q,Me,ve],[ae,be,Ee]);var ye=w.useMemo(function(){return ie.createElement(I,L({},de,{ref:fe}))},[fe,I,de]),re=w.useMemo(function(){return f?ie.createElement(K.Provider,{value:Te},ye):ye},[K,ye,Te]);return re}var ee=Y?ie.memo(W):W;if(ee.WrappedComponent=I,ee.displayName=W.displayName=M,v){var P=ie.forwardRef(function(oe,R){return ie.createElement(ee,L({},oe,{reactReduxForwardedRef:R}))});return P.displayName=M,P.WrappedComponent=I,na(P,I)}return na(ee,I)}}function wa(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Tr(e,t){if(wa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!wa(e[r[a]],t[r[a]]))return!1;return!0}function kc(e,t){var r={},n=function(o){var s=e[o];typeof s=="function"&&(r[o]=function(){return t(s.apply(void 0,arguments))})};for(var a in e)n(a);return r}function dn(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function Da(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function xi(e,t){return function(n,a){a.displayName;var i=function(s,c){return i.dependsOnOwnProps?i.mapToProps(s,c):i.mapToProps(s)};return i.dependsOnOwnProps=!0,i.mapToProps=function(s,c){i.mapToProps=e,i.dependsOnOwnProps=Da(e);var p=i(s,c);return typeof p=="function"&&(i.mapToProps=p,i.dependsOnOwnProps=Da(p),p=i(s,c)),p},i}}function Bc(e){return typeof e=="function"?xi(e):void 0}function Lc(e){return e?void 0:dn(function(t){return{dispatch:t}})}function Fc(e){return e&&typeof e=="object"?dn(function(t){return kc(e,t)}):void 0}const $c=[Bc,Lc,Fc];function Hc(e){return typeof e=="function"?xi(e):void 0}function Gc(e){return e?void 0:dn(function(){return{}})}const zc=[Hc,Gc];function Wc(e,t,r){return L({},r,e,t)}function Uc(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,s;return function(p,f,d){var u=e(p,f,d);return o?(!a||!i(u,s))&&(s=u):(o=!0,s=u),s}}}function Vc(e){return typeof e=="function"?Uc(e):void 0}function qc(e){return e?void 0:function(){return Wc}}const Yc=[Vc,qc];var Xc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Jc(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function Kc(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,s=a.areStatePropsEqual,c=!1,p,f,d,u,g;function v(S,I){return p=S,f=I,d=e(p,f),u=t(n,f),g=r(d,u,f),c=!0,g}function b(){return d=e(p,f),t.dependsOnOwnProps&&(u=t(n,f)),g=r(d,u,f),g}function m(){return e.dependsOnOwnProps&&(d=e(p,f)),t.dependsOnOwnProps&&(u=t(n,f)),g=r(d,u,f),g}function x(){var S=e(p,f),I=!s(S,d);return d=S,I&&(g=r(d,u,f)),g}function D(S,I){var k=!o(I,f),M=!i(S,p,I,f);return p=S,f=I,k&&M?b():k?m():M?x():g}return function(I,k){return c?D(I,k):v(I,k)}}function _c(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=ar(t,Xc),o=r(e,i),s=n(e,i),c=a(e,i),p=i.pure?Kc:Jc;return p(o,s,c,e,i)}var Qc=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Rr(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Zc(e,t){return e===t}function eu(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?Ac:r,a=t.mapStateToPropsFactories,i=a===void 0?zc:a,o=t.mapDispatchToPropsFactories,s=o===void 0?$c:o,c=t.mergePropsFactories,p=c===void 0?Yc:c,f=t.selectorFactory,d=f===void 0?_c:f;return function(g,v,b,m){m===void 0&&(m={});var x=m,D=x.pure,S=D===void 0?!0:D,I=x.areStatesEqual,k=I===void 0?Zc:I,M=x.areOwnPropsEqual,$=M===void 0?Tr:M,Y=x.areStatePropsEqual,F=Y===void 0?Tr:Y,H=x.areMergedPropsEqual,W=H===void 0?Tr:H,ee=ar(x,Qc),P=Rr(g,i,"mapStateToProps"),U=Rr(v,s,"mapDispatchToProps"),oe=Rr(b,p,"mergeProps");return n(d,L({methodName:"connect",getDisplayName:function(fe){return"Connect("+fe+")"},shouldHandleStateChanges:!!g,initMapStateToProps:P,initMapDispatchToProps:U,initMergeProps:oe,pure:S,areStatesEqual:k,areOwnPropsEqual:$,areStatePropsEqual:F,areMergedPropsEqual:W},ee))}}const yi=eu();xc(To.unstable_batchedUpdates);function tu(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function wi(e,t){var r=w.useState(function(){return{inputs:t,result:e()}})[0],n=w.useRef(!0),a=w.useRef(r),i=n.current||!!(t&&a.current.inputs&&tu(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return w.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function ru(e,t){return wi(function(){return e},t)}var Z=wi,B=ru,nu="Invariant failed";function au(e,t){throw new Error(nu)}var qe=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,s=a-r,c={top:r,right:n,bottom:a,left:i,width:o,height:s,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},pn=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Sa=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},iu=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},jr={top:0,right:0,bottom:0,left:0},fn=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?jr:n,i=t.border,o=i===void 0?jr:i,s=t.padding,c=s===void 0?jr:s,p=qe(pn(r,a)),f=qe(Sa(r,o)),d=qe(Sa(f,c));return{marginBox:p,borderBox:qe(r),paddingBox:f,contentBox:d,margin:a,border:o,padding:c}},Ge=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&au(),a},ou=function(){return{x:window.pageXOffset,y:window.pageYOffset}},or=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,s=iu(n,r);return fn({borderBox:s,border:a,margin:i,padding:o})},sr=function(t,r){return r===void 0&&(r=ou()),or(t,r)},Di=function(t,r){var n={top:Ge(r.marginTop),right:Ge(r.marginRight),bottom:Ge(r.marginBottom),left:Ge(r.marginLeft)},a={top:Ge(r.paddingTop),right:Ge(r.paddingRight),bottom:Ge(r.paddingBottom),left:Ge(r.paddingLeft)},i={top:Ge(r.borderTopWidth),right:Ge(r.borderRightWidth),bottom:Ge(r.borderBottomWidth),left:Ge(r.borderLeftWidth)};return fn({borderBox:t,margin:n,padding:a,border:i})},Si=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Di(r,n)},Ca=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function su(e,t){return!!(e===t||Ca(e)&&Ca(t))}function lu(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!su(e[r],t[r]))return!1;return!0}function De(e,t){t===void 0&&(t=lu);var r,n=[],a,i=!1;function o(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i&&r===this&&t(s,n)||(a=e.apply(this,s),i=!0,r=this,n=s),a}return o}var Ht=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];r=s,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function Ci(e,t){}Ci.bind(null,"warn");Ci.bind(null,"error");function Qe(){}function cu(e,t){return L({},e,{},t)}function We(e,t,r){var n=t.map(function(a){var i=cu(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var uu="Invariant failed";function lr(e){this.message=e}lr.prototype.toString=function(){return this.message};function E(e,t){throw new lr(uu)}var du=function(e){gi(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Qe,n.onWindowError=function(s){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var p=s.error;p instanceof lr&&s.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(s){n.callbacks=s},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=We(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof lr){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ie.Component),pu=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,cr=function(t){return t+1},fu=function(t){return`
  You have lifted an item in position `+cr(t.source.index)+`
`},Ii=function(t,r){var n=t.droppableId===r.droppableId,a=cr(t.index),i=cr(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},Ei=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},gu=function(t){var r=t.destination;if(r)return Ii(t.source,r);var n=t.combine;return n?Ei(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Ia=function(t){return`
  The item has returned to its starting position
  of `+cr(t.index)+`
`},vu=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Ia(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+Ii(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+Ei(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ia(t.source)+`
  `},nr={dragHandleUsageInstructions:pu,onDragStart:fu,onDragUpdate:gu,onDragEnd:vu},Se={x:0,y:0},Ie=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},ke=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Ze=function(t,r){return t.x===r.x&&t.y===r.y},bt=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},st=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Gt=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Ea=function(t,r){return Math.min.apply(Math,r.map(function(n){return Gt(t,n)}))},Ni=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},hu=function(e,t){var r=qe({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Vt=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Na=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},mu={top:0,right:0,bottom:0,left:0},bu=function(t,r){return r?Vt(t,r.scroll.diff.displacement):t},xu=function(t,r,n){if(n&&n.increasedBy){var a;return L({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},yu=function(t,r){return r&&r.shouldClipSubject?hu(r.pageMarginBox,t):qe(t)},gt=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=bu(t.marginBox,a),o=xu(i,n,r),s=yu(o,a);return{page:t,withPlaceholder:r,active:s}},gn=function(e,t){e.frame||E();var r=e.frame,n=ke(t,r.scroll.initial),a=bt(n),i=L({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=gt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),s=L({},e,{frame:i,subject:o});return s};function ur(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function vn(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function rt(e,t){if(e.find)return e.find(t);var r=vn(e,t);if(r!==-1)return e[r]}function Pi(e){return Array.prototype.slice.call(e)}var Oi=De(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Ti=De(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),xr=De(function(e){return ur(e)}),wu=De(function(e){return ur(e)}),xt=De(function(e,t){var r=wu(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function hn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function yr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var wr=De(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),Du=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=hn(i);if(!o)return null;function s(b){var m={type:"COMBINE",combine:{draggableId:b,droppableId:n.descriptor.id}};return L({},i,{at:m})}var c=i.displaced.all,p=c.length?c[0]:null;if(t)return p?s(p):null;var f=wr(r,a);if(!p){if(!f.length)return null;var d=f[f.length-1];return s(d.descriptor.id)}var u=vn(f,function(b){return b.descriptor.id===p});u===-1&&E();var g=u-1;if(g<0)return null;var v=f[g];return s(v.descriptor.id)},yt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ri={point:Se,value:0},zt={invisible:{},visible:{},all:[]},Su={displaced:zt,displacedBy:Ri,at:null},Ue=function(e,t){return function(r){return e<=r&&r<=t}},ji=function(e){var t=Ue(e.top,e.bottom),r=Ue(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),s=i&&o;if(s)return!0;var c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,f=c&&p;if(f)return!0;var d=c&&o||p&&i;return d}},Cu=function(e){var t=Ue(e.top,e.bottom),r=Ue(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},mn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Mi={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Iu=function(e){return function(t){var r=Ue(t.top,t.bottom),n=Ue(t.left,t.right);return function(a){return e===mn?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},Eu=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:Se;return Vt(t,n)},Nu=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},Pu=function(t,r,n){return n(r)(t)},bn=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,s=i?Eu(r,n):r;return Nu(s,n,o)&&Pu(s,a,o)},Ou=function(t){return bn(L({},t,{isVisibleThroughFrameFn:ji}))},Ai=function(t){return bn(L({},t,{isVisibleThroughFrameFn:Cu}))},Tu=function(t){return bn(L({},t,{isVisibleThroughFrameFn:Iu(t.destination.axis)}))},Ru=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function ju(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return qe(pn(r,n))}function Wt(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,p){var f=ju(p,n),d=p.descriptor.id;c.all.push(d);var u=Ou({target:f,destination:r,viewport:a,withDroppableDisplacement:!0});if(!u)return c.invisible[p.descriptor.id]=!0,c;var g=Ru(d,o,i),v={draggableId:d,shouldAnimate:g};return c.visible[d]=v,c},{all:[],visible:{},invisible:{}})}function Mu(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Pa(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=Mu(t,{inHomeList:r});return{displaced:zt,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function dr(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,c=e.forceShouldAnimate,p=yt(t,n);if(s==null)return Pa({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var f=rt(r,function(b){return b.descriptor.index===s});if(!f)return Pa({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var d=wr(t,r),u=r.indexOf(f),g=d.slice(u),v=Wt({afterDragging:g,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:v,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function tt(e,t){return!!t.effected[e]}var Au=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,s=n[o],c=s.descriptor.index,p=tt(o,i);return p?t?c:c-1:t?c+1:c},ku=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index,p=r?c:c+1;return o<s||o>p?null:o},Bu=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,c=e.viewport,p=e.afterCritical,f=s.at;if(f||E(),f.type==="REORDER"){var d=ku({isMovingForward:t,isInHomeList:r,location:f.destination,insideDestination:o});return d==null?null:dr({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})}var u=Au({isMovingForward:t,destination:i,displaced:s.displaced,draggables:a,combine:f.combine,afterCritical:p});return u==null?null:dr({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:u})},Lu=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return tt(n,r)?i?Se:bt(a.point):i?a.point:Se},Fu=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=yr(r);a||E();var i=a.draggableId,o=n[i].page.borderBox.center,s=Lu({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Ie(o,s)},ki=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},$u=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},xn=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},Oa=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return st(r.line,n.marginBox[r.end]+ki(r,a),xn(r,n.marginBox,a))},Ta=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return st(r.line,n.marginBox[r.start]-$u(r,a),xn(r,n.marginBox,a))},Hu=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return st(r.line,n.contentBox[r.start]+ki(r,a),xn(r,n.contentBox,a))},Gu=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=xt(a.descriptor.id,n),s=r.page,c=a.axis;if(!o.length)return Hu({axis:c,moveInto:a.page,isMoving:s});var p=t.displaced,f=t.displacedBy,d=p.all[0];if(d){var u=n[d];if(tt(d,i))return Ta({axis:c,moveRelativeTo:u.page,isMoving:s});var g=or(u.page,f.point);return Ta({axis:c,moveRelativeTo:g,isMoving:s})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return s.borderBox.center;if(tt(v.descriptor.id,i)){var b=or(v.page,bt(i.displacedBy.point));return Oa({axis:c,moveRelativeTo:b,isMoving:s})}return Oa({axis:c,moveRelativeTo:v.page,isMoving:s})},Jr=function(e,t){var r=e.frame;return r?Ie(t,r.scroll.diff.displacement):t},zu=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,s=n.page.borderBox.center,c=r.at;return!a||!c?s:c.type==="REORDER"?Gu({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):Fu({impact:r,draggables:i,afterCritical:o})},Dr=function(e){var t=zu(e),r=e.droppable,n=r?Jr(r,t):t;return n},Bi=function(e,t){var r=ke(t,e.scroll.initial),n=bt(r),a=qe({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function Ra(e,t){return e.map(function(r){return t[r]})}function Wu(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var Uu=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=Bi(r,Ie(r.scroll.current,i)),s=n.frame?gn(n,Ie(n.frame.scroll.current,i)):n,c=t.displaced,p=Wt({afterDragging:Ra(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),f=Wt({afterDragging:Ra(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),d={},u={},g=[c,p,f];c.all.forEach(function(b){var m=Wu(b,g);if(m){u[b]=m;return}d[b]=!0});var v=L({},t,{displaced:{all:c.all,invisible:d,visible:u}});return v},Vu=function(e,t){return Ie(e.scroll.diff.displacement,t)},yn=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=Vu(n,t),i=ke(a,r.page.borderBox.center);return Ie(r.client.borderBox.center,i)},Li=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,c=ke(n,t.page.borderBox.center),p=Vt(t.page.borderBox,c),f={target:p,destination:r,withDroppableDisplacement:i,viewport:a};return s?Tu(f):Ai(f)},qu=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var f=xt(n.descriptor.id,a),d=yt(r,n),u=Du({isMovingForward:t,draggable:r,destination:n,insideDestination:f,previousImpact:i})||Bu({isMovingForward:t,isInHomeList:d,draggable:r,draggables:a,destination:n,insideDestination:f,previousImpact:i,viewport:o,afterCritical:p});if(!u)return null;var g=Dr({impact:u,draggable:r,droppable:n,draggables:a,afterCritical:p}),v=Li({draggable:r,destination:n,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var b=yn({pageBorderBoxCenter:g,draggable:r,viewport:o});return{clientSelection:b,impact:u,scrollJumpRequest:null}}var m=ke(g,s),x=Uu({impact:u,viewport:o,destination:n,draggables:a,maxScrollChange:m});return{clientSelection:c,impact:x,scrollJumpRequest:m}},Re=function(t){var r=t.subject.active;return r||E(),r},Yu=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var s=n.axis,c=Ue(o[s.start],o[s.end]),p=xr(a).filter(function(d){return d!==n}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return ji(i.frame)(Re(d))}).filter(function(d){var u=Re(d);return t?o[s.crossAxisEnd]<u[s.crossAxisEnd]:u[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(d){var u=Re(d),g=Ue(u[s.start],u[s.end]);return c(u[s.start])||c(u[s.end])||g(o[s.start])||g(o[s.end])}).sort(function(d,u){var g=Re(d)[s.crossAxisStart],v=Re(u)[s.crossAxisStart];return t?g-v:v-g}).filter(function(d,u,g){return Re(d)[s.crossAxisStart]===Re(g[0])[s.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var f=p.filter(function(d){var u=Ue(Re(d)[s.start],Re(d)[s.end]);return u(r[s.line])});return f.length===1?f[0]:f.length>1?f.sort(function(d,u){return Re(d)[s.start]-Re(u)[s.start]})[0]:p.sort(function(d,u){var g=Ea(r,Na(Re(d))),v=Ea(r,Na(Re(u)));return g!==v?g-v:Re(d)[s.start]-Re(u)[s.start]})[0]},ja=function(t,r){var n=t.page.borderBox.center;return tt(t.descriptor.id,r)?ke(n,r.displacedBy.point):n},Xu=function(t,r){var n=t.page.borderBox;return tt(t.descriptor.id,r)?Vt(n,bt(r.displacedBy.point)):n},Ju=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(s){return Ai({target:Xu(s,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(s,c){var p=Gt(t,Jr(n,ja(s,i))),f=Gt(t,Jr(n,ja(c,i)));return p<f?-1:f<p?1:s.descriptor.index-c.descriptor.index});return o[0]||null},qt=De(function(t,r){var n=r[t.line];return{value:n,point:st(t.line,n)}}),Ku=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return st(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=xt(t.descriptor.id,n),s=o.reduce(function(f,d){return f+d.client.marginBox[a.size]},0),c=s+r[a.line],p=c-i;return p<=0?null:st(a.line,p)},Fi=function(t,r){return L({},t,{scroll:L({},t.scroll,{max:r})})},$i=function(t,r,n){var a=t.frame;yt(r,t)&&E(),t.subject.withPlaceholder&&E();var i=qt(t.axis,r.displaceBy).point,o=Ku(t,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=gt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return L({},t,{subject:c})}var p=o?Ie(a.scroll.max,o):a.scroll.max,f=Fi(a,p),d=gt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:f});return L({},t,{subject:d,frame:f})},_u=function(t){var r=t.subject.withPlaceholder;r||E();var n=t.frame;if(!n){var a=gt({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return L({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||E();var o=Fi(n,i),s=gt({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return L({},t,{subject:s,frame:o})},Qu=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var p={displaced:zt,displacedBy:Ri,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},f=Dr({impact:p,draggable:a,droppable:o,draggables:i,afterCritical:c}),d=yt(a,o)?o:$i(o,a,i),u=Li({draggable:a,destination:d,newPageBorderBoxCenter:f,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return u?p:null}var g=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var m=r.descriptor.index;return r.descriptor.id===a.descriptor.id||g?m:m+1}(),b=qt(o.axis,a.displaceBy);return dr({draggable:a,insideDestination:n,destination:o,viewport:s,displacedBy:b,last:zt,index:v})},Zu=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,c=e.afterCritical,p=Yu({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:s});if(!p)return null;var f=xt(p.descriptor.id,i),d=Ju({pageBorderBoxCenter:r,viewport:s,destination:p,insideDestination:f,afterCritical:c}),u=Qu({previousPageBorderBoxCenter:r,destination:p,draggable:n,draggables:i,moveRelativeTo:d,insideDestination:f,viewport:s,afterCritical:c});if(!u)return null;var g=Dr({impact:u,draggable:n,droppable:p,draggables:i,afterCritical:c}),v=yn({pageBorderBoxCenter:g,draggable:n,viewport:s});return{clientSelection:v,impact:u,scrollJumpRequest:null}},Be=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},ed=function(t,r){var n=Be(t);return n?r[n]:null},td=function(e){var t=e.state,r=e.type,n=ed(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,s=o.axis.direction,c=s==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||s==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var p=r==="MOVE_DOWN"||r==="MOVE_RIGHT",f=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,u=t.dimensions,g=u.draggables,v=u.droppables;return c?qu({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:f,destination:o,draggables:g,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Zu({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:f,isOver:o,draggables:g,droppables:v,viewport:t.viewport,afterCritical:t.afterCritical})};function it(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Hi(e){var t=Ue(e.top,e.bottom),r=Ue(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function rd(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function nd(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var s=o.axis,c=st(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Gt(a,c)}}).sort(function(o,s){return s.distance-o.distance});return i[0]?i[0].id:null}function ad(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=xr(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!rd(t,o))return!1;if(Hi(o)(t.center))return!0;var s=i.axis,c=o.center[s.crossAxisLine],p=t[s.crossAxisStart],f=t[s.crossAxisEnd],d=Ue(o[s.crossAxisStart],o[s.crossAxisEnd]),u=d(p),g=d(f);return!u&&!g?!0:u?p<c:f>c});return a.length?a.length===1?a[0].descriptor.id:nd({pageBorderBox:t,draggable:r,candidates:a}):null}var Gi=function(t,r){return qe(Vt(t,r))},id=function(e,t){var r=e.frame;return r?Gi(t,r.scroll.diff.value):t};function zi(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function od(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var sd=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,c=n.axis,p=qt(n.axis,r.displaceBy),f=p.value,d=t[c.start],u=t[c.end],g=wr(r,a),v=rt(g,function(m){var x=m.descriptor.id,D=m.page.borderBox.center[c.line],S=tt(x,s),I=zi({displaced:i,id:x});return S?I?u<=D:d<D-f:I?u<=D+f:d<D}),b=od({draggable:r,closest:v,inHomeList:yt(r,n)});return dr({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:p,index:b})},ld=4,cd=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,c=qt(a.axis,t.displaceBy),p=c.value,f=r[s.start],d=r[s.end],u=wr(t,i),g=rt(u,function(b){var m=b.descriptor.id,x=b.page.borderBox,D=x[s.size],S=D/ld,I=tt(m,o),k=zi({displaced:n.displaced,id:m});return I?k?d>x[s.start]+S&&d<x[s.end]-S:f>x[s.start]-p+S&&f<x[s.end]-p-S:k?d>x[s.start]+p+S&&d<x[s.end]+p-S:f>x[s.start]+S&&f<x[s.end]-S});if(!g)return null;var v={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:a.descriptor.id}}};return v},Wi=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,c=Gi(r.page.borderBox,t),p=ad({pageBorderBox:c,draggable:r,droppables:a});if(!p)return Su;var f=a[p],d=xt(f.descriptor.id,n),u=id(f,c);return cd({pageBorderBoxWithDroppableScroll:u,draggable:r,previousImpact:i,destination:f,insideDestination:d,afterCritical:s})||sd({pageBorderBoxWithDroppableScroll:u,draggable:r,destination:f,insideDestination:d,last:i.displaced,viewport:o,afterCritical:s})},wn=function(e,t){var r;return L({},e,(r={},r[t.descriptor.id]=t,r))},ud=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=Be(r),o=Be(n);if(!i||i===o)return a;var s=a[i];if(!s.subject.withPlaceholder)return a;var c=_u(s);return wn(a,c)},dd=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=ud({previousImpact:a,impact:i,droppables:n}),s=Be(i);if(!s)return o;var c=n[s];if(yt(t,c)||c.subject.withPlaceholder)return o;var p=$i(c,t,r);return wn(o,p)},Ft=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||t.viewport,c=n||t.dimensions,p=r||t.current.client.selection,f=ke(p,t.initial.client.selection),d={offset:f,selection:p,borderBoxCenter:Ie(t.initial.client.borderBoxCenter,f)},u={selection:Ie(d.selection,s.scroll.current),borderBoxCenter:Ie(d.borderBoxCenter,s.scroll.current),offset:Ie(d.offset,s.scroll.diff.value)},g={client:d,page:u};if(t.phase==="COLLECTING")return L({phase:"COLLECTING"},t,{dimensions:c,viewport:s,current:g});var v=c.draggables[t.critical.draggable.id],b=i||Wi({pageOffset:u.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),m=dd({draggable:v,impact:b,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),x=L({},t,{current:g,dimensions:{draggables:c.draggables,droppables:m},impact:b,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function pd(e,t){return e.map(function(r){return t[r]})}var Ui=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,s=pd(o.all,n),c=Wt({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return L({},t,{displaced:c})},Vi=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=Dr({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return yn({pageBorderBoxCenter:s,draggable:r,viewport:i})},qi=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&E();var a=t.impact,i=n||t.viewport,o=r||t.dimensions,s=o.draggables,c=o.droppables,p=s[t.critical.draggable.id],f=Be(a);f||E();var d=c[f],u=Ui({impact:a,viewport:i,destination:d,draggables:s}),g=Vi({impact:u,draggable:p,droppable:d,draggables:s,viewport:i,afterCritical:t.afterCritical});return Ft({impact:u,clientSelection:g,state:t,dimensions:o,viewport:i})},fd=function(e){return{index:e.index,droppableId:e.droppableId}},Yi=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=qt(r.axis,t.displaceBy),o=xt(r.descriptor.id,n),s=o.indexOf(t);s===-1&&E();var c=o.slice(s+1),p=c.reduce(function(g,v){return g[v.descriptor.id]=!0,g},{}),f={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:p},d=Wt({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),u={displaced:d,displacedBy:i,at:{type:"REORDER",destination:fd(t.descriptor)}};return{impact:u,afterCritical:f}},gd=function(e,t){return{draggables:e.draggables,droppables:wn(e.droppables,t)}},vd=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=or(t.client,r),i=sr(a,n),o=L({},t,{placeholder:L({},t.placeholder,{client:a}),client:a,page:i});return o},hd=function(e){var t=e.frame;return t||E(),t},md=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,s=r[o],c=hd(s),p=c.scroll.diff.value,f=Ie(a,p),d=vd({draggable:i,offset:f,initialWindowScroll:n.scroll.initial});return d})},bd=function(e){var t=e.state,r=e.published,n=r.modified.map(function(S){var I=t.dimensions.droppables[S.droppableId],k=gn(I,S.scroll);return k}),a=L({},t.dimensions.droppables,{},Oi(n)),i=Ti(md({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=L({},t.dimensions.draggables,{},i);r.removals.forEach(function(S){delete o[S]});var s={droppables:a,draggables:o},c=Be(t.impact),p=c?s.droppables[c]:null,f=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],u=Yi({draggable:f,home:d,draggables:o,viewport:t.viewport}),g=u.impact,v=u.afterCritical,b=p&&p.isCombineEnabled?t.impact:g,m=Wi({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:b,viewport:t.viewport,afterCritical:v}),x=L({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:m,onLiftImpact:g,dimensions:s,afterCritical:v,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return x;var D=L({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return D},Kr=function(t){return t.movementMode==="SNAP"},Mr=function(t,r,n){var a=gd(t.dimensions,r);return!Kr(t)||n?Ft({state:t,dimensions:a}):qi({state:t,dimensions:a})};function Ar(e){return e.isDragging&&e.movementMode==="SNAP"?L({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Ma={phase:"IDLE",completed:null,shouldFlush:!1},xd=function(e,t){if(e===void 0&&(e=Ma),t.type==="FLUSH")return L({},Ma,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&E();var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,s=r.movementMode,c=o.draggables[n.draggable.id],p=o.droppables[n.droppable.id],f={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Se},d={client:f,page:{selection:Ie(f.selection,i.scroll.initial),borderBoxCenter:Ie(f.selection,i.scroll.initial),offset:Ie(f.selection,i.scroll.diff.value)}},u=xr(o.droppables).every(function(ve){return!ve.isFixedOnPage}),g=Yi({draggable:c,home:p,draggables:o.draggables,viewport:i}),v=g.impact,b=g.afterCritical,m={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:o,initial:d,current:d,isWindowScrollAllowed:u,impact:v,afterCritical:b,onLiftImpact:v,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return m}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&E();var x=L({phase:"COLLECTING"},e,{phase:"COLLECTING"});return x}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||E(),bd({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;it(e)||E();var D=t.payload.client;return Ze(D,e.current.client.selection)?e:Ft({state:e,clientSelection:D,impact:Kr(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ar(e);it(e)||E();var S=t.payload,I=S.id,k=S.newScroll,M=e.dimensions.droppables[I];if(!M)return e;var $=gn(M,k);return Mr(e,$,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;it(e)||E();var Y=t.payload,F=Y.id,H=Y.isEnabled,W=e.dimensions.droppables[F];W||E(),W.isEnabled===H&&E();var ee=L({},W,{isEnabled:H});return Mr(e,ee,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;it(e)||E();var P=t.payload,U=P.id,oe=P.isCombineEnabled,R=e.dimensions.droppables[U];R||E(),R.isCombineEnabled===oe&&E();var fe=L({},R,{isCombineEnabled:oe});return Mr(e,fe,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;it(e)||E(),e.isWindowScrollAllowed||E();var ue=t.payload.newScroll;if(Ze(e.viewport.scroll.current,ue))return Ar(e);var K=Bi(e.viewport,ue);return Kr(e)?qi({state:e,viewport:K}):Ft({state:e,viewport:K})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!it(e))return e;var se=t.payload.maxScroll;if(Ze(se,e.viewport.scroll.max))return e;var ge=L({},e.viewport,{scroll:L({},e.viewport.scroll,{max:se})});return L({phase:"DRAGGING"},e,{viewport:ge})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&E();var ae=td({state:e,type:t.type});return ae?Ft({state:e,impact:ae.impact,clientSelection:ae.clientSelection,scrollJumpRequest:ae.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var Ee=t.payload.reason;e.phase!=="COLLECTING"&&E();var je=L({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Ee});return je}if(t.type==="DROP_ANIMATE"){var be=t.payload,Me=be.completed,Te=be.dropDuration,Ne=be.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||E();var X={phase:"DROP_ANIMATING",completed:Me,dropDuration:Te,newHomeClientOffset:Ne,dimensions:e.dimensions};return X}if(t.type==="DROP_COMPLETE"){var xe=t.payload.completed;return{phase:"IDLE",completed:xe,shouldFlush:!1}}return e},yd=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},wd=function(t){return{type:"LIFT",payload:t}},Dd=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Sd=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},Cd=function(){return{type:"COLLECTION_STARTING",payload:null}},Id=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Ed=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Nd=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Xi=function(t){return{type:"MOVE",payload:t}},Pd=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},Od=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},Td=function(){return{type:"MOVE_UP",payload:null}},Rd=function(){return{type:"MOVE_DOWN",payload:null}},jd=function(){return{type:"MOVE_RIGHT",payload:null}},Md=function(){return{type:"MOVE_LEFT",payload:null}},Dn=function(){return{type:"FLUSH",payload:null}},Ad=function(t){return{type:"DROP_ANIMATE",payload:t}},Sn=function(t){return{type:"DROP_COMPLETE",payload:t}},Ji=function(t){return{type:"DROP",payload:t}},kd=function(t){return{type:"DROP_PENDING",payload:t}},Ki=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Bd=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,s=o.id,c=o.clientSelection,p=o.movementMode,f=r();f.phase==="DROP_ANIMATING"&&n(Sn({completed:f.completed})),r().phase!=="IDLE"&&E(),n(Dn()),n(yd({draggableId:s,movementMode:p}));var d={shouldPublishImmediately:p==="SNAP"},u={draggableId:s,scrollOptions:d},g=e.startPublishing(u),v=g.critical,b=g.dimensions,m=g.viewport;n(Dd({critical:v,dimensions:b,clientSelection:c,movementMode:p,viewport:m}))}}}},Ld=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},Cn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ut={opacity:{drop:0,combining:.7},scale:{drop:.75}},In={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},at=In.outOfTheWay+"s "+Cn.outOfTheWay,$t={fluid:"opacity "+at,snap:"transform "+at+", opacity "+at,drop:function(t){var r=t+"s "+Cn.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+at,placeholder:"height "+at+", width "+at+", margin "+at},Aa=function(t){return Ze(t,Se)?null:"translate("+t.x+"px, "+t.y+"px)"},_r={moveTo:Aa,drop:function(t,r){var n=Aa(t);return n?r?n+" scale("+Ut.scale.drop+")":n:null}},Qr=In.minDropTime,_i=In.maxDropTime,Fd=_i-Qr,ka=1500,$d=.6,Hd=function(e){var t=e.current,r=e.destination,n=e.reason,a=Gt(t,r);if(a<=0)return Qr;if(a>=ka)return _i;var i=a/ka,o=Qr+Fd*i,s=n==="CANCEL"?o*$d:o;return Number(s.toFixed(2))},Gd=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,s=n.droppables,c=Be(t),p=c?s[c]:null,f=s[r.descriptor.droppableId],d=Vi({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:p||f,viewport:a}),u=ke(d,r.client.borderBox.center);return u},zd=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var s=Ui({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=L({},n,{displaced:zt});return{impact:c,didDropInsideDroppable:!0}},Wd=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(kd({reason:o}));return}if(i.phase!=="IDLE"){var s=i.phase==="DROP_PENDING"&&i.isWaiting;s&&E(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||E();var c=i.critical,p=i.dimensions,f=p.draggables[i.critical.draggable.id],d=zd({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=d.impact,g=d.didDropInsideDroppable,v=g?hn(u):null,b=g?yr(u):null,m={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:f.descriptor.id,type:f.descriptor.type,source:m,reason:o,mode:i.movementMode,destination:v,combine:b},D=Gd({impact:u,draggable:f,dimensions:p,viewport:i.viewport,afterCritical:i.afterCritical}),S={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:u},I=!Ze(i.current.client.offset,D)||!!x.combine;if(!I){r(Sn({completed:S}));return}var k=Hd({current:i.current.client.offset,destination:D,reason:o}),M={newHomeClientOffset:D,dropDuration:k,completed:S};r(Ad(M))}}}},Qi=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Ud(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Vd(e){var t=e.onWindowScroll;function r(){t(Qi())}var n=Ht(r),a=Ud(n),i=Qe;function o(){return i!==Qe}function s(){o()&&E(),i=We(window,[a])}function c(){o()||E(),n.cancel(),i(),i=Qe}return{start:s,stop:c,isActive:o}}var qd=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Yd=function(e){var t=Vd({onWindowScroll:function(n){e.dispatch(Pd({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&qd(n)&&t.stop(),r(n)}}},Xd=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},Jd=function(){var e=[],t=function(i){var o=vn(e,function(p){return p.timerId===i});o===-1&&E();var s=e.splice(o,1),c=s[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),s={timerId:o,callback:i};e.push(s)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},Kd=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},_d=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Qd=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},At=function(t,r){r()},_t=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},kr=function(t,r,n,a){if(!t){n(a(r));return}var i=Xd(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},Zd=function(e,t){var r=Jd(),n=null,a=function(u,g){n&&E(),At("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var b={draggableId:u,mode:g};v(b)}})},i=function(u,g){n&&E(),At("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(_t(u,g))})},o=function(u,g){n&&E();var v=_t(u,g);n={mode:g,lastCritical:u,lastLocation:v.source,lastCombine:null},r.add(function(){At("onDragStart",function(){return kr(e().onDragStart,v,t,nr.onDragStart)})})},s=function(u,g){var v=hn(g),b=yr(g);n||E();var m=!Qd(u,n.lastCritical);m&&(n.lastCritical=u);var x=!Kd(n.lastLocation,v);x&&(n.lastLocation=v);var D=!_d(n.lastCombine,b);if(D&&(n.lastCombine=b),!(!m&&!x&&!D)){var S=L({},_t(u,n.mode),{combine:b,destination:v});r.add(function(){At("onDragUpdate",function(){return kr(e().onDragUpdate,S,t,nr.onDragUpdate)})})}},c=function(){n||E(),r.flush()},p=function(u){n||E(),n=null,At("onDragEnd",function(){return kr(e().onDragEnd,u,t,nr.onDragEnd)})},f=function(){if(n){var u=L({},_t(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(u)}};return{beforeCapture:a,beforeStart:i,start:o,update:s,flush:c,drop:p,abort:f}},ep=function(e,t){var r=Zd(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var s=i.payload.completed.result;r.flush(),a(i),r.drop(s);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},tp=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&E(),e.dispatch(Sn({completed:n.completed}))}}},rp=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Ki())}};r=requestAnimationFrame(function(){r=null,t=We(window,[o])})}}}},np=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},ap=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},ip=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},op=function(e){return function(t){return function(r){return function(n){if(ip(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&E(),e.start(a);return}r(n),e.scroll(t.getState())}}}},sp=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Ji({reason:n.reason})))}}}},lp=ni,cp=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return nn(xd,lp(Cs(Ld(n),np(t),Bd(t),Wd,tp,rp,sp,op(o),Yd,ap(r),ep(a,i))))},Br=function(){return{additions:{},removals:{},modified:{}}};function up(e){var t=e.registry,r=e.callbacks,n=Br(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var f=n,d=f.additions,u=f.removals,g=f.modified,v=Object.keys(d).map(function(x){return t.draggable.getById(x).getDimension(Se)}).sort(function(x,D){return x.descriptor.index-D.descriptor.index}),b=Object.keys(g).map(function(x){var D=t.droppable.getById(x),S=D.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:S}}),m={additions:v,removals:Object.keys(u),modified:b};n=Br(),r.publish(m)}))},o=function(f){var d=f.descriptor.id;n.additions[d]=f,n.modified[f.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],i()},s=function(f){var d=f.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Br())};return{add:o,remove:s,stop:c}}var Zi=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=ke({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},eo=function(){var e=document.documentElement;return e||E(),e},to=function(){var e=eo(),t=Zi({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},dp=function(){var e=Qi(),t=to(),r=e.y,n=e.x,a=eo(),i=a.clientWidth,o=a.clientHeight,s=n+i,c=r+o,p=qe({top:r,left:n,right:s,bottom:c}),f={frame:p,scroll:{initial:e,current:e,max:t,diff:{value:Se,displacement:Se}}};return f},pp=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=dp(),i=a.scroll.current,o=t.droppable,s=n.droppable.getAllByType(o.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(d){return d.getDimension(i)}),p={draggables:Ti(c),droppables:Oi(s)},f={dimensions:p,critical:t,viewport:a};return f};function Ba(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var fp=function(e,t){var r=null,n=up({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(g,v){e.droppable.exists(g)||E(),r&&t.updateDroppableIsEnabled({id:g,isEnabled:v})},i=function(g,v){r&&(e.droppable.exists(g)||E(),t.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:v}))},o=function(g,v){r&&(e.droppable.exists(g)||E(),t.updateDroppableScroll({id:g,newScroll:v}))},s=function(g,v){r&&e.droppable.getById(g).callbacks.scroll(v)},c=function(){if(r){n.stop();var g=r.critical.droppable;e.droppable.getAllByType(g.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},p=function(g){r||E();var v=r.critical.draggable;g.type==="ADDITION"&&Ba(e,v,g.value)&&n.add(g.value),g.type==="REMOVAL"&&Ba(e,v,g.value)&&n.remove(g.value)},f=function(g){r&&E();var v=e.draggable.getById(g.draggableId),b=e.droppable.getById(v.descriptor.droppableId),m={draggable:v.descriptor,droppable:b.descriptor},x=e.subscribe(p);return r={critical:m,unsubscribe:x},pp({critical:m,registry:e,scrollOptions:g.scrollOptions})},d={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:s,updateDroppableScroll:o,startPublishing:f,stopPublishing:c};return d},ro=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},gp=function(e){window.scrollBy(e.x,e.y)},vp=De(function(e){return xr(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),hp=function(t,r){var n=rt(vp(r),function(a){return a.frame||E(),Hi(a.frame.pageMarginBox)(t)});return n},mp=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=hp(t,n);return i},et={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},bp=function(e,t){var r=e[t.size]*et.startFromPercentage,n=e[t.size]*et.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},no=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},En=1,xp=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return et.maxPixelScroll;if(e===t.startScrollingFrom)return En;var r=no({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=et.maxPixelScroll*et.ease(n);return Math.ceil(a)},La=et.durationDampening.accelerateAt,Fa=et.durationDampening.stopDampeningAt,yp=function(e,t){var r=t,n=Fa,a=Date.now(),i=a-r;if(i>=Fa)return e;if(i<La)return En;var o=no({startOfRange:La,endOfRange:n,current:i}),s=e*et.ease(o);return Math.ceil(s)},$a=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=xp(t,r);return i===0?0:a?Math.max(yp(i,n),En):i},Ha=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=bp(t,a),s=r[a.end]<r[a.start];return s?$a({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*$a({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},wp=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},Dp=Ni(function(e){return e===0?0:e}),ao=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},s=Ha({container:r,distanceToEdges:o,dragStartTime:t,axis:mn,shouldUseTimeDampening:i}),c=Ha({container:r,distanceToEdges:o,dragStartTime:t,axis:Mi,shouldUseTimeDampening:i}),p=Dp({x:c,y:s});if(Ze(p,Se))return null;var f=wp({container:r,subject:n,proposedScroll:p});return f?Ze(f,Se)?null:f:null},Sp=Ni(function(e){return e===0?0:e>0?1:-1}),Nn=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Ie(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return Ze(o,Se)?null:o}}(),io=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=Sp(a),s=Nn({max:i,current:n,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},Pn=function(t,r){return io({current:t.scroll.current,max:t.scroll.max,change:r})},Cp=function(t,r){if(!Pn(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return Nn({current:a,max:n,change:r})},On=function(t,r){var n=t.frame;return n?io({current:n.scroll.current,max:n.scroll.max,change:r}):!1},Ip=function(t,r){var n=t.frame;return!n||!On(t,r)?null:Nn({current:n.scroll.current,max:n.scroll.max,change:r})},Ep=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=ao({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&Pn(t,o)?o:null},Np=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=ao({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return s&&On(t,s)?s:null},Ga=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],c=s.page.marginBox;if(t.isWindowScrollAllowed){var p=t.viewport,f=Ep({dragStartTime:r,viewport:p,subject:c,center:o,shouldUseTimeDampening:n});if(f){a(f);return}}var d=mp({center:o,destination:Be(t.impact),droppables:t.dimensions.droppables});if(d){var u=Np({dragStartTime:r,droppable:d,subject:c,center:o,shouldUseTimeDampening:n});u&&i(d.descriptor.id,u)}},Pp=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Ht(t),a=Ht(r),i=null,o=function(f){i||E();var d=i,u=d.shouldUseTimeDampening,g=d.dragStartTime;Ga({state:f,scrollWindow:n,scrollDroppable:a,dragStartTime:g,shouldUseTimeDampening:u})},s=function(f){i&&E();var d=Date.now(),u=!1,g=function(){u=!0};Ga({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),i={dragStartTime:d,shouldUseTimeDampening:u},u&&o(f)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:s,stop:c,scroll:o}},Op=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(p,f){var d=Ie(p.current.client.selection,f);t({client:d})},i=function(p,f){if(!On(p,f))return f;var d=Ip(p,f);if(!d)return r(p.descriptor.id,f),null;var u=ke(f,d);r(p.descriptor.id,u);var g=ke(f,u);return g},o=function(p,f,d){if(!p||!Pn(f,d))return d;var u=Cp(f,d);if(!u)return n(d),null;var g=ke(d,u);n(g);var v=ke(d,g);return v},s=function(p){var f=p.scrollJumpRequest;if(f){var d=Be(p.impact);d||E();var u=i(p.dimensions.droppables[d],f);if(u){var g=p.viewport,v=o(p.isWindowScrollAllowed,g,u);v&&a(p,v)}}};return s},Tp=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=Pp({scrollWindow:r,scrollDroppable:t}),i=Op({move:n,scrollWindow:r,scrollDroppable:t}),o=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&i(p)}},s={scroll:o,start:a.start,stop:a.stop};return s},vt="data-rbd",ht=function(){var e=vt+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Zr=function(){var e=vt+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Rp=function(){var e=vt+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),za={contextId:vt+"-scroll-container-context-id"},jp=function(t){return function(r){return"["+r+'="'+t+'"]'}},kt=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},Mp="pointer-events: none;",Ap=function(e){var t=jp(e),r=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ht.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:Mp,dropAnimating:s}}}(),n=function(){var s=`
      transition: `+$t.outOfTheWay+`;
    `;return{selector:t(Zr.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),a={selector:t(Rp.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:kt(o,"always"),resting:kt(o,"resting"),dragging:kt(o,"dragging"),dropAnimating:kt(o,"dropAnimating"),userCancel:kt(o,"userCancel")}},Le=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,Lr=function(){var t=document.querySelector("head");return t||E(),t},Wa=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function kp(e,t){var r=Z(function(){return Ap(e)},[e]),n=w.useRef(null),a=w.useRef(null),i=B(De(function(d){var u=a.current;u||E(),u.textContent=d}),[]),o=B(function(d){var u=n.current;u||E(),u.textContent=d},[]);Le(function(){!n.current&&!a.current||E();var d=Wa(t),u=Wa(t);return n.current=d,a.current=u,d.setAttribute(vt+"-always",e),u.setAttribute(vt+"-dynamic",e),Lr().appendChild(d),Lr().appendChild(u),o(r.always),i(r.resting),function(){var g=function(b){var m=b.current;m||E(),Lr().removeChild(m),b.current=null};g(n),g(a)}},[t,o,i,r.always,r.resting,e]);var s=B(function(){return i(r.dragging)},[i,r.dragging]),c=B(function(d){if(d==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),p=B(function(){a.current&&i(r.resting)},[i,r.resting]),f=Z(function(){return{dragging:s,dropping:c,resting:p}},[s,c,p]);return f}var oo=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Sr(e){return e instanceof oo(e).HTMLElement}function Bp(e,t){var r="["+ht.contextId+'="'+e+'"]',n=Pi(document.querySelectorAll(r));if(!n.length)return null;var a=rt(n,function(i){return i.getAttribute(ht.draggableId)===t});return!a||!Sr(a)?null:a}function Lp(e){var t=w.useRef({}),r=w.useRef(null),n=w.useRef(null),a=w.useRef(!1),i=B(function(u,g){var v={id:u,focus:g};return t.current[u]=v,function(){var m=t.current,x=m[u];x!==v&&delete m[u]}},[]),o=B(function(u){var g=Bp(e,u);g&&g!==document.activeElement&&g.focus()},[e]),s=B(function(u,g){r.current===u&&(r.current=g)},[]),c=B(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var u=r.current;u&&o(u)}))},[o]),p=B(function(u){r.current=null;var g=document.activeElement;g&&g.getAttribute(ht.draggableId)===u&&(r.current=u)},[]);Le(function(){return a.current=!0,function(){a.current=!1;var u=n.current;u&&cancelAnimationFrame(u)}},[]);var f=Z(function(){return{register:i,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:s}},[i,p,c,s]);return f}function Fp(){var e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){var g=t.indexOf(d);g!==-1&&t.splice(g,1)}}function n(d){t.length&&t.forEach(function(u){return u(d)})}function a(d){return e.draggables[d]||null}function i(d){var u=a(d);return u||E(),u}var o={register:function(u){e.draggables[u.descriptor.id]=u,n({type:"ADDITION",value:u})},update:function(u,g){var v=e.draggables[g.descriptor.id];v&&v.uniqueId===u.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:function(u){var g=u.descriptor.id,v=a(g);v&&u.uniqueId===v.uniqueId&&(delete e.draggables[g],n({type:"REMOVAL",value:u}))},getById:i,findById:a,exists:function(u){return!!a(u)},getAllByType:function(u){return ur(e.draggables).filter(function(g){return g.descriptor.type===u})}};function s(d){return e.droppables[d]||null}function c(d){var u=s(d);return u||E(),u}var p={register:function(u){e.droppables[u.descriptor.id]=u},unregister:function(u){var g=s(u.descriptor.id);g&&u.uniqueId===g.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:s,exists:function(u){return!!s(u)},getAllByType:function(u){return ur(e.droppables).filter(function(g){return g.descriptor.type===u})}};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:p,subscribe:r,clean:f}}function $p(){var e=Z(Fp,[]);return w.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Tn=ie.createContext(null),pr=function(){var e=document.body;return e||E(),e},Hp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Gp=function(t){return"rbd-announcement-"+t};function zp(e){var t=Z(function(){return Gp(e)},[e]),r=w.useRef(null);w.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),L(i.style,Hp),pr().appendChild(i),function(){setTimeout(function(){var c=pr();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=B(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var Wp=0,Up={separator:"::"};function Rn(e,t){return t===void 0&&(t=Up),Z(function(){return""+e+t.separator+Wp++},[t.separator,e])}function Vp(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function qp(e){var t=e.contextId,r=e.text,n=Rn("hidden-text",{separator:"-"}),a=Z(function(){return Vp({contextId:t,uniqueId:n})},[n,t]);return w.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",pr().appendChild(o),function(){var c=pr();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var Cr=ie.createContext(null);function so(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function Yp(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&E();var s={abandon:o};return e=s,s}function a(){e||E(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var Xp=9,Jp=13,jn=27,lo=32,Kp=33,_p=34,Qp=35,Zp=36,ef=37,tf=38,rf=39,nf=40,Qt,af=(Qt={},Qt[Jp]=!0,Qt[Xp]=!0,Qt),co=function(e){af[e.keyCode]&&e.preventDefault()},Ir=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=rt(t,function(n){return"on"+n in document});return r||e}(),uo=0,Ua=5;function of(e,t){return Math.abs(t.x-e.x)>=Ua||Math.abs(t.y-e.y)>=Ua}var Va={type:"IDLE"};function sf(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,c=o.clientX,p=o.clientY;if(s===uo){var f={x:c,y:p},d=n();if(d.type==="DRAGGING"){o.preventDefault(),d.actions.move(f);return}d.type!=="PENDING"&&E();var u=d.point;if(of(u,f)){o.preventDefault();var g=d.actions.fluidLift(f);a({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(o){var s=n();if(s.type!=="DRAGGING"){t();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var s=n();if(s.type==="PENDING"){t();return}if(o.keyCode===jn){o.preventDefault(),t();return}co(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=n();if(s.type==="IDLE"&&E(),s.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:Ir,fn:t}]}function lf(e){var t=w.useRef(Va),r=w.useRef(Qe),n=Z(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===uo&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var u=e.findClosestDraggableId(d);if(u){var g=e.tryGetLock(u,o,{sourceEvent:d});if(g){d.preventDefault();var v={x:d.clientX,y:d.clientY};r.current(),p(g,v)}}}}}},[e]),a=Z(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var u=e.findClosestDraggableId(d);if(u){var g=e.findOptionsForDraggable(u);g&&(g.shouldRespectForcePress||e.canGetLock(u)&&d.preventDefault())}}}}},[e]),i=B(function(){var d={passive:!1,capture:!0};r.current=We(window,[a,n],d)},[a,n]),o=B(function(){var f=t.current;f.type!=="IDLE"&&(t.current=Va,r.current(),i())},[i]),s=B(function(){var f=t.current;o(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[o]),c=B(function(){var d={capture:!0,passive:!1},u=sf({cancel:s,completed:o,getPhase:function(){return t.current},setPhase:function(v){t.current=v}});r.current=We(window,u,d)},[s,o]),p=B(function(d,u){t.current.type!=="IDLE"&&E(),t.current={type:"PENDING",point:u,actions:d},c()},[c]);Le(function(){return i(),function(){r.current()}},[i])}var dt;function cf(){}var uf=(dt={},dt[_p]=!0,dt[Kp]=!0,dt[Zp]=!0,dt[Qp]=!0,dt);function df(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===jn){i.preventDefault(),r();return}if(i.keyCode===lo){i.preventDefault(),n();return}if(i.keyCode===nf){i.preventDefault(),e.moveDown();return}if(i.keyCode===tf){i.preventDefault(),e.moveUp();return}if(i.keyCode===rf){i.preventDefault(),e.moveRight();return}if(i.keyCode===ef){i.preventDefault(),e.moveLeft();return}if(uf[i.keyCode]){i.preventDefault();return}co(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Ir,fn:r}]}function pf(e){var t=w.useRef(cf),r=Z(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==lo)return;var o=e.findClosestDraggableId(i);if(!o)return;var s=e.tryGetLock(o,f,{sourceEvent:i});if(!s)return;i.preventDefault();var c=!0,p=s.snapLift();t.current();function f(){c||E(),c=!1,t.current(),n()}t.current=We(window,df(p,f),{capture:!0,passive:!1})}}},[e]),n=B(function(){var i={passive:!1,capture:!0};t.current=We(window,[r],i)},[r]);Le(function(){return n(),function(){t.current()}},[n])}var Fr={type:"IDLE"},ff=120,gf=.15;function vf(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===jn&&a.preventDefault(),t()}},{eventName:Ir,fn:t}]}function hf(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var s=i.touches[0],c=s.clientX,p=s.clientY,f={x:c,y:p};i.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&E();var s=i.touches[0];if(s){var c=s.force>=gf;if(c){var p=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){p&&t();return}if(p){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:Ir,fn:t}]}function mf(e){var t=w.useRef(Fr),r=w.useRef(Qe),n=B(function(){return t.current},[]),a=B(function(g){t.current=g},[]),i=Z(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var v=e.findClosestDraggableId(g);if(v){var b=e.tryGetLock(v,s,{sourceEvent:g});if(b){var m=g.touches[0],x=m.clientX,D=m.clientY,S={x,y:D};r.current(),d(b,S)}}}}}},[e]),o=B(function(){var g={capture:!0,passive:!1};r.current=We(window,[i],g)},[i]),s=B(function(){var u=t.current;u.type!=="IDLE"&&(u.type==="PENDING"&&clearTimeout(u.longPressTimerId),a(Fr),r.current(),o())},[o,a]),c=B(function(){var u=t.current;s(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[s]),p=B(function(){var g={capture:!0,passive:!1},v={cancel:c,completed:s,getPhase:n},b=We(window,hf(v),g),m=We(window,vf(v),g);r.current=function(){b(),m()}},[c,n,s]),f=B(function(){var g=n();g.type!=="PENDING"&&E();var v=g.actions.fluidLift(g.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[n,a]),d=B(function(g,v){n().type!=="IDLE"&&E();var b=setTimeout(f,ff);a({type:"PENDING",point:v,actions:g,longPressTimerId:b}),p()},[p,n,a,f]);Le(function(){return o(),function(){r.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(Fr))}},[n,o,a]),Le(function(){var g=We(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var bf={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function po(e,t){if(t==null)return!1;var r=!!bf[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:po(e,t.parentElement)}function xf(e,t){var r=t.target;return Sr(r)?po(e,r):!1}var yf=function(e){return qe(e.getBoundingClientRect()).center};function wf(e){return e instanceof oo(e).Element}var Df=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=rt(t,function(n){return n in Element.prototype});return r||e}();function fo(e,t){return e==null?null:e[Df](t)?e:fo(e.parentElement,t)}function Sf(e,t){return e.closest?e.closest(t):fo(e,t)}function Cf(e){return"["+ht.contextId+'="'+e+'"]'}function If(e,t){var r=t.target;if(!wf(r))return null;var n=Cf(e),a=Sf(r,n);return!a||!Sr(a)?null:a}function Ef(e,t){var r=If(e,t);return r?r.getAttribute(ht.draggableId):null}function Nf(e,t){var r="["+Zr.contextId+'="'+e+'"]',n=Pi(document.querySelectorAll(r)),a=rt(n,function(i){return i.getAttribute(Zr.id)===t});return!a||!Sr(a)?null:a}function Pf(e){e.preventDefault()}function Zt(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function go(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!ro(r.getState(),a))}function Of(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,c=go({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var p=a.draggable.getById(i),f=Nf(r,p.descriptor.id);if(!f||s&&!p.options.canDragInteractiveElements&&xf(f,s))return null;var d=t.claim(o||Qe),u="PRE_DRAG";function g(){return p.options.shouldRespectForcePress}function v(){return t.isActive(d)}function b(M,$){Zt({expected:M,phase:u,isLockActive:v,shouldWarn:!0})&&n.dispatch($())}var m=b.bind(null,"DRAGGING");function x(M){function $(){t.release(),u="COMPLETED"}u!=="PRE_DRAG"&&($(),u!=="PRE_DRAG"&&E()),n.dispatch(wd(M.liftActionArgs)),u="DRAGGING";function Y(F,H){if(H===void 0&&(H={shouldBlockNextClick:!1}),M.cleanup(),H.shouldBlockNextClick){var W=We(window,[{eventName:"click",fn:Pf,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(W)}$(),n.dispatch(Ji({reason:F}))}return L({isActive:function(){return Zt({expected:"DRAGGING",phase:u,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(H){return Y("DROP",H)},cancel:function(H){return Y("CANCEL",H)}},M.actions)}function D(M){var $=Ht(function(F){m(function(){return Xi({client:F})})}),Y=x({liftActionArgs:{id:i,clientSelection:M,movementMode:"FLUID"},cleanup:function(){return $.cancel()},actions:{move:$}});return L({},Y,{move:$})}function S(){var M={moveUp:function(){return m(Td)},moveRight:function(){return m(jd)},moveDown:function(){return m(Rd)},moveLeft:function(){return m(Md)}};return x({liftActionArgs:{id:i,clientSelection:yf(f),movementMode:"SNAP"},cleanup:Qe,actions:M})}function I(){var M=Zt({expected:"PRE_DRAG",phase:u,isLockActive:v,shouldWarn:!0});M&&t.release()}var k={isActive:function(){return Zt({expected:"PRE_DRAG",phase:u,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:D,snapLift:S,abort:I};return k}var Tf=[lf,pf,mf];function Rf(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?Tf:[],a||[]),s=w.useState(function(){return Yp()})[0],c=B(function(D,S){D.isDragging&&!S.isDragging&&s.tryAbandon()},[s]);Le(function(){var D=r.getState(),S=r.subscribe(function(){var I=r.getState();c(D,I),D=I});return S},[s,r,c]),Le(function(){return s.tryAbandon},[s.tryAbandon]);for(var p=B(function(x){return go({lockAPI:s,registry:n,store:r,draggableId:x})},[s,n,r]),f=B(function(x,D,S){return Of({lockAPI:s,registry:n,contextId:t,store:r,draggableId:x,forceSensorStop:D,sourceEvent:S&&S.sourceEvent?S.sourceEvent:null})},[t,s,n,r]),d=B(function(x){return Ef(t,x)},[t]),u=B(function(x){var D=n.draggable.findById(x);return D?D.options:null},[n.draggable]),g=B(function(){s.isClaimed()&&(s.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(Dn()))},[s,r]),v=B(s.isClaimed,[s]),b=Z(function(){return{canGetLock:p,tryGetLock:f,findClosestDraggableId:d,findOptionsForDraggable:u,tryReleaseLock:g,isLockClaimed:v}},[p,f,d,u,g,v]),m=0;m<o.length;m++)o[m](b)}var jf=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Bt(e){return e.current||E(),e.current}function Mf(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=w.useRef(null),s=so(e),c=B(function(){return jf(s.current)},[s]),p=zp(t),f=qp({contextId:t,text:i}),d=kp(t,a),u=B(function(F){Bt(o).dispatch(F)},[]),g=Z(function(){return ca({publishWhileDragging:Sd,updateDroppableScroll:Id,updateDroppableIsEnabled:Ed,updateDroppableIsCombineEnabled:Nd,collectionStarting:Cd},u)},[u]),v=$p(),b=Z(function(){return fp(v,g)},[v,g]),m=Z(function(){return Tp(L({scrollWindow:gp,scrollDroppable:b.scrollDroppable},ca({move:Xi},u)))},[b.scrollDroppable,u]),x=Lp(t),D=Z(function(){return cp({announce:p,autoScroller:m,dimensionMarshal:b,focusMarshal:x,getResponders:c,styleMarshal:d})},[p,m,b,x,c,d]);o.current=D;var S=B(function(){var F=Bt(o),H=F.getState();H.phase!=="IDLE"&&F.dispatch(Dn())},[]),I=B(function(){var F=Bt(o).getState();return F.isDragging||F.phase==="DROP_ANIMATING"},[]),k=Z(function(){return{isDragging:I,tryAbort:S}},[I,S]);r(k);var M=B(function(F){return ro(Bt(o).getState(),F)},[]),$=B(function(){return it(Bt(o).getState())},[]),Y=Z(function(){return{marshal:b,focus:x,contextId:t,canLift:M,isMovementAllowed:$,dragHandleUsageInstructionsId:f,registry:v}},[t,b,f,x,M,$,v]);return Rf({contextId:t,store:D,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(function(){return S},[S]),ie.createElement(Cr.Provider,{value:Y},ie.createElement(Dc,{context:Tn,store:D},e.children))}var Af=0;function kf(){return Z(function(){return""+Af++},[])}function Bf(e){var t=kf(),r=e.dragHandleUsageInstructions||nr.dragHandleUsageInstructions;return ie.createElement(du,null,function(n){return ie.createElement(Mf,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var vo=function(t){return function(r){return t===r}},Lf=vo("scroll"),Ff=vo("auto"),qa=function(t,r){return r(t.overflowX)||r(t.overflowY)},$f=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return qa(n,Lf)||qa(n,Ff)},Hf=function(){return!1},Gf=function e(t){return t==null?null:t===document.body?Hf()?t:null:t===document.documentElement?null:$f(t)?t:e(t.parentElement)},en=function(e){return{x:e.scrollLeft,y:e.scrollTop}},zf=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Wf=function(e){var t=Gf(e),r=zf(e);return{closestScrollable:t,isFixedOnPage:r}},Uf=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,c=e.closest,p=function(){if(!c)return null;var g=c.scrollSize,v=c.client,b=Zi({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:g,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:b,diff:{value:Se,displacement:Se}}}}(),f=i==="vertical"?mn:Mi,d=gt({page:s,withPlaceholder:null,axis:f,frame:p}),u={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:f,isEnabled:r,client:o,page:s,frame:p,subject:d};return u},Vf=function(t,r){var n=Si(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,s=i+r.scrollWidth,c={top:a,right:s,bottom:o,left:i},p=pn(c,n.border),f=fn({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return f},qf=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,p=n.closestScrollable,f=Vf(t,p),d=sr(f,a),u=function(){if(!p)return null;var v=Si(p),b={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:v,page:sr(v,a),scroll:en(p),scrollSize:b,shouldClipSubject:c}}(),g=Uf({descriptor:r,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:i,client:f,page:d,closest:u});return g},Yf={passive:!1},Xf={passive:!0},Ya=function(e){return e.shouldPublishImmediately?Yf:Xf};function fr(e){var t=w.useContext(e);return t||E(),t}var er=function(t){return t&&t.env.closestScrollable||null};function Jf(e){var t=w.useRef(null),r=fr(Cr),n=Rn("droppable"),a=r.registry,i=r.marshal,o=so(e),s=Z(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=w.useRef(s),p=Z(function(){return De(function(I,k){t.current||E();var M={x:I,y:k};i.updateDroppableScroll(s.id,M)})},[s.id,i]),f=B(function(){var I=t.current;return!I||!I.env.closestScrollable?Se:en(I.env.closestScrollable)},[]),d=B(function(){var I=f();p(I.x,I.y)},[f,p]),u=Z(function(){return Ht(d)},[d]),g=B(function(){var I=t.current,k=er(I);I&&k||E();var M=I.scrollOptions;if(M.shouldPublishImmediately){d();return}u()},[u,d]),v=B(function(I,k){t.current&&E();var M=o.current,$=M.getDroppableRef();$||E();var Y=Wf($),F={ref:$,descriptor:s,env:Y,scrollOptions:k};t.current=F;var H=qf({ref:$,descriptor:s,env:Y,windowScroll:I,direction:M.direction,isDropDisabled:M.isDropDisabled,isCombineEnabled:M.isCombineEnabled,shouldClipSubject:!M.ignoreContainerClipping}),W=Y.closestScrollable;return W&&(W.setAttribute(za.contextId,r.contextId),W.addEventListener("scroll",g,Ya(F.scrollOptions))),H},[r.contextId,s,g,o]),b=B(function(){var I=t.current,k=er(I);return I&&k||E(),en(k)},[]),m=B(function(){var I=t.current;I||E();var k=er(I);t.current=null,k&&(u.cancel(),k.removeAttribute(za.contextId),k.removeEventListener("scroll",g,Ya(I.scrollOptions)))},[g,u]),x=B(function(I){var k=t.current;k||E();var M=er(k);M||E(),M.scrollTop+=I.y,M.scrollLeft+=I.x},[]),D=Z(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:b,dragStopped:m,scroll:x}},[m,v,b,x]),S=Z(function(){return{uniqueId:n,descriptor:s,callbacks:D}},[D,s,n]);Le(function(){return c.current=S.descriptor,a.droppable.register(S),function(){t.current&&m(),a.droppable.unregister(S)}},[D,s,m,S,i,a.droppable]),Le(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Le(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function $r(){}var Xa={width:0,height:0,margin:mu},Kf=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?Xa:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},_f=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=Kf({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?$t.placeholder:null}};function Qf(e){var t=w.useRef(null),r=B(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,s=w.useState(e.animate==="open"),c=s[0],p=s[1];w.useEffect(function(){return c?n!=="open"?(r(),p(!1),$r):t.current?$r:(t.current=setTimeout(function(){t.current=null,p(!1)}),r):$r},[n,c,r]);var f=B(function(u){u.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),d=_f({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return ie.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":o,onTransitionEnd:f,ref:e.innerRef})}var Zf=ie.memo(Qf),Mn=ie.createContext(null),eg=function(e){gi(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(ie.PureComponent),Ja={dragging:5e3,dropAnimating:4500},tg=function(t,r){return r?$t.drop(r.duration):t?$t.snap:$t.fluid},rg=function(t,r){return t?r?Ut.opacity.drop:Ut.opacity.combining:null},ng=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function ag(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,s=ng(e),c=!!i,p=c?_r.drop(n,o):_r.moveTo(n),f={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:tg(s,i),transform:p,opacity:rg(o,c),zIndex:c?Ja.dropAnimating:Ja.dragging,pointerEvents:"none"};return f}function ig(e){return{transform:_r.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function og(e){return e.type==="DRAGGING"?ag(e):ig(e)}function sg(e,t,r){r===void 0&&(r=Se);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=Di(a,n),o=sr(i,r),s={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},p={descriptor:e,placeholder:s,displaceBy:c,client:i,page:o};return p}function lg(e){var t=Rn("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,c=Z(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:s}},[i,s,o]),p=B(function(g){var v=a();return v||E(),sg(r,v,g)},[r,a]),f=Z(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:p}},[r,p,c,t]),d=w.useRef(f),u=w.useRef(!0);Le(function(){return n.draggable.register(d.current),function(){return n.draggable.unregister(d.current)}},[n.draggable]),Le(function(){if(u.current){u.current=!1;return}var g=d.current;d.current=f,n.draggable.update(f,g)},[f,n.draggable])}function cg(e){e.preventDefault()}function ug(e){var t=w.useRef(null),r=B(function(F){t.current=F},[]),n=B(function(){return t.current},[]),a=fr(Cr),i=a.contextId,o=a.dragHandleUsageInstructionsId,s=a.registry,c=fr(Mn),p=c.type,f=c.droppableId,d=Z(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:f}},[e.draggableId,e.index,p,f]),u=e.children,g=e.draggableId,v=e.isEnabled,b=e.shouldRespectForcePress,m=e.canDragInteractiveElements,x=e.isClone,D=e.mapped,S=e.dropAnimationFinished;if(!x){var I=Z(function(){return{descriptor:d,registry:s,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:b,isEnabled:v}},[d,s,n,m,b,v]);lg(I)}var k=Z(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:cg}:null},[i,o,g,v]),M=B(function(F){D.type==="DRAGGING"&&D.dropping&&F.propertyName==="transform"&&S()},[S,D]),$=Z(function(){var F=og(D),H=D.type==="DRAGGING"&&D.dropping?M:null,W={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":g,style:F,onTransitionEnd:H},dragHandleProps:k};return W},[i,k,g,D,M,r]),Y=Z(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return u($,D.snapshot,Y)}var ho=function(e,t){return e===t},mo=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},dg=function(t){return t.combine?t.combine.draggableId:null},pg=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function fg(){var e=De(function(a,i){return{x:a,y:i}}),t=De(function(a,i,o,s,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:s,combineTargetFor:null}}),r=De(function(a,i,o,s,c,p,f){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:i,offset:a,dimension:o,forceShouldAnimate:f,snapshot:t(i,s,c,p,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var s=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],p=Be(i.impact),f=pg(i.impact),d=i.forceShouldAnimate;return r(e(s.x,s.y),i.movementMode,c,o.isClone,p,f,d)}if(i.phase==="DROP_ANIMATING"){var u=i.completed;if(u.result.draggableId!==o.draggableId)return null;var g=o.isClone,v=i.dimensions.draggables[o.draggableId],b=u.result,m=b.mode,x=mo(b),D=dg(b),S=i.dropDuration,I={duration:S,curve:Cn.drop,moveTo:i.newHomeClientOffset,opacity:D?Ut.opacity.drop:null,scale:D?Ut.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:v,dropping:I,draggingOver:x,combineWith:D,mode:m,forceShouldAnimate:null,snapshot:t(m,g,x,D,I)}}}return null};return n}function bo(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var gg={mapped:{type:"SECONDARY",offset:Se,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:bo(null)}};function vg(){var e=De(function(o,s){return{x:o,y:s}}),t=De(bo),r=De(function(o,s,c){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:c,snapshot:t(s)}}}),n=function(s){return s?r(Se,s,!0):null},a=function(s,c,p,f){var d=p.displaced.visible[s],u=!!(f.inVirtualList&&f.effected[s]),g=yr(p),v=g&&g.draggableId===s?c:null;if(!d){if(!u)return n(v);if(p.displaced.invisible[s])return null;var b=bt(f.displacedBy.point),m=e(b.x,b.y);return r(m,v,!0)}if(u)return n(v);var x=p.displacedBy.point,D=e(x.x,x.y);return r(D,v,d.shouldAnimate)},i=function(s,c){if(s.isDragging)return s.critical.draggable.id===c.draggableId?null:a(c.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var p=s.completed;return p.result.draggableId===c.draggableId?null:a(c.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return i}var hg=function(){var t=fg(),r=vg(),n=function(i,o){return t(i,o)||r(i,o)||gg};return n},mg={dropAnimationFinished:Ki},bg=yi(hg,mg,null,{context:Tn,pure:!0,areStatePropsEqual:ho})(ug);function xo(e){var t=fr(Mn),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:ie.createElement(bg,e)}function xg(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return ie.createElement(xo,L({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function yg(e){var t=w.useContext(Cr);t||E();var r=t.contextId,n=t.isMovementAllowed,a=w.useRef(null),i=w.useRef(null),o=e.children,s=e.droppableId,c=e.type,p=e.mode,f=e.direction,d=e.ignoreContainerClipping,u=e.isDropDisabled,g=e.isCombineEnabled,v=e.snapshot,b=e.useClone,m=e.updateViewportMaxScroll,x=e.getContainerForClone,D=B(function(){return a.current},[]),S=B(function(W){a.current=W},[]);B(function(){return i.current},[]);var I=B(function(W){i.current=W},[]),k=B(function(){n()&&m({maxScroll:to()})},[n,m]);Jf({droppableId:s,type:c,mode:p,direction:f,isDropDisabled:u,isCombineEnabled:g,ignoreContainerClipping:d,getDroppableRef:D});var M=ie.createElement(eg,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(W){var ee=W.onClose,P=W.data,U=W.animate;return ie.createElement(Zf,{placeholder:P,onClose:ee,innerRef:I,animate:U,contextId:r,onTransitionEnd:k})}),$=Z(function(){return{innerRef:S,placeholder:M,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}},[r,s,M,S]),Y=b?b.dragging.draggableId:null,F=Z(function(){return{droppableId:s,type:c,isUsingCloneFor:Y}},[s,Y,c]);function H(){if(!b)return null;var W=b.dragging,ee=b.render,P=ie.createElement(xo,{draggableId:W.draggableId,index:W.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(U,oe){return ee(U,oe,W)});return Ro.createPortal(P,x())}return ie.createElement(Mn.Provider,{value:F},o($,v),H())}var Hr=function(t,r){return t===r.droppable.type},Ka=function(t,r){return r.draggables[t.draggable.id]},wg=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=L({},t,{shouldAnimatePlaceholder:!1}),n=De(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=De(function(o,s,c,p,f,d){var u=f.descriptor.id,g=f.descriptor.droppableId===o;if(g){var v=d?{render:d,dragging:n(f.descriptor)}:null,b={isDraggingOver:c,draggingOverWith:c?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:v}}if(!s)return r;if(!p)return t;var m={isDraggingOver:c,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}}),i=function(s,c){var p=c.droppableId,f=c.type,d=!c.isDropDisabled,u=c.renderClone;if(s.isDragging){var g=s.critical;if(!Hr(f,g))return r;var v=Ka(g,s.dimensions),b=Be(s.impact)===p;return a(p,d,b,b,v,u)}if(s.phase==="DROP_ANIMATING"){var m=s.completed;if(!Hr(f,m.critical))return r;var x=Ka(m.critical,s.dimensions);return a(p,d,mo(m.result)===p,Be(m.impact)===p,x,u)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var D=s.completed;if(!Hr(f,D.critical))return r;var S=Be(D.impact)===p,I=!!(D.impact.at&&D.impact.at.type==="COMBINE"),k=D.critical.droppable.id===p;return S?I?t:r:k?t:r}return r};return i},Dg={updateViewportMaxScroll:Od};function Sg(){return document.body||E(),document.body}var Cg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Sg},yo=yi(wg,Dg,null,{context:Tn,pure:!0,areStatePropsEqual:ho})(yg);yo.defaultProps=Cg;function wo(e){let t=null;return()=>(t==null&&(t=e()),t)}function Ig(e,t){return e.filter(r=>r!==t)}function Eg(e,t){const r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class Ng{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=Eg(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=Ig(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class Pg{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const Do="__NATIVE_FILE__",So="__NATIVE_URL__",Co="__NATIVE_TEXT__",Io="__NATIVE_HTML__",_a=Object.freeze(Object.defineProperty({__proto__:null,FILE:Do,HTML:Io,TEXT:Co,URL:So},Symbol.toStringTag,{value:"Module"}));function Gr(e,t,r){const n=t.reduce((a,i)=>a||e.getData(i),"");return n??r}const tn={[Do]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Io]:{exposeProperties:{html:(e,t)=>Gr(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[So]:{exposeProperties:{urls:(e,t)=>Gr(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Co]:{exposeProperties:{text:(e,t)=>Gr(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Og(e,t){const r=tn[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new Pg(r);return n.loadDataTransfer(t),n}function zr(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(tn).filter(r=>{const n=tn[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const Tg=wo(()=>/firefox/i.test(navigator.userAgent)),Eo=wo(()=>!!window.safari);class Qa{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let s=r.length-1;if(t===r[s])return n[s];let c=0,p=o.length-1,f;for(;c<=p;){f=Math.floor(.5*(c+p));const g=r[f];if(g<t)c=f+1;else if(g>t)p=f-1;else return n[f]}s=Math.max(0,p);const d=t-r[s],u=d*d;return n[s]+a[s]*d+i[s]*u+o[s]*d*u}constructor(t,r){const{length:n}=t,a=[];for(let g=0;g<n;g++)a.push(g);a.sort((g,v)=>t[g]<t[v]?-1:1);const i=[],o=[];let s,c;for(let g=0;g<n-1;g++)s=t[g+1]-t[g],c=r[g+1]-r[g],i.push(s),o.push(c/s);const p=[o[0]];for(let g=0;g<i.length-1;g++){const v=o[g],b=o[g+1];if(v*b<=0)p.push(0);else{s=i[g];const m=i[g+1],x=s+m;p.push(3*x/((x+m)/v+(x+s)/b))}}p.push(o[o.length-1]);const f=[],d=[];let u;for(let g=0;g<p.length-1;g++){u=o[g];const v=p[g],b=1/i[g],m=v+p[g+1]-u-u;f.push((u-v-m)*b),d.push(m*b*b)}this.xs=t,this.ys=r,this.c1s=p,this.c2s=f,this.c3s=d}}const Rg=1;function No(e){const t=e.nodeType===Rg?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function tr(e){return{x:e.clientX,y:e.clientY}}function jg(e){var t;return e.nodeName==="IMG"&&(Tg()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function Mg(e,t,r,n){let a=e?t.width:r,i=e?t.height:n;return Eo()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function Ag(e,t,r,n,a){const i=jg(t),s=No(i?e:t),c={x:r.x-s.x,y:r.y-s.y},{offsetWidth:p,offsetHeight:f}=e,{anchorX:d,anchorY:u}=n,{dragPreviewWidth:g,dragPreviewHeight:v}=Mg(i,t,p,f),b=()=>{let M=new Qa([0,.5,1],[c.y,c.y/f*v,c.y+v-f]).interpolate(u);return Eo()&&i&&(M+=(window.devicePixelRatio-1)*v),M},m=()=>new Qa([0,.5,1],[c.x,c.x/p*g,c.x+g-p]).interpolate(d),{offsetX:x,offsetY:D}=a,S=x===0||x,I=D===0||D;return{x:S?x:m(),y:I?D:b()}}class kg{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function Bg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Bg(e,a,r[a])})}return e}class Lg{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Za({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return Za({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(_a).some(r=>_a[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Og(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&No(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=tr(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,c=zr(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const f=this.monitor.getSourceId(),d=this.sourceNodes.get(f),u=this.sourcePreviewNodes.get(f)||d;if(u){const{anchorX:g,anchorY:v,offsetX:b,offsetY:m}=this.getCurrentSourcePreviewNodeOptions(),S=Ag(d,u,o,{anchorX:g,anchorY:v},{offsetX:b,offsetY:m});s.setDragImage(u,S.x,S.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:s}=a,c=zr(s);c&&this.beginDragNativeItem(c,s)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:tr(a)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=tr(a),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else zr(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:tr(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new kg(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Ng(this.isNodeInDocument)}}const Fg=function(t,r,n){return new Lg(t,r,n)},$g=({elements:e,onReorder:t,onSelect:r,selectedElement:n})=>{const a=i=>{if(!i.destination)return;const o=Array.from(e),[s]=o.splice(i.source.index,1);o.splice(i.destination.index,0,s),t(o)};return l.jsxs("div",{className:"bg-white ",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Capas"}),l.jsx(Bf,{onDragEnd:a,children:l.jsx(yo,{droppableId:"layers",children:i=>l.jsxs("div",{...i.droppableProps,ref:i.innerRef,className:"space-y-2",children:[e.map((o,s)=>l.jsx(xg,{draggableId:o.id,index:s,children:c=>l.jsxs("div",{ref:c.innerRef,...c.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===o.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>r(o.id),children:[l.jsx("div",{...c.dragHandleProps,className:"mr-2",children:l.jsx(Qo,{size:16})}),o.type==="image"?l.jsx(Wr,{size:16,className:"mr-2"}):l.jsx(pt,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm truncate",children:o.type==="text"?o.content.substring(0,20):`Imagen ${s+1}`})]})},o.id)),i.placeholder]})})})]})},_e=[{id:"layout-1",name:"Cuatro fotos",template:"grid-cols-2 grid-rows-2",cells:4,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square","rounded-sm","rounded-lg","rounded-full","rounded-rect"]},{name:"Formas",masks:["heart","star","hexagon","triangle","diamond","badge","speech","burst"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave","diagonal","bevel","poster","inner-frame"]},{name:"Creativas",masks:["leaf","cloud","flower","ornate","blob1","blob2","blob3"]}]},{id:"layout-2",name:"Dos fotos horizontales",template:"grid-cols-1 grid-rows-2",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-3",name:"Tres fotos mixtas",template:"grid-cols-3 [grid-template-columns:1fr_2fr]",cells:3,maskCategories:[{name:"Formas",masks:["heart","star","hexagon","triangle"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-4",name:"Dos fotos verticales",template:"grid-cols-2 grid-rows-1",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded"]},{name:"Formas",masks:["heart","star","hexagon"]}]},{id:"layout-5",name:"Mosaico",template:"grid-cols-3 grid-rows-2",cells:6,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]},{id:"layout-6",name:"Individual",template:"grid-cols-1 grid-rows-1",cells:1,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]}];function Hg({id:e,elements:t=[],selectedElement:r,onSelectElement:n,onAddElement:a,onUpdateElement:i,onDeleteElement:o,availableMasks:s=[],workspaceSize:c={width:800,height:600},cellSize:p="auto"}){const[{isOver:f},d]=vc(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:v=>{if(v.files){const b=new FileReader;b.onload=m=>{var x;if((x=m.target)!=null&&x.result){const D={id:`img-${Date.now()}`,type:"image",content:m.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(D),n(D.id,e)}},b.readAsDataURL(v.files[0])}},collect:v=>({isOver:!!v.isOver({shallow:!0})})})),u=()=>{const v=document.createElement("input");v.type="file",v.accept="image/*",v.onchange=b=>{if(b.target.files&&b.target.files[0]){const m=new FileReader;m.onload=x=>{var D;if((D=x.target)!=null&&D.result){const S={id:`img-${Date.now()}`,type:"image",content:x.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(S),n(S.id,e)}},m.readAsDataURL(b.target.files[0])}},v.click()},g=t.length>0;return l.jsx("div",{ref:d,className:`relative rounded-lg overflow-hidden w-full h-full ${f?"ring-2 ring-purple-500 bg-transparent":""} ${g?"bg-transparent":"border-2 border-dashed border-gray-300 bg-transparent hover:border-gray-400 hover:bg-gray-100"}`,onClick:v=>{v.target===v.currentTarget&&n(null,e)},style:{isolation:"isolate",background:g?"transparent":void 0,minHeight:"120px"},children:t.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer transition-colors",onClick:v=>{v.stopPropagation(),u()},children:[l.jsx(Lo,{className:"h-8 w-8 text-gray-300"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Haz clic o arrastra una imagen"})]}):t.map(v=>l.jsx("div",{className:"absolute inset-0",onClick:b=>b.stopPropagation(),children:v.type==="image"?l.jsx(hc,{element:{...v,workspaceSize:c},isSelected:r===v.id,onSelect:()=>n(v.id,e),onUpdate:b=>i(v.id,b),onDelete:()=>o(v.id),availableMasks:s}):l.jsx(mc,{element:v,workspaceSize:c,isSelected:r===v.id,onSelect:()=>n(v.id,e),onUpdate:b=>i(v.id,b),onDelete:()=>o(v.id)})},v.id))})}const Gg=({element:e,onUpdate:t,selectedImage:r})=>{var n;return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),l.jsx(Ke,{label:"Opacidad",value:[((n=e.filters)==null?void 0:n.opacity)||100],min:0,max:100,onValueChange:a=>t({filters:{...e.filters,opacity:a[0]}})})]})},zg=({onSelectPreset:e,selectedImage:t})=>{const r=n=>({filter:`
            brightness(${n.brightness}%)
            contrast(${n.contrast}%)
            saturate(${n.saturation}%)
            sepia(${n.tint}%)
            hue-rotate(${n.hue}deg)
            blur(${n.blur}px)
        `});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:Ds.map(n=>l.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>e(n.filters),children:[l.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:t?l.jsx("img",{src:t.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r(n.filters)}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:l.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:l.jsx(jo,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},Wg=({selectedMask:e,onSelect:t,availableMasks:r=[],selectedImage:n})=>{var s;const[a,i]=w.useState("Básicas"),o={};return ir.forEach(c=>{o[c.category]||(o[c.category]=[]),(r.includes(c.id)||c.id==="none")&&o[c.category].push(c)}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Máscaras de imagen"}),l.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 border-b",children:Object.keys(o).map(c=>o[c].length>0&&l.jsx("button",{onClick:()=>i(c),className:`px-4 py-2 text-sm rounded-t-md transition font-medium ${a===c?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600"}`,children:c},c))}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:(s=o[a])==null?void 0:s.map(c=>l.jsxs("div",{onClick:()=>t(c.id),className:`cursor-pointer border rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all ${e===c.id?"ring-2 ring-purple-500 border-purple-300":"border-gray-200"}`,children:[l.jsx("div",{className:"aspect-square bg-white flex items-center justify-center p-2",children:l.jsx("img",{src:n==null?void 0:n.content,alt:c.name,className:`w-full h-full object-cover ${c.class}`})}),l.jsx("p",{className:"text-center text-sm text-gray-700 p-1 truncate",children:c.name})]},c.id))})]})},Ug=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],Vg=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],qg=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],Yg=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],Xg=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],Jg=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],Kg=({element:e,onUpdate:t,onClose:r})=>{var ge,ae,Ee,je,be,Me,Te,Ne,X,xe,ve,le,A,Q,he,de,ye,re,we,Pe,Fe,$e,j,ne,pe,me,Ce,Oe,wt,Dt,St,Ct,It,Et,Nt,Pt,Ot,Tt,Rt,jt,Mt;const[n,a]=w.useState(!1),[i,o]=w.useState(!1),[s,c]=w.useState(!1),[p,f]=w.useState(!1),[d,u]=w.useState(!1),[g,v]=w.useState(!1),[b,m]=w.useState(!1),[x,D]=w.useState(!1),[S,I]=w.useState("basic"),[k,M]=w.useState(((ge=e==null?void 0:e.style)==null?void 0:ge.color)||"#000000"),[$,Y]=w.useState(((ae=e==null?void 0:e.style)==null?void 0:ae.backgroundColor)||"transparent"),F=w.useRef(null),H=w.useRef(null),W=w.useRef(null),ee=w.useRef(null),P=w.useRef(null),U=w.useRef(null),oe=w.useRef(null);w.useEffect(()=>{function C(_){F.current&&!F.current.contains(_.target)&&a(!1),H.current&&!H.current.contains(_.target)&&o(!1),W.current&&!W.current.contains(_.target)&&f(!1),ee.current&&!ee.current.contains(_.target)&&u(!1),P.current&&!P.current.contains(_.target)&&v(!1),U.current&&!U.current.contains(_.target)&&c(!1),oe.current&&!oe.current.contains(_.target)&&m(!1)}return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const R=(C,_)=>{t({style:{...e==null?void 0:e.style,[C]:_}})},fe=(C,_,He)=>{var Xe;t({style:{...e==null?void 0:e.style,[C]:((Xe=e==null?void 0:e.style)==null?void 0:Xe[C])===_?He:_}})},ue=(C,_)=>{R(C,_)};if(!e)return null;const K=({active:C,onClick:_,icon:He,title:Xe,className:lt=""})=>l.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${C?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${lt}`,onClick:_,title:Xe,children:He}),se=({onClick:C,icon:_,text:He,isOpen:Xe,title:lt})=>l.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${Xe?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:C,title:lt,children:[_&&l.jsx("span",{className:"flex-shrink-0",children:_}),He&&l.jsx("span",{className:"text-sm truncate",children:He}),l.jsx($o,{className:"h-3.5 w-3.5 opacity-70"})]});return l.jsx("div",{className:"  bg-white  rounded-lg shadow-sm p-4  border-gray-200  z-50 transition-all duration-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto p-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[l.jsx(pt,{className:"h-4 w-4"}),"Formato de texto"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>D(!x),title:x?"Modo compacto":"Modo expandido",children:x?l.jsx(us,{className:"h-4 w-4"}):l.jsx(cs,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:r,title:"Cerrar",children:l.jsx(Fo,{className:"h-4 w-4"})})]})]}),x&&l.jsxs("div",{className:"flex border-b mb-2",children:[l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${S==="basic"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("basic"),children:"Básico"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${S==="paragraph"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("paragraph"),children:"Párrafo"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${S==="advanced"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("advanced"),children:"Avanzado"})]}),(S==="basic"||!x)&&l.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[l.jsx("div",{className:"relative",ref:W,children:l.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((Ee=e.style)==null?void 0:Ee.fontFamily)||"Arial",onChange:C=>{R("fontFamily",C.target.value)},children:Ug.map(C=>l.jsx("option",{value:C.value,style:{fontFamily:C.value},children:C.name},C.value))})}),l.jsxs("div",{className:"relative",ref:ee,children:[l.jsx(se,{onClick:()=>u(!d),text:((je=e.style)==null?void 0:je.fontSize)||"16px",isOpen:d,title:"Tamaño de fuente"}),d&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:Vg.map(C=>l.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{R("fontSize",C),u(!1)},children:C},C))})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(K,{active:((be=e.style)==null?void 0:be.fontWeight)==="bold",onClick:()=>fe("fontWeight","bold","normal"),icon:l.jsx(Vo,{className:"h-4 w-4"}),title:"Negrita"}),l.jsx(K,{active:((Me=e.style)==null?void 0:Me.fontStyle)==="italic",onClick:()=>fe("fontStyle","italic","normal"),icon:l.jsx(os,{className:"h-4 w-4"}),title:"Cursiva"}),l.jsx(K,{active:((Te=e.style)==null?void 0:Te.textDecoration)==="underline",onClick:()=>fe("textDecoration","underline","none"),icon:l.jsx(ys,{className:"h-4 w-4"}),title:"Subrayado"}),l.jsx(K,{active:((Ne=e.style)==null?void 0:Ne.textDecoration)==="line-through",onClick:()=>fe("textDecoration","line-through","none"),icon:l.jsx(ms,{className:"h-4 w-4"}),title:"Tachado"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(K,{active:((X=e.style)==null?void 0:X.textAlign)==="left",onClick:()=>R("textAlign","left"),icon:l.jsx(Wo,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),l.jsx(K,{active:((xe=e.style)==null?void 0:xe.textAlign)==="center",onClick:()=>R("textAlign","center"),icon:l.jsx(Go,{className:"h-4 w-4"}),title:"Centrar"}),l.jsx(K,{active:((ve=e.style)==null?void 0:ve.textAlign)==="right",onClick:()=>R("textAlign","right"),icon:l.jsx(Uo,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),l.jsx(K,{active:((le=e.style)==null?void 0:le.textAlign)==="justify",onClick:()=>R("textAlign","justify"),icon:l.jsx(zo,{className:"h-4 w-4"}),title:"Justificar"})]}),l.jsxs("div",{className:"relative",ref:F,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:k}}),l.jsx(Mo,{className:"h-4 w-4"})]}),n&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:k}})]}),l.jsx("input",{type:"color",value:k,onChange:C=>{M(C.target.value),R("color",C.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),l.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:Yg.map(C=>l.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${k===C.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:C.color},onClick:()=>{M(C.color),R("color",C.color)},title:C.name},C.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:H,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>o(!i),title:"Color de fondo",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:$,backgroundImage:$==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),l.jsx(ds,{className:"h-4 w-4"})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:$,backgroundImage:$==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),l.jsx("input",{type:"color",value:$==="transparent"?"#ffffff":$,onChange:C=>{Y(C.target.value),R("backgroundColor",C.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Xg.map(C=>l.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${$===C.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:C.color,backgroundImage:C.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{Y(C.color),R("backgroundColor",C.color)},title:C.name},C.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:P,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>v(!g),title:"Transformación de texto",children:l.jsx(Yo,{className:"h-4 w-4"})}),g&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:qg.map(C=>{var _;return l.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((_=e.style)==null?void 0:_.textTransform)===C.value?"bg-gray-100":""}`,style:{textTransform:C.value},onClick:()=>{R("textTransform",C.value),v(!1)},children:C.label},C.value)})})]}),l.jsxs("div",{className:"relative",ref:oe,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>m(!b),title:"Encabezados",children:l.jsx(pt,{className:"h-4 w-4"})}),b&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","32px"),R("fontWeight","bold"),m(!1)},children:[l.jsx(Zo,{className:"h-4 w-4"})," ","Encabezado 1"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","24px"),R("fontWeight","bold"),m(!1)},children:[l.jsx(es,{className:"h-4 w-4"})," ","Encabezado 2"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","20px"),R("fontWeight","bold"),m(!1)},children:[l.jsx(ts,{className:"h-4 w-4"})," ","Encabezado 3"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","16px"),R("fontWeight","bold"),m(!1)},children:[l.jsx(rs,{className:"h-4 w-4"})," ","Encabezado 4"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{R("fontSize","16px"),R("fontWeight","normal"),m(!1)},children:[l.jsx(pt,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(K,{active:((A=e.style)==null?void 0:A.verticalAlign)==="super",onClick:()=>fe("verticalAlign","super","baseline"),icon:l.jsx(xs,{className:"h-4 w-4"}),title:"Superíndice"}),l.jsx(K,{active:((Q=e.style)==null?void 0:Q.verticalAlign)==="sub",onClick:()=>fe("verticalAlign","sub","baseline"),icon:l.jsx(bs,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),x&&S==="paragraph"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(K,{active:((he=e.style)==null?void 0:he.listStyleType)==="disc",onClick:()=>{var C;return R("listStyleType",((C=e.style)==null?void 0:C.listStyleType)==="disc"?"none":"disc")},icon:l.jsx(ls,{className:"h-4 w-4"}),title:"Lista con viñetas"}),l.jsx(K,{active:((de=e.style)==null?void 0:de.listStyleType)==="decimal",onClick:()=>{var C;return R("listStyleType",((C=e.style)==null?void 0:C.listStyleType)==="decimal"?"none":"decimal")},icon:l.jsx(ss,{className:"h-4 w-4"}),title:"Lista numerada"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(K,{onClick:()=>{var _;const C=Number.parseInt(((_=e.style)==null?void 0:_.textIndent)||"0");R("textIndent",`${C+20}px`)},icon:l.jsx(is,{className:"h-4 w-4"}),title:"Aumentar sangría"}),l.jsx(K,{onClick:()=>{var _;const C=Number.parseInt(((_=e.style)==null?void 0:_.textIndent)||"0");C>=20&&R("textIndent",`${C-20}px`)},icon:l.jsx(as,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(aa,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((ye=e.style)==null?void 0:ye.lineHeight)||"1.5"),onChange:C=>ue("lineHeight",C.target.value),className:"w-24"}),l.jsx(Ur,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((re=e.style)==null?void 0:re.lineHeight)||"1.5"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(aa,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((we=e.style)==null?void 0:we.letterSpacing)||"0"),onChange:C=>ue("letterSpacing",`${C.target.value}px`),className:"w-24"}),l.jsx(Ur,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((Pe=e.style)==null?void 0:Pe.letterSpacing)||"0px"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(K,{active:((Fe=e.style)==null?void 0:Fe.fontStyle)==="italic"&&(($e=e.style)==null?void 0:$e.paddingLeft)==="20px"&&((j=e.style)==null?void 0:j.borderLeft)==="4px solid #ccc",onClick:()=>{var C,_,He;((C=e.style)==null?void 0:C.fontStyle)==="italic"&&((_=e.style)==null?void 0:_.paddingLeft)==="20px"&&((He=e.style)==null?void 0:He.borderLeft)==="4px solid #ccc"?(R("fontStyle","normal"),R("paddingLeft","0"),R("borderLeft","none")):(R("fontStyle","italic"),R("paddingLeft","20px"),R("borderLeft","4px solid #ccc"))},icon:l.jsx(ps,{className:"h-4 w-4"}),title:"Formato de cita"}),l.jsx(K,{active:((ne=e.style)==null?void 0:ne.fontFamily)==="'Courier New', monospace"&&((pe=e.style)==null?void 0:pe.backgroundColor)==="#f5f5f5"&&((me=e.style)==null?void 0:me.padding)==="2px 4px",onClick:()=>{var C,_;((C=e.style)==null?void 0:C.fontFamily)==="'Courier New', monospace"&&((_=e.style)==null?void 0:_.backgroundColor)==="#f5f5f5"?(R("fontFamily","Arial, sans-serif"),R("backgroundColor","transparent"),R("padding","0")):(R("fontFamily","'Courier New', monospace"),R("backgroundColor","#f5f5f5"),R("padding","2px 4px"))},icon:l.jsx(Xo,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),x&&S==="advanced"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"relative",ref:U,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>c(!s),title:"Opciones de borde",children:[l.jsx(hs,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Bordes"})]}),s&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),l.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((Ce=e.style)==null?void 0:Ce.borderStyle)||"none",onChange:C=>R("borderStyle",C.target.value),children:Jg.map(C=>l.jsx("option",{value:C.value,children:C.label},C.value))})]}),((Oe=e.style)==null?void 0:Oe.borderStyle)&&((wt=e.style)==null?void 0:wt.borderStyle)!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((Dt=e.style)==null?void 0:Dt.borderWidth)||"1"),onChange:C=>R("borderWidth",`${C.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((St=e.style)==null?void 0:St.borderWidth)||"1px"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:((Ct=e.style)==null?void 0:Ct.borderColor)||"#000000",onChange:C=>R("borderColor",C.target.value),className:"w-8 h-8"}),l.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(C=>l.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:C},onClick:()=>R("borderColor",C)},C))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((It=e.style)==null?void 0:It.borderRadius)||"0"),onChange:C=>R("borderRadius",`${C.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((Et=e.style)==null?void 0:Et.borderRadius)||"0px"})]})]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),l.jsx("button",{className:`px-2 py-1 text-xs rounded ${(Nt=e.style)!=null&&Nt.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var C;(C=e.style)!=null&&C.textShadow?R("textShadow",""):R("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(Pt=e.style)!=null&&Pt.textShadow?"Quitar":"Añadir"}),((Ot=e.style)==null?void 0:Ot.textShadow)&&l.jsxs("select",{className:"text-xs p-1 border rounded",value:(Tt=e.style)==null?void 0:Tt.textShadow,onChange:C=>R("textShadow",C.target.value),children:[l.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),l.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),l.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),l.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),l.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((Rt=e.style)==null?void 0:Rt.opacity)||"1"),onChange:C=>ue("opacity",C.target.value),className:"w-24"})}),l.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((jt=e.style)==null?void 0:jt.opacity)||"1")*100),"%"]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((Mt=e.style)==null?void 0:Mt.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var C;((C=e.style)==null?void 0:C.backgroundColor)==="#ffff00"?R("backgroundColor","transparent"):R("backgroundColor","#ffff00")},title:"Resaltar texto",children:[l.jsx(ns,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[l.jsx(K,{onClick:()=>{alert("Función deshacer (implementar)")},icon:l.jsx(vs,{className:"h-4 w-4"}),title:"Deshacer"}),l.jsx(K,{onClick:()=>{alert("Función rehacer (implementar)")},icon:l.jsx(ti,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},_g=({currentSize:e,onSizeChange:t,presetData:r,workspaceDimensions:n})=>((()=>{if(r!=null&&r.canvas_config){const i=typeof r.canvas_config=="string"?JSON.parse(r.canvas_config):r.canvas_config;let o=i.width,s=i.height;return{width:o,height:s,unit:"cm"}}return null})(),l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:n&&l.jsxs("div",{className:"text-xs text-gray-500 ml-2",children:[l.jsxs("div",{children:["Actual: ",n.width,"x",n.height," px"]}),n.originalWidth&&l.jsxs("div",{children:["Original: ",n.originalWidth,"x",n.originalHeight," cm"]}),n.originalWidthPx&&l.jsxs("div",{children:["Original en px: ",n.originalWidthPx,"x",n.originalHeightPx," px"]}),n.scale&&n.scale<1&&l.jsxs("div",{children:["Escala: ",Math.round(n.scale*100),"%"]})]})}));function yv({albumId:e,itemId:t,presetId:r,pages:n}){var Dt,St,Ct,It,Et,Nt,Pt,Ot,Tt,Rt,jt,Mt,C,_,He,Xe,lt,An,kn,Bn,Ln,Fn,$n,Hn,Gn,zn,Wn,Un,Vn;const[a,i]=w.useState(null),[o,s]=w.useState(null),[c,p]=w.useState(!0),[f,d]=w.useState(null),[u,g]=w.useState([]),[v,b]=w.useState(0),[m,x]=w.useState(null),[D,S]=w.useState(null),[I,k]=w.useState("elements"),[M,$]=w.useState("basic"),[Y,F]=w.useState([JSON.stringify(u)]),[H,W]=w.useState(0),[ee,P]=w.useState(!1),[U,oe]=w.useState(null),[R,fe]=w.useState({}),[ue,K]=w.useState(!1),[se,ge]=w.useState({elementId:null,cellId:null}),[ae,Ee]=w.useState(!1),je=()=>{if(e&&t&&r)return{albumId:e,itemId:t,presetId:r,pages:n||20};const h=new URLSearchParams(window.location.search);return{albumId:h.get("album"),itemId:h.get("item"),presetId:h.get("preset"),pages:parseInt(h.get("pages"))||20}},be=async()=>{try{p(!0),d(null);const h=je();if(console.log("🔍 Editor params:",h),!h.albumId||!h.presetId)throw new Error("Faltan parámetros requeridos: albumId y presetId");const y=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",N=`${y}/api/albums/${h.albumId}`,O=`${y}/api/item-presets/${h.presetId}`;console.log("🌐 Using endpoints:",{albumEndpoint:N,presetEndpoint:O,baseUrl:y}),console.log("📚 Cargando álbum...");const T=await fetch(N,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("📚 Album response status:",T.status),!T.ok){const Ve=await T.text();throw console.error("❌ Album response error:",Ve),new Error(`Error al cargar álbum: ${T.status} ${T.statusText}`)}const V=await T.json();console.log("✅ Album response data:",V);const z=V.data||V;console.log("📚 Album loaded:",z),i(z),console.log("🎨 Cargando preset...");const G=await fetch(O,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("🎨 Preset response status:",G.status),!G.ok){const Ve=await G.text();throw console.error("❌ Preset response error:",Ve),new Error(`Error al cargar preset: ${G.status} ${G.statusText}`)}const ce=await G.json();console.log("✅ Preset response data:",ce);const Je=ce.data||ce;console.log("🎨 Preset loaded:",Je),s(Je),console.log("📄 Creando páginas..."),await Me(Je,z,h.pages)}catch(h){console.error("💥 Error loading album data:",h),d(h.message)}finally{p(!1)}},Me=(h,y,N)=>{try{console.log("Creating pages from preset:",h),console.log("Album data:",y),console.log("Total pages requested:",N);const O=[];if(!h.cover_image||!h.content_layer_image||!h.final_layer_image)throw new Error("El preset no tiene todas las imágenes requeridas");const T=G=>G.startsWith("http")||G.startsWith("/storage/")?G:`/storage/${G}`;console.log(h);const V={id:"page-cover",type:"cover",layout:"layout-1",cells:[{id:"cell-cover-1",elements:[{id:"cover-base",type:"image",content:`/storage/images/item_preset/${h.cover_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0},...y.cover_image_path?[{id:"cover-custom",type:"image",content:`/storage/images/albums/covers/${y.cover_image_path}`,position:{x:10,y:10},size:{width:80,height:80},filters:{},mask:"none",zIndex:2}]:[]]}]};O.push(V);for(let G=1;G<=N;G++){const ce={id:`page-content-${G}`,type:"content",pageNumber:G,layout:"layout-1",cells:[{id:`cell-content-${G}-1`,elements:[{id:`content-base-${G}`,type:"image",content:`/storage/images/item_preset/${h.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};O.push(ce)}const z={id:"page-final",type:"final",layout:"layout-1",cells:[{id:"cell-final-1",elements:[{id:"final-base",type:"image",content:`/storage/images/item_preset/${h.final_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};O.push(z),console.log("✅ Created pages:",O),g(O),b(0),h.canvas_config&&(console.log("📐 Canvas config found, setting workspace to preset dimensions"),me("preset"))}catch(O){throw console.error("❌ Error creating pages:",O),O}};w.useEffect(()=>{be()},[]);const Te=()=>{if(u.length===0)return"Cargando...";const h=u[v];if(!h)return"Página";switch(h.type){case"cover":return"Portada";case"content":return`Página ${h.pageNumber}`;case"final":return"Contraportada";default:return`Página ${v+1}`}},Ne=()=>{if(u.length===0)return!1;const h=u[v];return(h==null?void 0:h.type)==="content"},X=w.useCallback(()=>{if(!m||!D||u.length===0)return null;const h=u[v];if(!h)return null;const y=h.cells.find(N=>N.id===D);return y?y.elements.find(N=>N.id===m):null},[m,D,u,v]),xe=(h,y)=>{if(y){const N=u[v].cells.find(T=>T.id===y),O=N==null?void 0:N.elements.find(T=>T.id===h);if(O!=null&&O.locked){console.log("Elemento bloqueado, no se puede seleccionar");const T=document.createElement("div");T.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",T.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(T),setTimeout(()=>{document.body.contains(T)&&document.body.removeChild(T)},3e3);return}}if(y&&S(y),x(h),h){const N=u[v].cells.find(T=>T.id===(y||D)),O=N==null?void 0:N.elements.find(T=>T.id===h);(O==null?void 0:O.type)==="image"?(oe(O),console.log(U)):(O==null?void 0:O.type)==="text"?(K(!0),ge({elementId:h,cellId:y||D})):K(!1)}else K(!1),oe(null)},ve=()=>{if(u.length===0)return _e[0];const h=u[v];return h&&_e.find(y=>y.id===h.layout)||_e[0]},le=h=>{g(h);const y=[...Y.slice(0,H+1),JSON.stringify(h)];F(y),W(y.length-1)},A=h=>{const y=_e.find(V=>V.id===h);if(!y)return;const N=[...u],O=N[v],T=Array.from({length:y.cells}).map((V,z)=>O.cells[z]||{id:`cell-${O.id}-${z+1}`,elements:[]});N[v]={...O,layout:h,cells:T},le(N),x(null),S(null)},Q=()=>{if(!o)return;const h=u.filter(ce=>ce.type==="content"),N=(h.length>0?Math.max(...h.map(ce=>ce.pageNumber)):0)+1,O=`page-content-${N}`,T={id:O,type:"content",pageNumber:N,layout:"layout-1",cells:[{id:`cell-content-${N}-1`,elements:[{id:`content-base-${N}`,type:"image",content:`/storage/${o.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]},V=[...u],z=V.findIndex(ce=>ce.type==="final");z>-1?V.splice(z,0,T):V.push(T),le(V);const G=V.findIndex(ce=>ce.id===O);b(G)},he=()=>{if(u.length<=3)return;const h=u[v];if(h.type==="cover"||h.type==="final"){console.log("No se puede eliminar la portada o contraportada");return}if(!confirm(`¿Estás seguro de eliminar la ${h.type==="content"?`página ${h.pageNumber}`:"página"}?`))return;const y=u.filter((N,O)=>O!==v);le(y),b(Math.min(v,y.length-1))},de=()=>{const h=u[v];if(h.type!=="content"){console.log("Solo se pueden duplicar páginas de contenido");return}const N=Math.max(...u.filter(G=>G.type==="content").map(G=>G.pageNumber))+1,O={...JSON.parse(JSON.stringify(h)),id:`page-content-${N}`,pageNumber:N,cells:h.cells.map(G=>({...G,id:`cell-content-${N}-${G.id.split("-").pop()}`,elements:G.elements.map(ce=>({...ce,id:`${ce.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}))},T=[...u],V=T.findIndex(G=>G.type==="final");V>-1?T.splice(V,0,O):T.push(O),le(T);const z=T.findIndex(G=>G.id===O.id);b(z)},ye=(h,y)=>{const N=[...u],O=N[v].cells.findIndex(T=>T.id===h);O!==-1&&(N[v].cells[O].elements.push(y),le(N),x(y.id),S(h))},re=(h,y,N,O=!1)=>{const T=[...u],V=T[v].cells.findIndex(z=>z.id===h);if(V!==-1){if(O)T[v].cells[V].elements.push({...T[v].cells[V].elements.find(z=>z.id===y),...N});else{const z=T[v].cells[V].elements.findIndex(G=>G.id===y);z!==-1&&(T[v].cells[V].elements[z]={...T[v].cells[V].elements[z],...N})}le(T)}},we=(h,y)=>{const N=[...u],O=N[v].cells.findIndex(T=>T.id===h);O!==-1&&(N[v].cells[O].elements=N[v].cells[O].elements.filter(T=>T.id!==y),le(N),m===y&&x(null))},Pe=()=>{H>0&&(W(H-1),g(JSON.parse(Y[H-1])),x(null),S(null))},Fe=()=>{H<Y.length-1&&(W(H+1),g(JSON.parse(Y[H+1])),x(null),S(null))},$e=()=>{P(!ee)},j=()=>{const y={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:.05,y:.05},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};D?ye(D,y):console.log("Selecciona una celda primero")},ne=h=>{var y;!m||!D||re(D,m,{filters:{...(y=X())==null?void 0:y.filters,...h}})},[pe,me]=w.useState("preset"),Ce=()=>{if(o!=null&&o.canvas_config){const G=typeof o.canvas_config=="string"?JSON.parse(o.canvas_config):o.canvas_config;let ce=G.width,Je=G.height,Ve=ce*37.8,nt=Je*37.8;if(Ve&&nt){const Yt=window.innerWidth*.6,Xt=window.innerHeight*.7,Jt=Yt/Ve,Kt=Xt/nt,ct=Math.min(Jt,Kt,1);return{width:Math.round(Ve*ct),height:Math.round(nt*ct),originalWidth:ce,originalHeight:Je,scale:ct,unit:"cm",originalWidthPx:Math.round(Ve),originalHeightPx:Math.round(nt)}}}const h={square:{width:600,height:600},landscape:{width:1280,height:720},portrait:{width:600,height:800},wide:{width:1200,height:600},tall:{width:540,height:960},preset:{width:800,height:600}},y=h[pe]||h.preset,N=window.innerWidth*.6,O=window.innerHeight*.7,T=N/y.width,V=O/y.height,z=Math.min(T,V,1);return{width:Math.round(y.width*z),height:Math.round(y.height*z),originalWidth:y.width,originalHeight:y.height,scale:z,unit:"px"}},[Oe,wt]=w.useState({width:800,height:600});return w.useEffect(()=>{const h=Ce();wt(h)},[o,pe]),w.useEffect(()=>{const h=()=>{const y=Ce();wt(y)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[o,pe]),w.useEffect(()=>{const h=async()=>{const N={};await Promise.all(u.map(async(O,T)=>{const V=document.getElementById(`page-${O.id}`);if(V)try{const z=await ko(V,{scale:.2,logging:!1,useCORS:!0,allowTaint:!0,ignoreElements:G=>G.classList.contains("ignore-thumbnail")});N[O.id]=z.toDataURL()}catch(z){console.error("Error generating thumbnail:",z),N[O.id]=null}})),fe({...R,...N})},y=setTimeout(()=>{h()},500);return()=>clearTimeout(y)},[u,v]),l.jsx(Hl,{backend:Fg,children:c?l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cargando Editor"}),l.jsx("p",{className:"text-gray-600",children:"Preparando tu álbum personalizado..."})]})}):u.length===0||f?l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-4",children:f||"No se pudieron cargar los datos del álbum."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),l.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Volver"})]})]})}):l.jsx("div",{className:"bg-white py-4",children:l.jsxs("div",{className:"flex flex-col min-h-screen  mx-auto  max-w-[82rem]",children:[l.jsxs("header",{className:"border-b bg-white py-4 flex items-center justify-between ",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(Ye,{variant:"ghost",size:"sm",children:[l.jsx(Ho,{className:"h-5 w-5 mr-1"}),"Regresar"]}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:(a==null?void 0:a.title)||"Álbum Sin Título"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("p",{className:"text-sm text-gray-600",children:[Te()," ",u.length>0&&`• ${u.length} páginas total`]}),u.length>0&&l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Ne()?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:Ne()?"✏️ Editable":"🔒 Solo vista"})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ye,{variant:"secondary",onClick:$e,icon:l.jsx(Jo,{className:"h-4 w-4"}),children:ee?"Editar":"Vista previa"}),l.jsx(Ye,{variant:"secondary",onClick:()=>Ee(!0),icon:l.jsx(qo,{className:"h-4 w-4"}),children:"Vista de Álbum"})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx("aside",{className:"w-64 border-r bg-white p-4 overflow-y-auto shadow-sm",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex border-b pb-4",children:[l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${I==="elements"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>k("elements"),children:"Elementos"}),l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${I==="filters"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>k("filters"),children:"Filtros"})]}),I==="elements"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Layouts"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:_e.map(h=>l.jsxs("div",{className:`border rounded-md p-1 cursor-pointer hover:border-purple-500 ${u[v].layout===h.id?"border-purple-500 ring-1 ring-purple-200":""}`,onClick:()=>A(h.id),children:[l.jsx("div",{className:`grid ${h.template} gap-1 h-20`,children:Array.from({length:h.cells}).map((y,N)=>l.jsx("div",{className:"bg-gray-100 rounded-sm flex items-center justify-center",children:l.jsx(Wr,{className:"h-3 w-3 text-gray-400"})},N))}),l.jsx("p",{className:"text-xs text-center mt-1 truncate",children:h.name})]},h.id))})]}),l.jsx("div",{children:l.jsx($g,{elements:((Dt=u[v].cells.find(h=>h.id===D))==null?void 0:Dt.elements)||[],onReorder:h=>{const y=[...u],N=y[v].cells.findIndex(O=>O.id===D);N!==-1&&(y[v].cells[N].elements=h,le(y))},onSelect:xe,selectedElement:m})})]}),I==="filters"&&l.jsx(l.Fragment,{children:m?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl w-full max-w-md mx-auto",children:[{key:"basic",label:"Básicos"},{key:"transform",label:"Avanzados"}].map(h=>l.jsx("button",{onClick:()=>$(h.key),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200
                ${M===h.key?"bg-purple-600 text-white shadow":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:h.label},h.key))}),M==="basic"&&l.jsxs(l.Fragment,{children:[l.jsx(zg,{onSelectPreset:ne,selectedImage:U}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes básicos"}),l.jsx(Ke,{label:"Brillo",value:[((Ct=(St=X())==null?void 0:St.filters)==null?void 0:Ct.brightness)||100],min:0,max:200,onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,brightness:h[0]}})}}),l.jsx(Ke,{label:"Contraste",value:[((Et=(It=X())==null?void 0:It.filters)==null?void 0:Et.contrast)||100],min:0,max:200,onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,contrast:h[0]}})}}),l.jsx(Ke,{label:"Saturación",value:[((Pt=(Nt=X())==null?void 0:Nt.filters)==null?void 0:Pt.saturation)||100],min:0,max:200,onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,saturation:h[0]}})}}),l.jsx(Ke,{label:"Tono",value:[((Tt=(Ot=X())==null?void 0:Ot.filters)==null?void 0:Tt.hue)||0],min:0,max:360,unit:"°",onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,hue:h[0]}})}}),l.jsx(Ke,{label:"Sepia",value:[((jt=(Rt=X())==null?void 0:Rt.filters)==null?void 0:jt.tint)||0],min:0,max:100,onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,tint:h[0]}})}}),l.jsx(Ke,{label:"Desenfoque",value:[((C=(Mt=X())==null?void 0:Mt.filters)==null?void 0:C.blur)||0],min:0,max:20,unit:"px",onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,blur:h[0]}})}})]})]}),M==="transform"&&l.jsxs("div",{className:"space-y-4",children:[((_=X())==null?void 0:_.type)==="image"&&l.jsx(Wg,{onSelect:h=>re(D,m,{mask:h}),selectedMask:((He=X())==null?void 0:He.mask)||"none",availableMasks:ve().maskCategories.flatMap(h=>h.masks),selectedImage:U}),l.jsx(Gg,{selectedImage:U,element:X(),onUpdate:h=>re(D,m,h)}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h3",{className:" font-medium pt-4",children:"Transformación"})}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(Ye,{variant:(lt=(Xe=X())==null?void 0:Xe.filters)!=null&&lt.flipHorizontal?"secondary":"outline",size:"sm",icon:l.jsx(Ko,{className:"h-4 w-4"}),className:"justify-start ",onClick:()=>{var h,y,N;return re(D,m,{filters:{...(h=X())==null?void 0:h.filters,flipHorizontal:!((N=(y=X())==null?void 0:y.filters)!=null&&N.flipHorizontal)}})},children:"Giro Horizontal"}),l.jsx(Ye,{variant:(kn=(An=X())==null?void 0:An.filters)!=null&&kn.flipVertical?"secondary":"outline",size:"sm",icon:l.jsx(_o,{className:"h-4 w-4"}),className:"justify-start",onClick:()=>{var h,y,N;return re(D,m,{filters:{...(h=X())==null?void 0:h.filters,flipVertical:!((N=(y=X())==null?void 0:y.filters)!=null&&N.flipVertical)}})},children:"Giro Vertical"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ke,{label:"Rotación",value:[((Ln=(Bn=X())==null?void 0:Bn.filters)==null?void 0:Ln.rotate)||0],min:0,max:360,unit:"°",onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,rotate:h[0]}})}}),l.jsx(Ke,{label:"Escala",value:[((($n=(Fn=X())==null?void 0:Fn.filters)==null?void 0:$n.scale)||1)*100],min:10,max:200,unit:"%",onValueChange:h=>{var y;return re(D,m,{filters:{...(y=X())==null?void 0:y.filters,scale:h[0]/100}})}})]})]})]})]}):l.jsx("h2",{className:"font-medium text-center",children:"Agrega imágenes y textos al área de trabajo y selecciona tu imagen para ver nuevas opciones"})})]})}),l.jsx(Ao,{isOpen:ae,onRequestClose:()=>Ee(!1),pages:u.map(h=>({...h,layout:_e.find(y=>y.id===h.layout)||_e[0]}))}),l.jsxs("main",{className:"flex-1 overflow-auto bg-gray-100 p-6",children:[l.jsx("div",{className:"max-w-5xl mx-auto ",children:ee?l.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg page-preview",children:l.jsx("div",{className:`grid ${ve().template} gap-6 aspect-[4/3]`,children:u[v].cells.map(h=>l.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:h.elements.map(y=>{var N,O,T,V,z,G,ce,Je,Ve,nt,Yt,Xt,Jt,Kt,ct,qn,Yn,Xn,Jn,Kn,_n,Qn,Zn,ea,ta;return y.type==="image"?l.jsx("div",{className:`absolute ${((N=ir.find(Po=>Po.id===y.mask))==null?void 0:N.class)||""}`,style:{left:`${y.position.x}px`,top:`${y.position.y}px`,width:"100%",height:"100%"},children:l.jsx("img",{src:y.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                    brightness(${(((O=y.filters)==null?void 0:O.brightness)||100)/100})
                                    contrast(${(((T=y.filters)==null?void 0:T.contrast)||100)/100})
                                    saturate(${(((V=y.filters)==null?void 0:V.saturation)||100)/100})
                                    sepia(${(((z=y.filters)==null?void 0:z.tint)||0)/100})
                                    hue-rotate(${(((G=y.filters)==null?void 0:G.hue)||0)*3.6}deg)
                                    blur(${((ce=y.filters)==null?void 0:ce.blur)||0}px)
                                  `,transform:`scale(${((Je=y.filters)==null?void 0:Je.scale)||1}) rotate(${((Ve=y.filters)==null?void 0:Ve.rotate)||0}deg) ${(nt=y.filters)!=null&&nt.flipHorizontal?"scaleX(-1)":""} ${(Yt=y.filters)!=null&&Yt.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((Xt=y.filters)==null?void 0:Xt.blendMode)||"normal",opacity:(((Jt=y.filters)==null?void 0:Jt.opacity)||100)/100}})},y.id):l.jsx("div",{className:"absolute",style:{left:`${y.position.x}px`,top:`${y.position.y}px`,fontFamily:(Kt=y.style)==null?void 0:Kt.fontFamily,fontSize:(ct=y.style)==null?void 0:ct.fontSize,fontWeight:(qn=y.style)==null?void 0:qn.fontWeight,fontStyle:(Yn=y.style)==null?void 0:Yn.fontStyle,textDecoration:(Xn=y.style)==null?void 0:Xn.textDecoration,color:(Jn=y.style)==null?void 0:Jn.color,textAlign:(Kn=y.style)==null?void 0:Kn.textAlign,backgroundColor:((_n=y.style)==null?void 0:_n.backgroundColor)||"transparent",padding:((Qn=y.style)==null?void 0:Qn.padding)||"8px",borderRadius:((Zn=y.style)==null?void 0:Zn.borderRadius)||"0px",border:((ea=y.style)==null?void 0:ea.border)||"none",opacity:((ta=y.style)==null?void 0:ta.opacity)||1},children:y.content},y.id)})},h.id))})}):l.jsxs("div",{className:"space-y-6",children:[ue?l.jsx(Kg,{element:X(),onUpdate:h=>{re(se.cellId,se.elementId,h)},onClose:()=>K(!1)}):l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center gap-4",children:[l.jsx(Ye,{variant:"ghost",size:"icon",onClick:Pe,disabled:H<=0,children:l.jsx(ws,{className:"h-5 w-5"})}),l.jsx(Ye,{variant:"ghost",size:"icon",onClick:Fe,disabled:H>=Y.length-1,children:l.jsx(fs,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>{const h=document.createElement("input");h.type="file",h.accept="image/*",h.onchange=y=>{if(y.target.files&&y.target.files[0]){const O={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},T=new FileReader;T.onload=V=>{var z;(z=V.target)!=null&&z.result&&(O.content=V.target.result,ye(D||u[v].cells[0].id,O))},T.readAsDataURL(y.target.files[0])}},h.click()},children:l.jsx(Wr,{className:"h-5 w-5"})}),l.jsx(Ye,{variant:"ghost",size:"icon",onClick:j,children:l.jsx(pt,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>{m&&D&&we(D,m)},disabled:!m,children:l.jsx(ft,{className:"h-5 w-5"})}),l.jsx(_g,{currentSize:pe,onSizeChange:me,presetData:o,workspaceDimensions:Oe})]}),Oe&&l.jsx("div",{className:"text-center mb-2 text-sm text-gray-600",children:l.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:["Área de trabajo: ",Oe.width," × ",Oe.height,"px",Oe.originalWidth&&l.jsxs("span",{className:"ml-2 text-gray-500",children:["(Original: ",Oe.originalWidth," × ",Oe.originalHeight,"px)"]})]})}),l.jsxs("div",{id:`page-${u[v].id}`,className:`bg-white rounded-lg shadow-lg overflow-hidden page-preview ${ve().cells<=4,""}`,style:{width:Oe.width,height:Oe.height,position:"relative",margin:"0 auto",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"2px solid #e5e7eb"},children:[(()=>{const h=u[v];let y=null;return h.type==="cover"&&(o!=null&&o.cover_image)?y=o.cover_image.startsWith("http")?o.cover_image:`/storage/images/item_preset/${o.cover_image}`:h.type==="content"&&(o!=null&&o.content_layer_image)?y=o.content_layer_image.startsWith("http")?o.content_layer_image:`/storage/images/item_preset/${o.content_layer_image}`:h.type==="final"&&(o!=null&&o.final_layer_image)&&(y=o.final_layer_image.startsWith("http")?o.final_layer_image:`/storage/images/item_preset/${o.final_layer_image}`),y?l.jsx("img",{src:y,alt:"background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0,pointerEvents:"none"}}):null})(),l.jsx("div",{className:`grid ${ve().template} gap-4 p-4`,style:{position:"relative",zIndex:1,width:"100%",height:"100%",boxSizing:"border-box"},children:u[v].cells.map(h=>l.jsx(Hg,{id:h.id,elements:h.elements.filter(y=>!y.locked),workspaceSize:Oe,selectedElement:D===h.id?m:null,onSelectElement:xe,onAddElement:y=>{const N=[...u],O=N[v].cells.findIndex(T=>T.id===h.id);O!==-1&&(N[v].cells[O].elements.push(y),le(N),x(y.id),S(h.id))},onUpdateElement:(y,N,O)=>{const T=[...u],V=T[v].cells.findIndex(z=>z.id===h.id);if(V!==-1){if(O)T[v].cells[V].elements.push({...T[v].cells[V].elements.find(z=>z.id===y),...N});else{const z=T[v].cells[V].elements.findIndex(G=>G.id===y);z!==-1&&(T[v].cells[V].elements[z]={...T[v].cells[V].elements[z],...N})}le(T)}},onDeleteElement:y=>{const N=[...u],O=N[v].cells.findIndex(T=>T.id===h.id);O!==-1&&(N[v].cells[O].elements=N[v].cells[O].elements.filter(T=>T.id!==y),le(N),m===y&&x(null))},availableMasks:ve().maskCategories.flatMap(y=>y.masks)},h.id))})]})]})}),l.jsx("aside",{className:"max-w-5xl mt-6 mx-auto bg-white p-4 rounded-lg border",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"font-medium",children:"Páginas"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:de,disabled:((Hn=u[v])==null?void 0:Hn.type)!=="content",title:((Gn=u[v])==null?void 0:Gn.type)!=="content"?"Solo se pueden duplicar páginas de contenido":"Duplicar página",children:l.jsx(rn,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:he,disabled:u.length<=3||((zn=u[v])==null?void 0:zn.type)==="cover"||((Wn=u[v])==null?void 0:Wn.type)==="final",title:((Un=u[v])==null?void 0:Un.type)==="cover"||((Vn=u[v])==null?void 0:Vn.type)==="final"?"No se puede eliminar la portada o contraportada":u.length<=3?"Debe haber al menos una página de contenido":"Eliminar página",children:l.jsx(ft,{className:"h-4 w-4"})}),l.jsxs("button",{className:"flex items-center gap-1 px-3 py-1 text-sm border rounded-md hover:bg-gray-50",onClick:Q,children:[l.jsx(Ur,{className:"h-4 w-4"}),l.jsx("span",{children:"Nueva página"})]})]})]}),l.jsx("div",{className:"flex overflow-x-auto gap-3 custom-scroll",children:u==null?void 0:u.map((h,y)=>{let N="Página",O="",T="bg-gray-100";return h.type==="cover"?(N="Portada",O="📖",T="bg-purple-100"):h.type==="content"?(N=`Pág. ${h.pageNumber}`,O="📄",T="bg-blue-100"):h.type==="final"&&(N="Contraportada",O="📚",T="bg-green-100"),l.jsx("div",{className:"flex-shrink-0 w-40 p-4 cursor-pointer hover:bg-gray-50 rounded-lg transition-colors",onClick:()=>b(y),children:l.jsxs("div",{className:`relative ${T} h-48 rounded-md overflow-hidden border-2 transition-all ${v===y?"border-purple-500 shadow-lg":"border-transparent"}`,children:[l.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start z-10",children:[l.jsxs("span",{className:"text-xs bg-white/90 px-2 py-1 rounded-full font-medium flex items-center gap-1",children:[O," ",N]}),h.type==="content"&&l.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:"Editable"})]}),R[h.id]?l.jsx("img",{src:R[h.id],alt:`Miniatura página ${y+1}`,className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:`grid ${ve().template} gap-1 w-full h-full p-1`,children:Array.from({length:ve().cells}).map((V,z)=>l.jsx("div",{className:"bg-gray-200 rounded-sm"},z))})})]})},h.id)})})]})})]})]})]})})})}export{yv as default};

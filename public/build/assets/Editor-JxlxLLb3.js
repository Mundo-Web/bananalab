const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DE3dzT5W.js","assets/_commonjsHelpers-D6-XlEtG.js","assets/index-fNjTmf9T.js","assets/index-yBjzXJbu.js"])))=>i.map(i=>d[i]);
import{_ as Co}from"./preload-helper-BfFHrpNk.js";import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{r as y,R as he}from"./index-BOnQTV8N.js";import{a as _n,b as Io,_ as dr,c as W}from"./objectWithoutPropertiesLoose-M9c4DQuK.js";import{h as Xn}from"./hoist-non-react-statics.cjs-QI39Ivs0.js";import{r as No,R as Eo}from"./index-DE3dzT5W.js";import{c as _}from"./createLucideIcon-DfjclApS.js";import{h as Jn,B as Po}from"./V1Edit-C1l8UNXr.js";import{E as To}from"./Editor-B_JQjYuU.js";import{T as Oo,t as at}from"./index-B-Ed_dFw.js";import{m as it}from"./main-Bp3JhiuO.js";import{e as jo}from"./index-CKDfw_gz.js";import{T as ur}from"./trash-2-DU7LB6-f.js";import{U as Ro}from"./upload-GO9GDST_.js";import{S as Mo}from"./sparkles-DvmvZ6mJ.js";import{P as _a}from"./palette-BTxIxfA-.js";import{C as Rr}from"./chevron-up-Mt3xll-e.js";import{C as or}from"./chevron-down-uIVDLcM-.js";import{X as Ao}from"./x-fof_H3Vv.js";import{M as Kn}from"./minus-Db6MFKEO.js";import{P as Qn}from"./plus-CTIomuuF.js";import{G as ot}from"./Global-BM4Id4Pw.js";import{B as er}from"./book-C1IPlXSj.js";import{C as ko}from"./chevron-left-JcR9Fe4w.js";import{C as Bo}from"./circle-check-big-CYWUGR3Z.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-fNjTmf9T.js";import"./index-BtQtP3Fl.js";import"./index-Chjiymov.js";import"./index.es-TZnJvzHg.js";import"./chevron-right-Cug7tVUE.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=_("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=_("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=_("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=_("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=_("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=_("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=_("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=_("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=_("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=_("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=_("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=_("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=_("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=_("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=_("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=_("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=_("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=_("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=_("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=_("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=_("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=_("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=_("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=_("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=_("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=_("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=_("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=_("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=_("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=_("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=_("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=_("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=_("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=_("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=_("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=_("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=_("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=_("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=_("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=_("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=_("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function Ke({children:e,onClick:t,className:r="",variant:n="default",size:a="default",disabled:i=!1,icon:s=null}){const o="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},u={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return l.jsxs("button",{className:`${o} ${c[n]} ${u[a]} ${r} gap-2`,onClick:t,disabled:i,children:[s&&l.jsx("span",{className:"w-4 h-4",children:s}),e]})}const Qe=({value:e=[50],min:t=0,max:r=100,step:n=1,onValueChange:a,label:i,unit:s="%"})=>{const[o,c]=y.useState(e[0]),u=g=>{const p=Number.parseInt(g.target.value);c(p),a&&a([p])};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i}),l.jsxs("span",{className:"text-sm text-gray-500",children:[o,s]})]}),l.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:l.jsx("input",{type:"range",min:t,max:r,step:n,value:o,onChange:u,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},xs=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:105,contrast:115,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],ys=({onSelectPreset:e,selectedImage:t})=>{const r=n=>({filter:`
            brightness(${n.brightness}%)
            contrast(${n.contrast}%)
            saturate(${n.saturation}%)
            sepia(${n.tint}%)
            hue-rotate(${n.hue}deg)
            blur(${n.blur}px)
        `});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:xs.map(n=>l.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>e(n.filters),children:[l.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:t?l.jsx("img",{src:t.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r(n.filters)}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:l.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:l.jsx(Mo,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},ws=({filters:e={},onFilterChange:t,selectedElement:r})=>{const n=(a,i)=>{const s={...e,[a]:i};t(s)};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),l.jsx("div",{className:"space-y-3",children:l.jsx(Qe,{label:"Opacidad",value:e.opacity||100,onChange:a=>n("opacity",a),min:0,max:100,step:1,unit:"%"})}),(r==null?void 0:r.type)==="image"&&l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Modo de mezcla"}),l.jsxs("select",{value:e.blendMode||"normal",onChange:a=>n("blendMode",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"normal",children:"Normal"}),l.jsx("option",{value:"multiply",children:"Multiplicar"}),l.jsx("option",{value:"screen",children:"Pantalla"}),l.jsx("option",{value:"overlay",children:"Superposición"}),l.jsx("option",{value:"soft-light",children:"Luz suave"}),l.jsx("option",{value:"hard-light",children:"Luz fuerte"}),l.jsx("option",{value:"color-dodge",children:"Sobreexponer color"}),l.jsx("option",{value:"color-burn",children:"Subexponer color"}),l.jsx("option",{value:"darken",children:"Oscurecer"}),l.jsx("option",{value:"lighten",children:"Aclarar"}),l.jsx("option",{value:"difference",children:"Diferencia"}),l.jsx("option",{value:"exclusion",children:"Exclusión"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Transformaciones adicionales"}),l.jsx(Qe,{label:"Profundidad (Z-Index)",value:e.zIndex||1,onChange:a=>n("zIndex",a),min:1,max:100,step:1}),l.jsx(Qe,{label:"Desenfoque gaussiano",value:e.gaussianBlur||0,onChange:a=>n("gaussianBlur",a),min:0,max:50,step:.5,unit:"px"})]})]})},Ka=y.createContext({dragDropManager:void 0});function Ve(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Zn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ea=function(){return Math.random().toString(36).substring(7).split("").join(".")},ta={INIT:"@@redux/INIT"+ea(),REPLACE:"@@redux/REPLACE"+ea()};function Ds(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function cn(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ve(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ve(1));return r(cn)(e,t)}if(typeof e!="function")throw new Error(Ve(2));var a=e,i=t,s=[],o=s,c=!1;function u(){o===s&&(o=s.slice())}function g(){if(c)throw new Error(Ve(3));return i}function p(b){if(typeof b!="function")throw new Error(Ve(4));if(c)throw new Error(Ve(5));var m=!0;return u(),o.push(b),function(){if(m){if(c)throw new Error(Ve(6));m=!1,u();var C=o.indexOf(b);o.splice(C,1),s=null}}}function d(b){if(!Ds(b))throw new Error(Ve(7));if(typeof b.type>"u")throw new Error(Ve(8));if(c)throw new Error(Ve(9));try{c=!0,i=a(i,b)}finally{c=!1}for(var m=s=o,v=0;v<m.length;v++){var C=m[v];C()}return b}function f(b){if(typeof b!="function")throw new Error(Ve(10));a=b,d({type:ta.REPLACE})}function h(){var b,m=p;return b={subscribe:function(C){if(typeof C!="object"||C===null)throw new Error(Ve(11));function D(){C.next&&C.next(g())}D();var N=m(D);return{unsubscribe:N}}},b[Zn]=function(){return this},b}return d({type:ta.INIT}),n={dispatch:d,subscribe:p,getState:g,replaceReducer:f},n[Zn]=h,n}function ra(e,t){return function(){return t(e.apply(this,arguments))}}function na(e,t){if(typeof e=="function")return ra(e,t);if(typeof e!="object"||e===null)throw new Error(Ve(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=ra(a,t))}return r}function Qa(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function Ss(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Ve(15))},s={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=t.map(function(c){return c(s)});return i=Qa.apply(void 0,o)(a.dispatch),_n(_n({},a),{},{dispatch:i})}}}function Y(e,t,...r){if(Cs()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Cs(){return typeof process<"u"&&!0}function Is(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function Ns(e,t){return e.filter(r=>r!==t)}function Za(e){return typeof e=="object"}function Es(e,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((i,s)=>{i===1&&a.push(s)}),a}function Ps(e,t){return e.filter(r=>t.indexOf(r)>-1)}const dn="dnd-core/INIT_COORDS",yr="dnd-core/BEGIN_DRAG",un="dnd-core/PUBLISH_DRAG_SOURCE",wr="dnd-core/HOVER",Dr="dnd-core/DROP",Sr="dnd-core/END_DRAG";function aa(e,t){return{type:dn,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const Ts={type:dn,payload:{clientOffset:null,sourceClientOffset:null}};function Os(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:s}=n,o=e.getMonitor(),c=e.getRegistry();e.dispatch(aa(i)),js(r,o,c);const u=As(r,o);if(u==null){e.dispatch(Ts);return}let g=null;if(i){if(!s)throw new Error("getSourceClientOffset must be defined");Rs(s),g=s(u)}e.dispatch(aa(i,g));const d=c.getSource(u).beginDrag(o,u);if(d==null)return;Ms(d),c.pinSource(u);const f=c.getSourceType(u);return{type:yr,payload:{itemType:f,item:d,sourceId:u,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!a}}}}function js(e,t,r){Y(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){Y(r.getSource(n),"Expected sourceIds to be registered.")})}function Rs(e){Y(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ms(e){Y(Za(e),"Item must be an object.")}function As(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function ks(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){ks(e,a,r[a])})}return e}function Ls(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();Fs(n),Hs(n).forEach((s,o)=>{const c=$s(s,o,a,n),u={type:Dr,payload:{dropResult:Bs({},r,c)}};e.dispatch(u)})}}function Fs(e){Y(e.isDragging(),"Cannot call drop while not dragging."),Y(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function $s(e,t,r,n){const a=r.getTarget(e);let i=a?a.drop(n,e):void 0;return zs(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function zs(e){Y(typeof e>"u"||Za(e),"Drop result must either be an object or undefined.")}function Hs(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Gs(e){return function(){const r=e.getMonitor(),n=e.getRegistry();Ws(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:Sr}}}function Ws(e){Y(e.isDragging(),"Cannot call endDrag while not dragging.")}function Jr(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function Vs(e){return function(r,{clientOffset:n}={}){qs(r);const a=r.slice(0),i=e.getMonitor(),s=e.getRegistry(),o=i.getItemType();return Ys(a,s,o),Us(a,i,s),_s(a,i,s),{type:wr,payload:{targetIds:a,clientOffset:n||null}}}}function qs(e){Y(Array.isArray(e),"Expected targetIds to be an array.")}function Us(e,t,r){Y(t.isDragging(),"Cannot call hover while not dragging."),Y(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];Y(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);Y(i,"Expected targetIds to be registered.")}}function Ys(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],i=t.getTargetType(a);Jr(i,r)||e.splice(n,1)}}function _s(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function Xs(e){return function(){if(e.getMonitor().isDragging())return{type:un}}}function Js(e){return{beginDrag:Os(e),publishDragSource:Xs(e),hover:Vs(e),drop:Ls(e),endDrag:Gs(e)}}class Ks{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...s)=>{const o=i.apply(t,s);typeof o<"u"&&r(o)}}const a=Js(this);return Object.keys(a).reduce((i,s)=>{const o=a[s];return i[s]=n(o),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function Qs(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ei(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Zs(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:ei(Qs(t,n),r)}function el(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:ei(t,r)}const Gt=[],pn=[];Gt.__IS_NONE__=!0;pn.__IS_ALL__=!0;function tl(e,t){return e===Gt?!1:e===pn||typeof t>"u"?!0:Ps(t,e).length>0}class rl{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;Y(typeof t=="function","listener must be a function."),Y(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const s=this.store.getState(),o=s.stateId;try{o===a||o===a+1&&!tl(s.dirtyHandlerIds,n)||t()}finally{a=o}};return this.store.subscribe(i)}subscribeToOffsetChange(t){Y(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return Y(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(Y(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return Jr(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(Y(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!Jr(a,i))return!1;const s=this.getTargetIds();if(!s.length)return!1;const o=s.indexOf(t);return n?o===s.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Zs(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return el(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const ia=typeof global<"u"?global:self,ti=ia.MutationObserver||ia.WebKitMutationObserver;function ri(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function nl(e){let t=1;const r=new ti(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const al=typeof ti=="function"?nl:ri;class il{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=al(this.flush),this.requestErrorThrow=ri(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class ol{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class sl{create(t){const r=this.freeTasks,n=r.length?r.pop():new ol(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const ni=new il,ll=new sl(ni.registerPendingError);function cl(e){ni.enqueueTask(ll.create(e))}const gn="dnd-core/ADD_SOURCE",fn="dnd-core/ADD_TARGET",hn="dnd-core/REMOVE_SOURCE",Cr="dnd-core/REMOVE_TARGET";function dl(e){return{type:gn,payload:{sourceId:e}}}function ul(e){return{type:fn,payload:{targetId:e}}}function pl(e){return{type:hn,payload:{sourceId:e}}}function gl(e){return{type:Cr,payload:{targetId:e}}}function fl(e){Y(typeof e.canDrag=="function","Expected canDrag to be a function."),Y(typeof e.beginDrag=="function","Expected beginDrag to be a function."),Y(typeof e.endDrag=="function","Expected endDrag to be a function.")}function hl(e){Y(typeof e.canDrop=="function","Expected canDrop to be a function."),Y(typeof e.hover=="function","Expected hover to be a function."),Y(typeof e.drop=="function","Expected beginDrag to be a function.")}function Kr(e,t){if(t&&Array.isArray(e)){e.forEach(r=>Kr(r,!1));return}Y(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Ze;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Ze||(Ze={}));let vl=0;function ml(){return vl++}function bl(e){const t=ml().toString();switch(e){case Ze.SOURCE:return`S${t}`;case Ze.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function oa(e){switch(e[0]){case"S":return Ze.SOURCE;case"T":return Ze.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function sa(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class xl{addSource(t,r){Kr(t),fl(r);const n=this.addHandler(Ze.SOURCE,t,r);return this.store.dispatch(dl(n)),n}addTarget(t,r){Kr(t,!0),hl(r);const n=this.addHandler(Ze.TARGET,t,r);return this.store.dispatch(ul(n)),n}containsHandler(t){return sa(this.dragSources,t)||sa(this.dropTargets,t)}getSource(t,r=!1){return Y(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return Y(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return Y(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return Y(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return oa(t)===Ze.SOURCE}isTargetId(t){return oa(t)===Ze.TARGET}removeSource(t){Y(this.getSource(t),"Expected an existing source."),this.store.dispatch(pl(t)),cl(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){Y(this.getTarget(t),"Expected an existing target."),this.store.dispatch(gl(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);Y(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){Y(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=bl(t);return this.types.set(a,r),t===Ze.SOURCE?this.dragSources.set(a,n):t===Ze.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const yl=(e,t)=>e===t;function wl(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Dl(e,t,r=yl){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function Sl(e=Gt,t){switch(t.type){case wr:break;case gn:case fn:case Cr:case hn:return Gt;case yr:case un:case Sr:case Dr:default:return pn}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=Es(r,n);if(!(a.length>0||!Dl(r,n)))return Gt;const s=n[n.length-1],o=r[r.length-1];return s!==o&&(s&&a.push(s),o&&a.push(o)),a}function Cl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Il(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Cl(e,a,r[a])})}return e}const la={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Nl(e=la,t){const{payload:r}=t;switch(t.type){case dn:case yr:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case wr:return wl(e.clientOffset,r.clientOffset)?e:Il({},e,{clientOffset:r.clientOffset});case Sr:case Dr:return la;default:return e}}function El(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){El(e,a,r[a])})}return e}const Pl={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Tl(e=Pl,t){const{payload:r}=t;switch(t.type){case yr:return mt({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case un:return mt({},e,{isSourcePublic:!0});case wr:return mt({},e,{targetIds:r.targetIds});case Cr:return e.targetIds.indexOf(r.targetId)===-1?e:mt({},e,{targetIds:Ns(e.targetIds,r.targetId)});case Dr:return mt({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Sr:return mt({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function Ol(e=0,t){switch(t.type){case gn:case fn:return e+1;case hn:case Cr:return e-1;default:return e}}function jl(e=0){return e+1}function Rl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Rl(e,a,r[a])})}return e}function Al(e={},t){return{dirtyHandlerIds:Sl(e.dirtyHandlerIds,{type:t.type,payload:Ml({},t.payload,{prevTargetIds:Is(e,"dragOperation.targetIds",[])})}),dragOffset:Nl(e.dragOffset,t),refCount:Ol(e.refCount,t),dragOperation:Tl(e.dragOperation,t),stateId:jl(e.stateId)}}function kl(e,t=void 0,r={},n=!1){const a=Bl(n),i=new rl(a,new xl(a)),s=new Ks(a,i),o=e(s,t,r);return s.receiveBackend(o),s}function Bl(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return cn(Al,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function Ll(e,t){if(e==null)return{};var r=Fl(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fl(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let ca=0;const lr=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var $l=y.memo(function(t){var{children:r}=t,n=Ll(t,["children"]);const[a,i]=zl(n);return y.useEffect(()=>{if(i){const s=ai();return++ca,()=>{--ca===0&&(s[lr]=null)}}},[]),l.jsx(Ka.Provider,{value:a,children:r})});function zl(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=Hl(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function Hl(e,t=ai(),r,n){const a=t;return a[lr]||(a[lr]={dragDropManager:kl(e,t,r,n)}),a[lr]}function ai(){return typeof global<"u"?global:window}const ht=typeof window<"u"?y.useLayoutEffect:y.useEffect;function Gl(e,t,r){const[n,a]=y.useState(()=>t(e)),i=y.useCallback(()=>{const s=t(e);jo(n,s)||(a(s),r&&r())},[n,e,r]);return ht(i),[n,i]}function Wl(e,t,r){const[n,a]=Gl(e,t,r);return ht(function(){const s=e.getHandlerId();if(s!=null)return e.subscribeToStateChange(a,{handlerIds:[s]})},[e,a]),n}function ii(e,t,r){return Wl(t,e||(()=>({})),()=>r.reconnect())}function oi(e,t){const r=[];return typeof e!="function"&&r.push(e),y.useMemo(()=>typeof e=="function"?e():e,r)}function Vl(e){return y.useMemo(()=>e.hooks.dragSource(),[e])}function ql(e){return y.useMemo(()=>e.hooks.dragPreview(),[e])}let Mr=!1,Ar=!1;class Ul{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){Y(!Mr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Mr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Mr=!1}}isDragging(){if(!this.sourceId)return!1;Y(!Ar,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ar=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Ar=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let kr=!1;class Yl{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;Y(!kr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return kr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{kr=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function _l(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function Xl(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function Qr(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;const o=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const u=i[c];if(!o(u))return!1;const g=e[u],p=t[u];if(a=void 0,a===!1||a===void 0&&g!==p)return!1}return!0}function Zr(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Jl(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function Kl(e){return(t=null,r=null)=>{if(!y.isValidElement(t)){const i=t;return e(i,r),i}const n=t;return Jl(n),Ql(n,r?i=>e(i,r):e)}}function si(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=Kl(n);t[r]=()=>a}}),t}function da(e,t){typeof e=="function"?e(t):e.current=t}function Ql(e,t){const r=e.ref;return Y(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?y.cloneElement(e,{ref:n=>{da(r,n),da(t,n)}}):y.cloneElement(e,{ref:t})}class Zl{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Qr(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Qr(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=si({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Zr(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Zr(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class ec{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Qr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=si({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Zr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function Ct(){const{dragDropManager:e}=y.useContext(Ka);return Y(e!=null,"Expected drag drop context"),e}function tc(e,t){const r=Ct(),n=y.useMemo(()=>new Zl(r.getBackend()),[r]);return ht(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),ht(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function rc(){const e=Ct();return y.useMemo(()=>new Ul(e),[e])}class nc{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function ac(e,t,r){const n=y.useMemo(()=>new nc(e,t,r),[t,r]);return y.useEffect(()=>{n.spec=e},[e]),n}function ic(e){return y.useMemo(()=>{const t=e.type;return Y(t!=null,"spec.type must be defined"),t},[e])}function oc(e,t,r){const n=Ct(),a=ac(e,t,r),i=ic(e);ht(function(){if(i!=null){const[o,c]=Xl(i,a,n);return t.receiveHandlerId(o),r.receiveHandlerId(o),c}},[n,t,r,a,i])}function li(e,t){const r=oi(e);Y(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=rc(),a=tc(r.options,r.previewOptions);return oc(r,n,a),[ii(r.collect,n,a),Vl(a),ql(a)]}function sc(e){return y.useMemo(()=>e.hooks.dropTarget(),[e])}function lc(e){const t=Ct(),r=y.useMemo(()=>new ec(t.getBackend()),[t]);return ht(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function cc(){const e=Ct();return y.useMemo(()=>new Yl(e),[e])}function dc(e){const{accept:t}=e;return y.useMemo(()=>(Y(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class uc{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function pc(e,t){const r=y.useMemo(()=>new uc(e,t),[t]);return y.useEffect(()=>{r.spec=e},[e]),r}function gc(e,t,r){const n=Ct(),a=pc(e,t),i=dc(e);ht(function(){const[o,c]=_l(i,a,n);return t.receiveHandlerId(o),r.receiveHandlerId(o),c},[n,t,a,r,i.map(s=>s.toString()).join("|")])}function fc(e,t){const r=oi(e),n=cc(),a=lc(r.options);return gc(r,n,a),[ii(r.collect,n,a),sc(a)]}const yt=[{id:"none",name:"Sin máscara",class:"",category:"Básicas"},{id:"circle",name:"Círculo",class:"mask-circle",category:"Básicas"},{id:"rounded",name:"Redondeado",class:"mask-rounded",category:"Básicas"},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas"},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas"},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas"},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas"},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos"},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos"},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos"},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos"},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas"},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas"},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas"},{id:"rounded-sm",name:"Redondeado pequeño",class:"mask-rounded-sm",category:"Básicas"},{id:"rounded-lg",name:"Redondeado grande",class:"mask-rounded-lg",category:"Básicas"},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas"},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas"},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas"}];function hc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,availableMasks:i=[],workspaceSize:s={width:800,height:600}}){var Ne,we,Fe,$e,ke,Oe,je,Ge,qe,L,J,ye,le,De,We,be;const[{isDragging:o},c]=li(()=>({type:"IMAGE_ELEMENT",item:{id:e.id},collect:I=>({isDragging:!!I.isDragging()})})),u=y.useRef(null),[g,p]=y.useState(!1),[d,f]=y.useState(null),[h,b]=y.useState(null),[m,v]=y.useState({mouseX:0,mouseY:0,elementX:0,elementY:0,elementWidth:0,elementHeight:0}),[C,D]=y.useState(!1),[N,R]=y.useState({x:0,y:0}),A={filter:`
            brightness(${(((Ne=e.filters)==null?void 0:Ne.brightness)||100)/100})
            contrast(${(((we=e.filters)==null?void 0:we.contrast)||100)/100})
            saturate(${(((Fe=e.filters)==null?void 0:Fe.saturation)||100)/100})
            sepia(${((($e=e.filters)==null?void 0:$e.tint)||0)/100})
            hue-rotate(${(((ke=e.filters)==null?void 0:ke.hue)||0)*3.6}deg)
            blur(${((Oe=e.filters)==null?void 0:Oe.blur)||0}px)
        `,transform:`scale(${((je=e.filters)==null?void 0:je.scale)||1}) rotate(${((Ge=e.filters)==null?void 0:Ge.rotate)||0}deg) ${(qe=e.filters)!=null&&qe.flipHorizontal?"scaleX(-1)":""} ${(L=e.filters)!=null&&L.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((J=e.filters)==null?void 0:J.blendMode)||"normal",opacity:(((ye=e.filters)==null?void 0:ye.opacity)||100)/100},F=yt.find(I=>I.id===e.mask)||yt[0],U=y.useCallback((I,V)=>typeof I=="number"?I<=1?I*V:I:0,[]),k=y.useCallback((I,V)=>typeof I=="number"&&V>0?I>1?Math.min(I/V,1):I:0,[]),H={x:Math.max(0,U(((le=e.position)==null?void 0:le.x)||0,s.width)),y:Math.max(0,U(((De=e.position)==null?void 0:De.y)||0,s.height))},G={width:Math.max(50,(We=e.size)!=null&&We.width?U(e.size.width,s.width):200),height:Math.max(50,(be=e.size)!=null&&be.height?U(e.size.height,s.height):200)},ve=y.useCallback(I=>{t&&(I.stopPropagation(),I.preventDefault(),p(!0),f("move"),v({mouseX:I.clientX,mouseY:I.clientY,elementX:H.x,elementY:H.y,elementWidth:G.width,elementHeight:G.height}))},[t,H,G]),E=y.useCallback((I,V)=>{t&&(I.stopPropagation(),I.preventDefault(),p(!0),f("resize"),b(V),v({mouseX:I.clientX,mouseY:I.clientY,elementX:H.x,elementY:H.y,elementWidth:G.width,elementHeight:G.height}))},[t,H,G]),K=y.useCallback(I=>{if(!g)return;const V=I.clientX-m.mouseX,ne=I.clientY-m.mouseY;if(d==="move"){const ie=Math.max(0,Math.min(s.width-G.width,m.elementX+V)),oe=Math.max(0,Math.min(s.height-G.height,m.elementY+ne)),Re={position:{x:k(ie,s.width),y:k(oe,s.height)}};n(Re)}else if(d==="resize"){let ie=m.elementWidth,oe=m.elementHeight,Re=m.elementX,Se=m.elementY;const Ce=50,nt=m.elementWidth/m.elementHeight;switch(h){case"nw":ie=Math.max(Ce,m.elementWidth-V),oe=Math.max(Ce,m.elementHeight-ne),I.shiftKey&&(oe=ie/nt),Re=m.elementX+(m.elementWidth-ie),Se=m.elementY+(m.elementHeight-oe);break;case"n":oe=Math.max(Ce,m.elementHeight-ne),Se=m.elementY+(m.elementHeight-oe);break;case"ne":ie=Math.max(Ce,m.elementWidth+V),oe=Math.max(Ce,m.elementHeight-ne),I.shiftKey&&(oe=ie/nt),Se=m.elementY+(m.elementHeight-oe);break;case"e":ie=Math.max(Ce,m.elementWidth+V);break;case"se":ie=Math.max(Ce,m.elementWidth+V),oe=Math.max(Ce,m.elementHeight+ne),I.shiftKey&&(oe=ie/nt);break;case"s":oe=Math.max(Ce,m.elementHeight+ne);break;case"sw":ie=Math.max(Ce,m.elementWidth-V),oe=Math.max(Ce,m.elementHeight+ne),I.shiftKey&&(oe=ie/nt),Re=m.elementX+(m.elementWidth-ie);break;case"w":ie=Math.max(Ce,m.elementWidth-V),Re=m.elementX+(m.elementWidth-ie);break}Re=Math.max(0,Math.min(s.width-ie,Re)),Se=Math.max(0,Math.min(s.height-oe,Se)),ie=Math.min(ie,s.width-Re),oe=Math.min(oe,s.height-Se);const ze={position:{x:k(Re,s.width),y:k(Se,s.height)},size:{width:k(ie,s.width),height:k(oe,s.height)}};n(ze)}},[g,d,m,h,s,G,n,k]),ae=y.useCallback(()=>{p(!1),f(null),b(null)},[]),M=y.useCallback(I=>{I.stopPropagation();const V={width:200,height:200};n({size:{width:k(V.width,s.width),height:k(V.height,s.height)}})},[n,k,s]),fe=y.useCallback(I=>{if(!t)return;const V=I.shiftKey?10:1;let ne={};switch(I.key){case"ArrowLeft":I.preventDefault(),ne.position={x:Math.max(0,k(H.x-V,s.width)),y:k(H.y,s.height)};break;case"ArrowRight":I.preventDefault(),ne.position={x:Math.min(1,k(H.x+V,s.width)),y:k(H.y,s.height)};break;case"ArrowUp":I.preventDefault(),ne.position={x:k(H.x,s.width),y:Math.max(0,k(H.y-V,s.height))};break;case"ArrowDown":I.preventDefault(),ne.position={x:k(H.x,s.width),y:Math.min(1,k(H.y+V,s.height))};break;case"Delete":case"Backspace":I.preventDefault(),a();break;case"Escape":I.preventDefault(),r();break}Object.keys(ne).length>0&&n(ne)},[t,H,s,k,n,a,r]);y.useEffect(()=>{if(t)return document.addEventListener("keydown",fe),()=>document.removeEventListener("keydown",fe)},[t,fe]),y.useEffect(()=>{if(g){const I=ne=>K(ne),V=()=>ae();return document.addEventListener("mousemove",I),document.addEventListener("mouseup",V),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",V)}}},[g,K,ae]),y.useEffect(()=>{const I=V=>{C&&!V.target.closest(".context-menu")&&D(!1)};return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[C]);const Ie=y.useCallback(I=>{u.current=I,c(I)},[c]),re=I=>{I.preventDefault(),I.stopPropagation(),R({x:I.clientX,y:I.clientY}),D(!0)},xe=()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=V=>{if(V.target.files&&V.target.files[0]){const ne=new FileReader;ne.onload=ie=>{var oe;(oe=ie.target)!=null&&oe.result&&n({content:ie.target.result})},ne.readAsDataURL(V.target.files[0])}},I.click(),D(!1)},ue=()=>{var V,ne;const I={...JSON.parse(JSON.stringify(e)),id:`img-${Date.now()}`,position:{x:Math.min(.9,(((V=e.position)==null?void 0:V.x)||0)+.05),y:Math.min(.9,(((ne=e.position)==null?void 0:ne.y)||0)+.05)}};n(I,!0),D(!1)},me=()=>{if(g){if(d==="move")return"grabbing";if(d==="resize")return Le(h)}return t?"grab":"pointer"},Le=I=>({n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize",nw:"nw-resize"})[I]||"default";return l.jsxs("div",{ref:Ie,className:`absolute ${F.class} ${t?"ring-2 ring-blue-500 ring-opacity-75":""} ${o?"opacity-50":"opacity-100"}`,style:{left:`${H.x}px`,top:`${H.y}px`,width:`${G.width}px`,height:`${G.height}px`,cursor:me(),zIndex:t?1e3:e.zIndex||1,transition:g?"none":"all 0.1s ease-out",pointerEvents:"all",userSelect:"none",transformOrigin:"center"},onClick:I=>{I.stopPropagation(),r()},onMouseDown:ve,onContextMenu:re,onDoubleClick:M,children:[l.jsxs("div",{className:"w-full h-full overflow-hidden relative bg-transparent",children:[l.jsx("img",{src:e.content,alt:"Imagen editada",className:"w-full h-full object-cover select-none",style:A,draggable:!1,onLoad:()=>{u.current&&(u.current.style.visibility="visible")}}),t&&!o&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-nw-resize",style:{top:-8,left:-8},onMouseDown:I=>E(I,"nw"),title:"Redimensionar desde esquina superior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-ne-resize",style:{top:-8,right:-8},onMouseDown:I=>E(I,"ne"),title:"Redimensionar desde esquina superior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-se-resize",style:{bottom:-8,right:-8},onMouseDown:I=>E(I,"se"),title:"Redimensionar desde esquina inferior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-sw-resize",style:{bottom:-8,left:-8},onMouseDown:I=>E(I,"sw"),title:"Redimensionar desde esquina inferior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-n-resize",style:{top:-8,left:"calc(50% - 8px)"},onMouseDown:I=>E(I,"n"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-e-resize",style:{right:-8,top:"calc(50% - 8px)"},onMouseDown:I=>E(I,"e"),title:"Redimensionar horizontalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-s-resize",style:{bottom:-8,left:"calc(50% - 8px)"},onMouseDown:I=>E(I,"s"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-w-resize",style:{left:-8,top:"calc(50% - 8px)"},onMouseDown:I=>E(I,"w"),title:"Redimensionar horizontalmente"}),g&&l.jsx("div",{className:"absolute -inset-2 border-2 border-blue-300 border-dashed rounded animate-pulse"})]})]}),C&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>D(!1)}),l.jsxs("div",{className:"fixed bg-white shadow-xl rounded-lg z-50 py-2 w-56 context-menu border border-gray-200",style:{left:`${Math.min(N.x,window.innerWidth-240)}px`,top:`${Math.min(N.y,window.innerHeight-200)}px`},onClick:I=>I.stopPropagation(),children:[l.jsx("button",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 text-gray-500 z-10",onClick:()=>D(!1),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsx("div",{className:"px-3 py-2 border-b border-gray-100",children:l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Opciones de imagen"})}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-3 text-sm text-gray-700 hover:text-blue-700 transition-colors",onClick:xe,children:[l.jsx(cs,{className:"h-4 w-4"}),"Reemplazar imagen"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-green-50 flex items-center gap-3 text-sm text-gray-700 hover:text-green-700 transition-colors",onClick:ue,children:[l.jsx(ln,{className:"h-4 w-4"}),"Duplicar elemento"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-yellow-50 flex items-center gap-3 text-sm text-gray-700 hover:text-yellow-700 transition-colors",onClick:()=>{var I;n({filters:{...e.filters,opacity:Math.max(0,(((I=e.filters)==null?void 0:I.opacity)||100)-20)}}),D(!1)},children:[l.jsx(Xa,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-purple-50 flex items-center gap-3 text-sm text-gray-700 hover:text-purple-700 transition-colors",onClick:()=>{var I;n({filters:{...e.filters,scale:Math.max(.1,(((I=e.filters)==null?void 0:I.scale)||1)-.1)}}),D(!1)},children:[l.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})}),"Reducir escala"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-red-50 flex items-center gap-3 text-sm text-gray-700 hover:text-red-700 transition-colors",onClick:()=>{a(),D(!1)},children:[l.jsx(ur,{className:"h-4 w-4"}),"Eliminar imagen"]})]})]})]})}function vc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,workspaceSize:i={width:800,height:600}}){var M,fe,Ie,re,xe,ue,me,Le,Ne,we,Fe,$e,ke,Oe,je,Ge,qe;const[s,o]=y.useState(!1),c=y.useRef(null),u=y.useRef(null),[{isDragging:g},p]=li(()=>({type:"TEXT_ELEMENT",item:{id:e.id},collect:L=>({isDragging:!!L.isDragging()})})),[d,f]=y.useState(!1),[h,b]=y.useState({x:0,y:0}),[m,v]=y.useState(!1),[C,D]=y.useState({x:0,y:0}),N=()=>{o(!1)},R=L=>{n({content:L.target.value})},A=L=>{L.key==="Enter"&&o(!1)},F=L=>{if(t&&!s){L.stopPropagation(),f(!0);const J=L.currentTarget.parentElement.getBoundingClientRect(),ye=e.position.x<=1?e.position.x*J.width:e.position.x,le=e.position.y<=1?e.position.y*J.height:e.position.y;b({x:L.clientX-ye,y:L.clientY-le})}},U=L=>{if(d&&u.current){const J=u.current.parentElement.getBoundingClientRect(),ye=L.clientX-h.x,le=L.clientY-h.y,De=J.width-u.current.offsetWidth,We=J.height-u.current.offsetHeight,be=Math.max(0,Math.min(ye,De)),I=Math.max(0,Math.min(le,We)),V=be/J.width,ne=I/J.height;n({position:{x:V,y:ne}})}},k=()=>{f(!1)},H=L=>{L.preventDefault(),L.stopPropagation(),D({x:L.clientX,y:L.clientY}),v(!0)},G=()=>{const L={...JSON.parse(JSON.stringify(e)),id:`text-${Date.now()}`,position:{x:e.position.x<=1?Math.min(e.position.x+.02,.9):e.position.x+10,y:e.position.y<=1?Math.min(e.position.y+.02,.9):e.position.y+10}};n(L,!0),v(!1)};y.useEffect(()=>(d&&(window.addEventListener("mousemove",U),window.addEventListener("mouseup",k)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",k)}),[d,h]);const ve=y.useCallback(L=>{u.current=L,p(L)},[p]),E=(M=e.style)!=null&&M.textShadow?`${e.style.textShadowX||0}px ${e.style.textShadowY||0}px ${e.style.textShadowBlur||0}px ${e.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",ae=(()=>{var J,ye,le,De,We,be,I,V,ne,ie,oe,Re;const L={...e.style,position:"absolute",cursor:t&&!s?"move":"pointer",textShadow:E,zIndex:10,fontFamily:((J=e.style)==null?void 0:J.fontFamily)||"Arial",color:((ye=e.style)==null?void 0:ye.color)||"#000000",fontWeight:((le=e.style)==null?void 0:le.fontWeight)||"normal",fontStyle:((De=e.style)==null?void 0:De.fontStyle)||"normal",textDecoration:((We=e.style)==null?void 0:We.textDecoration)||"none",textAlign:((be=e.style)==null?void 0:be.textAlign)||"left",backgroundColor:((I=e.style)==null?void 0:I.backgroundColor)||"transparent",padding:((V=e.style)==null?void 0:V.padding)||"8px",borderRadius:((ne=e.style)==null?void 0:ne.borderRadius)||"0px",border:((ie=e.style)==null?void 0:ie.border)||"none",opacity:((oe=e.style)==null?void 0:oe.opacity)!==void 0?e.style.opacity:1};if(e.position.x<=1&&e.position.y<=1?(L.left=`${e.position.x*100}%`,L.top=`${e.position.y*100}%`):(L.left=`${e.position.x}px`,L.top=`${e.position.y}px`),(Re=e.style)!=null&&Re.fontSize){const Se=parseFloat(e.style.fontSize);if(Se&&i.width){const Ce=Se/800*i.width;L.fontSize=`${Math.max(12,Ce)}px`}else L.fontSize=e.style.fontSize}else{const Se=.02*i.width;L.fontSize=`${Math.max(12,Se)}px`}return L})();return y.useEffect(()=>{var J,ye;const L=(ye=(J=e.style)==null?void 0:J.fontFamily)==null?void 0:ye.replace(/'/g,"");if(L&&!document.fonts.check(`12px ${L}`)){const le=new FontFace(L,`local(${L})`);le.load().then(()=>document.fonts.add(le))}},[(fe=e.style)==null?void 0:fe.fontFamily]),l.jsxs("div",{ref:ve,className:`${t?"ring-2 ring-purple-500":""} ${g?"opacity-50":"opacity-100"}`,style:ae,onClick:L=>{L.stopPropagation(),r(),!s&&t&&(o(!0),setTimeout(()=>{c.current&&(c.current.focus(),c.current.select())},0))},onMouseDown:F,onContextMenu:H,children:[s?l.jsx("input",{ref:c,type:"text",value:e.content,onChange:R,onBlur:N,onKeyDown:A,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(Ie=e.style)==null?void 0:Ie.fontFamily,fontSize:(re=e.style)==null?void 0:re.fontSize,fontWeight:(xe=e.style)==null?void 0:xe.fontWeight,fontStyle:(ue=e.style)==null?void 0:ue.fontStyle,textDecoration:(me=e.style)==null?void 0:me.textDecoration,color:(Le=e.style)==null?void 0:Le.color,textAlign:(Ne=e.style)==null?void 0:Ne.textAlign,minWidth:"100px"},autoFocus:!0}):l.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((we=e.style)==null?void 0:we.backgroundColor)||"transparent",padding:((Fe=e.style)==null?void 0:Fe.padding)||"8px",borderRadius:(($e=e.style)==null?void 0:$e.borderRadius)||"0px",border:((ke=e.style)==null?void 0:ke.border)||"none",fontFamily:((Oe=e.style)==null?void 0:Oe.fontFamily)||"Arial"},children:e.content||"Editar texto"}),t&&l.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:L=>{var J;L.stopPropagation(),n({style:{...e.style,fontWeight:((J=e.style)==null?void 0:J.fontWeight)==="bold"?"normal":"bold"}})},children:l.jsx("span",{className:`text-xs ${((je=e.style)==null?void 0:je.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:L=>{var J;L.stopPropagation(),n({style:{...e.style,fontStyle:((J=e.style)==null?void 0:J.fontStyle)==="italic"?"normal":"italic"}})},children:l.jsx("span",{className:`text-xs ${((Ge=e.style)==null?void 0:Ge.fontStyle)==="italic"?"italic":""}`,children:"I"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:L=>{var J;L.stopPropagation(),n({style:{...e.style,textDecoration:((J=e.style)==null?void 0:J.textDecoration)==="underline"?"none":"underline"}})},children:l.jsx("span",{className:`text-xs ${((qe=e.style)==null?void 0:qe.textDecoration)==="underline"?"underline":""}`,children:"U"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:L=>{L.stopPropagation(),a()},children:l.jsx(ur,{className:"h-3 w-3 text-gray-700"})})]}),m&&l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${C.x}px`,top:`${C.y}px`},onClick:L=>L.stopPropagation(),children:[l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{o(!0),v(!1)},children:[l.jsx(xt,{className:"h-4 w-4"}),"Editar texto"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:G,children:[l.jsx(ln,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var L;n({style:{...e.style,opacity:Math.max(0,(((L=e.style)==null?void 0:L.opacity)||1)-.1)}}),v(!1)},children:[l.jsx(Xa,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),v(!1)},children:[l.jsx(ur,{className:"h-4 w-4"}),"Eliminar"]})]})]})}function ci(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Io(e,t)}var di=he.createContext(null);function mc(e){e()}var ui=mc,bc=function(t){return ui=t},xc=function(){return ui};function yc(){var e=xc(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,s=r={callback:a,next:null,prev:r};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var ua={notify:function(){},get:function(){return[]}};function pi(e,t){var r,n=ua;function a(p){return c(),n.subscribe(p)}function i(){n.notify()}function s(){g.onStateChange&&g.onStateChange()}function o(){return!!r}function c(){r||(r=t?t.addNestedSub(s):e.subscribe(s),n=yc())}function u(){r&&(r(),r=void 0,n.clear(),n=ua)}var g={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:s,isSubscribed:o,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return n}};return g}var gi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;function wc(e){var t=e.store,r=e.context,n=e.children,a=y.useMemo(function(){var o=pi(t);return{store:t,subscription:o}},[t]),i=y.useMemo(function(){return t.getState()},[t]);gi(function(){var o=a.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),i!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[a,i]);var s=r||di;return he.createElement(s.Provider,{value:a},n)}var Br={exports:{}},de={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa;function Dc(){if(pa)return de;pa=1;var e=60103,t=60106,r=60107,n=60108,a=60114,i=60109,s=60110,o=60112,c=60113,u=60120,g=60115,p=60116,d=60121,f=60122,h=60117,b=60129,m=60131;if(typeof Symbol=="function"&&Symbol.for){var v=Symbol.for;e=v("react.element"),t=v("react.portal"),r=v("react.fragment"),n=v("react.strict_mode"),a=v("react.profiler"),i=v("react.provider"),s=v("react.context"),o=v("react.forward_ref"),c=v("react.suspense"),u=v("react.suspense_list"),g=v("react.memo"),p=v("react.lazy"),d=v("react.block"),f=v("react.server.block"),h=v("react.fundamental"),b=v("react.debug_trace_mode"),m=v("react.legacy_hidden")}function C(E){if(typeof E=="object"&&E!==null){var K=E.$$typeof;switch(K){case e:switch(E=E.type,E){case r:case a:case n:case c:case u:return E;default:switch(E=E&&E.$$typeof,E){case s:case o:case p:case g:case i:return E;default:return K}}case t:return K}}}var D=i,N=e,R=o,A=r,F=p,U=g,k=t,H=a,G=n,ve=c;return de.ContextConsumer=s,de.ContextProvider=D,de.Element=N,de.ForwardRef=R,de.Fragment=A,de.Lazy=F,de.Memo=U,de.Portal=k,de.Profiler=H,de.StrictMode=G,de.Suspense=ve,de.isAsyncMode=function(){return!1},de.isConcurrentMode=function(){return!1},de.isContextConsumer=function(E){return C(E)===s},de.isContextProvider=function(E){return C(E)===i},de.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===e},de.isForwardRef=function(E){return C(E)===o},de.isFragment=function(E){return C(E)===r},de.isLazy=function(E){return C(E)===p},de.isMemo=function(E){return C(E)===g},de.isPortal=function(E){return C(E)===t},de.isProfiler=function(E){return C(E)===a},de.isStrictMode=function(E){return C(E)===n},de.isSuspense=function(E){return C(E)===c},de.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===a||E===b||E===n||E===c||E===u||E===m||typeof E=="object"&&E!==null&&(E.$$typeof===p||E.$$typeof===g||E.$$typeof===i||E.$$typeof===s||E.$$typeof===o||E.$$typeof===h||E.$$typeof===d||E[0]===f)},de.typeOf=C,de}var ga;function Sc(){return ga||(ga=1,Br.exports=Dc()),Br.exports}var Cc=Sc(),Ic=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Nc=["reactReduxForwardedRef"],Ec=[],Pc=[null,null];function Tc(e,t){var r=e[1];return[t.payload,r+1]}function fa(e,t,r){gi(function(){return e.apply(void 0,t)},r)}function Oc(e,t,r,n,a,i,s){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,s())}function jc(e,t,r,n,a,i,s,o,c,u){if(e){var g=!1,p=null,d=function(){if(!g){var b=t.getState(),m,v;try{m=n(b,a.current)}catch(C){v=C,p=C}v||(p=null),m===i.current?s.current||c():(i.current=m,o.current=m,s.current=!0,u({type:"STORE_UPDATED",payload:{error:v}}))}};r.onStateChange=d,r.trySubscribe(),d();var f=function(){if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p};return f}}var Rc=function(){return[null,0]};function Mc(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(D){return"ConnectAdvanced("+D+")"}:n,i=r.methodName,s=i===void 0?"connectAdvanced":i,o=r.renderCountProp,c=o===void 0?void 0:o,u=r.shouldHandleStateChanges,g=u===void 0?!0:u,p=r.storeKey,d=p===void 0?"store":p;r.withRef;var f=r.forwardRef,h=f===void 0?!1:f,b=r.context,m=b===void 0?di:b,v=dr(r,Ic),C=m;return function(N){var R=N.displayName||N.name||"Component",A=a(R),F=W({},v,{getDisplayName:a,methodName:s,renderCountProp:c,shouldHandleStateChanges:g,storeKey:d,displayName:A,wrappedComponentName:R,WrappedComponent:N}),U=v.pure;function k(K){return e(K.dispatch,F)}var H=U?y.useMemo:function(K){return K()};function G(K){var ae=y.useMemo(function(){var be=K.reactReduxForwardedRef,I=dr(K,Nc);return[K.context,be,I]},[K]),M=ae[0],fe=ae[1],Ie=ae[2],re=y.useMemo(function(){return M&&M.Consumer&&Cc.isContextConsumer(he.createElement(M.Consumer,null))?M:C},[M,C]),xe=y.useContext(re),ue=!!K.store&&!!K.store.getState&&!!K.store.dispatch;xe&&xe.store;var me=ue?K.store:xe.store,Le=y.useMemo(function(){return k(me)},[me]),Ne=y.useMemo(function(){if(!g)return Pc;var be=pi(me,ue?null:xe.subscription),I=be.notifyNestedSubs.bind(be);return[be,I]},[me,ue,xe]),we=Ne[0],Fe=Ne[1],$e=y.useMemo(function(){return ue?xe:W({},xe,{subscription:we})},[ue,xe,we]),ke=y.useReducer(Tc,Ec,Rc),Oe=ke[0],je=Oe[0],Ge=ke[1];if(je&&je.error)throw je.error;var qe=y.useRef(),L=y.useRef(Ie),J=y.useRef(),ye=y.useRef(!1),le=H(function(){return J.current&&Ie===L.current?J.current:Le(me.getState(),Ie)},[me,je,Ie]);fa(Oc,[L,qe,ye,Ie,le,J,Fe]),fa(jc,[g,me,we,Le,L,qe,ye,J,Fe,Ge],[me,we,Le]);var De=y.useMemo(function(){return he.createElement(N,W({},le,{ref:fe}))},[fe,N,le]),We=y.useMemo(function(){return g?he.createElement(re.Provider,{value:$e},De):De},[re,De,$e]);return We}var ve=U?he.memo(G):G;if(ve.WrappedComponent=N,ve.displayName=G.displayName=A,h){var E=he.forwardRef(function(ae,M){return he.createElement(ve,W({},ae,{reactReduxForwardedRef:M}))});return E.displayName=A,E.WrappedComponent=N,Xn(E,N)}return Xn(ve,N)}}function ha(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Lr(e,t){if(ha(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!ha(e[r[a]],t[r[a]]))return!1;return!0}function Ac(e,t){var r={},n=function(s){var o=e[s];typeof o=="function"&&(r[s]=function(){return t(o.apply(void 0,arguments))})};for(var a in e)n(a);return r}function vn(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function va(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function fi(e,t){return function(n,a){a.displayName;var i=function(o,c){return i.dependsOnOwnProps?i.mapToProps(o,c):i.mapToProps(o)};return i.dependsOnOwnProps=!0,i.mapToProps=function(o,c){i.mapToProps=e,i.dependsOnOwnProps=va(e);var u=i(o,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=va(u),u=i(o,c)),u},i}}function kc(e){return typeof e=="function"?fi(e):void 0}function Bc(e){return e?void 0:vn(function(t){return{dispatch:t}})}function Lc(e){return e&&typeof e=="object"?vn(function(t){return Ac(e,t)}):void 0}const Fc=[kc,Bc,Lc];function $c(e){return typeof e=="function"?fi(e):void 0}function zc(e){return e?void 0:vn(function(){return{}})}const Hc=[$c,zc];function Gc(e,t,r){return W({},r,e,t)}function Wc(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,s=!1,o;return function(u,g,p){var d=e(u,g,p);return s?(!a||!i(d,o))&&(o=d):(s=!0,o=d),o}}}function Vc(e){return typeof e=="function"?Wc(e):void 0}function qc(e){return e?void 0:function(){return Gc}}const Uc=[Vc,qc];var Yc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _c(e,t,r,n){return function(i,s){return r(e(i,s),t(n,s),s)}}function Xc(e,t,r,n,a){var i=a.areStatesEqual,s=a.areOwnPropsEqual,o=a.areStatePropsEqual,c=!1,u,g,p,d,f;function h(D,N){return u=D,g=N,p=e(u,g),d=t(n,g),f=r(p,d,g),c=!0,f}function b(){return p=e(u,g),t.dependsOnOwnProps&&(d=t(n,g)),f=r(p,d,g),f}function m(){return e.dependsOnOwnProps&&(p=e(u,g)),t.dependsOnOwnProps&&(d=t(n,g)),f=r(p,d,g),f}function v(){var D=e(u,g),N=!o(D,p);return p=D,N&&(f=r(p,d,g)),f}function C(D,N){var R=!s(N,g),A=!i(D,u,N,g);return u=D,g=N,R&&A?b():R?m():A?v():f}return function(N,R){return c?C(N,R):h(N,R)}}function Jc(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=dr(t,Yc),s=r(e,i),o=n(e,i),c=a(e,i),u=i.pure?Xc:_c;return u(s,o,c,e,i)}var Kc=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Fr(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,s){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+s.wrappedComponentName+".")}}function Qc(e,t){return e===t}function Zc(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?Mc:r,a=t.mapStateToPropsFactories,i=a===void 0?Hc:a,s=t.mapDispatchToPropsFactories,o=s===void 0?Fc:s,c=t.mergePropsFactories,u=c===void 0?Uc:c,g=t.selectorFactory,p=g===void 0?Jc:g;return function(f,h,b,m){m===void 0&&(m={});var v=m,C=v.pure,D=C===void 0?!0:C,N=v.areStatesEqual,R=N===void 0?Qc:N,A=v.areOwnPropsEqual,F=A===void 0?Lr:A,U=v.areStatePropsEqual,k=U===void 0?Lr:U,H=v.areMergedPropsEqual,G=H===void 0?Lr:H,ve=dr(v,Kc),E=Fr(f,i,"mapStateToProps"),K=Fr(h,o,"mapDispatchToProps"),ae=Fr(b,u,"mergeProps");return n(p,W({methodName:"connect",getDisplayName:function(fe){return"Connect("+fe+")"},shouldHandleStateChanges:!!f,initMapStateToProps:E,initMapDispatchToProps:K,initMergeProps:ae,pure:D,areStatesEqual:R,areOwnPropsEqual:F,areStatePropsEqual:k,areMergedPropsEqual:G},ve))}}const hi=Zc();bc(No.unstable_batchedUpdates);function ed(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function vi(e,t){var r=y.useState(function(){return{inputs:t,result:e()}})[0],n=y.useRef(!0),a=y.useRef(r),i=n.current||!!(t&&a.current.inputs&&ed(t,a.current.inputs)),s=i?a.current:{inputs:t,result:e()};return y.useEffect(function(){n.current=!1,a.current=s},[s]),s.result}function td(e,t){return vi(function(){return e},t)}var te=vi,z=td,rd="Invariant failed";function nd(e,t){throw new Error(rd)}var rt=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,s=n-i,o=a-r,c={top:r,right:n,bottom:a,left:i,width:s,height:o,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},mn=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},ma=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},ad=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},$r={top:0,right:0,bottom:0,left:0},bn=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?$r:n,i=t.border,s=i===void 0?$r:i,o=t.padding,c=o===void 0?$r:o,u=rt(mn(r,a)),g=rt(ma(r,s)),p=rt(ma(g,c));return{marginBox:u,borderBox:rt(r),paddingBox:g,contentBox:p,margin:a,border:s,padding:c}},Je=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&nd(),a},id=function(){return{x:window.pageXOffset,y:window.pageYOffset}},pr=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,s=t.padding,o=ad(n,r);return bn({borderBox:o,border:a,margin:i,padding:s})},gr=function(t,r){return r===void 0&&(r=id()),pr(t,r)},mi=function(t,r){var n={top:Je(r.marginTop),right:Je(r.marginRight),bottom:Je(r.marginBottom),left:Je(r.marginLeft)},a={top:Je(r.paddingTop),right:Je(r.paddingRight),bottom:Je(r.paddingBottom),left:Je(r.paddingLeft)},i={top:Je(r.borderTopWidth),right:Je(r.borderRightWidth),bottom:Je(r.borderBottomWidth),left:Je(r.borderLeftWidth)};return bn({borderBox:t,margin:n,padding:a,border:i})},bi=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return mi(r,n)},ba=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function od(e,t){return!!(e===t||ba(e)&&ba(t))}function sd(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!od(e[r],t[r]))return!1;return!0}function Pe(e,t){t===void 0&&(t=sd);var r,n=[],a,i=!1;function s(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return i&&r===this&&t(o,n)||(a=e.apply(this,o),i=!0,r=this,n=o),a}return s}var qt=function(t){var r=[],n=null,a=function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];r=o,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function xi(e,t){}xi.bind(null,"warn");xi.bind(null,"error");function lt(){}function ld(e,t){return W({},e,{},t)}function et(e,t,r){var n=t.map(function(a){var i=ld(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var cd="Invariant failed";function fr(e){this.message=e}fr.prototype.toString=function(){return this.message};function P(e,t){throw new fr(cd)}var dd=function(e){ci(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=lt,n.onWindowError=function(o){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var u=o.error;u instanceof fr&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=et(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof fr){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(he.Component),ud=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,hr=function(t){return t+1},pd=function(t){return`
  You have lifted an item in position `+hr(t.source.index)+`
`},yi=function(t,r){var n=t.droppableId===r.droppableId,a=hr(t.index),i=hr(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},wi=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},gd=function(t){var r=t.destination;if(r)return yi(t.source,r);var n=t.combine;return n?wi(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},xa=function(t){return`
  The item has returned to its starting position
  of `+hr(t.index)+`
`},fd=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+xa(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+yi(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+wi(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+xa(t.source)+`
  `},cr={dragHandleUsageInstructions:ud,onDragStart:pd,onDragUpdate:gd,onDragEnd:fd},Te={x:0,y:0},Ae=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},Ye=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},ct=function(t,r){return t.x===r.x&&t.y===r.y},It=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},vt=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Ut=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},ya=function(t,r){return Math.min.apply(Math,r.map(function(n){return Ut(t,n)}))},Di=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},hd=function(e,t){var r=rt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Jt=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},wa=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},vd={top:0,right:0,bottom:0,left:0},md=function(t,r){return r?Jt(t,r.scroll.diff.displacement):t},bd=function(t,r,n){if(n&&n.increasedBy){var a;return W({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},xd=function(t,r){return r&&r.shouldClipSubject?hd(r.pageMarginBox,t):rt(t)},wt=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=md(t.marginBox,a),s=bd(i,n,r),o=xd(s,a);return{page:t,withPlaceholder:r,active:o}},xn=function(e,t){e.frame||P();var r=e.frame,n=Ye(t,r.scroll.initial),a=It(n),i=W({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),s=wt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),o=W({},e,{frame:i,subject:s});return o};function vr(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function yn(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function pt(e,t){if(e.find)return e.find(t);var r=yn(e,t);if(r!==-1)return e[r]}function Si(e){return Array.prototype.slice.call(e)}var Ci=Pe(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Ii=Pe(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Ir=Pe(function(e){return vr(e)}),yd=Pe(function(e){return vr(e)}),Nt=Pe(function(e,t){var r=yd(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function wn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Nr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Er=Pe(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),wd=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var s=wn(i);if(!s)return null;function o(b){var m={type:"COMBINE",combine:{draggableId:b,droppableId:n.descriptor.id}};return W({},i,{at:m})}var c=i.displaced.all,u=c.length?c[0]:null;if(t)return u?o(u):null;var g=Er(r,a);if(!u){if(!g.length)return null;var p=g[g.length-1];return o(p.descriptor.id)}var d=yn(g,function(b){return b.descriptor.id===u});d===-1&&P();var f=d-1;if(f<0)return null;var h=g[f];return o(h.descriptor.id)},Et=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ni={point:Te,value:0},Yt={invisible:{},visible:{},all:[]},Dd={displaced:Yt,displacedBy:Ni,at:null},tt=function(e,t){return function(r){return e<=r&&r<=t}},Ei=function(e){var t=tt(e.top,e.bottom),r=tt(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),s=r(n.left)||r(n.right),o=i&&s;if(o)return!0;var c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right,g=c&&u;if(g)return!0;var p=c&&s||u&&i;return p}},Sd=function(e){var t=tt(e.top,e.bottom),r=tt(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},Dn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Pi={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Cd=function(e){return function(t){var r=tt(t.top,t.bottom),n=tt(t.left,t.right);return function(a){return e===Dn?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},Id=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:Te;return Jt(t,n)},Nd=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},Ed=function(t,r,n){return n(r)(t)},Sn=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,s=t.isVisibleThroughFrameFn,o=i?Id(r,n):r;return Nd(o,n,s)&&Ed(o,a,s)},Pd=function(t){return Sn(W({},t,{isVisibleThroughFrameFn:Ei}))},Ti=function(t){return Sn(W({},t,{isVisibleThroughFrameFn:Sd}))},Td=function(t){return Sn(W({},t,{isVisibleThroughFrameFn:Cd(t.destination.axis)}))},Od=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var s=i[t];return s?s.shouldAnimate:!0};function jd(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return rt(mn(r,n))}function _t(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,s=e.last;return t.reduce(function(c,u){var g=jd(u,n),p=u.descriptor.id;c.all.push(p);var d=Pd({target:g,destination:r,viewport:a,withDroppableDisplacement:!0});if(!d)return c.invisible[u.descriptor.id]=!0,c;var f=Od(p,s,i),h={draggableId:p,shouldAnimate:f};return c.visible[p]=h,c},{all:[],visible:{},invisible:{}})}function Rd(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Da(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=Rd(t,{inHomeList:r});return{displaced:Yt,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function mr(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,s=e.last,o=e.index,c=e.forceShouldAnimate,u=Et(t,n);if(o==null)return Da({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var g=pt(r,function(b){return b.descriptor.index===o});if(!g)return Da({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var p=Er(t,r),d=r.indexOf(g),f=p.slice(d),h=_t({afterDragging:f,destination:n,displacedBy:i,last:s,viewport:a.frame,forceShouldAnimate:c});return{displaced:h,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function ut(e,t){return!!t.effected[e]}var Md=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var s=a.draggableId,o=n[s],c=o.descriptor.index,u=ut(s,i);return u?t?c:c-1:t?c+1:c},Ad=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,s=t?i+1:i-1,o=n[0].descriptor.index,c=n[n.length-1].descriptor.index,u=r?c:c+1;return s<o||s>u?null:s},kd=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,s=e.insideDestination,o=e.previousImpact,c=e.viewport,u=e.afterCritical,g=o.at;if(g||P(),g.type==="REORDER"){var p=Ad({isMovingForward:t,isInHomeList:r,location:g.destination,insideDestination:s});return p==null?null:mr({draggable:n,insideDestination:s,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:p})}var d=Md({isMovingForward:t,destination:i,displaced:o.displaced,draggables:a,combine:g.combine,afterCritical:u});return d==null?null:mr({draggable:n,insideDestination:s,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:d})},Bd=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return ut(n,r)?i?Te:It(a.point):i?a.point:Te},Ld=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=Nr(r);a||P();var i=a.draggableId,s=n[i].page.borderBox.center,o=Bd({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Ae(s,o)},Oi=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},Fd=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},Cn=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},Sa=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return vt(r.line,n.marginBox[r.end]+Oi(r,a),Cn(r,n.marginBox,a))},Ca=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return vt(r.line,n.marginBox[r.start]-Fd(r,a),Cn(r,n.marginBox,a))},$d=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return vt(r.line,n.contentBox[r.start]+Oi(r,a),Cn(r,n.contentBox,a))},zd=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,s=Nt(a.descriptor.id,n),o=r.page,c=a.axis;if(!s.length)return $d({axis:c,moveInto:a.page,isMoving:o});var u=t.displaced,g=t.displacedBy,p=u.all[0];if(p){var d=n[p];if(ut(p,i))return Ca({axis:c,moveRelativeTo:d.page,isMoving:o});var f=pr(d.page,g.point);return Ca({axis:c,moveRelativeTo:f,isMoving:o})}var h=s[s.length-1];if(h.descriptor.id===r.descriptor.id)return o.borderBox.center;if(ut(h.descriptor.id,i)){var b=pr(h.page,It(i.displacedBy.point));return Sa({axis:c,moveRelativeTo:b,isMoving:o})}return Sa({axis:c,moveRelativeTo:h.page,isMoving:o})},en=function(e,t){var r=e.frame;return r?Ae(t,r.scroll.diff.displacement):t},Hd=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,s=t.afterCritical,o=n.page.borderBox.center,c=r.at;return!a||!c?o:c.type==="REORDER"?zd({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:s}):Ld({impact:r,draggables:i,afterCritical:s})},Pr=function(e){var t=Hd(e),r=e.droppable,n=r?en(r,t):t;return n},ji=function(e,t){var r=Ye(t,e.scroll.initial),n=It(r),a=rt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function Ia(e,t){return e.map(function(r){return t[r]})}function Gd(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var Wd=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,s=ji(r,Ae(r.scroll.current,i)),o=n.frame?xn(n,Ae(n.frame.scroll.current,i)):n,c=t.displaced,u=_t({afterDragging:Ia(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:s.frame,last:c,forceShouldAnimate:!1}),g=_t({afterDragging:Ia(c.all,a),destination:o,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),p={},d={},f=[c,u,g];c.all.forEach(function(b){var m=Gd(b,f);if(m){d[b]=m;return}p[b]=!0});var h=W({},t,{displaced:{all:c.all,invisible:p,visible:d}});return h},Vd=function(e,t){return Ae(e.scroll.diff.displacement,t)},In=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=Vd(n,t),i=Ye(a,r.page.borderBox.center);return Ae(r.client.borderBox.center,i)},Ri=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,s=e.onlyOnMainAxis,o=s===void 0?!1:s,c=Ye(n,t.page.borderBox.center),u=Jt(t.page.borderBox,c),g={target:u,destination:r,withDroppableDisplacement:i,viewport:a};return o?Td(g):Ti(g)},qd=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,s=e.viewport,o=e.previousPageBorderBoxCenter,c=e.previousClientSelection,u=e.afterCritical;if(!n.isEnabled)return null;var g=Nt(n.descriptor.id,a),p=Et(r,n),d=wd({isMovingForward:t,draggable:r,destination:n,insideDestination:g,previousImpact:i})||kd({isMovingForward:t,isInHomeList:p,draggable:r,draggables:a,destination:n,insideDestination:g,previousImpact:i,viewport:s,afterCritical:u});if(!d)return null;var f=Pr({impact:d,draggable:r,droppable:n,draggables:a,afterCritical:u}),h=Ri({draggable:r,destination:n,newPageBorderBoxCenter:f,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(h){var b=In({pageBorderBoxCenter:f,draggable:r,viewport:s});return{clientSelection:b,impact:d,scrollJumpRequest:null}}var m=Ye(f,o),v=Wd({impact:d,viewport:s,destination:n,draggables:a,maxScrollChange:m});return{clientSelection:c,impact:v,scrollJumpRequest:m}},He=function(t){var r=t.subject.active;return r||P(),r},Ud=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,s=n.subject.active;if(!s)return null;var o=n.axis,c=tt(s[o.start],s[o.end]),u=Ir(a).filter(function(p){return p!==n}).filter(function(p){return p.isEnabled}).filter(function(p){return!!p.subject.active}).filter(function(p){return Ei(i.frame)(He(p))}).filter(function(p){var d=He(p);return t?s[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<s[o.crossAxisStart]}).filter(function(p){var d=He(p),f=tt(d[o.start],d[o.end]);return c(d[o.start])||c(d[o.end])||f(s[o.start])||f(s[o.end])}).sort(function(p,d){var f=He(p)[o.crossAxisStart],h=He(d)[o.crossAxisStart];return t?f-h:h-f}).filter(function(p,d,f){return He(p)[o.crossAxisStart]===He(f[0])[o.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var g=u.filter(function(p){var d=tt(He(p)[o.start],He(p)[o.end]);return d(r[o.line])});return g.length===1?g[0]:g.length>1?g.sort(function(p,d){return He(p)[o.start]-He(d)[o.start]})[0]:u.sort(function(p,d){var f=ya(r,wa(He(p))),h=ya(r,wa(He(d)));return f!==h?f-h:He(p)[o.start]-He(d)[o.start]})[0]},Na=function(t,r){var n=t.page.borderBox.center;return ut(t.descriptor.id,r)?Ye(n,r.displacedBy.point):n},Yd=function(t,r){var n=t.page.borderBox;return ut(t.descriptor.id,r)?Jt(n,It(r.displacedBy.point)):n},_d=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,s=a.filter(function(o){return Ti({target:Yd(o,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(o,c){var u=Ut(t,en(n,Na(o,i))),g=Ut(t,en(n,Na(c,i)));return u<g?-1:g<u?1:o.descriptor.index-c.descriptor.index});return s[0]||null},Kt=Pe(function(t,r){var n=r[t.line];return{value:n,point:vt(t.line,n)}}),Xd=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return vt(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],s=Nt(t.descriptor.id,n),o=s.reduce(function(g,p){return g+p.client.marginBox[a.size]},0),c=o+r[a.line],u=c-i;return u<=0?null:vt(a.line,u)},Mi=function(t,r){return W({},t,{scroll:W({},t.scroll,{max:r})})},Ai=function(t,r,n){var a=t.frame;Et(r,t)&&P(),t.subject.withPlaceholder&&P();var i=Kt(t.axis,r.displaceBy).point,s=Xd(t,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=wt({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return W({},t,{subject:c})}var u=s?Ae(a.scroll.max,s):a.scroll.max,g=Mi(a,u),p=wt({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:g});return W({},t,{subject:p,frame:g})},Jd=function(t){var r=t.subject.withPlaceholder;r||P();var n=t.frame;if(!n){var a=wt({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return W({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||P();var s=Mi(n,i),o=wt({page:t.subject.page,axis:t.axis,frame:s,withPlaceholder:null});return W({},t,{subject:o,frame:s})},Kd=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,s=e.destination,o=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var u={displaced:Yt,displacedBy:Ni,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},g=Pr({impact:u,draggable:a,droppable:s,draggables:i,afterCritical:c}),p=Et(a,s)?s:Ai(s,a,i),d=Ri({draggable:a,destination:p,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?u:null}var f=t[s.axis.line]<=r.page.borderBox.center[s.axis.line],h=function(){var m=r.descriptor.index;return r.descriptor.id===a.descriptor.id||f?m:m+1}(),b=Kt(s.axis,a.displaceBy);return mr({draggable:a,insideDestination:n,destination:s,viewport:o,displacedBy:b,last:Yt,index:h})},Qd=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,s=e.droppables,o=e.viewport,c=e.afterCritical,u=Ud({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:s,viewport:o});if(!u)return null;var g=Nt(u.descriptor.id,i),p=_d({pageBorderBoxCenter:r,viewport:o,destination:u,insideDestination:g,afterCritical:c}),d=Kd({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:i,moveRelativeTo:p,insideDestination:g,viewport:o,afterCritical:c});if(!d)return null;var f=Pr({impact:d,draggable:n,droppable:u,draggables:i,afterCritical:c}),h=In({pageBorderBoxCenter:f,draggable:n,viewport:o});return{clientSelection:h,impact:d,scrollJumpRequest:null}},_e=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Zd=function(t,r){var n=_e(t);return n?r[n]:null},eu=function(e){var t=e.state,r=e.type,n=Zd(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],s=n||i,o=s.axis.direction,c=o==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||o==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",g=t.dimensions.draggables[t.critical.draggable.id],p=t.current.page.borderBoxCenter,d=t.dimensions,f=d.draggables,h=d.droppables;return c?qd({isMovingForward:u,previousPageBorderBoxCenter:p,draggable:g,destination:s,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Qd({isMovingForward:u,previousPageBorderBoxCenter:p,draggable:g,isOver:s,draggables:f,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function ft(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function ki(e){var t=tt(e.top,e.bottom),r=tt(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function tu(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function ru(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(s){var o=s.axis,c=vt(s.axis.line,t.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:Ut(a,c)}}).sort(function(s,o){return o.distance-s.distance});return i[0]?i[0].id:null}function nu(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=Ir(n).filter(function(i){if(!i.isEnabled)return!1;var s=i.subject.active;if(!s||!tu(t,s))return!1;if(ki(s)(t.center))return!0;var o=i.axis,c=s.center[o.crossAxisLine],u=t[o.crossAxisStart],g=t[o.crossAxisEnd],p=tt(s[o.crossAxisStart],s[o.crossAxisEnd]),d=p(u),f=p(g);return!d&&!f?!0:d?u<c:g>c});return a.length?a.length===1?a[0].descriptor.id:ru({pageBorderBox:t,draggable:r,candidates:a}):null}var Bi=function(t,r){return rt(Jt(t,r))},au=function(e,t){var r=e.frame;return r?Bi(t,r.scroll.diff.value):t};function Li(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function iu(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var ou=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,s=e.viewport,o=e.afterCritical,c=n.axis,u=Kt(n.axis,r.displaceBy),g=u.value,p=t[c.start],d=t[c.end],f=Er(r,a),h=pt(f,function(m){var v=m.descriptor.id,C=m.page.borderBox.center[c.line],D=ut(v,o),N=Li({displaced:i,id:v});return D?N?d<=C:p<C-g:N?d<=C+g:p<C}),b=iu({draggable:r,closest:h,inHomeList:Et(r,n)});return mr({draggable:r,insideDestination:a,destination:n,viewport:s,last:i,displacedBy:u,index:b})},su=4,lu=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,s=e.afterCritical;if(!a.isCombineEnabled)return null;var o=a.axis,c=Kt(a.axis,t.displaceBy),u=c.value,g=r[o.start],p=r[o.end],d=Er(t,i),f=pt(d,function(b){var m=b.descriptor.id,v=b.page.borderBox,C=v[o.size],D=C/su,N=ut(m,s),R=Li({displaced:n.displaced,id:m});return N?R?p>v[o.start]+D&&p<v[o.end]-D:g>v[o.start]-u+D&&g<v[o.end]-u-D:R?p>v[o.start]+u+D&&p<v[o.end]+u-D:g>v[o.start]+D&&g<v[o.end]-D});if(!f)return null;var h={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:a.descriptor.id}}};return h},Fi=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,s=e.viewport,o=e.afterCritical,c=Bi(r.page.borderBox,t),u=nu({pageBorderBox:c,draggable:r,droppables:a});if(!u)return Dd;var g=a[u],p=Nt(g.descriptor.id,n),d=au(g,c);return lu({pageBorderBoxWithDroppableScroll:d,draggable:r,previousImpact:i,destination:g,insideDestination:p,afterCritical:o})||ou({pageBorderBoxWithDroppableScroll:d,draggable:r,destination:g,insideDestination:p,last:i.displaced,viewport:s,afterCritical:o})},Nn=function(e,t){var r;return W({},e,(r={},r[t.descriptor.id]=t,r))},cu=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=_e(r),s=_e(n);if(!i||i===s)return a;var o=a[i];if(!o.subject.withPlaceholder)return a;var c=Jd(o);return Nn(a,c)},du=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,s=cu({previousImpact:a,impact:i,droppables:n}),o=_e(i);if(!o)return s;var c=n[o];if(Et(t,c)||c.subject.withPlaceholder)return s;var u=Ai(c,t,r);return Nn(s,u)},Wt=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,s=e.scrollJumpRequest,o=a||t.viewport,c=n||t.dimensions,u=r||t.current.client.selection,g=Ye(u,t.initial.client.selection),p={offset:g,selection:u,borderBoxCenter:Ae(t.initial.client.borderBoxCenter,g)},d={selection:Ae(p.selection,o.scroll.current),borderBoxCenter:Ae(p.borderBoxCenter,o.scroll.current),offset:Ae(p.offset,o.scroll.diff.value)},f={client:p,page:d};if(t.phase==="COLLECTING")return W({phase:"COLLECTING"},t,{dimensions:c,viewport:o,current:f});var h=c.draggables[t.critical.draggable.id],b=i||Fi({pageOffset:d.offset,draggable:h,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),m=du({draggable:h,impact:b,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),v=W({},t,{current:f,dimensions:{draggables:c.draggables,droppables:m},impact:b,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null});return v};function uu(e,t){return e.map(function(r){return t[r]})}var $i=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,s=t.displaced,o=uu(s.all,n),c=_t({afterDragging:o,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:s});return W({},t,{displaced:c})},zi=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,s=e.afterCritical,o=Pr({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:s});return In({pageBorderBoxCenter:o,draggable:r,viewport:i})},Hi=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&P();var a=t.impact,i=n||t.viewport,s=r||t.dimensions,o=s.draggables,c=s.droppables,u=o[t.critical.draggable.id],g=_e(a);g||P();var p=c[g],d=$i({impact:a,viewport:i,destination:p,draggables:o}),f=zi({impact:d,draggable:u,droppable:p,draggables:o,viewport:i,afterCritical:t.afterCritical});return Wt({impact:d,clientSelection:f,state:t,dimensions:s,viewport:i})},pu=function(e){return{index:e.index,droppableId:e.droppableId}},Gi=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=Kt(r.axis,t.displaceBy),s=Nt(r.descriptor.id,n),o=s.indexOf(t);o===-1&&P();var c=s.slice(o+1),u=c.reduce(function(f,h){return f[h.descriptor.id]=!0,f},{}),g={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:u},p=_t({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),d={displaced:p,displacedBy:i,at:{type:"REORDER",destination:pu(t.descriptor)}};return{impact:d,afterCritical:g}},gu=function(e,t){return{draggables:e.draggables,droppables:Nn(e.droppables,t)}},fu=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=pr(t.client,r),i=gr(a,n),s=W({},t,{placeholder:W({},t.placeholder,{client:a}),client:a,page:i});return s},hu=function(e){var t=e.frame;return t||P(),t},vu=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var s=i.descriptor.droppableId,o=r[s],c=hu(o),u=c.scroll.diff.value,g=Ae(a,u),p=fu({draggable:i,offset:g,initialWindowScroll:n.scroll.initial});return p})},mu=function(e){var t=e.state,r=e.published,n=r.modified.map(function(D){var N=t.dimensions.droppables[D.droppableId],R=xn(N,D.scroll);return R}),a=W({},t.dimensions.droppables,{},Ci(n)),i=Ii(vu({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),s=W({},t.dimensions.draggables,{},i);r.removals.forEach(function(D){delete s[D]});var o={droppables:a,draggables:s},c=_e(t.impact),u=c?o.droppables[c]:null,g=o.draggables[t.critical.draggable.id],p=o.droppables[t.critical.droppable.id],d=Gi({draggable:g,home:p,draggables:s,viewport:t.viewport}),f=d.impact,h=d.afterCritical,b=u&&u.isCombineEnabled?t.impact:f,m=Fi({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:b,viewport:t.viewport,afterCritical:h}),v=W({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:m,onLiftImpact:f,dimensions:o,afterCritical:h,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return v;var C=W({phase:"DROP_PENDING"},v,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return C},tn=function(t){return t.movementMode==="SNAP"},zr=function(t,r,n){var a=gu(t.dimensions,r);return!tn(t)||n?Wt({state:t,dimensions:a}):Hi({state:t,dimensions:a})};function Hr(e){return e.isDragging&&e.movementMode==="SNAP"?W({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Ea={phase:"IDLE",completed:null,shouldFlush:!1},bu=function(e,t){if(e===void 0&&(e=Ea),t.type==="FLUSH")return W({},Ea,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&P();var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,s=r.dimensions,o=r.movementMode,c=s.draggables[n.draggable.id],u=s.droppables[n.droppable.id],g={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Te},p={client:g,page:{selection:Ae(g.selection,i.scroll.initial),borderBoxCenter:Ae(g.selection,i.scroll.initial),offset:Ae(g.selection,i.scroll.diff.value)}},d=Ir(s.droppables).every(function(Ge){return!Ge.isFixedOnPage}),f=Gi({draggable:c,home:u,draggables:s.draggables,viewport:i}),h=f.impact,b=f.afterCritical,m={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:p,current:p,isWindowScrollAllowed:d,impact:h,afterCritical:b,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return m}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var v=W({phase:"COLLECTING"},e,{phase:"COLLECTING"});return v}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||P(),mu({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ft(e)||P();var C=t.payload.client;return ct(C,e.current.client.selection)?e:Wt({state:e,clientSelection:C,impact:tn(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Hr(e);ft(e)||P();var D=t.payload,N=D.id,R=D.newScroll,A=e.dimensions.droppables[N];if(!A)return e;var F=xn(A,R);return zr(e,F,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ft(e)||P();var U=t.payload,k=U.id,H=U.isEnabled,G=e.dimensions.droppables[k];G||P(),G.isEnabled===H&&P();var ve=W({},G,{isEnabled:H});return zr(e,ve,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ft(e)||P();var E=t.payload,K=E.id,ae=E.isCombineEnabled,M=e.dimensions.droppables[K];M||P(),M.isCombineEnabled===ae&&P();var fe=W({},M,{isCombineEnabled:ae});return zr(e,fe,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ft(e)||P(),e.isWindowScrollAllowed||P();var Ie=t.payload.newScroll;if(ct(e.viewport.scroll.current,Ie))return Hr(e);var re=ji(e.viewport,Ie);return tn(e)?Hi({state:e,viewport:re}):Wt({state:e,viewport:re})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ft(e))return e;var xe=t.payload.maxScroll;if(ct(xe,e.viewport.scroll.max))return e;var ue=W({},e.viewport,{scroll:W({},e.viewport.scroll,{max:xe})});return W({phase:"DRAGGING"},e,{viewport:ue})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&P();var me=eu({state:e,type:t.type});return me?Wt({state:e,impact:me.impact,clientSelection:me.clientSelection,scrollJumpRequest:me.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var Le=t.payload.reason;e.phase!=="COLLECTING"&&P();var Ne=W({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Le});return Ne}if(t.type==="DROP_ANIMATE"){var we=t.payload,Fe=we.completed,$e=we.dropDuration,ke=we.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||P();var Oe={phase:"DROP_ANIMATING",completed:Fe,dropDuration:$e,newHomeClientOffset:ke,dimensions:e.dimensions};return Oe}if(t.type==="DROP_COMPLETE"){var je=t.payload.completed;return{phase:"IDLE",completed:je,shouldFlush:!1}}return e},xu=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},yu=function(t){return{type:"LIFT",payload:t}},wu=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Du=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},Su=function(){return{type:"COLLECTION_STARTING",payload:null}},Cu=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Iu=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Nu=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Wi=function(t){return{type:"MOVE",payload:t}},Eu=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},Pu=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},Tu=function(){return{type:"MOVE_UP",payload:null}},Ou=function(){return{type:"MOVE_DOWN",payload:null}},ju=function(){return{type:"MOVE_RIGHT",payload:null}},Ru=function(){return{type:"MOVE_LEFT",payload:null}},En=function(){return{type:"FLUSH",payload:null}},Mu=function(t){return{type:"DROP_ANIMATE",payload:t}},Pn=function(t){return{type:"DROP_COMPLETE",payload:t}},Vi=function(t){return{type:"DROP",payload:t}},Au=function(t){return{type:"DROP_PENDING",payload:t}},qi=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},ku=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var s=i.payload,o=s.id,c=s.clientSelection,u=s.movementMode,g=r();g.phase==="DROP_ANIMATING"&&n(Pn({completed:g.completed})),r().phase!=="IDLE"&&P(),n(En()),n(xu({draggableId:o,movementMode:u}));var p={shouldPublishImmediately:u==="SNAP"},d={draggableId:o,scrollOptions:p},f=e.startPublishing(d),h=f.critical,b=f.dimensions,m=f.viewport;n(wu({critical:h,dimensions:b,clientSelection:c,movementMode:u,viewport:m}))}}}},Bu=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},Tn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Xt={opacity:{drop:0,combining:.7},scale:{drop:.75}},On={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},gt=On.outOfTheWay+"s "+Tn.outOfTheWay,Vt={fluid:"opacity "+gt,snap:"transform "+gt+", opacity "+gt,drop:function(t){var r=t+"s "+Tn.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+gt,placeholder:"height "+gt+", width "+gt+", margin "+gt},Pa=function(t){return ct(t,Te)?null:"translate("+t.x+"px, "+t.y+"px)"},rn={moveTo:Pa,drop:function(t,r){var n=Pa(t);return n?r?n+" scale("+Xt.scale.drop+")":n:null}},nn=On.minDropTime,Ui=On.maxDropTime,Lu=Ui-nn,Ta=1500,Fu=.6,$u=function(e){var t=e.current,r=e.destination,n=e.reason,a=Ut(t,r);if(a<=0)return nn;if(a>=Ta)return Ui;var i=a/Ta,s=nn+Lu*i,o=n==="CANCEL"?s*Fu:s;return Number(o.toFixed(2))},zu=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,s=n.draggables,o=n.droppables,c=_e(t),u=c?o[c]:null,g=o[r.descriptor.droppableId],p=zi({impact:t,draggable:r,draggables:s,afterCritical:i,droppable:u||g,viewport:a}),d=Ye(p,r.client.borderBox.center);return d},Hu=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,s=e.onLiftImpact;if(!n.at||r!=="DROP"){var o=$i({draggables:t,impact:s,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=W({},n,{displaced:Yt});return{impact:c,didDropInsideDroppable:!0}},Gu=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),s=a.payload.reason;if(i.phase==="COLLECTING"){r(Au({reason:s}));return}if(i.phase!=="IDLE"){var o=i.phase==="DROP_PENDING"&&i.isWaiting;o&&P(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||P();var c=i.critical,u=i.dimensions,g=u.draggables[i.critical.draggable.id],p=Hu({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=p.impact,f=p.didDropInsideDroppable,h=f?wn(d):null,b=f?Nr(d):null,m={index:c.draggable.index,droppableId:c.droppable.id},v={draggableId:g.descriptor.id,type:g.descriptor.type,source:m,reason:s,mode:i.movementMode,destination:h,combine:b},C=zu({impact:d,draggable:g,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),D={critical:i.critical,afterCritical:i.afterCritical,result:v,impact:d},N=!ct(i.current.client.offset,C)||!!v.combine;if(!N){r(Pn({completed:D}));return}var R=$u({current:i.current.client.offset,destination:C,reason:s}),A={newHomeClientOffset:C,dropDuration:R,completed:D};r(Mu(A))}}}},Yi=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Wu(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Vu(e){var t=e.onWindowScroll;function r(){t(Yi())}var n=qt(r),a=Wu(n),i=lt;function s(){return i!==lt}function o(){s()&&P(),i=et(window,[a])}function c(){s()||P(),n.cancel(),i(),i=lt}return{start:o,stop:c,isActive:s}}var qu=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Uu=function(e){var t=Vu({onWindowScroll:function(n){e.dispatch(Eu({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&qu(n)&&t.stop(),r(n)}}},Yu=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(s){t||r||(t=!0,e(s),clearTimeout(n))};return a.wasCalled=function(){return t},a},_u=function(){var e=[],t=function(i){var s=yn(e,function(u){return u.timerId===i});s===-1&&P();var o=e.splice(s,1),c=o[0];c.callback()},r=function(i){var s=setTimeout(function(){return t(s)}),o={timerId:s,callback:i};e.push(o)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(s){clearTimeout(s.timerId),s.callback()})}};return{add:r,flush:n}},Xu=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Ju=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Ku=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},$t=function(t,r){r()},tr=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Gr=function(t,r,n,a){if(!t){n(a(r));return}var i=Yu(n),s={announce:i};t(r,s),i.wasCalled()||n(a(r))},Qu=function(e,t){var r=_u(),n=null,a=function(d,f){n&&P(),$t("onBeforeCapture",function(){var h=e().onBeforeCapture;if(h){var b={draggableId:d,mode:f};h(b)}})},i=function(d,f){n&&P(),$t("onBeforeDragStart",function(){var h=e().onBeforeDragStart;h&&h(tr(d,f))})},s=function(d,f){n&&P();var h=tr(d,f);n={mode:f,lastCritical:d,lastLocation:h.source,lastCombine:null},r.add(function(){$t("onDragStart",function(){return Gr(e().onDragStart,h,t,cr.onDragStart)})})},o=function(d,f){var h=wn(f),b=Nr(f);n||P();var m=!Ku(d,n.lastCritical);m&&(n.lastCritical=d);var v=!Xu(n.lastLocation,h);v&&(n.lastLocation=h);var C=!Ju(n.lastCombine,b);if(C&&(n.lastCombine=b),!(!m&&!v&&!C)){var D=W({},tr(d,n.mode),{combine:b,destination:h});r.add(function(){$t("onDragUpdate",function(){return Gr(e().onDragUpdate,D,t,cr.onDragUpdate)})})}},c=function(){n||P(),r.flush()},u=function(d){n||P(),n=null,$t("onDragEnd",function(){return Gr(e().onDragEnd,d,t,cr.onDragEnd)})},g=function(){if(n){var d=W({},tr(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});u(d)}};return{beforeCapture:a,beforeStart:i,start:s,update:o,flush:c,drop:u,abort:g}},Zu=function(e,t){var r=Qu(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var s=i.payload.critical;r.beforeStart(s,i.payload.movementMode),a(i),r.start(s,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var o=i.payload.completed.result;r.flush(),a(i),r.drop(o);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},ep=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&P(),e.dispatch(Pn({completed:n.completed}))}}},tp=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(qi())}};r=requestAnimationFrame(function(){r=null,t=et(window,[s])})}}}},rp=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},np=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},ap=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},ip=function(e){return function(t){return function(r){return function(n){if(ap(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&P(),e.start(a);return}r(n),e.scroll(t.getState())}}}},op=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Vi({reason:n.reason})))}}}},sp=Qa,lp=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,s=e.autoScroller;return cn(bu,sp(Ss(Bu(n),rp(t),ku(t),Gu,ep,tp,op,ip(s),Uu,np(r),Zu(a,i))))},Wr=function(){return{additions:{},removals:{},modified:{}}};function cp(e){var t=e.registry,r=e.callbacks,n=Wr(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,p=g.additions,d=g.removals,f=g.modified,h=Object.keys(p).map(function(v){return t.draggable.getById(v).getDimension(Te)}).sort(function(v,C){return v.descriptor.index-C.descriptor.index}),b=Object.keys(f).map(function(v){var C=t.droppable.getById(v),D=C.callbacks.getScrollWhileDragging();return{droppableId:v,scroll:D}}),m={additions:h,removals:Object.keys(d),modified:b};n=Wr(),r.publish(m)}))},s=function(g){var p=g.descriptor.id;n.additions[p]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[p]&&delete n.removals[p],i()},o=function(g){var p=g.descriptor;n.removals[p.id]=!0,n.modified[p.droppableId]=!0,n.additions[p.id]&&delete n.additions[p.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Wr())};return{add:s,remove:o,stop:c}}var _i=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=Ye({x:r,y:t},{x:a,y:n}),s={x:Math.max(0,i.x),y:Math.max(0,i.y)};return s},Xi=function(){var e=document.documentElement;return e||P(),e},Ji=function(){var e=Xi(),t=_i({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},dp=function(){var e=Yi(),t=Ji(),r=e.y,n=e.x,a=Xi(),i=a.clientWidth,s=a.clientHeight,o=n+i,c=r+s,u=rt({top:r,left:n,right:o,bottom:c}),g={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:Te,displacement:Te}}};return g},up=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=dp(),i=a.scroll.current,s=t.droppable,o=n.droppable.getAllByType(s.type).map(function(p){return p.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(p){return p.getDimension(i)}),u={draggables:Ii(c),droppables:Ci(o)},g={dimensions:u,critical:t,viewport:a};return g};function Oa(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var pp=function(e,t){var r=null,n=cp({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(f,h){e.droppable.exists(f)||P(),r&&t.updateDroppableIsEnabled({id:f,isEnabled:h})},i=function(f,h){r&&(e.droppable.exists(f)||P(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:h}))},s=function(f,h){r&&(e.droppable.exists(f)||P(),t.updateDroppableScroll({id:f,newScroll:h}))},o=function(f,h){r&&e.droppable.getById(f).callbacks.scroll(h)},c=function(){if(r){n.stop();var f=r.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(h){return h.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(f){r||P();var h=r.critical.draggable;f.type==="ADDITION"&&Oa(e,h,f.value)&&n.add(f.value),f.type==="REMOVAL"&&Oa(e,h,f.value)&&n.remove(f.value)},g=function(f){r&&P();var h=e.draggable.getById(f.draggableId),b=e.droppable.getById(h.descriptor.droppableId),m={draggable:h.descriptor,droppable:b.descriptor},v=e.subscribe(u);return r={critical:m,unsubscribe:v},up({critical:m,registry:e,scrollOptions:f.scrollOptions})},p={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:o,updateDroppableScroll:s,startPublishing:g,stopPublishing:c};return p},Ki=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},gp=function(e){window.scrollBy(e.x,e.y)},fp=Pe(function(e){return Ir(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),hp=function(t,r){var n=pt(fp(r),function(a){return a.frame||P(),ki(a.frame.pageMarginBox)(t)});return n},vp=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=hp(t,n);return i},dt={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},mp=function(e,t){var r=e[t.size]*dt.startFromPercentage,n=e[t.size]*dt.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},Qi=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,s=i/a;return s},jn=1,bp=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return dt.maxPixelScroll;if(e===t.startScrollingFrom)return jn;var r=Qi({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=dt.maxPixelScroll*dt.ease(n);return Math.ceil(a)},ja=dt.durationDampening.accelerateAt,Ra=dt.durationDampening.stopDampeningAt,xp=function(e,t){var r=t,n=Ra,a=Date.now(),i=a-r;if(i>=Ra)return e;if(i<ja)return jn;var s=Qi({startOfRange:ja,endOfRange:n,current:i}),o=e*dt.ease(s);return Math.ceil(o)},Ma=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=bp(t,r);return i===0?0:a?Math.max(xp(i,n),jn):i},Aa=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,s=mp(t,a),o=r[a.end]<r[a.start];return o?Ma({distanceToEdge:r[a.end],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i}):-1*Ma({distanceToEdge:r[a.start],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i})},yp=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},wp=Di(function(e){return e===0?0:e}),Zi=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,s={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},o=Aa({container:r,distanceToEdges:s,dragStartTime:t,axis:Dn,shouldUseTimeDampening:i}),c=Aa({container:r,distanceToEdges:s,dragStartTime:t,axis:Pi,shouldUseTimeDampening:i}),u=wp({x:c,y:o});if(ct(u,Te))return null;var g=yp({container:r,subject:n,proposedScroll:u});return g?ct(g,Te)?null:g:null},Dp=Di(function(e){return e===0?0:e>0?1:-1}),Rn=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Ae(r,a),s={x:e(i.x,n.x),y:e(i.y,n.y)};return ct(s,Te)?null:s}}(),eo=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},s=Dp(a),o=Rn({max:i,current:n,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},Mn=function(t,r){return eo({current:t.scroll.current,max:t.scroll.max,change:r})},Sp=function(t,r){if(!Mn(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return Rn({current:a,max:n,change:r})},An=function(t,r){var n=t.frame;return n?eo({current:n.scroll.current,max:n.scroll.max,change:r}):!1},Cp=function(t,r){var n=t.frame;return!n||!An(t,r)?null:Rn({current:n.scroll.current,max:n.scroll.max,change:r})},Ip=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,s=Zi({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return s&&Mn(t,s)?s:null},Np=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,s=t.frame;if(!s)return null;var o=Zi({dragStartTime:a,container:s.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return o&&An(t,o)?o:null},ka=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,s=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id],c=o.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,g=Ip({dragStartTime:r,viewport:u,subject:c,center:s,shouldUseTimeDampening:n});if(g){a(g);return}}var p=vp({center:s,destination:_e(t.impact),droppables:t.dimensions.droppables});if(p){var d=Np({dragStartTime:r,droppable:p,subject:c,center:s,shouldUseTimeDampening:n});d&&i(p.descriptor.id,d)}},Ep=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=qt(t),a=qt(r),i=null,s=function(g){i||P();var p=i,d=p.shouldUseTimeDampening,f=p.dragStartTime;ka({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:f,shouldUseTimeDampening:d})},o=function(g){i&&P();var p=Date.now(),d=!1,f=function(){d=!0};ka({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),i={dragStartTime:p,shouldUseTimeDampening:d},d&&s(g)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:o,stop:c,scroll:s}},Pp=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(u,g){var p=Ae(u.current.client.selection,g);t({client:p})},i=function(u,g){if(!An(u,g))return g;var p=Cp(u,g);if(!p)return r(u.descriptor.id,g),null;var d=Ye(g,p);r(u.descriptor.id,d);var f=Ye(g,d);return f},s=function(u,g,p){if(!u||!Mn(g,p))return p;var d=Sp(g,p);if(!d)return n(p),null;var f=Ye(p,d);n(f);var h=Ye(p,f);return h},o=function(u){var g=u.scrollJumpRequest;if(g){var p=_e(u.impact);p||P();var d=i(u.dimensions.droppables[p],g);if(d){var f=u.viewport,h=s(u.isWindowScrollAllowed,f,d);h&&a(u,h)}}};return o},Tp=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=Ep({scrollWindow:r,scrollDroppable:t}),i=Pp({move:n,scrollWindow:r,scrollDroppable:t}),s=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){a.scroll(u);return}u.scrollJumpRequest&&i(u)}},o={scroll:s,start:a.start,stop:a.stop};return o},Dt="data-rbd",St=function(){var e=Dt+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),an=function(){var e=Dt+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Op=function(){var e=Dt+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ba={contextId:Dt+"-scroll-container-context-id"},jp=function(t){return function(r){return"["+r+'="'+t+'"]'}},zt=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},Rp="pointer-events: none;",Mp=function(e){var t=jp(e),r=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(St.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:Rp,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+Vt.outOfTheWay+`;
    `;return{selector:t(an.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),a={selector:t(Op.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},s=[n,r,a,i];return{always:zt(s,"always"),resting:zt(s,"resting"),dragging:zt(s,"dragging"),dropAnimating:zt(s,"dropAnimating"),userCancel:zt(s,"userCancel")}},Xe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect,Vr=function(){var t=document.querySelector("head");return t||P(),t},La=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function Ap(e,t){var r=te(function(){return Mp(e)},[e]),n=y.useRef(null),a=y.useRef(null),i=z(Pe(function(p){var d=a.current;d||P(),d.textContent=p}),[]),s=z(function(p){var d=n.current;d||P(),d.textContent=p},[]);Xe(function(){!n.current&&!a.current||P();var p=La(t),d=La(t);return n.current=p,a.current=d,p.setAttribute(Dt+"-always",e),d.setAttribute(Dt+"-dynamic",e),Vr().appendChild(p),Vr().appendChild(d),s(r.always),i(r.resting),function(){var f=function(b){var m=b.current;m||P(),Vr().removeChild(m),b.current=null};f(n),f(a)}},[t,s,i,r.always,r.resting,e]);var o=z(function(){return i(r.dragging)},[i,r.dragging]),c=z(function(p){if(p==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),u=z(function(){a.current&&i(r.resting)},[i,r.resting]),g=te(function(){return{dragging:o,dropping:c,resting:u}},[o,c,u]);return g}var to=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Tr(e){return e instanceof to(e).HTMLElement}function kp(e,t){var r="["+St.contextId+'="'+e+'"]',n=Si(document.querySelectorAll(r));if(!n.length)return null;var a=pt(n,function(i){return i.getAttribute(St.draggableId)===t});return!a||!Tr(a)?null:a}function Bp(e){var t=y.useRef({}),r=y.useRef(null),n=y.useRef(null),a=y.useRef(!1),i=z(function(d,f){var h={id:d,focus:f};return t.current[d]=h,function(){var m=t.current,v=m[d];v!==h&&delete m[d]}},[]),s=z(function(d){var f=kp(e,d);f&&f!==document.activeElement&&f.focus()},[e]),o=z(function(d,f){r.current===d&&(r.current=f)},[]),c=z(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var d=r.current;d&&s(d)}))},[s]),u=z(function(d){r.current=null;var f=document.activeElement;f&&f.getAttribute(St.draggableId)===d&&(r.current=d)},[]);Xe(function(){return a.current=!0,function(){a.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var g=te(function(){return{register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[i,u,c,o]);return g}function Lp(){var e={draggables:{},droppables:{}},t=[];function r(p){return t.push(p),function(){var f=t.indexOf(p);f!==-1&&t.splice(f,1)}}function n(p){t.length&&t.forEach(function(d){return d(p)})}function a(p){return e.draggables[p]||null}function i(p){var d=a(p);return d||P(),d}var s={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,f){var h=e.draggables[f.descriptor.id];h&&h.uniqueId===d.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var f=d.descriptor.id,h=a(f);h&&d.uniqueId===h.uniqueId&&(delete e.draggables[f],n({type:"REMOVAL",value:d}))},getById:i,findById:a,exists:function(d){return!!a(d)},getAllByType:function(d){return vr(e.draggables).filter(function(f){return f.descriptor.type===d})}};function o(p){return e.droppables[p]||null}function c(p){var d=o(p);return d||P(),d}var u={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var f=o(d.descriptor.id);f&&d.uniqueId===f.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:o,exists:function(d){return!!o(d)},getAllByType:function(d){return vr(e.droppables).filter(function(f){return f.descriptor.type===d})}};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:s,droppable:u,subscribe:r,clean:g}}function Fp(){var e=te(Lp,[]);return y.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var kn=he.createContext(null),br=function(){var e=document.body;return e||P(),e},$p={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},zp=function(t){return"rbd-announcement-"+t};function Hp(e){var t=te(function(){return zp(e)},[e]),r=y.useRef(null);y.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),W(i.style,$p),br().appendChild(i),function(){setTimeout(function(){var c=br();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=z(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var Gp=0,Wp={separator:"::"};function Bn(e,t){return t===void 0&&(t=Wp),te(function(){return""+e+t.separator+Gp++},[t.separator,e])}function Vp(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function qp(e){var t=e.contextId,r=e.text,n=Bn("hidden-text",{separator:"-"}),a=te(function(){return Vp({contextId:t,uniqueId:n})},[n,t]);return y.useEffect(function(){var s=document.createElement("div");return s.id=a,s.textContent=r,s.style.display="none",br().appendChild(s),function(){var c=br();c.contains(s)&&c.removeChild(s)}},[a,r]),a}var Or=he.createContext(null);function ro(e){var t=y.useRef(e);return y.useEffect(function(){t.current=e}),t}function Up(){var e=null;function t(){return!!e}function r(s){return s===e}function n(s){e&&P();var o={abandon:s};return e=o,o}function a(){e||P(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var Yp=9,_p=13,Ln=27,no=32,Xp=33,Jp=34,Kp=35,Qp=36,Zp=37,eg=38,tg=39,rg=40,rr,ng=(rr={},rr[_p]=!0,rr[Yp]=!0,rr),ao=function(e){ng[e.keyCode]&&e.preventDefault()},jr=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=pt(t,function(n){return"on"+n in document});return r||e}(),io=0,Fa=5;function ag(e,t){return Math.abs(t.x-e.x)>=Fa||Math.abs(t.y-e.y)>=Fa}var $a={type:"IDLE"};function ig(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(s){var o=s.button,c=s.clientX,u=s.clientY;if(o===io){var g={x:c,y:u},p=n();if(p.type==="DRAGGING"){s.preventDefault(),p.actions.move(g);return}p.type!=="PENDING"&&P();var d=p.point;if(ag(d,g)){s.preventDefault();var f=p.actions.fluidLift(g);a({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(s){var o=n();if(o.type!=="DRAGGING"){t();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(s){n().type==="DRAGGING"&&s.preventDefault(),t()}},{eventName:"keydown",fn:function(s){var o=n();if(o.type==="PENDING"){t();return}if(s.keyCode===Ln){s.preventDefault(),t();return}ao(s)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(s){var o=n();if(o.type==="IDLE"&&P(),o.actions.shouldRespectForcePress()){t();return}s.preventDefault()}},{eventName:jr,fn:t}]}function og(e){var t=y.useRef($a),r=y.useRef(lt),n=te(function(){return{eventName:"mousedown",fn:function(p){if(!p.defaultPrevented&&p.button===io&&!(p.ctrlKey||p.metaKey||p.shiftKey||p.altKey)){var d=e.findClosestDraggableId(p);if(d){var f=e.tryGetLock(d,s,{sourceEvent:p});if(f){p.preventDefault();var h={x:p.clientX,y:p.clientY};r.current(),u(f,h)}}}}}},[e]),a=te(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(p){if(!p.defaultPrevented){var d=e.findClosestDraggableId(p);if(d){var f=e.findOptionsForDraggable(d);f&&(f.shouldRespectForcePress||e.canGetLock(d)&&p.preventDefault())}}}}},[e]),i=z(function(){var p={passive:!1,capture:!0};r.current=et(window,[a,n],p)},[a,n]),s=z(function(){var g=t.current;g.type!=="IDLE"&&(t.current=$a,r.current(),i())},[i]),o=z(function(){var g=t.current;s(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[s]),c=z(function(){var p={capture:!0,passive:!1},d=ig({cancel:o,completed:s,getPhase:function(){return t.current},setPhase:function(h){t.current=h}});r.current=et(window,d,p)},[o,s]),u=z(function(p,d){t.current.type!=="IDLE"&&P(),t.current={type:"PENDING",point:d,actions:p},c()},[c]);Xe(function(){return i(),function(){r.current()}},[i])}var bt;function sg(){}var lg=(bt={},bt[Jp]=!0,bt[Xp]=!0,bt[Qp]=!0,bt[Kp]=!0,bt);function cg(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===Ln){i.preventDefault(),r();return}if(i.keyCode===no){i.preventDefault(),n();return}if(i.keyCode===rg){i.preventDefault(),e.moveDown();return}if(i.keyCode===eg){i.preventDefault(),e.moveUp();return}if(i.keyCode===tg){i.preventDefault(),e.moveRight();return}if(i.keyCode===Zp){i.preventDefault(),e.moveLeft();return}if(lg[i.keyCode]){i.preventDefault();return}ao(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:jr,fn:r}]}function dg(e){var t=y.useRef(sg),r=te(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==no)return;var s=e.findClosestDraggableId(i);if(!s)return;var o=e.tryGetLock(s,g,{sourceEvent:i});if(!o)return;i.preventDefault();var c=!0,u=o.snapLift();t.current();function g(){c||P(),c=!1,t.current(),n()}t.current=et(window,cg(u,g),{capture:!0,passive:!1})}}},[e]),n=z(function(){var i={passive:!1,capture:!0};t.current=et(window,[r],i)},[r]);Xe(function(){return n(),function(){t.current()}},[n])}var qr={type:"IDLE"},ug=120,pg=.15;function gg(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===Ln&&a.preventDefault(),t()}},{eventName:jr,fn:t}]}function fg(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var s=n();if(s.type!=="DRAGGING"){t();return}s.hasMoved=!0;var o=i.touches[0],c=o.clientX,u=o.clientY,g={x:c,y:u};i.preventDefault(),s.actions.move(g)}},{eventName:"touchend",fn:function(i){var s=n();if(s.type!=="DRAGGING"){t();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var s=n();s.type==="IDLE"&&P();var o=i.touches[0];if(o){var c=o.force>=pg;if(c){var u=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){u&&t();return}if(u){if(s.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:jr,fn:t}]}function hg(e){var t=y.useRef(qr),r=y.useRef(lt),n=z(function(){return t.current},[]),a=z(function(f){t.current=f},[]),i=te(function(){return{eventName:"touchstart",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var b=e.tryGetLock(h,o,{sourceEvent:f});if(b){var m=f.touches[0],v=m.clientX,C=m.clientY,D={x:v,y:C};r.current(),p(b,D)}}}}}},[e]),s=z(function(){var f={capture:!0,passive:!1};r.current=et(window,[i],f)},[i]),o=z(function(){var d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),a(qr),r.current(),s())},[s,a]),c=z(function(){var d=t.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),u=z(function(){var f={capture:!0,passive:!1},h={cancel:c,completed:o,getPhase:n},b=et(window,fg(h),f),m=et(window,gg(h),f);r.current=function(){b(),m()}},[c,n,o]),g=z(function(){var f=n();f.type!=="PENDING"&&P();var h=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:h,hasMoved:!1})},[n,a]),p=z(function(f,h){n().type!=="IDLE"&&P();var b=setTimeout(g,ug);a({type:"PENDING",point:h,actions:f,longPressTimerId:b}),u()},[u,n,a,g]);Xe(function(){return s(),function(){r.current();var h=n();h.type==="PENDING"&&(clearTimeout(h.longPressTimerId),a(qr))}},[n,s,a]),Xe(function(){var f=et(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return f},[])}var vg={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function oo(e,t){if(t==null)return!1;var r=!!vg[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:oo(e,t.parentElement)}function mg(e,t){var r=t.target;return Tr(r)?oo(e,r):!1}var bg=function(e){return rt(e.getBoundingClientRect()).center};function xg(e){return e instanceof to(e).Element}var yg=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=pt(t,function(n){return n in Element.prototype});return r||e}();function so(e,t){return e==null?null:e[yg](t)?e:so(e.parentElement,t)}function wg(e,t){return e.closest?e.closest(t):so(e,t)}function Dg(e){return"["+St.contextId+'="'+e+'"]'}function Sg(e,t){var r=t.target;if(!xg(r))return null;var n=Dg(e),a=wg(r,n);return!a||!Tr(a)?null:a}function Cg(e,t){var r=Sg(e,t);return r?r.getAttribute(St.draggableId):null}function Ig(e,t){var r="["+an.contextId+'="'+e+'"]',n=Si(document.querySelectorAll(r)),a=pt(n,function(i){return i.getAttribute(an.id)===t});return!a||!Tr(a)?null:a}function Ng(e){e.preventDefault()}function nr(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function lo(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!Ki(r.getState(),a))}function Eg(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,s=e.forceSensorStop,o=e.sourceEvent,c=lo({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var u=a.draggable.getById(i),g=Ig(r,u.descriptor.id);if(!g||o&&!u.options.canDragInteractiveElements&&mg(g,o))return null;var p=t.claim(s||lt),d="PRE_DRAG";function f(){return u.options.shouldRespectForcePress}function h(){return t.isActive(p)}function b(A,F){nr({expected:A,phase:d,isLockActive:h,shouldWarn:!0})&&n.dispatch(F())}var m=b.bind(null,"DRAGGING");function v(A){function F(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(F(),d!=="PRE_DRAG"&&P()),n.dispatch(yu(A.liftActionArgs)),d="DRAGGING";function U(k,H){if(H===void 0&&(H={shouldBlockNextClick:!1}),A.cleanup(),H.shouldBlockNextClick){var G=et(window,[{eventName:"click",fn:Ng,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(G)}F(),n.dispatch(Vi({reason:k}))}return W({isActive:function(){return nr({expected:"DRAGGING",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:f,drop:function(H){return U("DROP",H)},cancel:function(H){return U("CANCEL",H)}},A.actions)}function C(A){var F=qt(function(k){m(function(){return Wi({client:k})})}),U=v({liftActionArgs:{id:i,clientSelection:A,movementMode:"FLUID"},cleanup:function(){return F.cancel()},actions:{move:F}});return W({},U,{move:F})}function D(){var A={moveUp:function(){return m(Tu)},moveRight:function(){return m(ju)},moveDown:function(){return m(Ou)},moveLeft:function(){return m(Ru)}};return v({liftActionArgs:{id:i,clientSelection:bg(g),movementMode:"SNAP"},cleanup:lt,actions:A})}function N(){var A=nr({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!0});A&&t.release()}var R={isActive:function(){return nr({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:f,fluidLift:C,snapLift:D,abort:N};return R}var Pg=[og,dg,hg];function Tg(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,s=[].concat(i?Pg:[],a||[]),o=y.useState(function(){return Up()})[0],c=z(function(C,D){C.isDragging&&!D.isDragging&&o.tryAbandon()},[o]);Xe(function(){var C=r.getState(),D=r.subscribe(function(){var N=r.getState();c(C,N),C=N});return D},[o,r,c]),Xe(function(){return o.tryAbandon},[o.tryAbandon]);for(var u=z(function(v){return lo({lockAPI:o,registry:n,store:r,draggableId:v})},[o,n,r]),g=z(function(v,C,D){return Eg({lockAPI:o,registry:n,contextId:t,store:r,draggableId:v,forceSensorStop:C,sourceEvent:D&&D.sourceEvent?D.sourceEvent:null})},[t,o,n,r]),p=z(function(v){return Cg(t,v)},[t]),d=z(function(v){var C=n.draggable.findById(v);return C?C.options:null},[n.draggable]),f=z(function(){o.isClaimed()&&(o.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(En()))},[o,r]),h=z(o.isClaimed,[o]),b=te(function(){return{canGetLock:u,tryGetLock:g,findClosestDraggableId:p,findOptionsForDraggable:d,tryReleaseLock:f,isLockClaimed:h}},[u,g,p,d,f,h]),m=0;m<s.length;m++)s[m](b)}var Og=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Ht(e){return e.current||P(),e.current}function jg(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,s=y.useRef(null),o=ro(e),c=z(function(){return Og(o.current)},[o]),u=Hp(t),g=qp({contextId:t,text:i}),p=Ap(t,a),d=z(function(k){Ht(s).dispatch(k)},[]),f=te(function(){return na({publishWhileDragging:Du,updateDroppableScroll:Cu,updateDroppableIsEnabled:Iu,updateDroppableIsCombineEnabled:Nu,collectionStarting:Su},d)},[d]),h=Fp(),b=te(function(){return pp(h,f)},[h,f]),m=te(function(){return Tp(W({scrollWindow:gp,scrollDroppable:b.scrollDroppable},na({move:Wi},d)))},[b.scrollDroppable,d]),v=Bp(t),C=te(function(){return lp({announce:u,autoScroller:m,dimensionMarshal:b,focusMarshal:v,getResponders:c,styleMarshal:p})},[u,m,b,v,c,p]);s.current=C;var D=z(function(){var k=Ht(s),H=k.getState();H.phase!=="IDLE"&&k.dispatch(En())},[]),N=z(function(){var k=Ht(s).getState();return k.isDragging||k.phase==="DROP_ANIMATING"},[]),R=te(function(){return{isDragging:N,tryAbort:D}},[N,D]);r(R);var A=z(function(k){return Ki(Ht(s).getState(),k)},[]),F=z(function(){return ft(Ht(s).getState())},[]),U=te(function(){return{marshal:b,focus:v,contextId:t,canLift:A,isMovementAllowed:F,dragHandleUsageInstructionsId:g,registry:h}},[t,b,g,v,A,F,h]);return Tg({contextId:t,store:C,registry:h,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(function(){return D},[D]),he.createElement(Or.Provider,{value:U},he.createElement(wc,{context:kn,store:C},e.children))}var Rg=0;function Mg(){return te(function(){return""+Rg++},[])}function Ag(e){var t=Mg(),r=e.dragHandleUsageInstructions||cr.dragHandleUsageInstructions;return he.createElement(dd,null,function(n){return he.createElement(jg,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var co=function(t){return function(r){return t===r}},kg=co("scroll"),Bg=co("auto"),za=function(t,r){return r(t.overflowX)||r(t.overflowY)},Lg=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return za(n,kg)||za(n,Bg)},Fg=function(){return!1},$g=function e(t){return t==null?null:t===document.body?Fg()?t:null:t===document.documentElement?null:Lg(t)?t:e(t.parentElement)},on=function(e){return{x:e.scrollLeft,y:e.scrollTop}},zg=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Hg=function(e){var t=$g(e),r=zg(e);return{closestScrollable:t,isFixedOnPage:r}},Gg=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,s=e.client,o=e.page,c=e.closest,u=function(){if(!c)return null;var f=c.scrollSize,h=c.client,b=_i({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:h.paddingBox.height,width:h.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:h,scrollSize:f,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:b,diff:{value:Te,displacement:Te}}}}(),g=i==="vertical"?Dn:Pi,p=wt({page:o,withPlaceholder:null,axis:g,frame:u}),d={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:r,client:s,page:o,frame:u,subject:p};return d},Wg=function(t,r){var n=bi(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,s=a+r.scrollHeight,o=i+r.scrollWidth,c={top:a,right:o,bottom:s,left:i},u=mn(c,n.border),g=bn({borderBox:u,margin:n.margin,border:n.border,padding:n.padding});return g},Vg=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,s=e.isDropDisabled,o=e.isCombineEnabled,c=e.shouldClipSubject,u=n.closestScrollable,g=Wg(t,u),p=gr(g,a),d=function(){if(!u)return null;var h=bi(u),b={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:h,page:gr(h,a),scroll:on(u),scrollSize:b,shouldClipSubject:c}}(),f=Gg({descriptor:r,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:g,page:p,closest:d});return f},qg={passive:!1},Ug={passive:!0},Ha=function(e){return e.shouldPublishImmediately?qg:Ug};function xr(e){var t=y.useContext(e);return t||P(),t}var ar=function(t){return t&&t.env.closestScrollable||null};function Yg(e){var t=y.useRef(null),r=xr(Or),n=Bn("droppable"),a=r.registry,i=r.marshal,s=ro(e),o=te(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=y.useRef(o),u=te(function(){return Pe(function(N,R){t.current||P();var A={x:N,y:R};i.updateDroppableScroll(o.id,A)})},[o.id,i]),g=z(function(){var N=t.current;return!N||!N.env.closestScrollable?Te:on(N.env.closestScrollable)},[]),p=z(function(){var N=g();u(N.x,N.y)},[g,u]),d=te(function(){return qt(p)},[p]),f=z(function(){var N=t.current,R=ar(N);N&&R||P();var A=N.scrollOptions;if(A.shouldPublishImmediately){p();return}d()},[d,p]),h=z(function(N,R){t.current&&P();var A=s.current,F=A.getDroppableRef();F||P();var U=Hg(F),k={ref:F,descriptor:o,env:U,scrollOptions:R};t.current=k;var H=Vg({ref:F,descriptor:o,env:U,windowScroll:N,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),G=U.closestScrollable;return G&&(G.setAttribute(Ba.contextId,r.contextId),G.addEventListener("scroll",f,Ha(k.scrollOptions))),H},[r.contextId,o,f,s]),b=z(function(){var N=t.current,R=ar(N);return N&&R||P(),on(R)},[]),m=z(function(){var N=t.current;N||P();var R=ar(N);t.current=null,R&&(d.cancel(),R.removeAttribute(Ba.contextId),R.removeEventListener("scroll",f,Ha(N.scrollOptions)))},[f,d]),v=z(function(N){var R=t.current;R||P();var A=ar(R);A||P(),A.scrollTop+=N.y,A.scrollLeft+=N.x},[]),C=te(function(){return{getDimensionAndWatchScroll:h,getScrollWhileDragging:b,dragStopped:m,scroll:v}},[m,h,b,v]),D=te(function(){return{uniqueId:n,descriptor:o,callbacks:C}},[C,o,n]);Xe(function(){return c.current=D.descriptor,a.droppable.register(D),function(){t.current&&m(),a.droppable.unregister(D)}},[C,o,m,D,i,a.droppable]),Xe(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Xe(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Ur(){}var Ga={width:0,height:0,margin:vd},_g=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?Ga:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Xg=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=_g({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Vt.placeholder:null}};function Jg(e){var t=y.useRef(null),r=z(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,s=e.contextId,o=y.useState(e.animate==="open"),c=o[0],u=o[1];y.useEffect(function(){return c?n!=="open"?(r(),u(!1),Ur):t.current?Ur:(t.current=setTimeout(function(){t.current=null,u(!1)}),r):Ur},[n,c,r]);var g=z(function(d){d.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),p=Xg({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return he.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":s,onTransitionEnd:g,ref:e.innerRef})}var Kg=he.memo(Jg),Fn=he.createContext(null),Qg=function(e){ci(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(he.PureComponent),Wa={dragging:5e3,dropAnimating:4500},Zg=function(t,r){return r?Vt.drop(r.duration):t?Vt.snap:Vt.fluid},ef=function(t,r){return t?r?Xt.opacity.drop:Xt.opacity.combining:null},tf=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function rf(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,s=!!a,o=tf(e),c=!!i,u=c?rn.drop(n,s):rn.moveTo(n),g={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Zg(o,i),transform:u,opacity:ef(s,c),zIndex:c?Wa.dropAnimating:Wa.dragging,pointerEvents:"none"};return g}function nf(e){return{transform:rn.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function af(e){return e.type==="DRAGGING"?rf(e):nf(e)}function of(e,t,r){r===void 0&&(r=Te);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=mi(a,n),s=gr(i,r),o={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},u={descriptor:e,placeholder:o,displaceBy:c,client:i,page:s};return u}function sf(e){var t=Bn("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,s=e.shouldRespectForcePress,o=e.isEnabled,c=te(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:s,isEnabled:o}},[i,o,s]),u=z(function(f){var h=a();return h||P(),of(r,h,f)},[r,a]),g=te(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:u}},[r,u,c,t]),p=y.useRef(g),d=y.useRef(!0);Xe(function(){return n.draggable.register(p.current),function(){return n.draggable.unregister(p.current)}},[n.draggable]),Xe(function(){if(d.current){d.current=!1;return}var f=p.current;p.current=g,n.draggable.update(g,f)},[g,n.draggable])}function lf(e){e.preventDefault()}function cf(e){var t=y.useRef(null),r=z(function(k){t.current=k},[]),n=z(function(){return t.current},[]),a=xr(Or),i=a.contextId,s=a.dragHandleUsageInstructionsId,o=a.registry,c=xr(Fn),u=c.type,g=c.droppableId,p=te(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:g}},[e.draggableId,e.index,u,g]),d=e.children,f=e.draggableId,h=e.isEnabled,b=e.shouldRespectForcePress,m=e.canDragInteractiveElements,v=e.isClone,C=e.mapped,D=e.dropAnimationFinished;if(!v){var N=te(function(){return{descriptor:p,registry:o,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:b,isEnabled:h}},[p,o,n,m,b,h]);sf(N)}var R=te(function(){return h?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:lf}:null},[i,s,f,h]),A=z(function(k){C.type==="DRAGGING"&&C.dropping&&k.propertyName==="transform"&&D()},[D,C]),F=te(function(){var k=af(C),H=C.type==="DRAGGING"&&C.dropping?A:null,G={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":f,style:k,onTransitionEnd:H},dragHandleProps:R};return G},[i,R,f,C,A,r]),U=te(function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}},[p.droppableId,p.id,p.index,p.type]);return d(F,C.snapshot,U)}var uo=function(e,t){return e===t},po=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},df=function(t){return t.combine?t.combine.draggableId:null},uf=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function pf(){var e=Pe(function(a,i){return{x:a,y:i}}),t=Pe(function(a,i,s,o,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:s,combineWith:o,combineTargetFor:null}}),r=Pe(function(a,i,s,o,c,u,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:a,dimension:s,forceShouldAnimate:g,snapshot:t(i,o,c,u,null)}}}),n=function(i,s){if(i.isDragging){if(i.critical.draggable.id!==s.draggableId)return null;var o=i.current.client.offset,c=i.dimensions.draggables[s.draggableId],u=_e(i.impact),g=uf(i.impact),p=i.forceShouldAnimate;return r(e(o.x,o.y),i.movementMode,c,s.isClone,u,g,p)}if(i.phase==="DROP_ANIMATING"){var d=i.completed;if(d.result.draggableId!==s.draggableId)return null;var f=s.isClone,h=i.dimensions.draggables[s.draggableId],b=d.result,m=b.mode,v=po(b),C=df(b),D=i.dropDuration,N={duration:D,curve:Tn.drop,moveTo:i.newHomeClientOffset,opacity:C?Xt.opacity.drop:null,scale:C?Xt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:N,draggingOver:v,combineWith:C,mode:m,forceShouldAnimate:null,snapshot:t(m,f,v,C,N)}}}return null};return n}function go(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var gf={mapped:{type:"SECONDARY",offset:Te,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:go(null)}};function ff(){var e=Pe(function(s,o){return{x:s,y:o}}),t=Pe(go),r=Pe(function(s,o,c){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:s,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:t(o)}}}),n=function(o){return o?r(Te,o,!0):null},a=function(o,c,u,g){var p=u.displaced.visible[o],d=!!(g.inVirtualList&&g.effected[o]),f=Nr(u),h=f&&f.draggableId===o?c:null;if(!p){if(!d)return n(h);if(u.displaced.invisible[o])return null;var b=It(g.displacedBy.point),m=e(b.x,b.y);return r(m,h,!0)}if(d)return n(h);var v=u.displacedBy.point,C=e(v.x,v.y);return r(C,h,p.shouldAnimate)},i=function(o,c){if(o.isDragging)return o.critical.draggable.id===c.draggableId?null:a(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var u=o.completed;return u.result.draggableId===c.draggableId?null:a(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return i}var hf=function(){var t=pf(),r=ff(),n=function(i,s){return t(i,s)||r(i,s)||gf};return n},vf={dropAnimationFinished:qi},mf=hi(hf,vf,null,{context:kn,pure:!0,areStatePropsEqual:uo})(cf);function fo(e){var t=xr(Fn),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:he.createElement(mf,e)}function bf(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return he.createElement(fo,W({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function xf(e){var t=y.useContext(Or);t||P();var r=t.contextId,n=t.isMovementAllowed,a=y.useRef(null),i=y.useRef(null),s=e.children,o=e.droppableId,c=e.type,u=e.mode,g=e.direction,p=e.ignoreContainerClipping,d=e.isDropDisabled,f=e.isCombineEnabled,h=e.snapshot,b=e.useClone,m=e.updateViewportMaxScroll,v=e.getContainerForClone,C=z(function(){return a.current},[]),D=z(function(G){a.current=G},[]);z(function(){return i.current},[]);var N=z(function(G){i.current=G},[]),R=z(function(){n()&&m({maxScroll:Ji()})},[n,m]);Yg({droppableId:o,type:c,mode:u,direction:g,isDropDisabled:d,isCombineEnabled:f,ignoreContainerClipping:p,getDroppableRef:C});var A=he.createElement(Qg,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(G){var ve=G.onClose,E=G.data,K=G.animate;return he.createElement(Kg,{placeholder:E,onClose:ve,innerRef:N,animate:K,contextId:r,onTransitionEnd:R})}),F=te(function(){return{innerRef:D,placeholder:A,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":r}}},[r,o,A,D]),U=b?b.dragging.draggableId:null,k=te(function(){return{droppableId:o,type:c,isUsingCloneFor:U}},[o,U,c]);function H(){if(!b)return null;var G=b.dragging,ve=b.render,E=he.createElement(fo,{draggableId:G.draggableId,index:G.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(K,ae){return ve(K,ae,G)});return Eo.createPortal(E,v())}return he.createElement(Fn.Provider,{value:k},s(F,h),H())}var Yr=function(t,r){return t===r.droppable.type},Va=function(t,r){return r.draggables[t.draggable.id]},yf=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=W({},t,{shouldAnimatePlaceholder:!1}),n=Pe(function(s){return{draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}}}),a=Pe(function(s,o,c,u,g,p){var d=g.descriptor.id,f=g.descriptor.droppableId===s;if(f){var h=p?{render:p,dragging:n(g.descriptor)}:null,b={isDraggingOver:c,draggingOverWith:c?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:h}}if(!o)return r;if(!u)return t;var m={isDraggingOver:c,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}}),i=function(o,c){var u=c.droppableId,g=c.type,p=!c.isDropDisabled,d=c.renderClone;if(o.isDragging){var f=o.critical;if(!Yr(g,f))return r;var h=Va(f,o.dimensions),b=_e(o.impact)===u;return a(u,p,b,b,h,d)}if(o.phase==="DROP_ANIMATING"){var m=o.completed;if(!Yr(g,m.critical))return r;var v=Va(m.critical,o.dimensions);return a(u,p,po(m.result)===u,_e(m.impact)===u,v,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var C=o.completed;if(!Yr(g,C.critical))return r;var D=_e(C.impact)===u,N=!!(C.impact.at&&C.impact.at.type==="COMBINE"),R=C.critical.droppable.id===u;return D?N?t:r:R?t:r}return r};return i},wf={updateViewportMaxScroll:Pu};function Df(){return document.body||P(),document.body}var Sf={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Df},ho=hi(yf,wf,null,{context:kn,pure:!0,areStatePropsEqual:uo})(xf);ho.defaultProps=Sf;const Ee=[{id:"hero-fullpage",name:"Hero - Página Completa",description:"Una imagen protagonista que ocupa toda la página",category:"hero",template:"grid-cols-1 grid-rows-1",cells:1,style:{gap:"0px",padding:"0px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-2xl"},maskCategories:[{name:"Editorial",masks:["none","soft-vignette","magazine-crop","editorial-frame"]},{name:"Artístico",masks:["film-grain","vintage-border","polaroid-large"]}]},{id:"hero-split",name:"Hero - División Dramática",description:"Dos imágenes grandes con división vertical elegante",category:"hero",template:"grid-cols-2 grid-rows-1 gap-1",cells:2,style:{gap:"4px"},cellStyles:{0:"rounded-l-lg overflow-hidden shadow-xl",1:"rounded-r-lg overflow-hidden shadow-xl"},maskCategories:[{name:"Minimalista",masks:["none","soft-rounded","subtle-shadow"]}]},{id:"magazine-asymmetric",name:"Magazine - Asimétrico",description:"Layout editorial con jerarquía visual moderna",category:"editorial",template:"grid-cols-5 grid-rows-3 gap-2",cells:4,style:{gap:"6px"},cellStyles:{0:"col-span-3 row-span-2 rounded-lg overflow-hidden shadow-lg",1:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",2:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",3:"col-span-5 row-span-1 rounded-md overflow-hidden shadow-sm"},maskCategories:[{name:"Editorial",masks:["none","magazine-crop","editorial-frame","soft-vignette"]},{name:"Moderno",masks:["geometric-crop","minimal-frame","clean-border"]}]},{id:"magazine-grid",name:"Magazine - Grid Moderno",description:"Grid uniforme con espaciado editorial elegante",category:"editorial",template:"grid-cols-3 grid-rows-2 gap-3",cells:6,style:{gap:"8px",padding:"4px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",1:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",2:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",3:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",4:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",5:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow"},maskCategories:[{name:"Uniformes",masks:["none","rounded","soft-rounded","minimal-frame"]}]},{id:"minimal-duo",name:"Minimal - Dúo Elegante",description:"Dos imágenes con mucho espacio blanco",category:"minimal",template:"grid-cols-1 grid-rows-2 gap-8",cells:2,style:{gap:"32px",padding:"24px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-2xl",1:"rounded-xl overflow-hidden shadow-2xl"},maskCategories:[{name:"Limpio",masks:["none","clean-border","minimal-frame","soft-shadow"]}]},{id:"classic-quad",name:"Clásico - Cuadrícula Premium",description:"Cuatro imágenes con estilo editorial premium",category:"classic",template:"grid-cols-2 grid-rows-2 gap-4",cells:4,style:{gap:"12px",padding:"8px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",1:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",2:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",3:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300"},maskCategories:[{name:"Premium",masks:["none","rounded","soft-rounded","premium-frame","elegant-border","classic-shadow","editorial-crop"]},{name:"Artístico",masks:["vintage","film-grain","classic-vignette","sepia-tone","black-white-frame","retro-border"]}]},{id:"classic-portrait",name:"Clásico - Retrato Elegante",description:"Layout perfecto para retratos y fotos verticales",category:"classic",template:"grid-cols-3 grid-rows-2 gap-3",cells:3,style:{gap:"10px"},cellStyles:{0:"col-span-2 row-span-2 rounded-2xl overflow-hidden shadow-2xl",1:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg",2:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Retrato",masks:["none","portrait-frame","elegant-oval","classic-border"]}]}];function vo(e){let t=null;return()=>(t==null&&(t=e()),t)}function Cf(e,t){return e.filter(r=>r!==t)}function If(e,t){const r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class Nf{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=If(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=Cf(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class Ef{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const mo="__NATIVE_FILE__",bo="__NATIVE_URL__",xo="__NATIVE_TEXT__",yo="__NATIVE_HTML__",qa=Object.freeze(Object.defineProperty({__proto__:null,FILE:mo,HTML:yo,TEXT:xo,URL:bo},Symbol.toStringTag,{value:"Module"}));function _r(e,t,r){const n=t.reduce((a,i)=>a||e.getData(i),"");return n??r}const sn={[mo]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[yo]:{exposeProperties:{html:(e,t)=>_r(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[bo]:{exposeProperties:{urls:(e,t)=>_r(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[xo]:{exposeProperties:{text:(e,t)=>_r(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Pf(e,t){const r=sn[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new Ef(r);return n.loadDataTransfer(t),n}function Xr(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(sn).filter(r=>{const n=sn[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const Tf=vo(()=>/firefox/i.test(navigator.userAgent)),wo=vo(()=>!!window.safari);class Ua{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:s}=this;let o=r.length-1;if(t===r[o])return n[o];let c=0,u=s.length-1,g;for(;c<=u;){g=Math.floor(.5*(c+u));const f=r[g];if(f<t)c=g+1;else if(f>t)u=g-1;else return n[g]}o=Math.max(0,u);const p=t-r[o],d=p*p;return n[o]+a[o]*p+i[o]*d+s[o]*p*d}constructor(t,r){const{length:n}=t,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,h)=>t[f]<t[h]?-1:1);const i=[],s=[];let o,c;for(let f=0;f<n-1;f++)o=t[f+1]-t[f],c=r[f+1]-r[f],i.push(o),s.push(c/o);const u=[s[0]];for(let f=0;f<i.length-1;f++){const h=s[f],b=s[f+1];if(h*b<=0)u.push(0);else{o=i[f];const m=i[f+1],v=o+m;u.push(3*v/((v+m)/h+(v+o)/b))}}u.push(s[s.length-1]);const g=[],p=[];let d;for(let f=0;f<u.length-1;f++){d=s[f];const h=u[f],b=1/i[f],m=h+u[f+1]-d-d;g.push((d-h-m)*b),p.push(m*b*b)}this.xs=t,this.ys=r,this.c1s=u,this.c2s=g,this.c3s=p}}const Of=1;function Do(e){const t=e.nodeType===Of?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function ir(e){return{x:e.clientX,y:e.clientY}}function jf(e){var t;return e.nodeName==="IMG"&&(Tf()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function Rf(e,t,r,n){let a=e?t.width:r,i=e?t.height:n;return wo()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function Mf(e,t,r,n,a){const i=jf(t),o=Do(i?e:t),c={x:r.x-o.x,y:r.y-o.y},{offsetWidth:u,offsetHeight:g}=e,{anchorX:p,anchorY:d}=n,{dragPreviewWidth:f,dragPreviewHeight:h}=Rf(i,t,u,g),b=()=>{let A=new Ua([0,.5,1],[c.y,c.y/g*h,c.y+h-g]).interpolate(d);return wo()&&i&&(A+=(window.devicePixelRatio-1)*h),A},m=()=>new Ua([0,.5,1],[c.x,c.x/u*f,c.x+f-u]).interpolate(p),{offsetX:v,offsetY:C}=a,D=v===0||v,N=C===0||C;return{x:D?v:m(),y:N?C:b()}}class Af{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function kf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){kf(e,a,r[a])})}return e}class Bf{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=s=>this.handleDragStart(s,t),i=s=>this.handleSelectStart(s);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=s=>this.handleDragEnter(s,t),a=s=>this.handleDragOver(s,t),i=s=>this.handleDrop(s,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Ya({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return Ya({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(qa).some(r=>qa[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Pf(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&Do(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const s=ir(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:o}=a,c=Xr(o);if(this.monitor.isDragging()){if(o&&typeof o.setDragImage=="function"){const g=this.monitor.getSourceId(),p=this.sourceNodes.get(g),d=this.sourcePreviewNodes.get(g)||p;if(d){const{anchorX:f,anchorY:h,offsetX:b,offsetY:m}=this.getCurrentSourcePreviewNodeOptions(),D=Mf(p,d,s,{anchorX:f,anchorY:h},{offsetX:b,offsetY:m});o.setDragImage(d,D.x,D.y)}}try{o==null||o.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(o&&!o.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:o}=a,c=Xr(o);c&&this.beginDragNativeItem(c,o)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:ir(a)}),i.some(o=>this.monitor.canDropOnTarget(o))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=ir(a),this.scheduleHover(i),(i||[]).some(o=>this.monitor.canDropOnTarget(o))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else Xr(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:ir(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new Af(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Nf(this.isNodeInDocument)}}const Lf=function(t,r,n){return new Bf(t,r,n)},Ff=({elements:e,onReorder:t,onSelect:r,selectedElement:n})=>{const a=i=>{if(!i.destination)return;const s=Array.from(e),[o]=s.splice(i.source.index,1);s.splice(i.destination.index,0,o),t(s)};return l.jsx("div",{className:"bg-white ",children:l.jsx(Ag,{onDragEnd:a,children:l.jsx(ho,{droppableId:"layers",children:i=>l.jsxs("div",{...i.droppableProps,ref:i.innerRef,className:"space-y-2",children:[e.map((s,o)=>l.jsx(bf,{draggableId:s.id,index:o,children:c=>l.jsxs("div",{ref:c.innerRef,...c.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===s.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>r(s.id),children:[l.jsx("div",{...c.dragHandleProps,className:"mr-2",children:l.jsx(qo,{size:16})}),s.type==="image"?l.jsx(sr,{size:16,className:"mr-2"}):l.jsx(xt,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm truncate",children:s.type==="text"?s.content.substring(0,20):`Imagen ${o+1}`})]})},s.id)),i.placeholder]})})})})};function $f({id:e,elements:t=[],selectedElement:r,onSelectElement:n,onAddElement:a,onUpdateElement:i,onDeleteElement:s,availableMasks:o=[],workspaceSize:c={width:800,height:600},cellSize:u="auto",cellStyle:g=""}){const[{isOver:p},d]=fc(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:b=>{if(b.files){const m=new FileReader;m.onload=v=>{var C;if((C=v.target)!=null&&C.result){const D={id:`img-${Date.now()}`,type:"image",content:v.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(D),n(D.id,e)}},m.readAsDataURL(b.files[0])}},collect:b=>({isOver:!!b.isOver({shallow:!0})})})),f=()=>{const b=document.createElement("input");b.type="file",b.accept="image/*",b.onchange=m=>{if(m.target.files&&m.target.files[0]){const v=new FileReader;v.onload=C=>{var D;if((D=C.target)!=null&&D.result){const N={id:`img-${Date.now()}`,type:"image",content:C.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(N),n(N.id,e)}},v.readAsDataURL(m.target.files[0])}},b.click()},h=t.length>0;return l.jsx("div",{ref:d,className:`relative w-full h-full ${g||"rounded-lg overflow-hidden"} ${p?"ring-2 ring-purple-500 bg-transparent":""} ${h?"bg-transparent":"border-2 border-dashed border-gray-300 bg-transparent hover:border-gray-400 hover:bg-gray-100"}`,onClick:b=>{b.target===b.currentTarget&&n(null,e)},style:{isolation:"isolate",background:h?"transparent":void 0,minHeight:"120px"},children:t.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer transition-colors",onClick:b=>{b.stopPropagation(),f()},children:[l.jsx(Ro,{className:"h-8 w-8 text-gray-300"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Haz clic o arrastra una imagen"})]}):t.map(b=>l.jsx("div",{className:"absolute inset-0",onClick:m=>m.stopPropagation(),children:b.type==="image"?l.jsx(hc,{element:b,isSelected:r===b.id,onSelect:()=>n(b.id,e),onUpdate:m=>i(b.id,m),onDelete:()=>s(b.id),availableMasks:o,workspaceSize:c}):l.jsx(vc,{element:b,workspaceSize:c,isSelected:r===b.id,onSelect:()=>n(b.id,e),onUpdate:m=>i(b.id,m),onDelete:()=>s(b.id)})},b.id))})}function zf({currentLayoutId:e,onLayoutChange:t}){const[r,n]=y.useState("all"),a={all:{name:"Todos",layouts:Ee},hero:{name:"Hero",layouts:Ee.filter(i=>i.category==="hero")},editorial:{name:"Editorial",layouts:Ee.filter(i=>i.category==="editorial")},storytelling:{name:"Historia",layouts:Ee.filter(i=>i.category==="storytelling")},minimal:{name:"Minimal",layouts:Ee.filter(i=>i.category==="minimal")},creative:{name:"Creativo",layouts:Ee.filter(i=>i.category==="creative")},classic:{name:"Clásico",layouts:Ee.filter(i=>i.category==="classic")}};return Object.keys(a).filter(i=>i==="all"||a[i].layouts.length>0),l.jsxs("div",{className:"w-full",children:[l.jsx("div",{className:"grid grid-cols-2  gap-3 overflow-x-hidden custom-scroll",children:a[r].layouts.map(i=>l.jsxs("div",{className:`relative group cursor-pointer transition-all duration-200 
                                 hover:shadow-md hover:scale-102
                        `,onClick:()=>t(i.id),children:[l.jsxs("div",{className:"aspect-square relative bg-white rounded-lg p-2 border border-gray-200",children:[l.jsx("div",{className:`w-full h-full grid ${i.template}`,style:{gap:"2px",padding:"4px"},children:Array.from({length:i.cells}).map((s,o)=>{var c,u;return l.jsx("div",{className:`bg-gradient-to-br from-purple-100 to-purple-200 ${(u=(c=i.cellStyles)==null?void 0:c[o])!=null&&u.includes("rounded")?"rounded":"rounded-sm"}`,style:{minHeight:"8px"}},o)})}),e===i.id&&l.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),l.jsxs("div",{className:"mt-2 text-center",children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 truncate",children:i.name}),i.description&&l.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:i.description}),l.jsx("div",{className:"flex items-center justify-center mt-1 space-x-2",children:l.jsxs("span",{className:"text-xs text-gray-400",children:[i.cells," ",i.cells===1?"celda":"celdas"]})})]})]},i.id))}),a[r].layouts.length===0&&l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No hay layouts disponibles en esta categoría."})})]})}const Hf=({filters:e={},onFilterChange:t,selectedElement:r})=>{const[n,a]=y.useState("basic"),[i,s]=y.useState({basic:!0,color:!0,transform:!1,advanced:!1}),o=d=>{s(f=>({...f,[d]:!f[d]}))},c={brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal",flipHorizontal:!1,flipVertical:!1,...e},u=(d,f)=>{const h={...c,[d]:f};t(h)},g=()=>{t({brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal",flipHorizontal:!1,flipVertical:!1})},p=[{id:"basic",label:"Básico",icon:ps},...(r==null?void 0:r.type)==="image"?[{id:"presets",label:"Presets",icon:_a}]:[],{id:"advanced",label:"Avanzado",icon:us}];return y.useEffect(()=>{n==="presets"&&(r==null?void 0:r.type)!=="image"&&a("basic")},[r==null?void 0:r.type,n]),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"grid grid-cols-1 gap-1 bg-gray-100 rounded-lg p-1",children:p.map(d=>{const f=d.icon;return l.jsxs("button",{onClick:()=>a(d.id),className:`flex items-center gap-2 py-2 px-3 rounded-md text-xs font-medium transition-colors ${n===d.id?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[l.jsx(f,{className:"h-3.5 w-3.5"}),d.label]},d.id)})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:"flex flex-col",children:l.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[n==="basic"&&"Básico",n==="presets"&&"Presets",n==="advanced"&&"Avanzado"]})}),l.jsx(Ke,{variant:"ghost",size:"sm",onClick:g,className:"text-xs h-6 px-2",icon:l.jsx(Ja,{className:"h-3 w-3"}),children:"Reset"})]}),l.jsxs("div",{className:"space-y-3",children:[n==="basic"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Ajustes básicos"}),l.jsx("button",{onClick:()=>o("basic"),className:"text-gray-400 hover:text-gray-600",children:i.basic?l.jsx(Rr,{className:"h-3 w-3"}):l.jsx(or,{className:"h-3 w-3"})})]}),i.basic&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Qe,{label:"Brillo",value:c.brightness,onChange:d=>u("brightness",d),min:0,max:200,step:1,unit:"%"}),l.jsx(Qe,{label:"Contraste",value:c.contrast,onChange:d=>u("contrast",d),min:0,max:200,step:1,unit:"%"}),l.jsx(Qe,{label:"Saturación",value:c.saturation,onChange:d=>u("saturation",d),min:0,max:200,step:1,unit:"%"}),l.jsx(Qe,{label:"Opacidad",value:c.opacity,onChange:d=>u("opacity",d),min:0,max:100,step:1,unit:"%"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Color"}),l.jsx("button",{onClick:()=>o("color"),className:"text-gray-400 hover:text-gray-600",children:i.color?l.jsx(Rr,{className:"h-3 w-3"}):l.jsx(or,{className:"h-3 w-3"})})]}),i.color&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Qe,{label:"Matiz",value:c.hue,onChange:d=>u("hue",d),min:-180,max:180,step:1,unit:"°"}),l.jsx(Qe,{label:"Tinte sepia",value:c.tint,onChange:d=>u("tint",d),min:0,max:100,step:1,unit:"%"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Transformar"}),l.jsx("button",{onClick:()=>o("transform"),className:"text-gray-400 hover:text-gray-600",children:i.transform?l.jsx(Rr,{className:"h-3 w-3"}):l.jsx(or,{className:"h-3 w-3"})})]}),i.transform&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Qe,{label:"Escala",value:c.scale,onChange:d=>u("scale",d),min:.1,max:3,step:.1,unit:"x"}),l.jsx(Qe,{label:"Rotación",value:c.rotate,onChange:d=>u("rotate",d),min:-180,max:180,step:1,unit:"°"}),l.jsx(Qe,{label:"Desenfoque",value:c.blur,onChange:d=>u("blur",d),min:0,max:20,step:.5,unit:"px"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[l.jsx(Ke,{variant:c.flipHorizontal?"default":"outline",size:"sm",onClick:()=>u("flipHorizontal",!c.flipHorizontal),className:"text-xs h-7",children:"Voltear H"}),l.jsx(Ke,{variant:c.flipVertical?"default":"outline",size:"sm",onClick:()=>u("flipVertical",!c.flipVertical),className:"text-xs h-7",children:"Voltear V"})]})]})]})]}),n==="presets"&&l.jsx(ys,{onSelectPreset:d=>{t({...c,...d})},selectedImage:r||null}),n==="advanced"&&l.jsx(ws,{filters:c,onFilterChange:t,selectedElement:r})]})]})},Gf=({selectedMask:e,onSelect:t,availableMasks:r=[],selectedImage:n})=>{var o,c;const[a,i]=y.useState("Básicas"),s={};return yt.forEach(u=>{s[u.category]||(s[u.category]=[]),(r.includes(u.id)||u.id==="none")&&s[u.category].push(u)}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"grid grid-cols-2 gap-1 bg-gray-100 p-1 rounded-lg",children:Object.keys(s).slice(0,2).map(u=>s[u].length>0&&l.jsx("button",{onClick:()=>i(u),className:`py-1.5 px-2 text-xs rounded-md transition font-medium ${a===u?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-purple-600"}`,children:u},u))}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:(o=s[a])==null?void 0:o.slice(0,6).map(u=>l.jsxs("div",{onClick:()=>t(u.id),className:`cursor-pointer border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all ${e===u.id?"ring-2 ring-purple-500 border-purple-300":"border-gray-200"}`,children:[l.jsx("div",{className:"aspect-square bg-white flex items-center justify-center p-1",children:n!=null&&n.content?l.jsx("img",{src:n.content,alt:u.name,className:`w-full h-full object-cover ${u.class}`}):l.jsx("div",{className:`w-full h-full bg-gray-200 ${u.class}`})}),l.jsx("p",{className:"text-center text-[10px] text-gray-700 p-1 truncate",children:u.name})]},u.id))}),((c=s[a])==null?void 0:c.length)>6&&l.jsxs("button",{className:"w-full py-2 text-xs text-purple-600 hover:text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-50 transition",children:["Ver más máscaras (",s[a].length-6," más)"]})]})},Wf=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],Vf=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],qf=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],Uf=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],Yf=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],_f=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],Xf=({element:e,onUpdate:t,onClose:r})=>{var ue,me,Le,Ne,we,Fe,$e,ke,Oe,je,Ge,qe,L,J,ye,le,De,We,be,I,V,ne,ie,oe,Re,Se,Ce,nt,ze,Pt,Qt,Tt,Ot,jt,Rt,x,S,j,O,B,X;const[n,a]=y.useState(!1),[i,s]=y.useState(!1),[o,c]=y.useState(!1),[u,g]=y.useState(!1),[p,d]=y.useState(!1),[f,h]=y.useState(!1),[b,m]=y.useState(!1),[v,C]=y.useState(!1),[D,N]=y.useState("basic"),[R,A]=y.useState(((ue=e==null?void 0:e.style)==null?void 0:ue.color)||"#000000"),[F,U]=y.useState(((me=e==null?void 0:e.style)==null?void 0:me.backgroundColor)||"transparent"),k=y.useRef(null),H=y.useRef(null),G=y.useRef(null),ve=y.useRef(null),E=y.useRef(null),K=y.useRef(null),ae=y.useRef(null);y.useEffect(()=>{function w(T){k.current&&!k.current.contains(T.target)&&a(!1),H.current&&!H.current.contains(T.target)&&s(!1),G.current&&!G.current.contains(T.target)&&g(!1),ve.current&&!ve.current.contains(T.target)&&d(!1),E.current&&!E.current.contains(T.target)&&h(!1),K.current&&!K.current.contains(T.target)&&c(!1),ae.current&&!ae.current.contains(T.target)&&m(!1)}return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]);const M=(w,T)=>{t({style:{...e==null?void 0:e.style,[w]:T}})},fe=(w,T,Z)=>{var Q;t({style:{...e==null?void 0:e.style,[w]:((Q=e==null?void 0:e.style)==null?void 0:Q[w])===T?Z:T}})},Ie=(w,T)=>{M(w,T)};if(!e)return null;const re=({active:w,onClick:T,icon:Z,title:Q,className:pe=""})=>l.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${w?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${pe}`,onClick:T,title:Q,children:Z}),xe=({onClick:w,icon:T,text:Z,isOpen:Q,title:pe})=>l.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${Q?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:w,title:pe,children:[T&&l.jsx("span",{className:"flex-shrink-0",children:T}),Z&&l.jsx("span",{className:"text-sm truncate",children:Z}),l.jsx(or,{className:"h-3.5 w-3.5 opacity-70"})]});return l.jsx("div",{className:"  bg-white  rounded-lg shadow-sm px-4  border-gray-200  z-50 transition-all duration-200",children:l.jsxs("div",{className:"w-full ",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[l.jsx(xt,{className:"h-4 w-4"}),"Formato de texto"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>C(!v),title:v?"Modo compacto":"Modo expandido",children:v?l.jsx(as,{className:"h-4 w-4"}):l.jsx(ns,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:r,title:"Cerrar",children:l.jsx(Ao,{className:"h-4 w-4"})})]})]}),v&&l.jsxs("div",{className:"flex border-b mb-2",children:[l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${D==="basic"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("basic"),children:"Básico"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${D==="paragraph"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("paragraph"),children:"Párrafo"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${D==="advanced"?"border-b-2 border-primary customtext-primary":"customtext-neutral-dark"}`,onClick:()=>N("advanced"),children:"Avanzado"})]}),(D==="basic"||!v)&&l.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[l.jsx("div",{className:"relative",ref:G,children:l.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((Le=e.style)==null?void 0:Le.fontFamily)||"Arial",onChange:w=>{M("fontFamily",w.target.value)},children:Wf.map(w=>l.jsx("option",{value:w.value,style:{fontFamily:w.value},children:w.name},w.value))})}),l.jsxs("div",{className:"relative",ref:ve,children:[l.jsx(xe,{onClick:()=>d(!p),text:((Ne=e.style)==null?void 0:Ne.fontSize)||"16px",isOpen:p,title:"Tamaño de fuente"}),p&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:Vf.map(w=>l.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{M("fontSize",w),d(!1)},children:w},w))})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(re,{active:((we=e.style)==null?void 0:we.fontWeight)==="bold",onClick:()=>fe("fontWeight","bold","normal"),icon:l.jsx(Ho,{className:"h-4 w-4"}),title:"Negrita"}),l.jsx(re,{active:((Fe=e.style)==null?void 0:Fe.fontStyle)==="italic",onClick:()=>fe("fontStyle","italic","normal"),icon:l.jsx(Zo,{className:"h-4 w-4"}),title:"Cursiva"}),l.jsx(re,{active:(($e=e.style)==null?void 0:$e.textDecoration)==="underline",onClick:()=>fe("textDecoration","underline","none"),icon:l.jsx(ms,{className:"h-4 w-4"}),title:"Subrayado"}),l.jsx(re,{active:((ke=e.style)==null?void 0:ke.textDecoration)==="line-through",onClick:()=>fe("textDecoration","line-through","none"),icon:l.jsx(fs,{className:"h-4 w-4"}),title:"Tachado"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(re,{active:((Oe=e.style)==null?void 0:Oe.textAlign)==="left",onClick:()=>M("textAlign","left"),icon:l.jsx($o,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),l.jsx(re,{active:((je=e.style)==null?void 0:je.textAlign)==="center",onClick:()=>M("textAlign","center"),icon:l.jsx(Lo,{className:"h-4 w-4"}),title:"Centrar"}),l.jsx(re,{active:((Ge=e.style)==null?void 0:Ge.textAlign)==="right",onClick:()=>M("textAlign","right"),icon:l.jsx(zo,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),l.jsx(re,{active:((qe=e.style)==null?void 0:qe.textAlign)==="justify",onClick:()=>M("textAlign","justify"),icon:l.jsx(Fo,{className:"h-4 w-4"}),title:"Justificar"})]}),l.jsxs("div",{className:"relative",ref:k,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:R}}),l.jsx(_a,{className:"h-4 w-4"})]}),n&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:R}})]}),l.jsx("input",{type:"color",value:R,onChange:w=>{A(w.target.value),M("color",w.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),l.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:Uf.map(w=>l.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${R===w.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:w.color},onClick:()=>{A(w.color),M("color",w.color)},title:w.name},w.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:H,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>s(!i),title:"Color de fondo",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:F,backgroundImage:F==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),l.jsx(is,{className:"h-4 w-4"})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:F,backgroundImage:F==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),l.jsx("input",{type:"color",value:F==="transparent"?"#ffffff":F,onChange:w=>{U(w.target.value),M("backgroundColor",w.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Yf.map(w=>l.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${F===w.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:w.color,backgroundImage:w.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{U(w.color),M("backgroundColor",w.color)},title:w.name},w.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:E,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>h(!f),title:"Transformación de texto",children:l.jsx(Go,{className:"h-4 w-4"})}),f&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:qf.map(w=>{var T;return l.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((T=e.style)==null?void 0:T.textTransform)===w.value?"bg-gray-100":""}`,style:{textTransform:w.value},onClick:()=>{M("textTransform",w.value),h(!1)},children:w.label},w.value)})})]}),l.jsxs("div",{className:"relative",ref:ae,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>m(!b),title:"Encabezados",children:l.jsx(xt,{className:"h-4 w-4"})}),b&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{M("fontSize","32px"),M("fontWeight","bold"),m(!1)},children:[l.jsx(Uo,{className:"h-4 w-4"})," ","Encabezado 1"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{M("fontSize","24px"),M("fontWeight","bold"),m(!1)},children:[l.jsx(Yo,{className:"h-4 w-4"})," ","Encabezado 2"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{M("fontSize","20px"),M("fontWeight","bold"),m(!1)},children:[l.jsx(_o,{className:"h-4 w-4"})," ","Encabezado 3"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{M("fontSize","16px"),M("fontWeight","bold"),m(!1)},children:[l.jsx(Xo,{className:"h-4 w-4"})," ","Encabezado 4"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{M("fontSize","16px"),M("fontWeight","normal"),m(!1)},children:[l.jsx(xt,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(re,{active:((L=e.style)==null?void 0:L.verticalAlign)==="super",onClick:()=>fe("verticalAlign","super","baseline"),icon:l.jsx(vs,{className:"h-4 w-4"}),title:"Superíndice"}),l.jsx(re,{active:((J=e.style)==null?void 0:J.verticalAlign)==="sub",onClick:()=>fe("verticalAlign","sub","baseline"),icon:l.jsx(hs,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),v&&D==="paragraph"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(re,{active:((ye=e.style)==null?void 0:ye.listStyleType)==="disc",onClick:()=>{var w;return M("listStyleType",((w=e.style)==null?void 0:w.listStyleType)==="disc"?"none":"disc")},icon:l.jsx(ts,{className:"h-4 w-4"}),title:"Lista con viñetas"}),l.jsx(re,{active:((le=e.style)==null?void 0:le.listStyleType)==="decimal",onClick:()=>{var w;return M("listStyleType",((w=e.style)==null?void 0:w.listStyleType)==="decimal"?"none":"decimal")},icon:l.jsx(es,{className:"h-4 w-4"}),title:"Lista numerada"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(re,{onClick:()=>{var T;const w=Number.parseInt(((T=e.style)==null?void 0:T.textIndent)||"0");M("textIndent",`${w+20}px`)},icon:l.jsx(Qo,{className:"h-4 w-4"}),title:"Aumentar sangría"}),l.jsx(re,{onClick:()=>{var T;const w=Number.parseInt(((T=e.style)==null?void 0:T.textIndent)||"0");w>=20&&M("textIndent",`${w-20}px`)},icon:l.jsx(Ko,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Kn,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((De=e.style)==null?void 0:De.lineHeight)||"1.5"),onChange:w=>Ie("lineHeight",w.target.value),className:"w-24"}),l.jsx(Qn,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((We=e.style)==null?void 0:We.lineHeight)||"1.5"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Kn,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((be=e.style)==null?void 0:be.letterSpacing)||"0"),onChange:w=>Ie("letterSpacing",`${w.target.value}px`),className:"w-24"}),l.jsx(Qn,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((I=e.style)==null?void 0:I.letterSpacing)||"0px"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(re,{active:((V=e.style)==null?void 0:V.fontStyle)==="italic"&&((ne=e.style)==null?void 0:ne.paddingLeft)==="20px"&&((ie=e.style)==null?void 0:ie.borderLeft)==="4px solid #ccc",onClick:()=>{var w,T,Z;((w=e.style)==null?void 0:w.fontStyle)==="italic"&&((T=e.style)==null?void 0:T.paddingLeft)==="20px"&&((Z=e.style)==null?void 0:Z.borderLeft)==="4px solid #ccc"?(M("fontStyle","normal"),M("paddingLeft","0"),M("borderLeft","none")):(M("fontStyle","italic"),M("paddingLeft","20px"),M("borderLeft","4px solid #ccc"))},icon:l.jsx(ss,{className:"h-4 w-4"}),title:"Formato de cita"}),l.jsx(re,{active:((oe=e.style)==null?void 0:oe.fontFamily)==="'Courier New', monospace"&&((Re=e.style)==null?void 0:Re.backgroundColor)==="#f5f5f5"&&((Se=e.style)==null?void 0:Se.padding)==="2px 4px",onClick:()=>{var w,T;((w=e.style)==null?void 0:w.fontFamily)==="'Courier New', monospace"&&((T=e.style)==null?void 0:T.backgroundColor)==="#f5f5f5"?(M("fontFamily","Arial, sans-serif"),M("backgroundColor","transparent"),M("padding","0")):(M("fontFamily","'Courier New', monospace"),M("backgroundColor","#f5f5f5"),M("padding","2px 4px"))},icon:l.jsx(Wo,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),v&&D==="advanced"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"relative",ref:K,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>c(!o),title:"Opciones de borde",children:[l.jsx(gs,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Bordes"})]}),o&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),l.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((Ce=e.style)==null?void 0:Ce.borderStyle)||"none",onChange:w=>M("borderStyle",w.target.value),children:_f.map(w=>l.jsx("option",{value:w.value,children:w.label},w.value))})]}),((nt=e.style)==null?void 0:nt.borderStyle)&&((ze=e.style)==null?void 0:ze.borderStyle)!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((Pt=e.style)==null?void 0:Pt.borderWidth)||"1"),onChange:w=>M("borderWidth",`${w.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((Qt=e.style)==null?void 0:Qt.borderWidth)||"1px"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:((Tt=e.style)==null?void 0:Tt.borderColor)||"#000000",onChange:w=>M("borderColor",w.target.value),className:"w-8 h-8"}),l.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(w=>l.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:w},onClick:()=>M("borderColor",w)},w))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((Ot=e.style)==null?void 0:Ot.borderRadius)||"0"),onChange:w=>M("borderRadius",`${w.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((jt=e.style)==null?void 0:jt.borderRadius)||"0px"})]})]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),l.jsx("button",{className:`px-2 py-1 text-xs rounded ${(Rt=e.style)!=null&&Rt.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var w;(w=e.style)!=null&&w.textShadow?M("textShadow",""):M("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(x=e.style)!=null&&x.textShadow?"Quitar":"Añadir"}),((S=e.style)==null?void 0:S.textShadow)&&l.jsxs("select",{className:"text-xs p-1 border rounded",value:(j=e.style)==null?void 0:j.textShadow,onChange:w=>M("textShadow",w.target.value),children:[l.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),l.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),l.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),l.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),l.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((O=e.style)==null?void 0:O.opacity)||"1"),onChange:w=>Ie("opacity",w.target.value),className:"w-24"})}),l.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((B=e.style)==null?void 0:B.opacity)||"1")*100),"%"]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((X=e.style)==null?void 0:X.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var w;((w=e.style)==null?void 0:w.backgroundColor)==="#ffff00"?M("backgroundColor","transparent"):M("backgroundColor","#ffff00")},title:"Resaltar texto",children:[l.jsx(Jo,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[l.jsx(re,{onClick:()=>{alert("Función deshacer (implementar)")},icon:l.jsx(Ja,{className:"h-4 w-4"}),title:"Deshacer"}),l.jsx(re,{onClick:()=>{alert("Función rehacer (implementar)")},icon:l.jsx(ds,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},Jf=({currentSize:e,onSizeChange:t,presetData:r,workspaceDimensions:n})=>((()=>{if(r!=null&&r.canvas_config){const i=typeof r.canvas_config=="string"?JSON.parse(r.canvas_config):r.canvas_config;let s=i.width,o=i.height;return{width:s,height:o,unit:"cm"}}return null})(),l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:n&&l.jsx("div",{className:"text-sm customtext-neutral-dark font-medium ml-2",children:n.originalWidth&&l.jsxs("div",{children:["Dimensiones: ",n.originalWidth," cm x",n.originalHeight," cm"]})})}));function Rh({albumId:e,itemId:t,presetId:r,pages:n}){var Tt,Ot,jt,Rt;const a=()=>{const x=Oe();return`editor_progress_album_${x.albumId}_preset_${x.presetId}`},[i,s]=y.useState(null),[o,c]=y.useState(null),[u,g]=y.useState(null),[p,d]=y.useState(!0),[f,h]=y.useState(null),[b,m]=y.useState(it.Local.get(`${ot.APP_CORRELATIVE}_cart`)??[]);y.useEffect(()=>{it.Local.set(`${ot.APP_CORRELATIVE}_cart`,b)},[b]);const[v,C]=y.useState([]),[D,N]=y.useState(0),[R,A]=y.useState(null),[F,U]=y.useState(null),[k,H]=y.useState("elements"),[G,ve]=y.useState("basic"),[E,K]=y.useState([JSON.stringify(v)]),[ae,M]=y.useState(0),[fe,Ie]=y.useState(!1),[re,xe]=y.useState(null),[ue,me]=y.useState({}),[Le,Ne]=y.useState(!1),[we,Fe]=y.useState({elementId:null,cellId:null}),[$e,ke]=y.useState(!1),Oe=()=>{if(e&&t&&r)return{albumId:e,itemId:t,presetId:r,pages:n||20};const x=new URLSearchParams(window.location.search);return{albumId:x.get("album"),itemId:x.get("item"),presetId:x.get("preset"),pages:parseInt(x.get("pages"))||20}},je=async(x=!1)=>{try{d(!0),h(null);const S=Oe();if(!S.albumId||!S.presetId)throw new Error("Faltan parámetros requeridos: albumId y presetId");const j=ot.APP_URL,O=`${j}/api/albums/${S.albumId}`,B=`${j}/api/item-presets/${S.presetId}`,X=`${j}/api/items/${S.itemId}`,w=await fetch(O,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!w.ok){const q=await w.text();throw new Error(`Error al cargar álbum: ${w.status} ${w.statusText}`)}const T=await w.json(),Z=T.data||T;s(Z);const Q=await fetch(B,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!Q.ok){const q=await Q.text();throw new Error(`Error al cargar preset: ${Q.status} ${Q.statusText}`)}const pe=await Q.json(),$=pe.data||pe;c($);const ce=await fetch(X,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!ce.ok){const q=await ce.text();throw new Error(`Error al cargar item: ${ce.status} ${ce.statusText}`)}const ee=await ce.json(),ge=ee.data||ee;g(ge),x||await Ge($,Z,S.pages)}catch(S){h(S.message)}finally{d(!1)}},Ge=(x,S,j)=>{try{console.log("Creating pages from preset:",x),console.log("Album data:",S),console.log("Total pages requested:",j);const O=[];if(!x.cover_image||!x.content_layer_image||!x.final_layer_image)throw new Error("El preset no tiene todas las imágenes requeridas");const B=T=>T.startsWith("http")||T.startsWith("/storage/")?T:`/storage/${T}`;console.log(x);const X={id:"page-cover",type:"cover",layout:"layout-1",cells:[{id:"cell-cover-1",elements:[{id:"cover-base",type:"image",content:`/storage/images/item_preset/${x.cover_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0},...S.cover_image_path?[{id:"cover-custom",type:"image",content:`/storage/images/albums/covers/${S.cover_image_path}`,position:{x:10,y:10},size:{width:80,height:80},filters:{},mask:"none",zIndex:2}]:[]]}]};O.push(X);for(let T=1;T<=j;T++){const Z={id:`page-content-${T}`,type:"content",pageNumber:T,layout:"layout-1",cells:[{id:`cell-content-${T}-1`,elements:[{id:`content-base-${T}`,type:"image",content:`/storage/images/item_preset/${x.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};O.push(Z)}const w={id:"page-final",type:"final",layout:"layout-1",cells:[{id:"cell-final-1",elements:[{id:"final-base",type:"image",content:`/storage/images/item_preset/${x.final_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};O.push(w),console.log("✅ Created pages:",O),C(O),N(0),x.canvas_config&&(console.log("📐 Canvas config found, setting workspace to preset dimensions"),Ce("preset"))}catch(O){throw console.error("❌ Error creating pages:",O),O}};y.useEffect(()=>{Oe();const x=a(),S=localStorage.getItem(x);let j=!1;if(S)try{const O=JSON.parse(S);O&&Array.isArray(O.pages)&&(C(O.pages),N(O.currentPage||0),j=!0)}catch{}je(j)},[]);const qe=()=>{if(v.length===0)return"Cargando...";const x=v[D];if(!x)return"Página";switch(x.type){case"cover":return"Portada";case"content":return`Página ${x.pageNumber}`;case"final":return"Contraportada";default:return`Página ${D+1}`}},L=()=>{if(v.length===0)return!1;const x=v[D];return(x==null?void 0:x.type)==="content"},J=y.useCallback(()=>{if(!R||!F||v.length===0)return null;const x=v[D];if(!x)return null;const S=x.cells.find(j=>j.id===F);return S?S.elements.find(j=>j.id===R):null},[R,F,v,D]),ye=(x,S)=>{if(S){const j=v[D].cells.find(B=>B.id===S),O=j==null?void 0:j.elements.find(B=>B.id===x);if(O!=null&&O.locked){console.log("Elemento bloqueado, no se puede seleccionar");const B=document.createElement("div");B.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",B.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(B),setTimeout(()=>{document.body.contains(B)&&document.body.removeChild(B)},3e3);return}}if(S&&U(S),A(x),x){const j=v[D].cells.find(B=>B.id===(S||F)),O=j==null?void 0:j.elements.find(B=>B.id===x);(O==null?void 0:O.type)==="image"?(xe(O),console.log(re)):(O==null?void 0:O.type)==="text"?(Ne(!0),Fe({elementId:x,cellId:S||F})):Ne(!1)}else Ne(!1),xe(null)},le=()=>{if(v.length===0)return Ee[0];const x=v[D];return x&&Ee.find(S=>S.id===x.layout)||Ee[0]},De=x=>{C(x);const S=[...E.slice(0,ae+1),JSON.stringify(x)];K(S),M(S.length-1);const j=a();localStorage.setItem(j,JSON.stringify({pages:x,currentPage:D,savedAt:Date.now()}))};y.useEffect(()=>{const x=a();localStorage.setItem(x,JSON.stringify({pages:v,currentPage:D,savedAt:Date.now()}))},[D]);const We=x=>{const S=Ee.find(X=>X.id===x);if(!S)return;const j=[...v],O=j[D],B=Array.from({length:S.cells}).map((X,w)=>O.cells[w]||{id:`cell-${O.id}-${w+1}`,elements:[]});j[D]={...O,layout:x,cells:B},De(j),A(null),U(null)},be=(x,S)=>{const j=[...v],O=j[D].cells.findIndex(B=>B.id===x);O!==-1&&(j[D].cells[O].elements.push(S),De(j),A(S.id),U(x))},I=(x,S,j,O=!1)=>{const B=[...v],X=B[D].cells.findIndex(w=>w.id===x);if(X!==-1){if(O)B[D].cells[X].elements.push({...B[D].cells[X].elements.find(w=>w.id===S),...j});else{const w=B[D].cells[X].elements.findIndex(T=>T.id===S);w!==-1&&(B[D].cells[X].elements[w]={...B[D].cells[X].elements[w],...j})}De(B)}},V=(x,S)=>{const j=[...v],O=j[D].cells.findIndex(B=>B.id===x);O!==-1&&(j[D].cells[O].elements=j[D].cells[O].elements.filter(B=>B.id!==S),De(j),R===S&&A(null))},ne=()=>{ae>0&&(M(ae-1),C(JSON.parse(E[ae-1])),A(null),U(null))},ie=()=>{ae<E.length-1&&(M(ae+1),C(JSON.parse(E[ae+1])),A(null),U(null))},oe=()=>{Ie(!fe)},Re=()=>{const S={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:.05,y:.05},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};F?be(F,S):console.log("Selecciona una celda primero")},[Se,Ce]=y.useState("preset"),nt=()=>{if(o!=null&&o.canvas_config){const T=typeof o.canvas_config=="string"?JSON.parse(o.canvas_config):o.canvas_config;let Z=T.width,Q=T.height,pe=Z*37.8,$=Q*37.8;if(pe&&$){const ce=window.innerWidth*.6,ee=window.innerHeight*.7,ge=ce/pe,q=ee/$,se=Math.min(ge,q,1);return{width:Math.round(pe*se),height:Math.round($*se),originalWidth:Z,originalHeight:Q,scale:se,unit:"cm",originalWidthPx:Math.round(pe),originalHeightPx:Math.round($)}}}const x={square:{width:600,height:600},landscape:{width:1280,height:720},portrait:{width:600,height:800},wide:{width:1200,height:600},tall:{width:540,height:960},preset:{width:800,height:600}},S=x[Se]||x.preset,j=window.innerWidth*.6,O=window.innerHeight*.7,B=j/S.width,X=O/S.height,w=Math.min(B,X,1);return{width:Math.round(S.width*w),height:Math.round(S.height*w),originalWidth:S.width,originalHeight:S.height,scale:w,unit:"px"}},[ze,Pt]=y.useState({width:800,height:600});y.useEffect(()=>{const x=nt();Pt(x)},[o,Se]),y.useEffect(()=>{const x=()=>{const S=nt();Pt(S)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[o,Se]),y.useEffect(()=>{const x=async()=>{const j={};await Promise.all(v.map(async(O,B)=>{const X=document.getElementById(`page-${O.id}`);if(X)try{const w=X.getBoundingClientRect(),T=Math.round(w.width),Z=Math.round(w.height),Q=window.devicePixelRatio||1,pe=await Jn(X,{scale:Q,width:T,height:Z,logging:!1,useCORS:!0,allowTaint:!0,ignoreElements:$=>$.classList.contains("ignore-thumbnail")});j[O.id]=pe.toDataURL()}catch(w){console.error("Error generating thumbnail:",w),j[O.id]=null}})),me({...ue,...j})},S=setTimeout(()=>{x()},500);return()=>clearTimeout(S)},[v,D]);const Qt=()=>{var x;console.log("🛒 === INICIO addAlbumToCart ===");try{if(console.log("📊 Estado actual:",{albumData:i,presetData:o,cartLength:b==null?void 0:b.length,hasAlbumData:!!i,hasPresetData:!!o,albumId:i==null?void 0:i.id,presetId:o==null?void 0:o.id}),console.log("🔍 Verificando dependencias..."),console.log("Local type:",typeof it.Local),console.log("Global type:",typeof ot),console.log("Local object:",it.Local),console.log("Global object:",ot),typeof it.Local>"u")return console.error("❌ Local no está definido"),at.error("Error del sistema",{description:"Sistema Local no disponible.",duration:3e3,position:"bottom-center"}),!1;if(typeof ot>"u")return console.error("❌ Global no está definido"),at.error("Error del sistema",{description:"Sistema Global no disponible.",duration:3e3,position:"bottom-center"}),!1;if(console.log("Global.APP_CORRELATIVE:",ot.APP_CORRELATIVE),!ot.APP_CORRELATIVE)return console.error("❌ Global.APP_CORRELATIVE no está definido"),at.error("Error del sistema",{description:"Configuración del sistema incompleta.",duration:3e3,position:"bottom-center"}),!1;if(!i)return console.error("❌ albumData no está disponible"),console.log("albumData actual:",i),at.error("Error",{description:"Datos del álbum no disponibles.",duration:3e3,position:"bottom-center"}),!1;if(!o)return console.error("❌ presetData no está disponible"),console.log("presetData actual:",o),at.error("Error",{description:"Datos del preset no disponibles.",duration:3e3,position:"bottom-center"}),!1;console.log("✅ Todas las verificaciones pasaron, continuando..."),console.log("🧹 Verificando espacio en localStorage...");try{let ee=0;for(let ge in localStorage)localStorage.hasOwnProperty(ge)&&(ee+=localStorage[ge].length);if(console.log("📊 Tamaño actual del localStorage:",(ee/1024/1024).toFixed(2),"MB"),ee>8*1024*1024){console.log("⚠️ localStorage lleno, limpiando datos innecesarios...");for(let ge in localStorage)(ge.includes("thumbnail")||ge.includes("temp")||ge.includes("cache"))&&(localStorage.removeItem(ge),console.log("🗑️ Eliminado:",ge))}}catch(ee){console.warn("⚠️ Error al verificar localStorage:",ee)}const S=Date.now(),j=`album_${i.id}_${S}`;console.log("🆔 ID generado para el álbum:",j);let O=o.cover_image;ue&&ue["page-cover"]&&(O=ue["page-cover"]),console.log("🖼️ Thumbnail del álbum:",O),console.log("📦 Creando producto del álbum...");const B={album_id:i.id,preset_id:o.id,pages_count:v.length,title:i.title,description:((x=i.description)==null?void 0:x.substring(0,200))||"",selected_pages:i.selected_pages,selected_cover_type:i.selected_cover_type,selected_finish:i.selected_finish,created_at:new Date().toISOString()};let X=O;O&&O.startsWith("data:image/")&&O.length>1e5&&(console.log("🖼️ Thumbnail muy grande, usando imagen del preset"),X=o.cover_image||"/assets/img/default-album.jpg"),console.log("🖼️ Thumbnail optimizado:",o);const w={id:j,name:i.title||`Álbum Personalizado - ${o.name}`,image:(o==null?void 0:o.image)||X,price:o.price||0,final_price:o.final_price||o.price||0,discount:o.discount||null,slug:`album-${i.id}-${S}`,quantity:1,type:"custom_album",album_data:B,preset_data:{id:o.id,name:o.name,cover_image:o.cover_image,price:o.price,final_price:o.final_price}};console.log("📦 Producto del álbum creado exitosamente"),console.log("📊 Tamaño estimado del producto:",JSON.stringify(w).length,"caracteres"),console.log("🛒 Obteniendo carrito actual...");const T=`${ot.APP_CORRELATIVE}_cart`;console.log("🔑 Clave del carrito:",T);const Z=it.Local.get(T)||[];console.log("🛒 Carrito actual desde localStorage:",Z),console.log("🛒 Longitud del carrito actual:",Z.length),console.log("➕ Agregando producto al carrito...");const Q=[...Z,w];console.log("🛒 Nuevo carrito:",Q),console.log("🛒 Nueva longitud del carrito:",Q.length),console.log("💾 Guardando en estado y localStorage...");let pe=null;try{m(Q),it.Local.set(T,Q),console.log("✅ Carrito actualizado en estado y localStorage")}catch(ee){if(pe=ee,ee.name==="QuotaExceededError"){console.error("❌ Error de cuota de localStorage excedida"),console.log("🧹 Intentando liberar espacio del carrito...");try{const q=[...Z.slice(-2),w];console.log("📦 Carrito reducido:",q),m(q),it.Local.set(T,q),console.log("✅ Carrito guardado con espacio reducido"),Q=q,at.success("Álbum agregado al carrito",{description:"Se liberó espacio eliminando productos antiguos.",duration:4e3,position:"bottom-center"})}catch(ge){console.error("❌ No se pudo liberar espacio suficiente:",ge);try{const se=[{id:j,name:w.name,price:w.price,final_price:w.final_price,quantity:1,type:"custom_album",album_data:{album_id:i.id,preset_id:o.id,title:i.title}}];m(se),it.Local.set(T,se),console.log("✅ Guardado con datos mínimos"),Q=se,at.success("Álbum agregado al carrito",{description:"Guardado con información esencial.",duration:3e3,position:"bottom-center"})}catch(q){throw console.error("❌ Error final al guardar:",q),new Error("No se pudo guardar en el carrito por falta de espacio")}}}else throw ee}console.log("🔍 Verificando que se guardó correctamente...");const $=it.Local.get(T);console.log("🔍 Verificación del carrito guardado:",$),console.log("🔍 Longitud del carrito verificado:",$==null?void 0:$.length);const ce=$==null?void 0:$.find(ee=>ee.id===j);return console.log("📦 Álbum encontrado en carrito:",ce?"SÍ":"NO"),console.log("📦 Datos del álbum en carrito:",ce),ce?((!pe||pe.name!=="QuotaExceededError")&&(console.log("✅ Mostrando notificación de éxito..."),at.success("Álbum agregado al carrito",{description:`${w.name} se ha añadido al carrito.`,icon:l.jsx(Bo,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"})),console.log("📡 Disparando evento cartUpdated..."),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cart:Q,action:"add",product:w}})),console.log("🛒 === FIN addAlbumToCart EXITOSO ==="),!0):(console.error("❌ ERROR: El álbum no se encontró en el carrito después de guardarlo"),at.error("Error al verificar carrito",{description:"El álbum no se guardó correctamente en el carrito.",duration:3e3,position:"bottom-center"}),!1)}catch(S){return console.error("❌ === ERROR EN addAlbumToCart ==="),console.error("Error completo:",S),console.error("Stack trace:",S.stack),console.error("Mensaje del error:",S.message),at.error("Error al agregar al carrito",{description:`Error específico: ${S.message}`,duration:5e3,position:"bottom-center"}),!1}};return window.finalizeAlbumDesign=async()=>{try{const x=Oe();if(!x.albumId)return alert("Error: No se encontró el ID del álbum"),!1;const j={pages:(ce=>ce.map(ee=>({id:ee.id,type:ee.type,pageNumber:ee.pageNumber,layout:ee.layout,cells:ee.cells.map(ge=>({id:ge.id,elements:ge.elements.map(q=>{const se={id:q.id,type:q.type,position:q.position,zIndex:q.zIndex||1};if(q.type==="image"){if(q.content.startsWith("data:image/")){const Ue=btoa(q.content.substring(0,100)).substring(0,20);se.content=`[BASE64_IMAGE_${Ue}]`,se.contentType=q.content.split(";")[0].split(":")[1],se.originalSize=q.content.length}else se.content=q.content;if(q.filters){const Ue=Object.entries(q.filters).filter(([Be,Me])=>Me!==0&&Me!==!1&&Me!==null).reduce((Be,[Me,st])=>(Be[Me]=st,Be),{});Object.keys(Ue).length>0&&(se.filters=Ue)}q.mask&&q.mask!=="none"&&(se.mask=q.mask),q.size&&(se.size=q.size),q.locked&&(se.locked=q.locked)}else if(q.type==="text"&&(se.content=q.content,q.style)){const Ue=Object.entries(q.style).filter(([Be,Me])=>!(Be==="fontSize"&&Me==="16px"||Be==="color"&&Me==="#000000"||Be==="fontFamily"&&Me==="Arial")).reduce((Be,[Me,st])=>(Be[Me]=st,Be),{});Object.keys(Ue).length>0&&(se.style=Ue)}return se})}))})))(v),albumInfo:{id:i==null?void 0:i.id,title:i==null?void 0:i.title,preset_id:o==null?void 0:o.id},presetInfo:{id:o==null?void 0:o.id,name:o==null?void 0:o.name,cover_image:o==null?void 0:o.cover_image,content_layer_image:o==null?void 0:o.content_layer_image,final_layer_image:o==null?void 0:o.final_layer_image},workspace:{width:ze.width,height:ze.height,scale:ze.scale},meta:{finalizedAt:new Date().toISOString(),version:"1.2"}},O=JSON.stringify({design_data:j}),B=Math.round(O.length/1024),X=Math.round(B/1024*100)/100;console.log(`Tamaño del payload: ${B} KB (${X} MB)`);let w=0,T=0;v.forEach(ce=>{var ee;(ee=ce.cells)==null||ee.forEach(ge=>{var q;(q=ge.elements)==null||q.forEach(se=>{se.type==="image"&&se.content&&se.content.startsWith("data:image/")&&(w++,T+=se.content.length)})})});const Z=Math.round(T/(1024*1024)*100)/100;if(console.log(`Imágenes base64 encontradas: ${w}, Tamaño total: ${Z} MB`),B>1024&&!confirm(`El diseño contiene ${w} imágenes (${Z} MB en imágenes). Payload completo: ${X} MB. Esto podría causar problemas al guardarlo. ¿Desea continuar de todos modos?`))return!1;const Q=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",pe=await fetch(`${Q}/api/albums/${x.albumId}/finalize-design`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:O});if(!pe.ok){let ce="Error al finalizar el diseño";try{ce=(await pe.json()).message||ce}catch{pe.status===413?ce="El diseño es demasiado grande para ser guardado. Intente simplificar las imágenes.":pe.status>=500&&(ce="Error del servidor. Intente nuevamente más tarde.")}throw new Error(ce)}const $=await pe.json();return console.log("✅ Diseño finalizado exitosamente en el servidor"),console.log("📄 Respuesta del servidor:",$),!0}catch(x){console.error("Error al finalizar diseño:",x);let S=x.message;return x.message.includes("Failed to fetch")?S="Error de conexión. Verifique su conexión a internet e intente nuevamente.":(x.message.includes("NetworkError")||x.message.includes("net::"))&&(S="Error de red. Intente nuevamente más tarde."),alert("Error al finalizar el diseño: "+S),!1}},window.generateAlbumPDF=async()=>{let x=document.getElementById("pdf-hidden-pages");x||(x=document.createElement("div"),x.id="pdf-hidden-pages",x.style.position="fixed",x.style.left="-99999px",x.style.top="0",x.style.width="800px",x.style.zIndex="-1",document.body.appendChild(x)),x.innerHTML="";const S=(B,X)=>{var T,Z;const w=Ee.find(Q=>Q.id===B.layout)||Ee[0];return l.jsx("div",{id:`pdf-page-${B.id}`,style:{width:800,height:600,background:"#fff",overflow:"hidden",position:"relative",boxSizing:"border-box",display:"block",margin:0,padding:0},children:l.jsx("div",{className:`grid ${w.template}`,style:{width:"100%",height:"100%",gap:((T=w.style)==null?void 0:T.gap)||"16px",padding:((Z=w.style)==null?void 0:Z.padding)||"16px",boxSizing:"border-box"},children:B.cells.map((Q,pe)=>l.jsx("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f9fafb",borderRadius:8,overflow:"hidden"},children:Q.elements.map($=>{var ce,ee,ge,q,se,Ue,Be,Me,st,Mt,At,kt,Bt,Lt,Ft,Zt,$n,zn,Hn,Gn,Wn,Vn,qn,Un,Yn;return $.type==="image"?l.jsx("div",{className:((ce=yt.find(So=>So.id===$.mask))==null?void 0:ce.class)||"",style:{position:"absolute",left:$.position.x,top:$.position.y,width:"100%",height:"100%",zIndex:$.zIndex||1},children:l.jsx("img",{src:$.content,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",filter:`brightness(${(((ee=$.filters)==null?void 0:ee.brightness)||100)/100}) contrast(${(((ge=$.filters)==null?void 0:ge.contrast)||100)/100}) saturate(${(((q=$.filters)==null?void 0:q.saturation)||100)/100}) sepia(${(((se=$.filters)==null?void 0:se.tint)||0)/100}) hue-rotate(${(((Ue=$.filters)==null?void 0:Ue.hue)||0)*3.6}deg) blur(${((Be=$.filters)==null?void 0:Be.blur)||0}px)`,transform:`scale(${((Me=$.filters)==null?void 0:Me.scale)||1}) rotate(${((st=$.filters)==null?void 0:st.rotate)||0}deg)${(Mt=$.filters)!=null&&Mt.flipHorizontal?" scaleX(-1)":""}${(At=$.filters)!=null&&At.flipVertical?" scaleY(-1)":""}`,mixBlendMode:((kt=$.filters)==null?void 0:kt.blendMode)||"normal",opacity:(((Bt=$.filters)==null?void 0:Bt.opacity)||100)/100}})},$.id):l.jsx("div",{style:{position:"absolute",left:$.position.x,top:$.position.y,fontFamily:(Lt=$.style)==null?void 0:Lt.fontFamily,fontSize:(Ft=$.style)==null?void 0:Ft.fontSize,fontWeight:(Zt=$.style)==null?void 0:Zt.fontWeight,fontStyle:($n=$.style)==null?void 0:$n.fontStyle,textDecoration:(zn=$.style)==null?void 0:zn.textDecoration,color:(Hn=$.style)==null?void 0:Hn.color,textAlign:(Gn=$.style)==null?void 0:Gn.textAlign,background:((Wn=$.style)==null?void 0:Wn.backgroundColor)||"transparent",padding:((Vn=$.style)==null?void 0:Vn.padding)||"8px",borderRadius:((qn=$.style)==null?void 0:qn.borderRadius)||"0px",border:((Un=$.style)==null?void 0:Un.border)||"none",opacity:((Yn=$.style)==null?void 0:Yn.opacity)||1},children:$.content},$.id)})},Q.id))})},B.id)},j=await Co(()=>import("./index-DE3dzT5W.js").then(B=>B.i),__vite__mapDeps([0,1,2,3]));await new Promise(B=>{j.render(l.jsx("div",{children:v.map((X,w)=>S(X))}),x,B)});const O=new To({orientation:"landscape",unit:"px",format:[800,600]});for(let B=0;B<v.length;B++){const X=document.getElementById(`pdf-page-${v[B].id}`),T=(await Jn(X,{backgroundColor:"#fff",scale:2})).toDataURL("image/jpeg",1);B>0&&O.addPage([800,600],"landscape"),O.addImage(T,"JPEG",0,0,800,600)}O.save("album.pdf"),x.innerHTML=""},l.jsxs($l,{backend:Lf,children:[p?l.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold customtext-neutral-dark mb-2",children:"Cargando Editor"}),l.jsx("p",{className:"customtext-neutral-dark",children:"Preparando tu álbum personalizado..."})]})}):v.length===0||f?l.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),l.jsx("p",{className:"customtext-neutral-dark mb-4",children:f||"No se pudieron cargar los datos del álbum."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),l.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Volver"})]})]})}):l.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-gray-50 font-paragraph",children:[l.jsx(Po,{isOpen:$e,onRequestClose:()=>ke(!1),pages:v.map(x=>({...x,layout:Ee.find(S=>S.id===x.layout)||Ee[0]})),workspaceDimensions:ze,getCurrentLayout:x=>x&&Ee.find(S=>S.id===x.layout)||Ee[0],presetData:o,pageThumbnails:ue,addAlbumToCart:Qt}),l.jsx("header",{className:"fixed top-0 left-0 right-0 h-16 border-b bg-primary shadow-sm flex items-center px-4 z-10",children:l.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:ot.APP_NAME,className:"h-7 object-contain object-center invert brightness-0"}),l.jsx("div",{className:"h-6 w-px bg-white/20"}),l.jsx("h1",{className:"text-lg font-bold text-white truncate hidden sm:block",children:(i==null?void 0:i.title)||"Álbum Sin Título"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"bg-white/10 rounded-full px-4 py-1.5 flex items-center gap-2",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-secondary animate-pulse"}),l.jsx("p",{className:"text-sm text-white font-medium",children:qe()})]}),l.jsx("div",{className:"text-xs text-white/70 hidden sm:block",children:v.length>0&&`${v.length} páginas total`}),L()?l.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:l.jsx(os,{className:"h-3 w-3"})}):l.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-2 rounded-md text-xs font-medium flex items-center gap-1",children:l.jsx(rs,{className:"h-3 w-3"})})]}),l.jsxs("div",{className:"flex gap-3 items-center",children:[l.jsx(Ke,{variant:fe?"secondary":"outline",size:"sm",onClick:oe,icon:l.jsx(Vo,{className:"h-4 w-4"}),className:"border-white/20 text-white hover:bg-white/10 hover:text-white",children:fe?"Editar":"Vista previa"}),l.jsx(Ke,{variant:"secondary",size:"sm",onClick:()=>ke(!0),icon:l.jsx(er,{className:"h-4 w-4"}),children:"Vista de Álbum"}),!1]})]})}),l.jsxs("div",{className:"flex w-full h-full pt-16",children:[l.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col",children:[l.jsx("div",{className:"p-3 border-b",children:l.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-md",children:[l.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${k==="elements"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>H("elements"),children:"Elementos"}),l.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${k==="filters"?"bg-white shadow-sm text-purple-700":"customtext-neutral-dark hover:bg-white/50"}`,onClick:()=>H("filters"),children:"Filtros"})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:[k==="elements"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Layouts"}),l.jsx(zf,{currentLayoutId:(Tt=v[D])==null?void 0:Tt.layout,onLayoutChange:We})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Capas"}),l.jsx(Ff,{elements:((Ot=v[D].cells.find(x=>x.id===F))==null?void 0:Ot.elements)||[],onReorder:x=>{const S=[...v],j=S[D].cells.findIndex(O=>O.id===F);j!==-1&&(S[D].cells[j].elements=x,De(S))},onSelect:ye,selectedElement:R})]})]}),k==="filters"&&l.jsx("div",{className:"space-y-3 max-h-full",children:(()=>{const x=J();return x?l.jsxs(l.Fragment,{children:[x.type==="image"&&l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(sr,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"text-sm font-medium",children:"Imagen seleccionada"})]}),l.jsx("div",{className:"w-full h-16 rounded-md overflow-hidden bg-gray-200",children:l.jsx("img",{src:x.content,alt:"",className:"w-full h-full object-cover"})})]}),x.type==="image"&&l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Máscaras"}),l.jsx(Gf,{selectedMask:x.mask||"none",onSelect:S=>{I(F,R,{mask:S})},availableMasks:yt.map(S=>S.id),selectedImage:x})]}),l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("h3",{className:"font-medium text-xs uppercase customtext-neutral-dark mb-2",children:"Filtros y efectos"}),l.jsx("div",{className:"",children:l.jsx(Hf,{filters:x.filters||{},onFilterChange:S=>{I(F,R,{filters:S})},selectedElement:x})})]})]}):l.jsxs("div",{className:"text-center py-8 px-2",children:[l.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-3",children:l.jsx(sr,{className:"h-6 w-6 text-gray-400 mx-auto"})}),l.jsx("h3",{className:"text-sm font-medium customtext-neutral-dark",children:"Selecciona un elemento"}),l.jsx("p",{className:"text-xs customtext-neutral-dark mt-1",children:"Para aplicar filtros y efectos, primero selecciona una imagen o texto en el lienzo"})]})})()})]})]}),l.jsxs("main",{className:"flex-1 flex flex-col h-full",children:[l.jsx("div",{className:"bg-white border-b px-4 py-2 flex items-center justify-between",children:Le?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>Ne(!1),className:"h-8 px-2",icon:l.jsx(ko,{className:"h-4 w-4"}),children:"Volver"}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"})]}),l.jsx("div",{className:"flex-1 flex justify-start",children:l.jsx(Xf,{element:J(),onUpdate:x=>{I(we.cellId,we.elementId,x)},onClose:()=>Ne(!1)})})]}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(Ke,{variant:"ghost",size:"sm",onClick:ne,disabled:ae<=0,className:"h-8 px-2",icon:l.jsx(bs,{className:"h-4 w-4"}),children:"Deshacer"}),l.jsx(Ke,{variant:"ghost",size:"sm",onClick:ie,disabled:ae>=E.length-1,className:"h-8 px-2",icon:l.jsx(ls,{className:"h-4 w-4"}),children:"Rehacer"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=S=>{if(S.target.files&&S.target.files[0]){const O={id:`img-${Date.now()}`,type:"image",content:"",position:{x:.1,y:.1},size:{width:.3,height:.3},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},B=new FileReader;B.onload=X=>{var w,T;(w=X.target)!=null&&w.result&&(O.content=X.target.result,F?be(F,O):(T=v[D])!=null&&T.cells[0]&&be(v[D].cells[0].id,O))},B.readAsDataURL(S.target.files[0])}},x.click()},className:"h-8 px-2",icon:l.jsx(sr,{className:"h-4 w-4"}),children:"Imagen"}),l.jsx(Ke,{variant:"ghost",size:"sm",onClick:Re,className:"h-8 px-2",icon:l.jsx(xt,{className:"h-4 w-4"}),children:"Texto"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),R&&l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>{if(R&&F){const x=J();if(x){const S={...x,id:`${x.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,position:{x:x.position.x+.05,y:x.position.y+.05}};be(F,S)}}},className:"h-8 px-2",icon:l.jsx(ln,{className:"h-4 w-4"}),children:"Duplicar"}),l.jsx(Ke,{variant:"ghost",size:"sm",onClick:()=>{R&&F&&V(F,R)},className:"h-8 px-2 text-red-600 hover:text-white",icon:l.jsx(ur,{className:"h-4 w-4"}),children:"Eliminar"})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx(Jf,{currentSize:Se,onSizeChange:Ce,presetData:o,workspaceDimensions:ze})})]})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-6 overflow-hidden bg-gray-100",children:fe?l.jsx("div",{className:"bg-white rounded-lg shadow-lg",children:l.jsx("div",{className:"overflow-hidden",style:{width:ze.width,height:ze.height},children:l.jsx("div",{id:`page-${v[D].id}`,className:`grid ${le().template} gap-6`,style:{width:"100%",height:"100%"},children:v[D].cells.map(x=>l.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:x.elements.map(S=>{var j,O,B,X,w,T,Z,Q,pe,$,ce,ee,ge,q,se,Ue,Be,Me,st,Mt,At,kt,Bt,Lt,Ft;return S.type==="image"?l.jsx("div",{className:`absolute ${((j=yt.find(Zt=>Zt.id===S.mask))==null?void 0:j.class)||""}`,style:{left:`${S.position.x}px`,top:`${S.position.y}px`,width:"100%",height:"100%"},children:l.jsx("img",{src:S.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                                                            brightness(${(((O=S.filters)==null?void 0:O.brightness)||100)/100})
                                                                            contrast(${(((B=S.filters)==null?void 0:B.contrast)||100)/100})
                                                                            saturate(${(((X=S.filters)==null?void 0:X.saturation)||100)/100})
                                                                            sepia(${(((w=S.filters)==null?void 0:w.tint)||0)/100})
                                                                            hue-rotate(${(((T=S.filters)==null?void 0:T.hue)||0)*3.6}deg)
                                                                            blur(${((Z=S.filters)==null?void 0:Z.blur)||0}px)
                                                                        `,transform:`scale(${((Q=S.filters)==null?void 0:Q.scale)||1}) rotate(${((pe=S.filters)==null?void 0:pe.rotate)||0}deg) ${($=S.filters)!=null&&$.flipHorizontal?"scaleX(-1)":""} ${(ce=S.filters)!=null&&ce.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((ee=S.filters)==null?void 0:ee.blendMode)||"normal",opacity:(((ge=S.filters)==null?void 0:ge.opacity)||100)/100}})},S.id):l.jsx("div",{className:"absolute",style:{left:`${S.position.x}px`,top:`${S.position.y}px`,fontFamily:(q=S.style)==null?void 0:q.fontFamily,fontSize:(se=S.style)==null?void 0:se.fontSize,fontWeight:(Ue=S.style)==null?void 0:Ue.fontWeight,fontStyle:(Be=S.style)==null?void 0:Be.fontStyle,textDecoration:(Me=S.style)==null?void 0:Me.textDecoration,color:(st=S.style)==null?void 0:st.color,textAlign:(Mt=S.style)==null?void 0:Mt.textAlign,backgroundColor:((At=S.style)==null?void 0:At.backgroundColor)||"transparent",padding:((kt=S.style)==null?void 0:kt.padding)||"8px",borderRadius:((Bt=S.style)==null?void 0:Bt.borderRadius)||"0px",border:((Lt=S.style)==null?void 0:Lt.border)||"none",opacity:((Ft=S.style)==null?void 0:Ft.opacity)||1},children:S.content},S.id)})},x.id))})})}):l.jsxs("div",{id:`page-${v[D].id}`,className:"bg-white rounded-lg shadow-xl",style:{width:ze.width,height:ze.height,position:"relative"},children:[(()=>{const x=v[D];let S=null;return x.type==="cover"&&(o!=null&&o.cover_image)?S=o.cover_image.startsWith("http")?o.cover_image:`/storage/images/item_preset/${o.cover_image}`:x.type==="content"&&(o!=null&&o.content_layer_image)?S=o.content_layer_image.startsWith("http")?o.content_layer_image:`/storage/images/item_preset/${o.content_layer_image}`:x.type==="final"&&(o!=null&&o.final_layer_image)&&(S=o.final_layer_image.startsWith("http")?o.final_layer_image:`/storage/images/item_preset/${o.final_layer_image}`),S?l.jsx("img",{src:S,alt:"background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0,pointerEvents:"none"}}):null})(),l.jsx("div",{className:`grid ${le().template}`,style:{position:"relative",zIndex:1,width:"100%",height:"100%",boxSizing:"border-box",gap:((jt=le().style)==null?void 0:jt.gap)||"16px",padding:((Rt=le().style)==null?void 0:Rt.padding)||"16px"},children:v[D].cells.map(x=>{var S;return l.jsx($f,{id:x.id,elements:x.elements.filter(j=>!j.locked),workspaceSize:ze,cellStyle:(S=le().cellStyles)==null?void 0:S[v[D].cells.indexOf(x)],selectedElement:F===x.id?R:null,onSelectElement:ye,onAddElement:j=>be(x.id,j),onUpdateElement:(j,O,B)=>I(x.id,j,O,B),onDeleteElement:j=>V(x.id,j),availableMasks:le().maskCategories.flatMap(j=>j.masks)},x.id)})})]})})]}),l.jsxs("aside",{className:"w-52 bg-white border-l flex flex-col h-full",children:[l.jsx("div",{className:"p-4 border-b bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"font-medium text-sm text-gray-700 flex items-center gap-1.5",children:[l.jsx(er,{className:"h-4 w-4 text-purple-600"}),"Páginas"]}),l.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded-full border",children:[v.length," total"]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 mr-1.5"}),"Portada"]}),v.filter(x=>x.type==="cover").map((x,S)=>l.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                            ${D===v.indexOf(x)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>N(v.indexOf(x)),children:l.jsxs("div",{className:"relative bg-purple-50  overflow-hidden border aspect-[4/3] ",children:[ue[x.id]?l.jsx("img",{src:ue[x.id],alt:"Portada",className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:"text-purple-300",children:l.jsx(er,{className:"h-8 w-8"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:l.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Portada"})})]})},x.id))]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400 mr-1.5"}),"Páginas de contenido"]}),l.jsx("div",{className:"space-y-2",children:v.filter(x=>x.type==="content").map((x,S)=>l.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                                ${D===v.indexOf(x)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                                mb-1`,onClick:()=>N(v.indexOf(x)),children:l.jsxs("div",{className:"relative  overflow-hidden border aspect-[4/3]",children:[ue[x.id]?l.jsx("img",{src:ue[x.id],alt:`Página ${x.pageNumber}`,className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:`grid ${le().template} gap-0.5 w-full h-full `,children:Array.from({length:le().cells}).map((j,O)=>l.jsx("div",{className:"bg-gray-200 rounded-sm"},O))})}),l.jsx("div",{className:"absolute top-1 left-1 bg-white/90 rounded-full h-5 w-5 flex items-center justify-center text-[10px] font-bold shadow-sm",children:x.pageNumber}),l.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-[9px] px-1.5 py-0.5 rounded-full opacity-80 group-hover:opacity-100",children:"Editable"})]})},x.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400 mr-1.5"}),"Contraportada"]}),v.filter(x=>x.type==="final").map((x,S)=>l.jsx("div",{className:`relative group flex flex-col cursor-pointer  transition-all duration-200 transform 
                            ${D===v.indexOf(x)?"ring-2 ring-purple-400 scale-[1.02] shadow-md":"hover:bg-gray-50 border border-transparent hover:border-gray-200"}
                            mb-2`,onClick:()=>N(v.indexOf(x)),children:l.jsxs("div",{className:"relative  overflow-hidden border mb-1 aspect-[4/3]",children:[ue[x.id]?l.jsx("img",{src:ue[x.id],alt:"Contraportada",className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:"text-green-300",children:l.jsx(er,{className:"h-8 w-8"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 pt-6 group-hover:opacity-100 opacity-80 transition-opacity",children:l.jsx("span",{className:"text-[10px] text-white font-medium block",children:"Contraportada"})})]})},x.id))]})]})})]})]})]}),l.jsx(Oo,{})]})}export{Rh as default};

import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{x as b}from"./index.esm-DFiNGWUA.js";import{J as N}from"./JSEncrypt-BF8AmNNu.js";import{r as o}from"./index-BOnQTV8N.js";import{c as v}from"./ReactAppend-DTVVXReZ.js";import{m as i}from"./main-Bp3JhiuO.js";import{S as y}from"./ProductCard-CwyKCVe-.js";import{C as R}from"./CreateReactScript-CrlrjA2p.js";import{G as c}from"./Global-BM4Id4Pw.js";import{A as E}from"./AuthRest-DaFDqBwp.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./index-fNjTmf9T.js";/* empty css               *//* empty css              */import"./General-BmbBKdsB.js";const w=({})=>{document.title=`Login | ${c.APP_NAME}`;const r=new N;r.setPublicKey(c.PUBLIC_RSA_KEY);const[l,a]=o.useState(!0),n=o.useRef(),m=o.useRef(),p=o.useRef();o.useEffect(()=>{i.GET.message&&y.fire({icon:"info",title:"Mensaje",text:i.GET.message,showConfirmButton:!1,timer:3e3}),i.GET.service?history.pushState(null,null,`/login?service=${i.GET.service}`):history.pushState(null,null,"/login")},[null]);const x=async f=>{var d,u;f.preventDefault(),a(!0);const h=n.current.value,g=m.current.value,j={email:r.encrypt(h),password:r.encrypt(g)},s=await E.login(j);if(console.log("ðŸ” Login.jsx - result recibido:",s),!s)return a(!1);console.log("ðŸ” Login.jsx - Buscando redirect_url en:",s),console.log("ðŸ” Login.jsx - result.redirect_url:",s.redirect_url),console.log("ðŸ” Login.jsx - result.data?.redirect_url:",(d=s.data)==null?void 0:d.redirect_url);const t=s.redirect_url||((u=s.data)==null?void 0:u.redirect_url);console.log("ðŸ” Login.jsx - URL final de redirecciÃ³n:",t),t?(console.log("âœ… Redirigiendo a:",t),window.location.href=t):(console.log("âš ï¸ No se encontrÃ³ URL de redirecciÃ³n, recargando pÃ¡gina"),location.reload())};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"account-pages my-5",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-8 col-lg-6 col-xl-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(b,{href:"/",children:e.jsx("img",{src:"/assets/resources/logo.png",alt:"",className:"mx-auto",style:{height:"40px"}})}),e.jsxs("p",{className:"text-muted mt-2 mb-4",children:["Bienvenido a ",c.APP_NAME]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("h4",{className:"text-uppercase mt-0 font-bold",children:"Inicia SesiÃ³n"})}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Correo o Usuario"}),e.jsx("input",{ref:n,className:"form-control",type:"email",id:"email",required:!0,placeholder:"Ingrese su correo o usuario"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"ContraseÃ±a"}),e.jsx("input",{ref:m,className:"form-control",type:"password",required:!0,id:"password",placeholder:"Ingrese su contraseÃ±a"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{ref:p,type:"checkbox",className:"form-check-input",id:"checkbox-signin",defaultChecked:!0,style:{cursor:"pointer"}}),e.jsx("label",{className:"form-check-label",htmlFor:"checkbox-signin",style:{cursor:"pointer"},children:"Recuerdame"})]})}),e.jsx("div",{className:"mb-3 d-grid text-center",children:e.jsx("button",{className:"btn btn-primary",type:"submit",children:" Iniciar SesiÃ³n "})})]})]})})]})})})})})};R((r,l)=>{v.createRoot(r).render(e.jsx(w,{...l}))});

import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{r as x,R as ae}from"./index-BH53Isel.js";import{a as Fn,b as mo,_ as Qt,e as z}from"./objectWithoutPropertiesLoose-G_JZ8CQC.js";import{h as $n}from"./hoist-non-react-statics.cjs-lJxeXavk.js";import{r as bo,R as xo}from"./index-rimy3MAc.js";import{c as Y}from"./createLucideIcon-Cy5Ya80P.js";import{S as yo,I as Tt,P as Ha}from"./sparkles-BeGvo0qS.js";import{B as wo,h as Do}from"./Editor-DXckd8bb.js";import{e as Co}from"./index-BSWw-p5k.js";import{T as ct}from"./trash-2-DK1wnsDn.js";import{U as So}from"./upload-qgEr5bIl.js";import{C as yr}from"./chevron-up-D78jyEhP.js";import{C as Jt}from"./chevron-down-DS-mdh9v.js";import{X as Io}from"./x-DBMwyD6F.js";import{M as Hn}from"./minus-jyhodMPN.js";import{P as Fr}from"./plus-Bot15Khs.js";import{C as zn}from"./chevron-left-B2s3ZsB7.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./index.es-p8wkj5I3.js";import"./index-Bv81MoWS.js";import"./index-Chjiymov.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Y("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Y("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Y("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Y("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Y("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Y("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Y("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Y("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Y("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Y("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Y("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Y("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Y("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Y("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Y("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Y("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Y("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Y("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Y("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Y("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Y("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=Y("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Y("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Y("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Y("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Y("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Y("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Y("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Y("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Y("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=Y("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Y("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Y("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=Y("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Y("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Y("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function he({children:e,onClick:t,className:r="",variant:n="default",size:a="default",disabled:i=!1,icon:o=null}){const s="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",d={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},p={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return l.jsxs("button",{className:`${s} ${d[n]} ${p[a]} ${r} gap-2`,onClick:t,disabled:i,children:[o&&l.jsx("span",{className:"w-4 h-4",children:o}),e]})}const He=({value:e=[50],min:t=0,max:r=100,step:n=1,onValueChange:a,label:i,unit:o="%"})=>{const[s,d]=x.useState(e[0]),p=g=>{const u=Number.parseInt(g.target.value);d(u),a&&a([u])};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i}),l.jsxs("span",{className:"text-sm text-gray-500",children:[s,o]})]}),l.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:l.jsx("input",{type:"range",min:t,max:r,step:n,value:s,onChange:p,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},as=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:105,contrast:115,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],is=({onSelectPreset:e,selectedImage:t})=>{const r=n=>({filter:`
            brightness(${n.brightness}%)
            contrast(${n.contrast}%)
            saturate(${n.saturation}%)
            sepia(${n.tint}%)
            hue-rotate(${n.hue}deg)
            blur(${n.blur}px)
        `});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:as.map(n=>l.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>e(n.filters),children:[l.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:t?l.jsx("img",{src:t.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r(n.filters)}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:l.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:l.jsx(yo,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},os=({filters:e={},onFilterChange:t,selectedElement:r})=>{const n=(a,i)=>{const o={...e,[a]:i};t(o)};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),l.jsx("div",{className:"space-y-3",children:l.jsx(He,{label:"Opacidad",value:e.opacity||100,onChange:a=>n("opacity",a),min:0,max:100,step:1,unit:"%"})}),(r==null?void 0:r.type)==="image"&&l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Modo de mezcla"}),l.jsxs("select",{value:e.blendMode||"normal",onChange:a=>n("blendMode",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"normal",children:"Normal"}),l.jsx("option",{value:"multiply",children:"Multiplicar"}),l.jsx("option",{value:"screen",children:"Pantalla"}),l.jsx("option",{value:"overlay",children:"Superposición"}),l.jsx("option",{value:"soft-light",children:"Luz suave"}),l.jsx("option",{value:"hard-light",children:"Luz fuerte"}),l.jsx("option",{value:"color-dodge",children:"Sobreexponer color"}),l.jsx("option",{value:"color-burn",children:"Subexponer color"}),l.jsx("option",{value:"darken",children:"Oscurecer"}),l.jsx("option",{value:"lighten",children:"Aclarar"}),l.jsx("option",{value:"difference",children:"Diferencia"}),l.jsx("option",{value:"exclusion",children:"Exclusión"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Transformaciones adicionales"}),l.jsx(He,{label:"Profundidad (Z-Index)",value:e.zIndex||1,onChange:a=>n("zIndex",a),min:1,max:100,step:1}),l.jsx(He,{label:"Desenfoque gaussiano",value:e.gaussianBlur||0,onChange:a=>n("gaussianBlur",a),min:0,max:50,step:.5,unit:"px"})]})]})},qa=x.createContext({dragDropManager:void 0});function Ae(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var qn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Un=function(){return Math.random().toString(36).substring(7).split("").join(".")},Vn={INIT:"@@redux/INIT"+Un(),REPLACE:"@@redux/REPLACE"+Un()};function ss(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _r(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ae(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ae(1));return r(_r)(e,t)}if(typeof e!="function")throw new Error(Ae(2));var a=e,i=t,o=[],s=o,d=!1;function p(){s===o&&(s=o.slice())}function g(){if(d)throw new Error(Ae(3));return i}function u(m){if(typeof m!="function")throw new Error(Ae(4));if(d)throw new Error(Ae(5));var v=!0;return p(),s.push(m),function(){if(v){if(d)throw new Error(Ae(6));v=!1,p();var w=s.indexOf(m);s.splice(w,1),o=null}}}function c(m){if(!ss(m))throw new Error(Ae(7));if(typeof m.type>"u")throw new Error(Ae(8));if(d)throw new Error(Ae(9));try{d=!0,i=a(i,m)}finally{d=!1}for(var v=o=s,y=0;y<v.length;y++){var w=v[y];w()}return m}function f(m){if(typeof m!="function")throw new Error(Ae(10));a=m,c({type:Vn.REPLACE})}function h(){var m,v=u;return m={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Ae(11));function S(){w.next&&w.next(g())}S();var E=v(S);return{unsubscribe:E}}},m[qn]=function(){return this},m}return c({type:Vn.INIT}),n={dispatch:c,subscribe:u,getState:g,replaceReducer:f},n[qn]=h,n}function Yn(e,t){return function(){return t(e.apply(this,arguments))}}function Xn(e,t){if(typeof e=="function")return Yn(e,t);if(typeof e!="object"||e===null)throw new Error(Ae(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=Yn(a,t))}return r}function Ua(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function ls(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Ae(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(d){return d(o)});return i=Ua.apply(void 0,s)(a.dispatch),Fn(Fn({},a),{},{dispatch:i})}}}function V(e,t,...r){if(cs()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function cs(){return typeof process<"u"&&!0}function ds(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function us(e,t){return e.filter(r=>r!==t)}function Va(e){return typeof e=="object"}function ps(e,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function gs(e,t){return e.filter(r=>t.indexOf(r)>-1)}const Qr="dnd-core/INIT_COORDS",lr="dnd-core/BEGIN_DRAG",Zr="dnd-core/PUBLISH_DRAG_SOURCE",cr="dnd-core/HOVER",dr="dnd-core/DROP",ur="dnd-core/END_DRAG";function Jn(e,t){return{type:Qr,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const fs={type:Qr,payload:{clientOffset:null,sourceClientOffset:null}};function hs(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,s=e.getMonitor(),d=e.getRegistry();e.dispatch(Jn(i)),vs(r,s,d);const p=xs(r,s);if(p==null){e.dispatch(fs);return}let g=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");ms(o),g=o(p)}e.dispatch(Jn(i,g));const c=d.getSource(p).beginDrag(s,p);if(c==null)return;bs(c),d.pinSource(p);const f=d.getSourceType(p);return{type:lr,payload:{itemType:f,item:c,sourceId:p,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!a}}}}function vs(e,t,r){V(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){V(r.getSource(n),"Expected sourceIds to be registered.")})}function ms(e){V(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function bs(e){V(Va(e),"Item must be an object.")}function xs(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function ys(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){ys(e,a,r[a])})}return e}function Ds(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();Cs(n),Ns(n).forEach((o,s)=>{const d=Ss(o,s,a,n),p={type:dr,payload:{dropResult:ws({},r,d)}};e.dispatch(p)})}}function Cs(e){V(e.isDragging(),"Cannot call drop while not dragging."),V(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function Ss(e,t,r,n){const a=r.getTarget(e);let i=a?a.drop(n,e):void 0;return Is(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function Is(e){V(typeof e>"u"||Va(e),"Drop result must either be an object or undefined.")}function Ns(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Es(e){return function(){const r=e.getMonitor(),n=e.getRegistry();Ps(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:ur}}}function Ps(e){V(e.isDragging(),"Cannot call endDrag while not dragging.")}function $r(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function Ts(e){return function(r,{clientOffset:n}={}){Os(r);const a=r.slice(0),i=e.getMonitor(),o=e.getRegistry(),s=i.getItemType();return Rs(a,o,s),js(a,i,o),Ms(a,i,o),{type:cr,payload:{targetIds:a,clientOffset:n||null}}}}function Os(e){V(Array.isArray(e),"Expected targetIds to be an array.")}function js(e,t,r){V(t.isDragging(),"Cannot call hover while not dragging."),V(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];V(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);V(i,"Expected targetIds to be registered.")}}function Rs(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],i=t.getTargetType(a);$r(i,r)||e.splice(n,1)}}function Ms(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function As(e){return function(){if(e.getMonitor().isDragging())return{type:Zr}}}function ks(e){return{beginDrag:hs(e),publishDragSource:As(e),hover:Ts(e),drop:Ds(e),endDrag:Es(e)}}class Bs{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const s=i.apply(t,o);typeof s<"u"&&r(s)}}const a=ks(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function Ls(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Ya(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fs(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:Ya(Ls(t,n),r)}function $s(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:Ya(t,r)}const Ot=[],en=[];Ot.__IS_NONE__=!0;en.__IS_ALL__=!0;function Hs(e,t){return e===Ot?!1:e===en||typeof t>"u"?!0:gs(t,e).length>0}class zs{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;V(typeof t=="function","listener must be a function."),V(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!Hs(o.dirtyHandlerIds,n)||t()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){V(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return V(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(V(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return $r(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(V(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!$r(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(t);return n?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Fs(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return $s(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const Kn=typeof global<"u"?global:self,Xa=Kn.MutationObserver||Kn.WebKitMutationObserver;function Ja(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function Gs(e){let t=1;const r=new Xa(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const Ws=typeof Xa=="function"?Gs:Ja;class qs{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=Ws(this.flush),this.requestErrorThrow=Ja(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Us{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class Vs{create(t){const r=this.freeTasks,n=r.length?r.pop():new Us(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const Ka=new qs,Ys=new Vs(Ka.registerPendingError);function Xs(e){Ka.enqueueTask(Ys.create(e))}const tn="dnd-core/ADD_SOURCE",rn="dnd-core/ADD_TARGET",nn="dnd-core/REMOVE_SOURCE",pr="dnd-core/REMOVE_TARGET";function Js(e){return{type:tn,payload:{sourceId:e}}}function Ks(e){return{type:rn,payload:{targetId:e}}}function _s(e){return{type:nn,payload:{sourceId:e}}}function Qs(e){return{type:pr,payload:{targetId:e}}}function Zs(e){V(typeof e.canDrag=="function","Expected canDrag to be a function."),V(typeof e.beginDrag=="function","Expected beginDrag to be a function."),V(typeof e.endDrag=="function","Expected endDrag to be a function.")}function el(e){V(typeof e.canDrop=="function","Expected canDrop to be a function."),V(typeof e.hover=="function","Expected hover to be a function."),V(typeof e.drop=="function","Expected beginDrag to be a function.")}function Hr(e,t){if(t&&Array.isArray(e)){e.forEach(r=>Hr(r,!1));return}V(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var ze;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(ze||(ze={}));let tl=0;function rl(){return tl++}function nl(e){const t=rl().toString();switch(e){case ze.SOURCE:return`S${t}`;case ze.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function _n(e){switch(e[0]){case"S":return ze.SOURCE;case"T":return ze.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Qn(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class al{addSource(t,r){Hr(t),Zs(r);const n=this.addHandler(ze.SOURCE,t,r);return this.store.dispatch(Js(n)),n}addTarget(t,r){Hr(t,!0),el(r);const n=this.addHandler(ze.TARGET,t,r);return this.store.dispatch(Ks(n)),n}containsHandler(t){return Qn(this.dragSources,t)||Qn(this.dropTargets,t)}getSource(t,r=!1){return V(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return V(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return V(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return V(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return _n(t)===ze.SOURCE}isTargetId(t){return _n(t)===ze.TARGET}removeSource(t){V(this.getSource(t),"Expected an existing source."),this.store.dispatch(_s(t)),Xs(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){V(this.getTarget(t),"Expected an existing target."),this.store.dispatch(Qs(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);V(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){V(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=nl(t);return this.types.set(a,r),t===ze.SOURCE?this.dragSources.set(a,n):t===ze.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const il=(e,t)=>e===t;function ol(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function sl(e,t,r=il){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function ll(e=Ot,t){switch(t.type){case cr:break;case tn:case rn:case pr:case nn:return Ot;case lr:case Zr:case ur:case dr:default:return en}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=ps(r,n);if(!(a.length>0||!sl(r,n)))return Ot;const o=n[n.length-1],s=r[r.length-1];return o!==s&&(o&&a.push(o),s&&a.push(s)),a}function cl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){cl(e,a,r[a])})}return e}const Zn={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ul(e=Zn,t){const{payload:r}=t;switch(t.type){case Qr:case lr:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case cr:return ol(e.clientOffset,r.clientOffset)?e:dl({},e,{clientOffset:r.clientOffset});case ur:case dr:return Zn;default:return e}}function pl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function st(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){pl(e,a,r[a])})}return e}const gl={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function fl(e=gl,t){const{payload:r}=t;switch(t.type){case lr:return st({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Zr:return st({},e,{isSourcePublic:!0});case cr:return st({},e,{targetIds:r.targetIds});case pr:return e.targetIds.indexOf(r.targetId)===-1?e:st({},e,{targetIds:us(e.targetIds,r.targetId)});case dr:return st({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case ur:return st({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function hl(e=0,t){switch(t.type){case tn:case rn:return e+1;case nn:case pr:return e-1;default:return e}}function vl(e=0){return e+1}function ml(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){ml(e,a,r[a])})}return e}function xl(e={},t){return{dirtyHandlerIds:ll(e.dirtyHandlerIds,{type:t.type,payload:bl({},t.payload,{prevTargetIds:ds(e,"dragOperation.targetIds",[])})}),dragOffset:ul(e.dragOffset,t),refCount:hl(e.refCount,t),dragOperation:fl(e.dragOperation,t),stateId:vl(e.stateId)}}function yl(e,t=void 0,r={},n=!1){const a=wl(n),i=new zs(a,new al(a)),o=new Bs(a,i),s=e(o,t,r);return o.receiveBackend(s),o}function wl(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return _r(xl,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function Dl(e,t){if(e==null)return{};var r=Cl(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cl(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let ea=0;const Kt=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Sl=x.memo(function(t){var{children:r}=t,n=Dl(t,["children"]);const[a,i]=Il(n);return x.useEffect(()=>{if(i){const o=_a();return++ea,()=>{--ea===0&&(o[Kt]=null)}}},[]),l.jsx(qa.Provider,{value:a,children:r})});function Il(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=Nl(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function Nl(e,t=_a(),r,n){const a=t;return a[Kt]||(a[Kt]={dragDropManager:yl(e,t,r,n)}),a[Kt]}function _a(){return typeof global<"u"?global:window}const at=typeof window<"u"?x.useLayoutEffect:x.useEffect;function El(e,t,r){const[n,a]=x.useState(()=>t(e)),i=x.useCallback(()=>{const o=t(e);Co(n,o)||(a(o),r&&r())},[n,e,r]);return at(i),[n,i]}function Pl(e,t,r){const[n,a]=El(e,t,r);return at(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function Qa(e,t,r){return Pl(t,e||(()=>({})),()=>r.reconnect())}function Za(e,t){const r=[];return typeof e!="function"&&r.push(e),x.useMemo(()=>typeof e=="function"?e():e,r)}function Tl(e){return x.useMemo(()=>e.hooks.dragSource(),[e])}function Ol(e){return x.useMemo(()=>e.hooks.dragPreview(),[e])}let wr=!1,Dr=!1;class jl{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){V(!wr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return wr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{wr=!1}}isDragging(){if(!this.sourceId)return!1;V(!Dr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Dr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Dr=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let Cr=!1;class Rl{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;V(!Cr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Cr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Cr=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function Ml(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function Al(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function zr(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let d=0;d<i.length;d++){const p=i[d];if(!s(p))return!1;const g=e[p],u=t[p];if(a=void 0,a===!1||a===void 0&&g!==u)return!1}return!0}function Gr(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function kl(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function Bl(e){return(t=null,r=null)=>{if(!x.isValidElement(t)){const i=t;return e(i,r),i}const n=t;return kl(n),Ll(n,r?i=>e(i,r):e)}}function ei(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=Bl(n);t[r]=()=>a}}),t}function ta(e,t){typeof e=="function"?e(t):e.current=t}function Ll(e,t){const r=e.ref;return V(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?x.cloneElement(e,{ref:n=>{ta(r,n),ta(t,n)}}):x.cloneElement(e,{ref:t})}class Fl{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!zr(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!zr(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=ei({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Gr(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Gr(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class $l{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!zr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=ei({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Gr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function gt(){const{dragDropManager:e}=x.useContext(qa);return V(e!=null,"Expected drag drop context"),e}function Hl(e,t){const r=gt(),n=x.useMemo(()=>new Fl(r.getBackend()),[r]);return at(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),at(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function zl(){const e=gt();return x.useMemo(()=>new jl(e),[e])}class Gl{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function Wl(e,t,r){const n=x.useMemo(()=>new Gl(e,t,r),[t,r]);return x.useEffect(()=>{n.spec=e},[e]),n}function ql(e){return x.useMemo(()=>{const t=e.type;return V(t!=null,"spec.type must be defined"),t},[e])}function Ul(e,t,r){const n=gt(),a=Wl(e,t,r),i=ql(e);at(function(){if(i!=null){const[s,d]=Al(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),d}},[n,t,r,a,i])}function ti(e,t){const r=Za(e);V(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=zl(),a=Hl(r.options,r.previewOptions);return Ul(r,n,a),[Qa(r.collect,n,a),Tl(a),Ol(a)]}function Vl(e){return x.useMemo(()=>e.hooks.dropTarget(),[e])}function Yl(e){const t=gt(),r=x.useMemo(()=>new $l(t.getBackend()),[t]);return at(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function Xl(){const e=gt();return x.useMemo(()=>new Rl(e),[e])}function Jl(e){const{accept:t}=e;return x.useMemo(()=>(V(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class Kl{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function _l(e,t){const r=x.useMemo(()=>new Kl(e,t),[t]);return x.useEffect(()=>{r.spec=e},[e]),r}function Ql(e,t,r){const n=gt(),a=_l(e,t),i=Jl(e);at(function(){const[s,d]=Ml(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),d},[n,t,a,r,i.map(o=>o.toString()).join("|")])}function Zl(e,t){const r=Za(e),n=Xl(),a=Yl(r.options);return Ql(r,n,a),[Qa(r.collect,n,a),Vl(a)]}const Wr=[{id:"none",name:"Sin máscara",class:"",category:"Básicas"},{id:"circle",name:"Círculo",class:"mask-circle",category:"Básicas"},{id:"rounded",name:"Redondeado",class:"mask-rounded",category:"Básicas"},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas"},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas"},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas"},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas"},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos"},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos"},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos"},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos"},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas"},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas"},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas"},{id:"rounded-sm",name:"Redondeado pequeño",class:"mask-rounded-sm",category:"Básicas"},{id:"rounded-lg",name:"Redondeado grande",class:"mask-rounded-lg",category:"Básicas"},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas"},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas"},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas"}];function ec({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,availableMasks:i=[],workspaceSize:o={width:800,height:600}}){var Oe,me,je,Re,Ee,Pe,ye,ue,ge,M,K,fe,pe,le,Te,be;const[{isDragging:s},d]=ti(()=>({type:"IMAGE_ELEMENT",item:{id:e.id},collect:I=>({isDragging:!!I.isDragging()})})),p=x.useRef(null),[g,u]=x.useState(!1),[c,f]=x.useState(null),[h,m]=x.useState(null),[v,y]=x.useState({mouseX:0,mouseY:0,elementX:0,elementY:0,elementWidth:0,elementHeight:0}),[w,S]=x.useState(!1),[E,k]=x.useState({x:0,y:0}),A={filter:`
            brightness(${(((Oe=e.filters)==null?void 0:Oe.brightness)||100)/100})
            contrast(${(((me=e.filters)==null?void 0:me.contrast)||100)/100})
            saturate(${(((je=e.filters)==null?void 0:je.saturation)||100)/100})
            sepia(${(((Re=e.filters)==null?void 0:Re.tint)||0)/100})
            hue-rotate(${(((Ee=e.filters)==null?void 0:Ee.hue)||0)*3.6}deg)
            blur(${((Pe=e.filters)==null?void 0:Pe.blur)||0}px)
        `,transform:`scale(${((ye=e.filters)==null?void 0:ye.scale)||1}) rotate(${((ue=e.filters)==null?void 0:ue.rotate)||0}deg) ${(ge=e.filters)!=null&&ge.flipHorizontal?"scaleX(-1)":""} ${(M=e.filters)!=null&&M.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((K=e.filters)==null?void 0:K.blendMode)||"normal",opacity:(((fe=e.filters)==null?void 0:fe.opacity)||100)/100},q=Wr.find(I=>I.id===e.mask)||Wr[0],U=x.useCallback((I,G)=>typeof I=="number"?I<=1?I*G:I:0,[]),R=x.useCallback((I,G)=>typeof I=="number"&&G>0?I>1?Math.min(I/G,1):I:0,[]),B={x:Math.max(0,U(((pe=e.position)==null?void 0:pe.x)||0,o.width)),y:Math.max(0,U(((le=e.position)==null?void 0:le.y)||0,o.height))},F={width:Math.max(50,(Te=e.size)!=null&&Te.width?U(e.size.width,o.width):200),height:Math.max(50,(be=e.size)!=null&&be.height?U(e.size.height,o.height):200)},te=x.useCallback(I=>{t&&(I.stopPropagation(),I.preventDefault(),u(!0),f("move"),y({mouseX:I.clientX,mouseY:I.clientY,elementX:B.x,elementY:B.y,elementWidth:F.width,elementHeight:F.height}))},[t,B,F]),P=x.useCallback((I,G)=>{t&&(I.stopPropagation(),I.preventDefault(),u(!0),f("resize"),m(G),y({mouseX:I.clientX,mouseY:I.clientY,elementX:B.x,elementY:B.y,elementWidth:F.width,elementHeight:F.height}))},[t,B,F]),J=x.useCallback(I=>{if(!g)return;const G=I.clientX-v.mouseX,Q=I.clientY-v.mouseY;if(c==="move"){const ee=Math.max(0,Math.min(o.width-F.width,v.elementX+G)),_=Math.max(0,Math.min(o.height-F.height,v.elementY+Q)),xe={position:{x:R(ee,o.width),y:R(_,o.height)}};n(xe)}else if(c==="resize"){let ee=v.elementWidth,_=v.elementHeight,xe=v.elementX,we=v.elementY;const ne=50,Ve=v.elementWidth/v.elementHeight;switch(h){case"nw":ee=Math.max(ne,v.elementWidth-G),_=Math.max(ne,v.elementHeight-Q),I.shiftKey&&(_=ee/Ve),xe=v.elementX+(v.elementWidth-ee),we=v.elementY+(v.elementHeight-_);break;case"n":_=Math.max(ne,v.elementHeight-Q),we=v.elementY+(v.elementHeight-_);break;case"ne":ee=Math.max(ne,v.elementWidth+G),_=Math.max(ne,v.elementHeight-Q),I.shiftKey&&(_=ee/Ve),we=v.elementY+(v.elementHeight-_);break;case"e":ee=Math.max(ne,v.elementWidth+G);break;case"se":ee=Math.max(ne,v.elementWidth+G),_=Math.max(ne,v.elementHeight+Q),I.shiftKey&&(_=ee/Ve);break;case"s":_=Math.max(ne,v.elementHeight+Q);break;case"sw":ee=Math.max(ne,v.elementWidth-G),_=Math.max(ne,v.elementHeight+Q),I.shiftKey&&(_=ee/Ve),xe=v.elementX+(v.elementWidth-ee);break;case"w":ee=Math.max(ne,v.elementWidth-G),xe=v.elementX+(v.elementWidth-ee);break}xe=Math.max(0,Math.min(o.width-ee,xe)),we=Math.max(0,Math.min(o.height-_,we)),ee=Math.min(ee,o.width-xe),_=Math.min(_,o.height-we);const Ze={position:{x:R(xe,o.width),y:R(we,o.height)},size:{width:R(ee,o.width),height:R(_,o.height)}};n(Ze)}},[g,c,v,h,o,F,n,R]),ie=x.useCallback(()=>{u(!1),f(null),m(null)},[]),j=x.useCallback(I=>{I.stopPropagation();const G={width:200,height:200};n({size:{width:R(G.width,o.width),height:R(G.height,o.height)}})},[n,R,o]),se=x.useCallback(I=>{if(!t)return;const G=I.shiftKey?10:1;let Q={};switch(I.key){case"ArrowLeft":I.preventDefault(),Q.position={x:Math.max(0,R(B.x-G,o.width)),y:R(B.y,o.height)};break;case"ArrowRight":I.preventDefault(),Q.position={x:Math.min(1,R(B.x+G,o.width)),y:R(B.y,o.height)};break;case"ArrowUp":I.preventDefault(),Q.position={x:R(B.x,o.width),y:Math.max(0,R(B.y-G,o.height))};break;case"ArrowDown":I.preventDefault(),Q.position={x:R(B.x,o.width),y:Math.min(1,R(B.y+G,o.height))};break;case"Delete":case"Backspace":I.preventDefault(),a();break;case"Escape":I.preventDefault(),r();break}Object.keys(Q).length>0&&n(Q)},[t,B,o,R,n,a,r]);x.useEffect(()=>{if(t)return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[t,se]),x.useEffect(()=>{if(g){const I=Q=>J(Q),G=()=>ie();return document.addEventListener("mousemove",I),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",G)}}},[g,J,ie]),x.useEffect(()=>{const I=G=>{w&&!G.target.closest(".context-menu")&&S(!1)};return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[w]);const ve=x.useCallback(I=>{p.current=I,d(I)},[d]),X=I=>{I.preventDefault(),I.stopPropagation(),k({x:I.clientX,y:I.clientY}),S(!0)},de=()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=G=>{if(G.target.files&&G.target.files[0]){const Q=new FileReader;Q.onload=ee=>{var _;(_=ee.target)!=null&&_.result&&n({content:ee.target.result})},Q.readAsDataURL(G.target.files[0])}},I.click(),S(!1)},Se=()=>{var G,Q;const I={...JSON.parse(JSON.stringify(e)),id:`img-${Date.now()}`,position:{x:Math.min(.9,(((G=e.position)==null?void 0:G.x)||0)+.05),y:Math.min(.9,(((Q=e.position)==null?void 0:Q.y)||0)+.05)}};n(I,!0),S(!1)},oe=()=>{if(g){if(c==="move")return"grabbing";if(c==="resize")return Ie(h)}return t?"grab":"pointer"},Ie=I=>({n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize",nw:"nw-resize"})[I]||"default";return l.jsxs("div",{ref:ve,className:`absolute ${q.class} ${t?"ring-2 ring-blue-500 ring-opacity-75":""} ${s?"opacity-50":"opacity-100"}`,style:{left:`${B.x}px`,top:`${B.y}px`,width:`${F.width}px`,height:`${F.height}px`,cursor:oe(),zIndex:t?1e3:e.zIndex||1,transition:g?"none":"all 0.1s ease-out",pointerEvents:"all",userSelect:"none",transformOrigin:"center"},onClick:I=>{I.stopPropagation(),r()},onMouseDown:te,onContextMenu:X,onDoubleClick:j,children:[l.jsxs("div",{className:"w-full h-full overflow-hidden relative bg-transparent",children:[l.jsx("img",{src:e.content,alt:"Imagen editada",className:"w-full h-full object-cover select-none",style:A,draggable:!1,onLoad:()=>{p.current&&(p.current.style.visibility="visible")}}),t&&!s&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-nw-resize",style:{top:-8,left:-8},onMouseDown:I=>P(I,"nw"),title:"Redimensionar desde esquina superior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-ne-resize",style:{top:-8,right:-8},onMouseDown:I=>P(I,"ne"),title:"Redimensionar desde esquina superior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-se-resize",style:{bottom:-8,right:-8},onMouseDown:I=>P(I,"se"),title:"Redimensionar desde esquina inferior derecha"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-sw-resize",style:{bottom:-8,left:-8},onMouseDown:I=>P(I,"sw"),title:"Redimensionar desde esquina inferior izquierda"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-n-resize",style:{top:-8,left:"calc(50% - 8px)"},onMouseDown:I=>P(I,"n"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-e-resize",style:{right:-8,top:"calc(50% - 8px)"},onMouseDown:I=>P(I,"e"),title:"Redimensionar horizontalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-s-resize",style:{bottom:-8,left:"calc(50% - 8px)"},onMouseDown:I=>P(I,"s"),title:"Redimensionar verticalmente"}),l.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 border-2 border-white rounded-full shadow-md hover:bg-blue-600 transition-colors cursor-w-resize",style:{left:-8,top:"calc(50% - 8px)"},onMouseDown:I=>P(I,"w"),title:"Redimensionar horizontalmente"}),g&&l.jsx("div",{className:"absolute -inset-2 border-2 border-blue-300 border-dashed rounded animate-pulse"})]})]}),t&&!g&&l.jsxs("div",{className:"absolute -top-12 right-0 flex gap-1 bg-white rounded-lg shadow-lg px-2 py-1",children:[l.jsx("button",{className:"bg-white rounded-md p-1.5 shadow-sm hover:bg-gray-100 transition-colors",onClick:I=>{var G;I.stopPropagation(),n({filters:{...e.filters,rotate:(((G=e.filters)==null?void 0:G.rotate)||0)+90}})},title:"Rotar 90°",children:l.jsx(Wa,{className:"h-4 w-4 text-gray-700"})}),l.jsx("button",{className:"bg-white rounded-md p-1.5 shadow-sm hover:bg-red-100 transition-colors",onClick:I=>{I.stopPropagation(),a()},title:"Eliminar imagen",children:l.jsx(ct,{className:"h-4 w-4 text-red-600"})})]}),w&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>S(!1)}),l.jsxs("div",{className:"fixed bg-white shadow-xl rounded-lg z-50 py-2 w-56 context-menu border border-gray-200",style:{left:`${Math.min(E.x,window.innerWidth-240)}px`,top:`${Math.min(E.y,window.innerHeight-200)}px`},onClick:I=>I.stopPropagation(),children:[l.jsx("button",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 text-gray-500 z-10",onClick:()=>S(!1),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsx("div",{className:"px-3 py-2 border-b border-gray-100",children:l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Opciones de imagen"})}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-3 text-sm text-gray-700 hover:text-blue-700 transition-colors",onClick:de,children:[l.jsx(Jo,{className:"h-4 w-4"}),"Reemplazar imagen"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-green-50 flex items-center gap-3 text-sm text-gray-700 hover:text-green-700 transition-colors",onClick:Se,children:[l.jsx(Zt,{className:"h-4 w-4"}),"Duplicar elemento"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-yellow-50 flex items-center gap-3 text-sm text-gray-700 hover:text-yellow-700 transition-colors",onClick:()=>{var I;n({filters:{...e.filters,opacity:Math.max(0,(((I=e.filters)==null?void 0:I.opacity)||100)-20)}}),S(!1)},children:[l.jsx(za,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-purple-50 flex items-center gap-3 text-sm text-gray-700 hover:text-purple-700 transition-colors",onClick:()=>{var I;n({filters:{...e.filters,scale:Math.max(.1,(((I=e.filters)==null?void 0:I.scale)||1)-.1)}}),S(!1)},children:[l.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})}),"Reducir escala"]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-red-50 flex items-center gap-3 text-sm text-gray-700 hover:text-red-700 transition-colors",onClick:()=>{a(),S(!1)},children:[l.jsx(ct,{className:"h-4 w-4"}),"Eliminar imagen"]})]})]}),!1]})}function tc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,workspaceSize:i={width:800,height:600}}){var j,se,ve,X,de,Se,oe,Ie,Oe,me,je,Re,Ee,Pe,ye,ue,ge;const[o,s]=x.useState(!1),d=x.useRef(null),p=x.useRef(null),[{isDragging:g},u]=ti(()=>({type:"TEXT_ELEMENT",item:{id:e.id},collect:M=>({isDragging:!!M.isDragging()})})),[c,f]=x.useState(!1),[h,m]=x.useState({x:0,y:0}),[v,y]=x.useState(!1),[w,S]=x.useState({x:0,y:0}),E=()=>{s(!1)},k=M=>{n({content:M.target.value})},A=M=>{M.key==="Enter"&&s(!1)},q=M=>{if(t&&!o){M.stopPropagation(),f(!0);const K=M.currentTarget.parentElement.getBoundingClientRect(),fe=e.position.x<=1?e.position.x*K.width:e.position.x,pe=e.position.y<=1?e.position.y*K.height:e.position.y;m({x:M.clientX-fe,y:M.clientY-pe})}},U=M=>{if(c&&p.current){const K=p.current.parentElement.getBoundingClientRect(),fe=M.clientX-h.x,pe=M.clientY-h.y,le=K.width-p.current.offsetWidth,Te=K.height-p.current.offsetHeight,be=Math.max(0,Math.min(fe,le)),I=Math.max(0,Math.min(pe,Te)),G=be/K.width,Q=I/K.height;n({position:{x:G,y:Q}})}},R=()=>{f(!1)},B=M=>{M.preventDefault(),M.stopPropagation(),S({x:M.clientX,y:M.clientY}),y(!0)},F=()=>{const M={...JSON.parse(JSON.stringify(e)),id:`text-${Date.now()}`,position:{x:e.position.x<=1?Math.min(e.position.x+.02,.9):e.position.x+10,y:e.position.y<=1?Math.min(e.position.y+.02,.9):e.position.y+10}};n(M,!0),y(!1)};x.useEffect(()=>(c&&(window.addEventListener("mousemove",U),window.addEventListener("mouseup",R)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",R)}),[c,h]);const te=x.useCallback(M=>{p.current=M,u(M)},[u]),P=(j=e.style)!=null&&j.textShadow?`${e.style.textShadowX||0}px ${e.style.textShadowY||0}px ${e.style.textShadowBlur||0}px ${e.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",ie=(()=>{var K,fe,pe,le,Te,be,I,G,Q,ee,_,xe;const M={...e.style,position:"absolute",cursor:t&&!o?"move":"pointer",textShadow:P,zIndex:10,fontFamily:((K=e.style)==null?void 0:K.fontFamily)||"Arial",color:((fe=e.style)==null?void 0:fe.color)||"#000000",fontWeight:((pe=e.style)==null?void 0:pe.fontWeight)||"normal",fontStyle:((le=e.style)==null?void 0:le.fontStyle)||"normal",textDecoration:((Te=e.style)==null?void 0:Te.textDecoration)||"none",textAlign:((be=e.style)==null?void 0:be.textAlign)||"left",backgroundColor:((I=e.style)==null?void 0:I.backgroundColor)||"transparent",padding:((G=e.style)==null?void 0:G.padding)||"8px",borderRadius:((Q=e.style)==null?void 0:Q.borderRadius)||"0px",border:((ee=e.style)==null?void 0:ee.border)||"none",opacity:((_=e.style)==null?void 0:_.opacity)!==void 0?e.style.opacity:1};if(e.position.x<=1&&e.position.y<=1?(M.left=`${e.position.x*100}%`,M.top=`${e.position.y*100}%`):(M.left=`${e.position.x}px`,M.top=`${e.position.y}px`),(xe=e.style)!=null&&xe.fontSize){const we=parseFloat(e.style.fontSize);if(we&&i.width){const ne=we/800*i.width;M.fontSize=`${Math.max(12,ne)}px`}else M.fontSize=e.style.fontSize}else{const we=.02*i.width;M.fontSize=`${Math.max(12,we)}px`}return M})();return x.useEffect(()=>{var K,fe;const M=(fe=(K=e.style)==null?void 0:K.fontFamily)==null?void 0:fe.replace(/'/g,"");if(M&&!document.fonts.check(`12px ${M}`)){const pe=new FontFace(M,`local(${M})`);pe.load().then(()=>document.fonts.add(pe))}},[(se=e.style)==null?void 0:se.fontFamily]),l.jsxs("div",{ref:te,className:`${t?"ring-2 ring-purple-500":""} ${g?"opacity-50":"opacity-100"}`,style:ie,onClick:M=>{M.stopPropagation(),r(),!o&&t&&(s(!0),setTimeout(()=>{d.current&&(d.current.focus(),d.current.select())},0))},onMouseDown:q,onContextMenu:B,children:[o?l.jsx("input",{ref:d,type:"text",value:e.content,onChange:k,onBlur:E,onKeyDown:A,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(ve=e.style)==null?void 0:ve.fontFamily,fontSize:(X=e.style)==null?void 0:X.fontSize,fontWeight:(de=e.style)==null?void 0:de.fontWeight,fontStyle:(Se=e.style)==null?void 0:Se.fontStyle,textDecoration:(oe=e.style)==null?void 0:oe.textDecoration,color:(Ie=e.style)==null?void 0:Ie.color,textAlign:(Oe=e.style)==null?void 0:Oe.textAlign,minWidth:"100px"},autoFocus:!0}):l.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((me=e.style)==null?void 0:me.backgroundColor)||"transparent",padding:((je=e.style)==null?void 0:je.padding)||"8px",borderRadius:((Re=e.style)==null?void 0:Re.borderRadius)||"0px",border:((Ee=e.style)==null?void 0:Ee.border)||"none",fontFamily:((Pe=e.style)==null?void 0:Pe.fontFamily)||"Arial"},children:e.content||"Editar texto"}),t&&l.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:M=>{var K;M.stopPropagation(),n({style:{...e.style,fontWeight:((K=e.style)==null?void 0:K.fontWeight)==="bold"?"normal":"bold"}})},children:l.jsx("span",{className:`text-xs ${((ye=e.style)==null?void 0:ye.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:M=>{var K;M.stopPropagation(),n({style:{...e.style,fontStyle:((K=e.style)==null?void 0:K.fontStyle)==="italic"?"normal":"italic"}})},children:l.jsx("span",{className:`text-xs ${((ue=e.style)==null?void 0:ue.fontStyle)==="italic"?"italic":""}`,children:"I"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:M=>{var K;M.stopPropagation(),n({style:{...e.style,textDecoration:((K=e.style)==null?void 0:K.textDecoration)==="underline"?"none":"underline"}})},children:l.jsx("span",{className:`text-xs ${((ge=e.style)==null?void 0:ge.textDecoration)==="underline"?"underline":""}`,children:"U"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:M=>{M.stopPropagation(),a()},children:l.jsx(ct,{className:"h-3 w-3 text-gray-700"})})]}),v&&l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${w.x}px`,top:`${w.y}px`},onClick:M=>M.stopPropagation(),children:[l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{s(!0),y(!1)},children:[l.jsx(nt,{className:"h-4 w-4"}),"Editar texto"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:F,children:[l.jsx(Zt,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var M;n({style:{...e.style,opacity:Math.max(0,(((M=e.style)==null?void 0:M.opacity)||1)-.1)}}),y(!1)},children:[l.jsx(za,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),y(!1)},children:[l.jsx(ct,{className:"h-4 w-4"}),"Eliminar"]})]})]})}function ri(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mo(e,t)}var ni=ae.createContext(null);function rc(e){e()}var ai=rc,nc=function(t){return ai=t},ac=function(){return ai};function ic(){var e=ac(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var ra={notify:function(){},get:function(){return[]}};function ii(e,t){var r,n=ra;function a(u){return d(),n.subscribe(u)}function i(){n.notify()}function o(){g.onStateChange&&g.onStateChange()}function s(){return!!r}function d(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=ic())}function p(){r&&(r(),r=void 0,n.clear(),n=ra)}var g={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:s,trySubscribe:d,tryUnsubscribe:p,getListeners:function(){return n}};return g}var oi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect;function oc(e){var t=e.store,r=e.context,n=e.children,a=x.useMemo(function(){var s=ii(t);return{store:t,subscription:s}},[t]),i=x.useMemo(function(){return t.getState()},[t]);oi(function(){var s=a.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),i!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[a,i]);var o=r||ni;return ae.createElement(o.Provider,{value:a},n)}var Sr={exports:{}},re={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na;function sc(){if(na)return re;na=1;var e=60103,t=60106,r=60107,n=60108,a=60114,i=60109,o=60110,s=60112,d=60113,p=60120,g=60115,u=60116,c=60121,f=60122,h=60117,m=60129,v=60131;if(typeof Symbol=="function"&&Symbol.for){var y=Symbol.for;e=y("react.element"),t=y("react.portal"),r=y("react.fragment"),n=y("react.strict_mode"),a=y("react.profiler"),i=y("react.provider"),o=y("react.context"),s=y("react.forward_ref"),d=y("react.suspense"),p=y("react.suspense_list"),g=y("react.memo"),u=y("react.lazy"),c=y("react.block"),f=y("react.server.block"),h=y("react.fundamental"),m=y("react.debug_trace_mode"),v=y("react.legacy_hidden")}function w(P){if(typeof P=="object"&&P!==null){var J=P.$$typeof;switch(J){case e:switch(P=P.type,P){case r:case a:case n:case d:case p:return P;default:switch(P=P&&P.$$typeof,P){case o:case s:case u:case g:case i:return P;default:return J}}case t:return J}}}var S=i,E=e,k=s,A=r,q=u,U=g,R=t,B=a,F=n,te=d;return re.ContextConsumer=o,re.ContextProvider=S,re.Element=E,re.ForwardRef=k,re.Fragment=A,re.Lazy=q,re.Memo=U,re.Portal=R,re.Profiler=B,re.StrictMode=F,re.Suspense=te,re.isAsyncMode=function(){return!1},re.isConcurrentMode=function(){return!1},re.isContextConsumer=function(P){return w(P)===o},re.isContextProvider=function(P){return w(P)===i},re.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},re.isForwardRef=function(P){return w(P)===s},re.isFragment=function(P){return w(P)===r},re.isLazy=function(P){return w(P)===u},re.isMemo=function(P){return w(P)===g},re.isPortal=function(P){return w(P)===t},re.isProfiler=function(P){return w(P)===a},re.isStrictMode=function(P){return w(P)===n},re.isSuspense=function(P){return w(P)===d},re.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===a||P===m||P===n||P===d||P===p||P===v||typeof P=="object"&&P!==null&&(P.$$typeof===u||P.$$typeof===g||P.$$typeof===i||P.$$typeof===o||P.$$typeof===s||P.$$typeof===h||P.$$typeof===c||P[0]===f)},re.typeOf=w,re}var aa;function lc(){return aa||(aa=1,Sr.exports=sc()),Sr.exports}var cc=lc(),dc=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],uc=["reactReduxForwardedRef"],pc=[],gc=[null,null];function fc(e,t){var r=e[1];return[t.payload,r+1]}function ia(e,t,r){oi(function(){return e.apply(void 0,t)},r)}function hc(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function vc(e,t,r,n,a,i,o,s,d,p){if(e){var g=!1,u=null,c=function(){if(!g){var m=t.getState(),v,y;try{v=n(m,a.current)}catch(w){y=w,u=w}y||(u=null),v===i.current?o.current||d():(i.current=v,s.current=v,o.current=!0,p({type:"STORE_UPDATED",payload:{error:y}}))}};r.onStateChange=c,r.trySubscribe(),c();var f=function(){if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return f}}var mc=function(){return[null,0]};function bc(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(S){return"ConnectAdvanced("+S+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,s=r.renderCountProp,d=s===void 0?void 0:s,p=r.shouldHandleStateChanges,g=p===void 0?!0:p,u=r.storeKey,c=u===void 0?"store":u;r.withRef;var f=r.forwardRef,h=f===void 0?!1:f,m=r.context,v=m===void 0?ni:m,y=Qt(r,dc),w=v;return function(E){var k=E.displayName||E.name||"Component",A=a(k),q=z({},y,{getDisplayName:a,methodName:o,renderCountProp:d,shouldHandleStateChanges:g,storeKey:c,displayName:A,wrappedComponentName:k,WrappedComponent:E}),U=y.pure;function R(J){return e(J.dispatch,q)}var B=U?x.useMemo:function(J){return J()};function F(J){var ie=x.useMemo(function(){var be=J.reactReduxForwardedRef,I=Qt(J,uc);return[J.context,be,I]},[J]),j=ie[0],se=ie[1],ve=ie[2],X=x.useMemo(function(){return j&&j.Consumer&&cc.isContextConsumer(ae.createElement(j.Consumer,null))?j:w},[j,w]),de=x.useContext(X),Se=!!J.store&&!!J.store.getState&&!!J.store.dispatch;de&&de.store;var oe=Se?J.store:de.store,Ie=x.useMemo(function(){return R(oe)},[oe]),Oe=x.useMemo(function(){if(!g)return gc;var be=ii(oe,Se?null:de.subscription),I=be.notifyNestedSubs.bind(be);return[be,I]},[oe,Se,de]),me=Oe[0],je=Oe[1],Re=x.useMemo(function(){return Se?de:z({},de,{subscription:me})},[Se,de,me]),Ee=x.useReducer(fc,pc,mc),Pe=Ee[0],ye=Pe[0],ue=Ee[1];if(ye&&ye.error)throw ye.error;var ge=x.useRef(),M=x.useRef(ve),K=x.useRef(),fe=x.useRef(!1),pe=B(function(){return K.current&&ve===M.current?K.current:Ie(oe.getState(),ve)},[oe,ye,ve]);ia(hc,[M,ge,fe,ve,pe,K,je]),ia(vc,[g,oe,me,Ie,M,ge,fe,K,je,ue],[oe,me,Ie]);var le=x.useMemo(function(){return ae.createElement(E,z({},pe,{ref:se}))},[se,E,pe]),Te=x.useMemo(function(){return g?ae.createElement(X.Provider,{value:Re},le):le},[X,le,Re]);return Te}var te=U?ae.memo(F):F;if(te.WrappedComponent=E,te.displayName=F.displayName=A,h){var P=ae.forwardRef(function(ie,j){return ae.createElement(te,z({},ie,{reactReduxForwardedRef:j}))});return P.displayName=A,P.WrappedComponent=E,$n(P,E)}return $n(te,E)}}function oa(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ir(e,t){if(oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!oa(e[r[a]],t[r[a]]))return!1;return!0}function xc(e,t){var r={},n=function(o){var s=e[o];typeof s=="function"&&(r[o]=function(){return t(s.apply(void 0,arguments))})};for(var a in e)n(a);return r}function an(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function sa(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function si(e,t){return function(n,a){a.displayName;var i=function(s,d){return i.dependsOnOwnProps?i.mapToProps(s,d):i.mapToProps(s)};return i.dependsOnOwnProps=!0,i.mapToProps=function(s,d){i.mapToProps=e,i.dependsOnOwnProps=sa(e);var p=i(s,d);return typeof p=="function"&&(i.mapToProps=p,i.dependsOnOwnProps=sa(p),p=i(s,d)),p},i}}function yc(e){return typeof e=="function"?si(e):void 0}function wc(e){return e?void 0:an(function(t){return{dispatch:t}})}function Dc(e){return e&&typeof e=="object"?an(function(t){return xc(e,t)}):void 0}const Cc=[yc,wc,Dc];function Sc(e){return typeof e=="function"?si(e):void 0}function Ic(e){return e?void 0:an(function(){return{}})}const Nc=[Sc,Ic];function Ec(e,t,r){return z({},r,e,t)}function Pc(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,s;return function(p,g,u){var c=e(p,g,u);return o?(!a||!i(c,s))&&(s=c):(o=!0,s=c),s}}}function Tc(e){return typeof e=="function"?Pc(e):void 0}function Oc(e){return e?void 0:function(){return Ec}}const jc=[Tc,Oc];var Rc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Mc(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function Ac(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,s=a.areStatePropsEqual,d=!1,p,g,u,c,f;function h(S,E){return p=S,g=E,u=e(p,g),c=t(n,g),f=r(u,c,g),d=!0,f}function m(){return u=e(p,g),t.dependsOnOwnProps&&(c=t(n,g)),f=r(u,c,g),f}function v(){return e.dependsOnOwnProps&&(u=e(p,g)),t.dependsOnOwnProps&&(c=t(n,g)),f=r(u,c,g),f}function y(){var S=e(p,g),E=!s(S,u);return u=S,E&&(f=r(u,c,g)),f}function w(S,E){var k=!o(E,g),A=!i(S,p,E,g);return p=S,g=E,k&&A?m():k?v():A?y():f}return function(E,k){return d?w(E,k):h(E,k)}}function kc(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=Qt(t,Rc),o=r(e,i),s=n(e,i),d=a(e,i),p=i.pure?Ac:Mc;return p(o,s,d,e,i)}var Bc=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Nr(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Lc(e,t){return e===t}function Fc(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?bc:r,a=t.mapStateToPropsFactories,i=a===void 0?Nc:a,o=t.mapDispatchToPropsFactories,s=o===void 0?Cc:o,d=t.mergePropsFactories,p=d===void 0?jc:d,g=t.selectorFactory,u=g===void 0?kc:g;return function(f,h,m,v){v===void 0&&(v={});var y=v,w=y.pure,S=w===void 0?!0:w,E=y.areStatesEqual,k=E===void 0?Lc:E,A=y.areOwnPropsEqual,q=A===void 0?Ir:A,U=y.areStatePropsEqual,R=U===void 0?Ir:U,B=y.areMergedPropsEqual,F=B===void 0?Ir:B,te=Qt(y,Bc),P=Nr(f,i,"mapStateToProps"),J=Nr(h,s,"mapDispatchToProps"),ie=Nr(m,p,"mergeProps");return n(u,z({methodName:"connect",getDisplayName:function(se){return"Connect("+se+")"},shouldHandleStateChanges:!!f,initMapStateToProps:P,initMapDispatchToProps:J,initMergeProps:ie,pure:S,areStatesEqual:k,areOwnPropsEqual:q,areStatePropsEqual:R,areMergedPropsEqual:F},te))}}const li=Fc();nc(bo.unstable_batchedUpdates);function $c(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function ci(e,t){var r=x.useState(function(){return{inputs:t,result:e()}})[0],n=x.useRef(!0),a=x.useRef(r),i=n.current||!!(t&&a.current.inputs&&$c(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return x.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function Hc(e,t){return ci(function(){return e},t)}var Z=ci,L=Hc,zc="Invariant failed";function Gc(e,t){throw new Error(zc)}var Ue=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,s=a-r,d={top:r,right:n,bottom:a,left:i,width:o,height:s,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return d},on=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},la=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Wc=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Er={top:0,right:0,bottom:0,left:0},sn=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?Er:n,i=t.border,o=i===void 0?Er:i,s=t.padding,d=s===void 0?Er:s,p=Ue(on(r,a)),g=Ue(la(r,o)),u=Ue(la(g,d));return{marginBox:p,borderBox:Ue(r),paddingBox:g,contentBox:u,margin:a,border:o,padding:d}},$e=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&Gc(),a},qc=function(){return{x:window.pageXOffset,y:window.pageYOffset}},er=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,s=Wc(n,r);return sn({borderBox:s,border:a,margin:i,padding:o})},tr=function(t,r){return r===void 0&&(r=qc()),er(t,r)},di=function(t,r){var n={top:$e(r.marginTop),right:$e(r.marginRight),bottom:$e(r.marginBottom),left:$e(r.marginLeft)},a={top:$e(r.paddingTop),right:$e(r.paddingRight),bottom:$e(r.paddingBottom),left:$e(r.paddingLeft)},i={top:$e(r.borderTopWidth),right:$e(r.borderRightWidth),bottom:$e(r.borderBottomWidth),left:$e(r.borderLeftWidth)};return sn({borderBox:t,margin:n,padding:a,border:i})},ui=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return di(r,n)},ca=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Uc(e,t){return!!(e===t||ca(e)&&ca(t))}function Vc(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Uc(e[r],t[r]))return!1;return!0}function De(e,t){t===void 0&&(t=Vc);var r,n=[],a,i=!1;function o(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];return i&&r===this&&t(s,n)||(a=e.apply(this,s),i=!0,r=this,n=s),a}return o}var Mt=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,s=new Array(o),d=0;d<o;d++)s[d]=arguments[d];r=s,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function pi(e,t){}pi.bind(null,"warn");pi.bind(null,"error");function Xe(){}function Yc(e,t){return z({},e,{},t)}function Ge(e,t,r){var n=t.map(function(a){var i=Yc(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var Xc="Invariant failed";function rr(e){this.message=e}rr.prototype.toString=function(){return this.message};function T(e,t){throw new rr(Xc)}var Jc=function(e){ri(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Xe,n.onWindowError=function(s){var d=n.getCallbacks();d.isDragging()&&d.tryAbort();var p=s.error;p instanceof rr&&s.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(s){n.callbacks=s},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Ge(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof rr){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ae.Component),Kc=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,nr=function(t){return t+1},_c=function(t){return`
  You have lifted an item in position `+nr(t.source.index)+`
`},gi=function(t,r){var n=t.droppableId===r.droppableId,a=nr(t.index),i=nr(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},fi=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},Qc=function(t){var r=t.destination;if(r)return gi(t.source,r);var n=t.combine;return n?fi(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},da=function(t){return`
  The item has returned to its starting position
  of `+nr(t.index)+`
`},Zc=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+da(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+gi(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+fi(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+da(t.source)+`
  `},_t={dragHandleUsageInstructions:Kc,onDragStart:_c,onDragUpdate:Qc,onDragEnd:Zc},Ce={x:0,y:0},Ne=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},Be=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Je=function(t,r){return t.x===r.x&&t.y===r.y},ft=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},it=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},At=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},ua=function(t,r){return Math.min.apply(Math,r.map(function(n){return At(t,n)}))},hi=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},ed=function(e,t){var r=Ue({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Ft=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},pa=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},td={top:0,right:0,bottom:0,left:0},rd=function(t,r){return r?Ft(t,r.scroll.diff.displacement):t},nd=function(t,r,n){if(n&&n.increasedBy){var a;return z({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},ad=function(t,r){return r&&r.shouldClipSubject?ed(r.pageMarginBox,t):Ue(t)},dt=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=rd(t.marginBox,a),o=nd(i,n,r),s=ad(o,a);return{page:t,withPlaceholder:r,active:s}},ln=function(e,t){e.frame||T();var r=e.frame,n=Be(t,r.scroll.initial),a=ft(n),i=z({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=dt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),s=z({},e,{frame:i,subject:o});return s};function ar(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function cn(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Qe(e,t){if(e.find)return e.find(t);var r=cn(e,t);if(r!==-1)return e[r]}function vi(e){return Array.prototype.slice.call(e)}var mi=De(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),bi=De(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),gr=De(function(e){return ar(e)}),id=De(function(e){return ar(e)}),ht=De(function(e,t){var r=id(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function dn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function fr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var hr=De(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),od=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=dn(i);if(!o)return null;function s(m){var v={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return z({},i,{at:v})}var d=i.displaced.all,p=d.length?d[0]:null;if(t)return p?s(p):null;var g=hr(r,a);if(!p){if(!g.length)return null;var u=g[g.length-1];return s(u.descriptor.id)}var c=cn(g,function(m){return m.descriptor.id===p});c===-1&&T();var f=c-1;if(f<0)return null;var h=g[f];return s(h.descriptor.id)},vt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},xi={point:Ce,value:0},kt={invisible:{},visible:{},all:[]},sd={displaced:kt,displacedBy:xi,at:null},We=function(e,t){return function(r){return e<=r&&r<=t}},yi=function(e){var t=We(e.top,e.bottom),r=We(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),s=i&&o;if(s)return!0;var d=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,g=d&&p;if(g)return!0;var u=d&&o||p&&i;return u}},ld=function(e){var t=We(e.top,e.bottom),r=We(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},un={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},wi={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},cd=function(e){return function(t){var r=We(t.top,t.bottom),n=We(t.left,t.right);return function(a){return e===un?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},dd=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:Ce;return Ft(t,n)},ud=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},pd=function(t,r,n){return n(r)(t)},pn=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,s=i?dd(r,n):r;return ud(s,n,o)&&pd(s,a,o)},gd=function(t){return pn(z({},t,{isVisibleThroughFrameFn:yi}))},Di=function(t){return pn(z({},t,{isVisibleThroughFrameFn:ld}))},fd=function(t){return pn(z({},t,{isVisibleThroughFrameFn:cd(t.destination.axis)}))},hd=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function vd(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ue(on(r,n))}function Bt(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(d,p){var g=vd(p,n),u=p.descriptor.id;d.all.push(u);var c=gd({target:g,destination:r,viewport:a,withDroppableDisplacement:!0});if(!c)return d.invisible[p.descriptor.id]=!0,d;var f=hd(u,o,i),h={draggableId:u,shouldAnimate:f};return d.visible[u]=h,d},{all:[],visible:{},invisible:{}})}function md(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function ga(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=md(t,{inHomeList:r});return{displaced:kt,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function ir(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,d=e.forceShouldAnimate,p=vt(t,n);if(s==null)return ga({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var g=Qe(r,function(m){return m.descriptor.index===s});if(!g)return ga({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var u=hr(t,r),c=r.indexOf(g),f=u.slice(c),h=Bt({afterDragging:f,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:d});return{displaced:h,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function _e(e,t){return!!t.effected[e]}var bd=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,s=n[o],d=s.descriptor.index,p=_e(o,i);return p?t?d:d-1:t?d+1:d},xd=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,s=n[0].descriptor.index,d=n[n.length-1].descriptor.index,p=r?d:d+1;return o<s||o>p?null:o},yd=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,d=e.viewport,p=e.afterCritical,g=s.at;if(g||T(),g.type==="REORDER"){var u=xd({isMovingForward:t,isInHomeList:r,location:g.destination,insideDestination:o});return u==null?null:ir({draggable:n,insideDestination:o,destination:i,viewport:d,last:s.displaced,displacedBy:s.displacedBy,index:u})}var c=bd({isMovingForward:t,destination:i,displaced:s.displaced,draggables:a,combine:g.combine,afterCritical:p});return c==null?null:ir({draggable:n,insideDestination:o,destination:i,viewport:d,last:s.displaced,displacedBy:s.displacedBy,index:c})},wd=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return _e(n,r)?i?Ce:ft(a.point):i?a.point:Ce},Dd=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=fr(r);a||T();var i=a.draggableId,o=n[i].page.borderBox.center,s=wd({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Ne(o,s)},Ci=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},Cd=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},gn=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},fa=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return it(r.line,n.marginBox[r.end]+Ci(r,a),gn(r,n.marginBox,a))},ha=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return it(r.line,n.marginBox[r.start]-Cd(r,a),gn(r,n.marginBox,a))},Sd=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return it(r.line,n.contentBox[r.start]+Ci(r,a),gn(r,n.contentBox,a))},Id=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=ht(a.descriptor.id,n),s=r.page,d=a.axis;if(!o.length)return Sd({axis:d,moveInto:a.page,isMoving:s});var p=t.displaced,g=t.displacedBy,u=p.all[0];if(u){var c=n[u];if(_e(u,i))return ha({axis:d,moveRelativeTo:c.page,isMoving:s});var f=er(c.page,g.point);return ha({axis:d,moveRelativeTo:f,isMoving:s})}var h=o[o.length-1];if(h.descriptor.id===r.descriptor.id)return s.borderBox.center;if(_e(h.descriptor.id,i)){var m=er(h.page,ft(i.displacedBy.point));return fa({axis:d,moveRelativeTo:m,isMoving:s})}return fa({axis:d,moveRelativeTo:h.page,isMoving:s})},qr=function(e,t){var r=e.frame;return r?Ne(t,r.scroll.diff.displacement):t},Nd=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,s=n.page.borderBox.center,d=r.at;return!a||!d?s:d.type==="REORDER"?Id({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):Dd({impact:r,draggables:i,afterCritical:o})},vr=function(e){var t=Nd(e),r=e.droppable,n=r?qr(r,t):t;return n},Si=function(e,t){var r=Be(t,e.scroll.initial),n=ft(r),a=Ue({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function va(e,t){return e.map(function(r){return t[r]})}function Ed(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var Pd=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=Si(r,Ne(r.scroll.current,i)),s=n.frame?ln(n,Ne(n.frame.scroll.current,i)):n,d=t.displaced,p=Bt({afterDragging:va(d.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:d,forceShouldAnimate:!1}),g=Bt({afterDragging:va(d.all,a),destination:s,displacedBy:t.displacedBy,viewport:r.frame,last:d,forceShouldAnimate:!1}),u={},c={},f=[d,p,g];d.all.forEach(function(m){var v=Ed(m,f);if(v){c[m]=v;return}u[m]=!0});var h=z({},t,{displaced:{all:d.all,invisible:u,visible:c}});return h},Td=function(e,t){return Ne(e.scroll.diff.displacement,t)},fn=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=Td(n,t),i=Be(a,r.page.borderBox.center);return Ne(r.client.borderBox.center,i)},Ii=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,d=Be(n,t.page.borderBox.center),p=Ft(t.page.borderBox,d),g={target:p,destination:r,withDroppableDisplacement:i,viewport:a};return s?fd(g):Di(g)},Od=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,d=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var g=ht(n.descriptor.id,a),u=vt(r,n),c=od({isMovingForward:t,draggable:r,destination:n,insideDestination:g,previousImpact:i})||yd({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:n,insideDestination:g,previousImpact:i,viewport:o,afterCritical:p});if(!c)return null;var f=vr({impact:c,draggable:r,droppable:n,draggables:a,afterCritical:p}),h=Ii({draggable:r,destination:n,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(h){var m=fn({pageBorderBoxCenter:f,draggable:r,viewport:o});return{clientSelection:m,impact:c,scrollJumpRequest:null}}var v=Be(f,s),y=Pd({impact:c,viewport:o,destination:n,draggables:a,maxScrollChange:v});return{clientSelection:d,impact:y,scrollJumpRequest:v}},Me=function(t){var r=t.subject.active;return r||T(),r},jd=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var s=n.axis,d=We(o[s.start],o[s.end]),p=gr(a).filter(function(u){return u!==n}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return yi(i.frame)(Me(u))}).filter(function(u){var c=Me(u);return t?o[s.crossAxisEnd]<c[s.crossAxisEnd]:c[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(u){var c=Me(u),f=We(c[s.start],c[s.end]);return d(c[s.start])||d(c[s.end])||f(o[s.start])||f(o[s.end])}).sort(function(u,c){var f=Me(u)[s.crossAxisStart],h=Me(c)[s.crossAxisStart];return t?f-h:h-f}).filter(function(u,c,f){return Me(u)[s.crossAxisStart]===Me(f[0])[s.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var g=p.filter(function(u){var c=We(Me(u)[s.start],Me(u)[s.end]);return c(r[s.line])});return g.length===1?g[0]:g.length>1?g.sort(function(u,c){return Me(u)[s.start]-Me(c)[s.start]})[0]:p.sort(function(u,c){var f=ua(r,pa(Me(u))),h=ua(r,pa(Me(c)));return f!==h?f-h:Me(u)[s.start]-Me(c)[s.start]})[0]},ma=function(t,r){var n=t.page.borderBox.center;return _e(t.descriptor.id,r)?Be(n,r.displacedBy.point):n},Rd=function(t,r){var n=t.page.borderBox;return _e(t.descriptor.id,r)?Ft(n,ft(r.displacedBy.point)):n},Md=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(s){return Di({target:Rd(s,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(s,d){var p=At(t,qr(n,ma(s,i))),g=At(t,qr(n,ma(d,i)));return p<g?-1:g<p?1:s.descriptor.index-d.descriptor.index});return o[0]||null},$t=De(function(t,r){var n=r[t.line];return{value:n,point:it(t.line,n)}}),Ad=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return it(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=ht(t.descriptor.id,n),s=o.reduce(function(g,u){return g+u.client.marginBox[a.size]},0),d=s+r[a.line],p=d-i;return p<=0?null:it(a.line,p)},Ni=function(t,r){return z({},t,{scroll:z({},t.scroll,{max:r})})},Ei=function(t,r,n){var a=t.frame;vt(r,t)&&T(),t.subject.withPlaceholder&&T();var i=$t(t.axis,r.displaceBy).point,o=Ad(t,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var d=dt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return z({},t,{subject:d})}var p=o?Ne(a.scroll.max,o):a.scroll.max,g=Ni(a,p),u=dt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:g});return z({},t,{subject:u,frame:g})},kd=function(t){var r=t.subject.withPlaceholder;r||T();var n=t.frame;if(!n){var a=dt({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return z({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||T();var o=Ni(n,i),s=dt({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return z({},t,{subject:s,frame:o})},Bd=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,d=e.afterCritical;if(!r){if(n.length)return null;var p={displaced:kt,displacedBy:xi,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},g=vr({impact:p,draggable:a,droppable:o,draggables:i,afterCritical:d}),u=vt(a,o)?o:Ei(o,a,i),c=Ii({draggable:a,destination:u,newPageBorderBoxCenter:g,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return c?p:null}var f=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],h=function(){var v=r.descriptor.index;return r.descriptor.id===a.descriptor.id||f?v:v+1}(),m=$t(o.axis,a.displaceBy);return ir({draggable:a,insideDestination:n,destination:o,viewport:s,displacedBy:m,last:kt,index:h})},Ld=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,d=e.afterCritical,p=jd({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:s});if(!p)return null;var g=ht(p.descriptor.id,i),u=Md({pageBorderBoxCenter:r,viewport:s,destination:p,insideDestination:g,afterCritical:d}),c=Bd({previousPageBorderBoxCenter:r,destination:p,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:g,viewport:s,afterCritical:d});if(!c)return null;var f=vr({impact:c,draggable:n,droppable:p,draggables:i,afterCritical:d}),h=fn({pageBorderBoxCenter:f,draggable:n,viewport:s});return{clientSelection:h,impact:c,scrollJumpRequest:null}},Le=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Fd=function(t,r){var n=Le(t);return n?r[n]:null},$d=function(e){var t=e.state,r=e.type,n=Fd(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,s=o.axis.direction,d=s==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||s==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(d&&!a)return null;var p=r==="MOVE_DOWN"||r==="MOVE_RIGHT",g=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,c=t.dimensions,f=c.draggables,h=c.droppables;return d?Od({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Ld({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,isOver:o,draggables:f,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function rt(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Pi(e){var t=We(e.top,e.bottom),r=We(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function Hd(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function zd(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var s=o.axis,d=it(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:At(a,d)}}).sort(function(o,s){return s.distance-o.distance});return i[0]?i[0].id:null}function Gd(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=gr(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!Hd(t,o))return!1;if(Pi(o)(t.center))return!0;var s=i.axis,d=o.center[s.crossAxisLine],p=t[s.crossAxisStart],g=t[s.crossAxisEnd],u=We(o[s.crossAxisStart],o[s.crossAxisEnd]),c=u(p),f=u(g);return!c&&!f?!0:c?p<d:g>d});return a.length?a.length===1?a[0].descriptor.id:zd({pageBorderBox:t,draggable:r,candidates:a}):null}var Ti=function(t,r){return Ue(Ft(t,r))},Wd=function(e,t){var r=e.frame;return r?Ti(t,r.scroll.diff.value):t};function Oi(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function qd(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var Ud=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,d=n.axis,p=$t(n.axis,r.displaceBy),g=p.value,u=t[d.start],c=t[d.end],f=hr(r,a),h=Qe(f,function(v){var y=v.descriptor.id,w=v.page.borderBox.center[d.line],S=_e(y,s),E=Oi({displaced:i,id:y});return S?E?c<=w:u<w-g:E?c<=w+g:u<w}),m=qd({draggable:r,closest:h,inHomeList:vt(r,n)});return ir({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:p,index:m})},Vd=4,Yd=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,d=$t(a.axis,t.displaceBy),p=d.value,g=r[s.start],u=r[s.end],c=hr(t,i),f=Qe(c,function(m){var v=m.descriptor.id,y=m.page.borderBox,w=y[s.size],S=w/Vd,E=_e(v,o),k=Oi({displaced:n.displaced,id:v});return E?k?u>y[s.start]+S&&u<y[s.end]-S:g>y[s.start]-p+S&&g<y[s.end]-p-S:k?u>y[s.start]+p+S&&u<y[s.end]+p-S:g>y[s.start]+S&&g<y[s.end]-S});if(!f)return null;var h={displacedBy:d,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:a.descriptor.id}}};return h},ji=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,d=Ti(r.page.borderBox,t),p=Gd({pageBorderBox:d,draggable:r,droppables:a});if(!p)return sd;var g=a[p],u=ht(g.descriptor.id,n),c=Wd(g,d);return Yd({pageBorderBoxWithDroppableScroll:c,draggable:r,previousImpact:i,destination:g,insideDestination:u,afterCritical:s})||Ud({pageBorderBoxWithDroppableScroll:c,draggable:r,destination:g,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},hn=function(e,t){var r;return z({},e,(r={},r[t.descriptor.id]=t,r))},Xd=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=Le(r),o=Le(n);if(!i||i===o)return a;var s=a[i];if(!s.subject.withPlaceholder)return a;var d=kd(s);return hn(a,d)},Jd=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=Xd({previousImpact:a,impact:i,droppables:n}),s=Le(i);if(!s)return o;var d=n[s];if(vt(t,d)||d.subject.withPlaceholder)return o;var p=Ei(d,t,r);return hn(o,p)},jt=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||t.viewport,d=n||t.dimensions,p=r||t.current.client.selection,g=Be(p,t.initial.client.selection),u={offset:g,selection:p,borderBoxCenter:Ne(t.initial.client.borderBoxCenter,g)},c={selection:Ne(u.selection,s.scroll.current),borderBoxCenter:Ne(u.borderBoxCenter,s.scroll.current),offset:Ne(u.offset,s.scroll.diff.value)},f={client:u,page:c};if(t.phase==="COLLECTING")return z({phase:"COLLECTING"},t,{dimensions:d,viewport:s,current:f});var h=d.draggables[t.critical.draggable.id],m=i||ji({pageOffset:c.offset,draggable:h,draggables:d.draggables,droppables:d.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=Jd({draggable:h,impact:m,previousImpact:t.impact,draggables:d.draggables,droppables:d.droppables}),y=z({},t,{current:f,dimensions:{draggables:d.draggables,droppables:v},impact:m,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return y};function Kd(e,t){return e.map(function(r){return t[r]})}var Ri=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,s=Kd(o.all,n),d=Bt({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return z({},t,{displaced:d})},Mi=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=vr({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return fn({pageBorderBoxCenter:s,draggable:r,viewport:i})},Ai=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&T();var a=t.impact,i=n||t.viewport,o=r||t.dimensions,s=o.draggables,d=o.droppables,p=s[t.critical.draggable.id],g=Le(a);g||T();var u=d[g],c=Ri({impact:a,viewport:i,destination:u,draggables:s}),f=Mi({impact:c,draggable:p,droppable:u,draggables:s,viewport:i,afterCritical:t.afterCritical});return jt({impact:c,clientSelection:f,state:t,dimensions:o,viewport:i})},_d=function(e){return{index:e.index,droppableId:e.droppableId}},ki=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=$t(r.axis,t.displaceBy),o=ht(r.descriptor.id,n),s=o.indexOf(t);s===-1&&T();var d=o.slice(s+1),p=d.reduce(function(f,h){return f[h.descriptor.id]=!0,f},{}),g={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:p},u=Bt({afterDragging:d,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),c={displaced:u,displacedBy:i,at:{type:"REORDER",destination:_d(t.descriptor)}};return{impact:c,afterCritical:g}},Qd=function(e,t){return{draggables:e.draggables,droppables:hn(e.droppables,t)}},Zd=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=er(t.client,r),i=tr(a,n),o=z({},t,{placeholder:z({},t.placeholder,{client:a}),client:a,page:i});return o},eu=function(e){var t=e.frame;return t||T(),t},tu=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,s=r[o],d=eu(s),p=d.scroll.diff.value,g=Ne(a,p),u=Zd({draggable:i,offset:g,initialWindowScroll:n.scroll.initial});return u})},ru=function(e){var t=e.state,r=e.published,n=r.modified.map(function(S){var E=t.dimensions.droppables[S.droppableId],k=ln(E,S.scroll);return k}),a=z({},t.dimensions.droppables,{},mi(n)),i=bi(tu({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=z({},t.dimensions.draggables,{},i);r.removals.forEach(function(S){delete o[S]});var s={droppables:a,draggables:o},d=Le(t.impact),p=d?s.droppables[d]:null,g=s.draggables[t.critical.draggable.id],u=s.droppables[t.critical.droppable.id],c=ki({draggable:g,home:u,draggables:o,viewport:t.viewport}),f=c.impact,h=c.afterCritical,m=p&&p.isCombineEnabled?t.impact:f,v=ji({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:m,viewport:t.viewport,afterCritical:h}),y=z({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:s,afterCritical:h,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return y;var w=z({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return w},Ur=function(t){return t.movementMode==="SNAP"},Pr=function(t,r,n){var a=Qd(t.dimensions,r);return!Ur(t)||n?jt({state:t,dimensions:a}):Ai({state:t,dimensions:a})};function Tr(e){return e.isDragging&&e.movementMode==="SNAP"?z({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ba={phase:"IDLE",completed:null,shouldFlush:!1},nu=function(e,t){if(e===void 0&&(e=ba),t.type==="FLUSH")return z({},ba,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&T();var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,s=r.movementMode,d=o.draggables[n.draggable.id],p=o.droppables[n.droppable.id],g={selection:a,borderBoxCenter:d.client.borderBox.center,offset:Ce},u={client:g,page:{selection:Ne(g.selection,i.scroll.initial),borderBoxCenter:Ne(g.selection,i.scroll.initial),offset:Ne(g.selection,i.scroll.diff.value)}},c=gr(o.droppables).every(function(ue){return!ue.isFixedOnPage}),f=ki({draggable:d,home:p,draggables:o.draggables,viewport:i}),h=f.impact,m=f.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:c,impact:h,afterCritical:m,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&T();var y=z({phase:"COLLECTING"},e,{phase:"COLLECTING"});return y}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||T(),ru({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;rt(e)||T();var w=t.payload.client;return Je(w,e.current.client.selection)?e:jt({state:e,clientSelection:w,impact:Ur(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Tr(e);rt(e)||T();var S=t.payload,E=S.id,k=S.newScroll,A=e.dimensions.droppables[E];if(!A)return e;var q=ln(A,k);return Pr(e,q,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;rt(e)||T();var U=t.payload,R=U.id,B=U.isEnabled,F=e.dimensions.droppables[R];F||T(),F.isEnabled===B&&T();var te=z({},F,{isEnabled:B});return Pr(e,te,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;rt(e)||T();var P=t.payload,J=P.id,ie=P.isCombineEnabled,j=e.dimensions.droppables[J];j||T(),j.isCombineEnabled===ie&&T();var se=z({},j,{isCombineEnabled:ie});return Pr(e,se,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;rt(e)||T(),e.isWindowScrollAllowed||T();var ve=t.payload.newScroll;if(Je(e.viewport.scroll.current,ve))return Tr(e);var X=Si(e.viewport,ve);return Ur(e)?Ai({state:e,viewport:X}):jt({state:e,viewport:X})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!rt(e))return e;var de=t.payload.maxScroll;if(Je(de,e.viewport.scroll.max))return e;var Se=z({},e.viewport,{scroll:z({},e.viewport.scroll,{max:de})});return z({phase:"DRAGGING"},e,{viewport:Se})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&T();var oe=$d({state:e,type:t.type});return oe?jt({state:e,impact:oe.impact,clientSelection:oe.clientSelection,scrollJumpRequest:oe.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var Ie=t.payload.reason;e.phase!=="COLLECTING"&&T();var Oe=z({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Ie});return Oe}if(t.type==="DROP_ANIMATE"){var me=t.payload,je=me.completed,Re=me.dropDuration,Ee=me.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||T();var Pe={phase:"DROP_ANIMATING",completed:je,dropDuration:Re,newHomeClientOffset:Ee,dimensions:e.dimensions};return Pe}if(t.type==="DROP_COMPLETE"){var ye=t.payload.completed;return{phase:"IDLE",completed:ye,shouldFlush:!1}}return e},au=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},iu=function(t){return{type:"LIFT",payload:t}},ou=function(t){return{type:"INITIAL_PUBLISH",payload:t}},su=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},lu=function(){return{type:"COLLECTION_STARTING",payload:null}},cu=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},du=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},uu=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Bi=function(t){return{type:"MOVE",payload:t}},pu=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},gu=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},fu=function(){return{type:"MOVE_UP",payload:null}},hu=function(){return{type:"MOVE_DOWN",payload:null}},vu=function(){return{type:"MOVE_RIGHT",payload:null}},mu=function(){return{type:"MOVE_LEFT",payload:null}},vn=function(){return{type:"FLUSH",payload:null}},bu=function(t){return{type:"DROP_ANIMATE",payload:t}},mn=function(t){return{type:"DROP_COMPLETE",payload:t}},Li=function(t){return{type:"DROP",payload:t}},xu=function(t){return{type:"DROP_PENDING",payload:t}},Fi=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},yu=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,s=o.id,d=o.clientSelection,p=o.movementMode,g=r();g.phase==="DROP_ANIMATING"&&n(mn({completed:g.completed})),r().phase!=="IDLE"&&T(),n(vn()),n(au({draggableId:s,movementMode:p}));var u={shouldPublishImmediately:p==="SNAP"},c={draggableId:s,scrollOptions:u},f=e.startPublishing(c),h=f.critical,m=f.dimensions,v=f.viewport;n(ou({critical:h,dimensions:m,clientSelection:d,movementMode:p,viewport:v}))}}}},wu=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},bn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Lt={opacity:{drop:0,combining:.7},scale:{drop:.75}},xn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},tt=xn.outOfTheWay+"s "+bn.outOfTheWay,Rt={fluid:"opacity "+tt,snap:"transform "+tt+", opacity "+tt,drop:function(t){var r=t+"s "+bn.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+tt,placeholder:"height "+tt+", width "+tt+", margin "+tt},xa=function(t){return Je(t,Ce)?null:"translate("+t.x+"px, "+t.y+"px)"},Vr={moveTo:xa,drop:function(t,r){var n=xa(t);return n?r?n+" scale("+Lt.scale.drop+")":n:null}},Yr=xn.minDropTime,$i=xn.maxDropTime,Du=$i-Yr,ya=1500,Cu=.6,Su=function(e){var t=e.current,r=e.destination,n=e.reason,a=At(t,r);if(a<=0)return Yr;if(a>=ya)return $i;var i=a/ya,o=Yr+Du*i,s=n==="CANCEL"?o*Cu:o;return Number(s.toFixed(2))},Iu=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,s=n.droppables,d=Le(t),p=d?s[d]:null,g=s[r.descriptor.droppableId],u=Mi({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:p||g,viewport:a}),c=Be(u,r.client.borderBox.center);return c},Nu=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var s=Ri({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var d=z({},n,{displaced:kt});return{impact:d,didDropInsideDroppable:!0}},Eu=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(xu({reason:o}));return}if(i.phase!=="IDLE"){var s=i.phase==="DROP_PENDING"&&i.isWaiting;s&&T(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||T();var d=i.critical,p=i.dimensions,g=p.draggables[i.critical.draggable.id],u=Nu({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),c=u.impact,f=u.didDropInsideDroppable,h=f?dn(c):null,m=f?fr(c):null,v={index:d.draggable.index,droppableId:d.droppable.id},y={draggableId:g.descriptor.id,type:g.descriptor.type,source:v,reason:o,mode:i.movementMode,destination:h,combine:m},w=Iu({impact:c,draggable:g,dimensions:p,viewport:i.viewport,afterCritical:i.afterCritical}),S={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:c},E=!Je(i.current.client.offset,w)||!!y.combine;if(!E){r(mn({completed:S}));return}var k=Su({current:i.current.client.offset,destination:w,reason:o}),A={newHomeClientOffset:w,dropDuration:k,completed:S};r(bu(A))}}}},Hi=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Pu(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Tu(e){var t=e.onWindowScroll;function r(){t(Hi())}var n=Mt(r),a=Pu(n),i=Xe;function o(){return i!==Xe}function s(){o()&&T(),i=Ge(window,[a])}function d(){o()||T(),n.cancel(),i(),i=Xe}return{start:s,stop:d,isActive:o}}var Ou=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},ju=function(e){var t=Tu({onWindowScroll:function(n){e.dispatch(pu({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Ou(n)&&t.stop(),r(n)}}},Ru=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},Mu=function(){var e=[],t=function(i){var o=cn(e,function(p){return p.timerId===i});o===-1&&T();var s=e.splice(o,1),d=s[0];d.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),s={timerId:o,callback:i};e.push(s)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},Au=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},ku=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Bu=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},Nt=function(t,r){r()},qt=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Or=function(t,r,n,a){if(!t){n(a(r));return}var i=Ru(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},Lu=function(e,t){var r=Mu(),n=null,a=function(c,f){n&&T(),Nt("onBeforeCapture",function(){var h=e().onBeforeCapture;if(h){var m={draggableId:c,mode:f};h(m)}})},i=function(c,f){n&&T(),Nt("onBeforeDragStart",function(){var h=e().onBeforeDragStart;h&&h(qt(c,f))})},o=function(c,f){n&&T();var h=qt(c,f);n={mode:f,lastCritical:c,lastLocation:h.source,lastCombine:null},r.add(function(){Nt("onDragStart",function(){return Or(e().onDragStart,h,t,_t.onDragStart)})})},s=function(c,f){var h=dn(f),m=fr(f);n||T();var v=!Bu(c,n.lastCritical);v&&(n.lastCritical=c);var y=!Au(n.lastLocation,h);y&&(n.lastLocation=h);var w=!ku(n.lastCombine,m);if(w&&(n.lastCombine=m),!(!v&&!y&&!w)){var S=z({},qt(c,n.mode),{combine:m,destination:h});r.add(function(){Nt("onDragUpdate",function(){return Or(e().onDragUpdate,S,t,_t.onDragUpdate)})})}},d=function(){n||T(),r.flush()},p=function(c){n||T(),n=null,Nt("onDragEnd",function(){return Or(e().onDragEnd,c,t,_t.onDragEnd)})},g=function(){if(n){var c=z({},qt(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(c)}};return{beforeCapture:a,beforeStart:i,start:o,update:s,flush:d,drop:p,abort:g}},Fu=function(e,t){var r=Lu(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var s=i.payload.completed.result;r.flush(),a(i),r.drop(s);return}if(a(i),i.type==="FLUSH"){r.abort();return}var d=n.getState();d.phase==="DRAGGING"&&r.update(d.critical,d.impact)}}}},$u=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&T(),e.dispatch(mn({completed:n.completed}))}}},Hu=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var d=e.getState();d.phase==="DROP_ANIMATING"&&e.dispatch(Fi())}};r=requestAnimationFrame(function(){r=null,t=Ge(window,[o])})}}}},zu=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},Gu=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Wu=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},qu=function(e){return function(t){return function(r){return function(n){if(Wu(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&T(),e.start(a);return}r(n),e.scroll(t.getState())}}}},Uu=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Li({reason:n.reason})))}}}},Vu=Ua,Yu=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return _r(nu,Vu(ls(wu(n),zu(t),yu(t),Eu,$u,Hu,Uu,qu(o),ju,Gu(r),Fu(a,i))))},jr=function(){return{additions:{},removals:{},modified:{}}};function Xu(e){var t=e.registry,r=e.callbacks,n=jr(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,u=g.additions,c=g.removals,f=g.modified,h=Object.keys(u).map(function(y){return t.draggable.getById(y).getDimension(Ce)}).sort(function(y,w){return y.descriptor.index-w.descriptor.index}),m=Object.keys(f).map(function(y){var w=t.droppable.getById(y),S=w.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:S}}),v={additions:h,removals:Object.keys(c),modified:m};n=jr(),r.publish(v)}))},o=function(g){var u=g.descriptor.id;n.additions[u]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],i()},s=function(g){var u=g.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],i()},d=function(){a&&(cancelAnimationFrame(a),a=null,n=jr())};return{add:o,remove:s,stop:d}}var zi=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=Be({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},Gi=function(){var e=document.documentElement;return e||T(),e},Wi=function(){var e=Gi(),t=zi({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},Ju=function(){var e=Hi(),t=Wi(),r=e.y,n=e.x,a=Gi(),i=a.clientWidth,o=a.clientHeight,s=n+i,d=r+o,p=Ue({top:r,left:n,right:s,bottom:d}),g={frame:p,scroll:{initial:e,current:e,max:t,diff:{value:Ce,displacement:Ce}}};return g},Ku=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=Ju(),i=a.scroll.current,o=t.droppable,s=n.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,r)}),d=n.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),p={draggables:bi(d),droppables:mi(s)},g={dimensions:p,critical:t,viewport:a};return g};function wa(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var _u=function(e,t){var r=null,n=Xu({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(f,h){e.droppable.exists(f)||T(),r&&t.updateDroppableIsEnabled({id:f,isEnabled:h})},i=function(f,h){r&&(e.droppable.exists(f)||T(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:h}))},o=function(f,h){r&&(e.droppable.exists(f)||T(),t.updateDroppableScroll({id:f,newScroll:h}))},s=function(f,h){r&&e.droppable.getById(f).callbacks.scroll(h)},d=function(){if(r){n.stop();var f=r.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(h){return h.callbacks.dragStopped()}),r.unsubscribe(),r=null}},p=function(f){r||T();var h=r.critical.draggable;f.type==="ADDITION"&&wa(e,h,f.value)&&n.add(f.value),f.type==="REMOVAL"&&wa(e,h,f.value)&&n.remove(f.value)},g=function(f){r&&T();var h=e.draggable.getById(f.draggableId),m=e.droppable.getById(h.descriptor.droppableId),v={draggable:h.descriptor,droppable:m.descriptor},y=e.subscribe(p);return r={critical:v,unsubscribe:y},Ku({critical:v,registry:e,scrollOptions:f.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:s,updateDroppableScroll:o,startPublishing:g,stopPublishing:d};return u},qi=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},Qu=function(e){window.scrollBy(e.x,e.y)},Zu=De(function(e){return gr(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),ep=function(t,r){var n=Qe(Zu(r),function(a){return a.frame||T(),Pi(a.frame.pageMarginBox)(t)});return n},tp=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=ep(t,n);return i},Ke={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},rp=function(e,t){var r=e[t.size]*Ke.startFromPercentage,n=e[t.size]*Ke.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},Ui=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},yn=1,np=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Ke.maxPixelScroll;if(e===t.startScrollingFrom)return yn;var r=Ui({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=Ke.maxPixelScroll*Ke.ease(n);return Math.ceil(a)},Da=Ke.durationDampening.accelerateAt,Ca=Ke.durationDampening.stopDampeningAt,ap=function(e,t){var r=t,n=Ca,a=Date.now(),i=a-r;if(i>=Ca)return e;if(i<Da)return yn;var o=Ui({startOfRange:Da,endOfRange:n,current:i}),s=e*Ke.ease(o);return Math.ceil(s)},Sa=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=np(t,r);return i===0?0:a?Math.max(ap(i,n),yn):i},Ia=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=rp(t,a),s=r[a.end]<r[a.start];return s?Sa({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*Sa({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},ip=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},op=hi(function(e){return e===0?0:e}),Vi=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},s=Ia({container:r,distanceToEdges:o,dragStartTime:t,axis:un,shouldUseTimeDampening:i}),d=Ia({container:r,distanceToEdges:o,dragStartTime:t,axis:wi,shouldUseTimeDampening:i}),p=op({x:d,y:s});if(Je(p,Ce))return null;var g=ip({container:r,subject:n,proposedScroll:p});return g?Je(g,Ce)?null:g:null},sp=hi(function(e){return e===0?0:e>0?1:-1}),wn=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Ne(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return Je(o,Ce)?null:o}}(),Yi=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=sp(a),s=wn({max:i,current:n,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},Dn=function(t,r){return Yi({current:t.scroll.current,max:t.scroll.max,change:r})},lp=function(t,r){if(!Dn(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return wn({current:a,max:n,change:r})},Cn=function(t,r){var n=t.frame;return n?Yi({current:n.scroll.current,max:n.scroll.max,change:r}):!1},cp=function(t,r){var n=t.frame;return!n||!Cn(t,r)?null:wn({current:n.scroll.current,max:n.scroll.max,change:r})},dp=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=Vi({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&Dn(t,o)?o:null},up=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=Vi({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return s&&Cn(t,s)?s:null},Na=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],d=s.page.marginBox;if(t.isWindowScrollAllowed){var p=t.viewport,g=dp({dragStartTime:r,viewport:p,subject:d,center:o,shouldUseTimeDampening:n});if(g){a(g);return}}var u=tp({center:o,destination:Le(t.impact),droppables:t.dimensions.droppables});if(u){var c=up({dragStartTime:r,droppable:u,subject:d,center:o,shouldUseTimeDampening:n});c&&i(u.descriptor.id,c)}},pp=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Mt(t),a=Mt(r),i=null,o=function(g){i||T();var u=i,c=u.shouldUseTimeDampening,f=u.dragStartTime;Na({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:f,shouldUseTimeDampening:c})},s=function(g){i&&T();var u=Date.now(),c=!1,f=function(){c=!0};Na({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),i={dragStartTime:u,shouldUseTimeDampening:c},c&&o(g)},d=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:s,stop:d,scroll:o}},gp=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(p,g){var u=Ne(p.current.client.selection,g);t({client:u})},i=function(p,g){if(!Cn(p,g))return g;var u=cp(p,g);if(!u)return r(p.descriptor.id,g),null;var c=Be(g,u);r(p.descriptor.id,c);var f=Be(g,c);return f},o=function(p,g,u){if(!p||!Dn(g,u))return u;var c=lp(g,u);if(!c)return n(u),null;var f=Be(u,c);n(f);var h=Be(u,f);return h},s=function(p){var g=p.scrollJumpRequest;if(g){var u=Le(p.impact);u||T();var c=i(p.dimensions.droppables[u],g);if(c){var f=p.viewport,h=o(p.isWindowScrollAllowed,f,c);h&&a(p,h)}}};return s},fp=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=pp({scrollWindow:r,scrollDroppable:t}),i=gp({move:n,scrollWindow:r,scrollDroppable:t}),o=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&i(p)}},s={scroll:o,start:a.start,stop:a.stop};return s},ut="data-rbd",pt=function(){var e=ut+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Xr=function(){var e=ut+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),hp=function(){var e=ut+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ea={contextId:ut+"-scroll-container-context-id"},vp=function(t){return function(r){return"["+r+'="'+t+'"]'}},Et=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},mp="pointer-events: none;",bp=function(e){var t=vp(e),r=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(pt.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:mp,dropAnimating:s}}}(),n=function(){var s=`
      transition: `+Rt.outOfTheWay+`;
    `;return{selector:t(Xr.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),a={selector:t(hp.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:Et(o,"always"),resting:Et(o,"resting"),dragging:Et(o,"dragging"),dropAnimating:Et(o,"dropAnimating"),userCancel:Et(o,"userCancel")}},Fe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,Rr=function(){var t=document.querySelector("head");return t||T(),t},Pa=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function xp(e,t){var r=Z(function(){return bp(e)},[e]),n=x.useRef(null),a=x.useRef(null),i=L(De(function(u){var c=a.current;c||T(),c.textContent=u}),[]),o=L(function(u){var c=n.current;c||T(),c.textContent=u},[]);Fe(function(){!n.current&&!a.current||T();var u=Pa(t),c=Pa(t);return n.current=u,a.current=c,u.setAttribute(ut+"-always",e),c.setAttribute(ut+"-dynamic",e),Rr().appendChild(u),Rr().appendChild(c),o(r.always),i(r.resting),function(){var f=function(m){var v=m.current;v||T(),Rr().removeChild(v),m.current=null};f(n),f(a)}},[t,o,i,r.always,r.resting,e]);var s=L(function(){return i(r.dragging)},[i,r.dragging]),d=L(function(u){if(u==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),p=L(function(){a.current&&i(r.resting)},[i,r.resting]),g=Z(function(){return{dragging:s,dropping:d,resting:p}},[s,d,p]);return g}var Xi=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function mr(e){return e instanceof Xi(e).HTMLElement}function yp(e,t){var r="["+pt.contextId+'="'+e+'"]',n=vi(document.querySelectorAll(r));if(!n.length)return null;var a=Qe(n,function(i){return i.getAttribute(pt.draggableId)===t});return!a||!mr(a)?null:a}function wp(e){var t=x.useRef({}),r=x.useRef(null),n=x.useRef(null),a=x.useRef(!1),i=L(function(c,f){var h={id:c,focus:f};return t.current[c]=h,function(){var v=t.current,y=v[c];y!==h&&delete v[c]}},[]),o=L(function(c){var f=yp(e,c);f&&f!==document.activeElement&&f.focus()},[e]),s=L(function(c,f){r.current===c&&(r.current=f)},[]),d=L(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var c=r.current;c&&o(c)}))},[o]),p=L(function(c){r.current=null;var f=document.activeElement;f&&f.getAttribute(pt.draggableId)===c&&(r.current=c)},[]);Fe(function(){return a.current=!0,function(){a.current=!1;var c=n.current;c&&cancelAnimationFrame(c)}},[]);var g=Z(function(){return{register:i,tryRecordFocus:p,tryRestoreFocusRecorded:d,tryShiftRecord:s}},[i,p,d,s]);return g}function Dp(){var e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var f=t.indexOf(u);f!==-1&&t.splice(f,1)}}function n(u){t.length&&t.forEach(function(c){return c(u)})}function a(u){return e.draggables[u]||null}function i(u){var c=a(u);return c||T(),c}var o={register:function(c){e.draggables[c.descriptor.id]=c,n({type:"ADDITION",value:c})},update:function(c,f){var h=e.draggables[f.descriptor.id];h&&h.uniqueId===c.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[c.descriptor.id]=c)},unregister:function(c){var f=c.descriptor.id,h=a(f);h&&c.uniqueId===h.uniqueId&&(delete e.draggables[f],n({type:"REMOVAL",value:c}))},getById:i,findById:a,exists:function(c){return!!a(c)},getAllByType:function(c){return ar(e.draggables).filter(function(f){return f.descriptor.type===c})}};function s(u){return e.droppables[u]||null}function d(u){var c=s(u);return c||T(),c}var p={register:function(c){e.droppables[c.descriptor.id]=c},unregister:function(c){var f=s(c.descriptor.id);f&&c.uniqueId===f.uniqueId&&delete e.droppables[c.descriptor.id]},getById:d,findById:s,exists:function(c){return!!s(c)},getAllByType:function(c){return ar(e.droppables).filter(function(f){return f.descriptor.type===c})}};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:p,subscribe:r,clean:g}}function Cp(){var e=Z(Dp,[]);return x.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Sn=ae.createContext(null),or=function(){var e=document.body;return e||T(),e},Sp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Ip=function(t){return"rbd-announcement-"+t};function Np(e){var t=Z(function(){return Ip(e)},[e]),r=x.useRef(null);x.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),z(i.style,Sp),or().appendChild(i),function(){setTimeout(function(){var d=or();d.contains(i)&&d.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=L(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var Ep=0,Pp={separator:"::"};function In(e,t){return t===void 0&&(t=Pp),Z(function(){return""+e+t.separator+Ep++},[t.separator,e])}function Tp(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Op(e){var t=e.contextId,r=e.text,n=In("hidden-text",{separator:"-"}),a=Z(function(){return Tp({contextId:t,uniqueId:n})},[n,t]);return x.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",or().appendChild(o),function(){var d=or();d.contains(o)&&d.removeChild(o)}},[a,r]),a}var br=ae.createContext(null);function Ji(e){var t=x.useRef(e);return x.useEffect(function(){t.current=e}),t}function jp(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&T();var s={abandon:o};return e=s,s}function a(){e||T(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var Rp=9,Mp=13,Nn=27,Ki=32,Ap=33,kp=34,Bp=35,Lp=36,Fp=37,$p=38,Hp=39,zp=40,Ut,Gp=(Ut={},Ut[Mp]=!0,Ut[Rp]=!0,Ut),_i=function(e){Gp[e.keyCode]&&e.preventDefault()},xr=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Qe(t,function(n){return"on"+n in document});return r||e}(),Qi=0,Ta=5;function Wp(e,t){return Math.abs(t.x-e.x)>=Ta||Math.abs(t.y-e.y)>=Ta}var Oa={type:"IDLE"};function qp(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,d=o.clientX,p=o.clientY;if(s===Qi){var g={x:d,y:p},u=n();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(g);return}u.type!=="PENDING"&&T();var c=u.point;if(Wp(c,g)){o.preventDefault();var f=u.actions.fluidLift(g);a({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(o){var s=n();if(s.type!=="DRAGGING"){t();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var s=n();if(s.type==="PENDING"){t();return}if(o.keyCode===Nn){o.preventDefault(),t();return}_i(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=n();if(s.type==="IDLE"&&T(),s.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:xr,fn:t}]}function Up(e){var t=x.useRef(Oa),r=x.useRef(Xe),n=Z(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===Qi&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var c=e.findClosestDraggableId(u);if(c){var f=e.tryGetLock(c,o,{sourceEvent:u});if(f){u.preventDefault();var h={x:u.clientX,y:u.clientY};r.current(),p(f,h)}}}}}},[e]),a=Z(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var c=e.findClosestDraggableId(u);if(c){var f=e.findOptionsForDraggable(c);f&&(f.shouldRespectForcePress||e.canGetLock(c)&&u.preventDefault())}}}}},[e]),i=L(function(){var u={passive:!1,capture:!0};r.current=Ge(window,[a,n],u)},[a,n]),o=L(function(){var g=t.current;g.type!=="IDLE"&&(t.current=Oa,r.current(),i())},[i]),s=L(function(){var g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),d=L(function(){var u={capture:!0,passive:!1},c=qp({cancel:s,completed:o,getPhase:function(){return t.current},setPhase:function(h){t.current=h}});r.current=Ge(window,c,u)},[s,o]),p=L(function(u,c){t.current.type!=="IDLE"&&T(),t.current={type:"PENDING",point:c,actions:u},d()},[d]);Fe(function(){return i(),function(){r.current()}},[i])}var lt;function Vp(){}var Yp=(lt={},lt[kp]=!0,lt[Ap]=!0,lt[Lp]=!0,lt[Bp]=!0,lt);function Xp(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===Nn){i.preventDefault(),r();return}if(i.keyCode===Ki){i.preventDefault(),n();return}if(i.keyCode===zp){i.preventDefault(),e.moveDown();return}if(i.keyCode===$p){i.preventDefault(),e.moveUp();return}if(i.keyCode===Hp){i.preventDefault(),e.moveRight();return}if(i.keyCode===Fp){i.preventDefault(),e.moveLeft();return}if(Yp[i.keyCode]){i.preventDefault();return}_i(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:xr,fn:r}]}function Jp(e){var t=x.useRef(Vp),r=Z(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Ki)return;var o=e.findClosestDraggableId(i);if(!o)return;var s=e.tryGetLock(o,g,{sourceEvent:i});if(!s)return;i.preventDefault();var d=!0,p=s.snapLift();t.current();function g(){d||T(),d=!1,t.current(),n()}t.current=Ge(window,Xp(p,g),{capture:!0,passive:!1})}}},[e]),n=L(function(){var i={passive:!1,capture:!0};t.current=Ge(window,[r],i)},[r]);Fe(function(){return n(),function(){t.current()}},[n])}var Mr={type:"IDLE"},Kp=120,_p=.15;function Qp(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===Nn&&a.preventDefault(),t()}},{eventName:xr,fn:t}]}function Zp(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var s=i.touches[0],d=s.clientX,p=s.clientY,g={x:d,y:p};i.preventDefault(),o.actions.move(g)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&T();var s=i.touches[0];if(s){var d=s.force>=_p;if(d){var p=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){p&&t();return}if(p){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:xr,fn:t}]}function eg(e){var t=x.useRef(Mr),r=x.useRef(Xe),n=L(function(){return t.current},[]),a=L(function(f){t.current=f},[]),i=Z(function(){return{eventName:"touchstart",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var m=e.tryGetLock(h,s,{sourceEvent:f});if(m){var v=f.touches[0],y=v.clientX,w=v.clientY,S={x:y,y:w};r.current(),u(m,S)}}}}}},[e]),o=L(function(){var f={capture:!0,passive:!1};r.current=Ge(window,[i],f)},[i]),s=L(function(){var c=t.current;c.type!=="IDLE"&&(c.type==="PENDING"&&clearTimeout(c.longPressTimerId),a(Mr),r.current(),o())},[o,a]),d=L(function(){var c=t.current;s(),c.type==="DRAGGING"&&c.actions.cancel({shouldBlockNextClick:!0}),c.type==="PENDING"&&c.actions.abort()},[s]),p=L(function(){var f={capture:!0,passive:!1},h={cancel:d,completed:s,getPhase:n},m=Ge(window,Zp(h),f),v=Ge(window,Qp(h),f);r.current=function(){m(),v()}},[d,n,s]),g=L(function(){var f=n();f.type!=="PENDING"&&T();var h=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:h,hasMoved:!1})},[n,a]),u=L(function(f,h){n().type!=="IDLE"&&T();var m=setTimeout(g,Kp);a({type:"PENDING",point:h,actions:f,longPressTimerId:m}),p()},[p,n,a,g]);Fe(function(){return o(),function(){r.current();var h=n();h.type==="PENDING"&&(clearTimeout(h.longPressTimerId),a(Mr))}},[n,o,a]),Fe(function(){var f=Ge(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return f},[])}var tg={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Zi(e,t){if(t==null)return!1;var r=!!tg[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Zi(e,t.parentElement)}function rg(e,t){var r=t.target;return mr(r)?Zi(e,r):!1}var ng=function(e){return Ue(e.getBoundingClientRect()).center};function ag(e){return e instanceof Xi(e).Element}var ig=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Qe(t,function(n){return n in Element.prototype});return r||e}();function eo(e,t){return e==null?null:e[ig](t)?e:eo(e.parentElement,t)}function og(e,t){return e.closest?e.closest(t):eo(e,t)}function sg(e){return"["+pt.contextId+'="'+e+'"]'}function lg(e,t){var r=t.target;if(!ag(r))return null;var n=sg(e),a=og(r,n);return!a||!mr(a)?null:a}function cg(e,t){var r=lg(e,t);return r?r.getAttribute(pt.draggableId):null}function dg(e,t){var r="["+Xr.contextId+'="'+e+'"]',n=vi(document.querySelectorAll(r)),a=Qe(n,function(i){return i.getAttribute(Xr.id)===t});return!a||!mr(a)?null:a}function ug(e){e.preventDefault()}function Vt(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function to(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!qi(r.getState(),a))}function pg(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,d=to({lockAPI:t,store:n,registry:a,draggableId:i});if(!d)return null;var p=a.draggable.getById(i),g=dg(r,p.descriptor.id);if(!g||s&&!p.options.canDragInteractiveElements&&rg(g,s))return null;var u=t.claim(o||Xe),c="PRE_DRAG";function f(){return p.options.shouldRespectForcePress}function h(){return t.isActive(u)}function m(A,q){Vt({expected:A,phase:c,isLockActive:h,shouldWarn:!0})&&n.dispatch(q())}var v=m.bind(null,"DRAGGING");function y(A){function q(){t.release(),c="COMPLETED"}c!=="PRE_DRAG"&&(q(),c!=="PRE_DRAG"&&T()),n.dispatch(iu(A.liftActionArgs)),c="DRAGGING";function U(R,B){if(B===void 0&&(B={shouldBlockNextClick:!1}),A.cleanup(),B.shouldBlockNextClick){var F=Ge(window,[{eventName:"click",fn:ug,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(F)}q(),n.dispatch(Li({reason:R}))}return z({isActive:function(){return Vt({expected:"DRAGGING",phase:c,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:f,drop:function(B){return U("DROP",B)},cancel:function(B){return U("CANCEL",B)}},A.actions)}function w(A){var q=Mt(function(R){v(function(){return Bi({client:R})})}),U=y({liftActionArgs:{id:i,clientSelection:A,movementMode:"FLUID"},cleanup:function(){return q.cancel()},actions:{move:q}});return z({},U,{move:q})}function S(){var A={moveUp:function(){return v(fu)},moveRight:function(){return v(vu)},moveDown:function(){return v(hu)},moveLeft:function(){return v(mu)}};return y({liftActionArgs:{id:i,clientSelection:ng(g),movementMode:"SNAP"},cleanup:Xe,actions:A})}function E(){var A=Vt({expected:"PRE_DRAG",phase:c,isLockActive:h,shouldWarn:!0});A&&t.release()}var k={isActive:function(){return Vt({expected:"PRE_DRAG",phase:c,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:f,fluidLift:w,snapLift:S,abort:E};return k}var gg=[Up,Jp,eg];function fg(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?gg:[],a||[]),s=x.useState(function(){return jp()})[0],d=L(function(w,S){w.isDragging&&!S.isDragging&&s.tryAbandon()},[s]);Fe(function(){var w=r.getState(),S=r.subscribe(function(){var E=r.getState();d(w,E),w=E});return S},[s,r,d]),Fe(function(){return s.tryAbandon},[s.tryAbandon]);for(var p=L(function(y){return to({lockAPI:s,registry:n,store:r,draggableId:y})},[s,n,r]),g=L(function(y,w,S){return pg({lockAPI:s,registry:n,contextId:t,store:r,draggableId:y,forceSensorStop:w,sourceEvent:S&&S.sourceEvent?S.sourceEvent:null})},[t,s,n,r]),u=L(function(y){return cg(t,y)},[t]),c=L(function(y){var w=n.draggable.findById(y);return w?w.options:null},[n.draggable]),f=L(function(){s.isClaimed()&&(s.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(vn()))},[s,r]),h=L(s.isClaimed,[s]),m=Z(function(){return{canGetLock:p,tryGetLock:g,findClosestDraggableId:u,findOptionsForDraggable:c,tryReleaseLock:f,isLockClaimed:h}},[p,g,u,c,f,h]),v=0;v<o.length;v++)o[v](m)}var hg=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Pt(e){return e.current||T(),e.current}function vg(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=x.useRef(null),s=Ji(e),d=L(function(){return hg(s.current)},[s]),p=Np(t),g=Op({contextId:t,text:i}),u=xp(t,a),c=L(function(R){Pt(o).dispatch(R)},[]),f=Z(function(){return Xn({publishWhileDragging:su,updateDroppableScroll:cu,updateDroppableIsEnabled:du,updateDroppableIsCombineEnabled:uu,collectionStarting:lu},c)},[c]),h=Cp(),m=Z(function(){return _u(h,f)},[h,f]),v=Z(function(){return fp(z({scrollWindow:Qu,scrollDroppable:m.scrollDroppable},Xn({move:Bi},c)))},[m.scrollDroppable,c]),y=wp(t),w=Z(function(){return Yu({announce:p,autoScroller:v,dimensionMarshal:m,focusMarshal:y,getResponders:d,styleMarshal:u})},[p,v,m,y,d,u]);o.current=w;var S=L(function(){var R=Pt(o),B=R.getState();B.phase!=="IDLE"&&R.dispatch(vn())},[]),E=L(function(){var R=Pt(o).getState();return R.isDragging||R.phase==="DROP_ANIMATING"},[]),k=Z(function(){return{isDragging:E,tryAbort:S}},[E,S]);r(k);var A=L(function(R){return qi(Pt(o).getState(),R)},[]),q=L(function(){return rt(Pt(o).getState())},[]),U=Z(function(){return{marshal:m,focus:y,contextId:t,canLift:A,isMovementAllowed:q,dragHandleUsageInstructionsId:g,registry:h}},[t,m,g,y,A,q,h]);return fg({contextId:t,store:w,registry:h,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(function(){return S},[S]),ae.createElement(br.Provider,{value:U},ae.createElement(oc,{context:Sn,store:w},e.children))}var mg=0;function bg(){return Z(function(){return""+mg++},[])}function xg(e){var t=bg(),r=e.dragHandleUsageInstructions||_t.dragHandleUsageInstructions;return ae.createElement(Jc,null,function(n){return ae.createElement(vg,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var ro=function(t){return function(r){return t===r}},yg=ro("scroll"),wg=ro("auto"),ja=function(t,r){return r(t.overflowX)||r(t.overflowY)},Dg=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return ja(n,yg)||ja(n,wg)},Cg=function(){return!1},Sg=function e(t){return t==null?null:t===document.body?Cg()?t:null:t===document.documentElement?null:Dg(t)?t:e(t.parentElement)},Jr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Ig=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Ng=function(e){var t=Sg(e),r=Ig(e);return{closestScrollable:t,isFixedOnPage:r}},Eg=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,d=e.closest,p=function(){if(!d)return null;var f=d.scrollSize,h=d.client,m=zi({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:h.paddingBox.height,width:h.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:h,scrollSize:f,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:m,diff:{value:Ce,displacement:Ce}}}}(),g=i==="vertical"?un:wi,u=dt({page:s,withPlaceholder:null,axis:g,frame:p}),c={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:r,client:o,page:s,frame:p,subject:u};return c},Pg=function(t,r){var n=ui(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,s=i+r.scrollWidth,d={top:a,right:s,bottom:o,left:i},p=on(d,n.border),g=sn({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return g},Tg=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,d=e.shouldClipSubject,p=n.closestScrollable,g=Pg(t,p),u=tr(g,a),c=function(){if(!p)return null;var h=ui(p),m={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:h,page:tr(h,a),scroll:Jr(p),scrollSize:m,shouldClipSubject:d}}(),f=Eg({descriptor:r,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:i,client:g,page:u,closest:c});return f},Og={passive:!1},jg={passive:!0},Ra=function(e){return e.shouldPublishImmediately?Og:jg};function sr(e){var t=x.useContext(e);return t||T(),t}var Yt=function(t){return t&&t.env.closestScrollable||null};function Rg(e){var t=x.useRef(null),r=sr(br),n=In("droppable"),a=r.registry,i=r.marshal,o=Ji(e),s=Z(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),d=x.useRef(s),p=Z(function(){return De(function(E,k){t.current||T();var A={x:E,y:k};i.updateDroppableScroll(s.id,A)})},[s.id,i]),g=L(function(){var E=t.current;return!E||!E.env.closestScrollable?Ce:Jr(E.env.closestScrollable)},[]),u=L(function(){var E=g();p(E.x,E.y)},[g,p]),c=Z(function(){return Mt(u)},[u]),f=L(function(){var E=t.current,k=Yt(E);E&&k||T();var A=E.scrollOptions;if(A.shouldPublishImmediately){u();return}c()},[c,u]),h=L(function(E,k){t.current&&T();var A=o.current,q=A.getDroppableRef();q||T();var U=Ng(q),R={ref:q,descriptor:s,env:U,scrollOptions:k};t.current=R;var B=Tg({ref:q,descriptor:s,env:U,windowScroll:E,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),F=U.closestScrollable;return F&&(F.setAttribute(Ea.contextId,r.contextId),F.addEventListener("scroll",f,Ra(R.scrollOptions))),B},[r.contextId,s,f,o]),m=L(function(){var E=t.current,k=Yt(E);return E&&k||T(),Jr(k)},[]),v=L(function(){var E=t.current;E||T();var k=Yt(E);t.current=null,k&&(c.cancel(),k.removeAttribute(Ea.contextId),k.removeEventListener("scroll",f,Ra(E.scrollOptions)))},[f,c]),y=L(function(E){var k=t.current;k||T();var A=Yt(k);A||T(),A.scrollTop+=E.y,A.scrollLeft+=E.x},[]),w=Z(function(){return{getDimensionAndWatchScroll:h,getScrollWhileDragging:m,dragStopped:v,scroll:y}},[v,h,m,y]),S=Z(function(){return{uniqueId:n,descriptor:s,callbacks:w}},[w,s,n]);Fe(function(){return d.current=S.descriptor,a.droppable.register(S),function(){t.current&&v(),a.droppable.unregister(S)}},[w,s,v,S,i,a.droppable]),Fe(function(){t.current&&i.updateDroppableIsEnabled(d.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Fe(function(){t.current&&i.updateDroppableIsCombineEnabled(d.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Ar(){}var Ma={width:0,height:0,margin:td},Mg=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?Ma:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Ag=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=Mg({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Rt.placeholder:null}};function kg(e){var t=x.useRef(null),r=L(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,s=x.useState(e.animate==="open"),d=s[0],p=s[1];x.useEffect(function(){return d?n!=="open"?(r(),p(!1),Ar):t.current?Ar:(t.current=setTimeout(function(){t.current=null,p(!1)}),r):Ar},[n,d,r]);var g=L(function(c){c.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),u=Ag({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return ae.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:g,ref:e.innerRef})}var Bg=ae.memo(kg),En=ae.createContext(null),Lg=function(e){ri(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(ae.PureComponent),Aa={dragging:5e3,dropAnimating:4500},Fg=function(t,r){return r?Rt.drop(r.duration):t?Rt.snap:Rt.fluid},$g=function(t,r){return t?r?Lt.opacity.drop:Lt.opacity.combining:null},Hg=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function zg(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,s=Hg(e),d=!!i,p=d?Vr.drop(n,o):Vr.moveTo(n),g={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Fg(s,i),transform:p,opacity:$g(o,d),zIndex:d?Aa.dropAnimating:Aa.dragging,pointerEvents:"none"};return g}function Gg(e){return{transform:Vr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Wg(e){return e.type==="DRAGGING"?zg(e):Gg(e)}function qg(e,t,r){r===void 0&&(r=Ce);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=di(a,n),o=tr(i,r),s={client:i,tagName:t.tagName.toLowerCase(),display:n.display},d={x:i.marginBox.width,y:i.marginBox.height},p={descriptor:e,placeholder:s,displaceBy:d,client:i,page:o};return p}function Ug(e){var t=In("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,d=Z(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:s}},[i,s,o]),p=L(function(f){var h=a();return h||T(),qg(r,h,f)},[r,a]),g=Z(function(){return{uniqueId:t,descriptor:r,options:d,getDimension:p}},[r,p,d,t]),u=x.useRef(g),c=x.useRef(!0);Fe(function(){return n.draggable.register(u.current),function(){return n.draggable.unregister(u.current)}},[n.draggable]),Fe(function(){if(c.current){c.current=!1;return}var f=u.current;u.current=g,n.draggable.update(g,f)},[g,n.draggable])}function Vg(e){e.preventDefault()}function Yg(e){var t=x.useRef(null),r=L(function(R){t.current=R},[]),n=L(function(){return t.current},[]),a=sr(br),i=a.contextId,o=a.dragHandleUsageInstructionsId,s=a.registry,d=sr(En),p=d.type,g=d.droppableId,u=Z(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:g}},[e.draggableId,e.index,p,g]),c=e.children,f=e.draggableId,h=e.isEnabled,m=e.shouldRespectForcePress,v=e.canDragInteractiveElements,y=e.isClone,w=e.mapped,S=e.dropAnimationFinished;if(!y){var E=Z(function(){return{descriptor:u,registry:s,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:h}},[u,s,n,v,m,h]);Ug(E)}var k=Z(function(){return h?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Vg}:null},[i,o,f,h]),A=L(function(R){w.type==="DRAGGING"&&w.dropping&&R.propertyName==="transform"&&S()},[S,w]),q=Z(function(){var R=Wg(w),B=w.type==="DRAGGING"&&w.dropping?A:null,F={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":f,style:R,onTransitionEnd:B},dragHandleProps:k};return F},[i,k,f,w,A,r]),U=Z(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return c(q,w.snapshot,U)}var no=function(e,t){return e===t},ao=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},Xg=function(t){return t.combine?t.combine.draggableId:null},Jg=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Kg(){var e=De(function(a,i){return{x:a,y:i}}),t=De(function(a,i,o,s,d){return{isDragging:!0,isClone:i,isDropAnimating:!!d,dropAnimation:d,mode:a,draggingOver:o,combineWith:s,combineTargetFor:null}}),r=De(function(a,i,o,s,d,p,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:p,mode:i,offset:a,dimension:o,forceShouldAnimate:g,snapshot:t(i,s,d,p,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var s=i.current.client.offset,d=i.dimensions.draggables[o.draggableId],p=Le(i.impact),g=Jg(i.impact),u=i.forceShouldAnimate;return r(e(s.x,s.y),i.movementMode,d,o.isClone,p,g,u)}if(i.phase==="DROP_ANIMATING"){var c=i.completed;if(c.result.draggableId!==o.draggableId)return null;var f=o.isClone,h=i.dimensions.draggables[o.draggableId],m=c.result,v=m.mode,y=ao(m),w=Xg(m),S=i.dropDuration,E={duration:S,curve:bn.drop,moveTo:i.newHomeClientOffset,opacity:w?Lt.opacity.drop:null,scale:w?Lt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:E,draggingOver:y,combineWith:w,mode:v,forceShouldAnimate:null,snapshot:t(v,f,y,w,E)}}}return null};return n}function io(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var _g={mapped:{type:"SECONDARY",offset:Ce,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:io(null)}};function Qg(){var e=De(function(o,s){return{x:o,y:s}}),t=De(io),r=De(function(o,s,d){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:d,snapshot:t(s)}}}),n=function(s){return s?r(Ce,s,!0):null},a=function(s,d,p,g){var u=p.displaced.visible[s],c=!!(g.inVirtualList&&g.effected[s]),f=fr(p),h=f&&f.draggableId===s?d:null;if(!u){if(!c)return n(h);if(p.displaced.invisible[s])return null;var m=ft(g.displacedBy.point),v=e(m.x,m.y);return r(v,h,!0)}if(c)return n(h);var y=p.displacedBy.point,w=e(y.x,y.y);return r(w,h,u.shouldAnimate)},i=function(s,d){if(s.isDragging)return s.critical.draggable.id===d.draggableId?null:a(d.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var p=s.completed;return p.result.draggableId===d.draggableId?null:a(d.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return i}var Zg=function(){var t=Kg(),r=Qg(),n=function(i,o){return t(i,o)||r(i,o)||_g};return n},ef={dropAnimationFinished:Fi},tf=li(Zg,ef,null,{context:Sn,pure:!0,areStatePropsEqual:no})(Yg);function oo(e){var t=sr(En),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:ae.createElement(tf,e)}function rf(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return ae.createElement(oo,z({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function nf(e){var t=x.useContext(br);t||T();var r=t.contextId,n=t.isMovementAllowed,a=x.useRef(null),i=x.useRef(null),o=e.children,s=e.droppableId,d=e.type,p=e.mode,g=e.direction,u=e.ignoreContainerClipping,c=e.isDropDisabled,f=e.isCombineEnabled,h=e.snapshot,m=e.useClone,v=e.updateViewportMaxScroll,y=e.getContainerForClone,w=L(function(){return a.current},[]),S=L(function(F){a.current=F},[]);L(function(){return i.current},[]);var E=L(function(F){i.current=F},[]),k=L(function(){n()&&v({maxScroll:Wi()})},[n,v]);Rg({droppableId:s,type:d,mode:p,direction:g,isDropDisabled:c,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:w});var A=ae.createElement(Lg,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(F){var te=F.onClose,P=F.data,J=F.animate;return ae.createElement(Bg,{placeholder:P,onClose:te,innerRef:E,animate:J,contextId:r,onTransitionEnd:k})}),q=Z(function(){return{innerRef:S,placeholder:A,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}},[r,s,A,S]),U=m?m.dragging.draggableId:null,R=Z(function(){return{droppableId:s,type:d,isUsingCloneFor:U}},[s,U,d]);function B(){if(!m)return null;var F=m.dragging,te=m.render,P=ae.createElement(oo,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(J,ie){return te(J,ie,F)});return xo.createPortal(P,y())}return ae.createElement(En.Provider,{value:R},o(q,h),B())}var kr=function(t,r){return t===r.droppable.type},ka=function(t,r){return r.draggables[t.draggable.id]},af=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=z({},t,{shouldAnimatePlaceholder:!1}),n=De(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=De(function(o,s,d,p,g,u){var c=g.descriptor.id,f=g.descriptor.droppableId===o;if(f){var h=u?{render:u,dragging:n(g.descriptor)}:null,m={isDraggingOver:d,draggingOverWith:d?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:m,useClone:h}}if(!s)return r;if(!p)return t;var v={isDraggingOver:d,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),i=function(s,d){var p=d.droppableId,g=d.type,u=!d.isDropDisabled,c=d.renderClone;if(s.isDragging){var f=s.critical;if(!kr(g,f))return r;var h=ka(f,s.dimensions),m=Le(s.impact)===p;return a(p,u,m,m,h,c)}if(s.phase==="DROP_ANIMATING"){var v=s.completed;if(!kr(g,v.critical))return r;var y=ka(v.critical,s.dimensions);return a(p,u,ao(v.result)===p,Le(v.impact)===p,y,c)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var w=s.completed;if(!kr(g,w.critical))return r;var S=Le(w.impact)===p,E=!!(w.impact.at&&w.impact.at.type==="COMBINE"),k=w.critical.droppable.id===p;return S?E?t:r:k?t:r}return r};return i},of={updateViewportMaxScroll:gu};function sf(){return document.body||T(),document.body}var lf={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:sf},so=li(af,of,null,{context:Sn,pure:!0,areStatePropsEqual:no})(nf);so.defaultProps=lf;const ke=[{id:"hero-fullpage",name:"Hero - Página Completa",description:"Una imagen protagonista que ocupa toda la página",category:"hero",template:"grid-cols-1 grid-rows-1",cells:1,style:{gap:"0px",padding:"0px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-2xl"},maskCategories:[{name:"Editorial",masks:["none","soft-vignette","magazine-crop","editorial-frame"]},{name:"Artístico",masks:["film-grain","vintage-border","polaroid-large"]}]},{id:"hero-split",name:"Hero - División Dramática",description:"Dos imágenes grandes con división vertical elegante",category:"hero",template:"grid-cols-2 grid-rows-1 gap-1",cells:2,style:{gap:"4px"},cellStyles:{0:"rounded-l-lg overflow-hidden shadow-xl",1:"rounded-r-lg overflow-hidden shadow-xl"},maskCategories:[{name:"Minimalista",masks:["none","soft-rounded","subtle-shadow"]}]},{id:"magazine-asymmetric",name:"Magazine - Asimétrico",description:"Layout editorial con jerarquía visual moderna",category:"editorial",template:"grid-cols-5 grid-rows-3 gap-2",cells:4,style:{gap:"6px"},cellStyles:{0:"col-span-3 row-span-2 rounded-lg overflow-hidden shadow-lg",1:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",2:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",3:"col-span-5 row-span-1 rounded-md overflow-hidden shadow-sm"},maskCategories:[{name:"Editorial",masks:["none","magazine-crop","editorial-frame","soft-vignette"]},{name:"Moderno",masks:["geometric-crop","minimal-frame","clean-border"]}]},{id:"magazine-grid",name:"Magazine - Grid Moderno",description:"Grid uniforme con espaciado editorial elegante",category:"editorial",template:"grid-cols-3 grid-rows-2 gap-3",cells:6,style:{gap:"8px",padding:"4px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",1:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",2:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",3:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",4:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",5:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow"},maskCategories:[{name:"Uniformes",masks:["none","rounded","soft-rounded","minimal-frame"]}]},{id:"minimal-duo",name:"Minimal - Dúo Elegante",description:"Dos imágenes con mucho espacio blanco",category:"minimal",template:"grid-cols-1 grid-rows-2 gap-8",cells:2,style:{gap:"32px",padding:"24px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-2xl",1:"rounded-xl overflow-hidden shadow-2xl"},maskCategories:[{name:"Limpio",masks:["none","clean-border","minimal-frame","soft-shadow"]}]},{id:"classic-quad",name:"Clásico - Cuadrícula Premium",description:"Cuatro imágenes con estilo editorial premium",category:"classic",template:"grid-cols-2 grid-rows-2 gap-4",cells:4,style:{gap:"12px",padding:"8px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",1:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",2:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",3:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300"},maskCategories:[{name:"Premium",masks:["none","rounded","soft-rounded","premium-frame","elegant-border","classic-shadow","editorial-crop"]},{name:"Artístico",masks:["vintage","film-grain","classic-vignette","sepia-tone","black-white-frame","retro-border"]}]},{id:"classic-portrait",name:"Clásico - Retrato Elegante",description:"Layout perfecto para retratos y fotos verticales",category:"classic",template:"grid-cols-3 grid-rows-2 gap-3",cells:3,style:{gap:"10px"},cellStyles:{0:"col-span-2 row-span-2 rounded-2xl overflow-hidden shadow-2xl",1:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg",2:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Retrato",masks:["none","portrait-frame","elegant-oval","classic-border"]}]}];function lo(e){let t=null;return()=>(t==null&&(t=e()),t)}function cf(e,t){return e.filter(r=>r!==t)}function df(e,t){const r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class uf{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=df(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=cf(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class pf{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const co="__NATIVE_FILE__",uo="__NATIVE_URL__",po="__NATIVE_TEXT__",go="__NATIVE_HTML__",Ba=Object.freeze(Object.defineProperty({__proto__:null,FILE:co,HTML:go,TEXT:po,URL:uo},Symbol.toStringTag,{value:"Module"}));function Br(e,t,r){const n=t.reduce((a,i)=>a||e.getData(i),"");return n??r}const Kr={[co]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[go]:{exposeProperties:{html:(e,t)=>Br(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[uo]:{exposeProperties:{urls:(e,t)=>Br(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[po]:{exposeProperties:{text:(e,t)=>Br(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function gf(e,t){const r=Kr[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new pf(r);return n.loadDataTransfer(t),n}function Lr(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(Kr).filter(r=>{const n=Kr[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const ff=lo(()=>/firefox/i.test(navigator.userAgent)),fo=lo(()=>!!window.safari);class La{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let s=r.length-1;if(t===r[s])return n[s];let d=0,p=o.length-1,g;for(;d<=p;){g=Math.floor(.5*(d+p));const f=r[g];if(f<t)d=g+1;else if(f>t)p=g-1;else return n[g]}s=Math.max(0,p);const u=t-r[s],c=u*u;return n[s]+a[s]*u+i[s]*c+o[s]*u*c}constructor(t,r){const{length:n}=t,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,h)=>t[f]<t[h]?-1:1);const i=[],o=[];let s,d;for(let f=0;f<n-1;f++)s=t[f+1]-t[f],d=r[f+1]-r[f],i.push(s),o.push(d/s);const p=[o[0]];for(let f=0;f<i.length-1;f++){const h=o[f],m=o[f+1];if(h*m<=0)p.push(0);else{s=i[f];const v=i[f+1],y=s+v;p.push(3*y/((y+v)/h+(y+s)/m))}}p.push(o[o.length-1]);const g=[],u=[];let c;for(let f=0;f<p.length-1;f++){c=o[f];const h=p[f],m=1/i[f],v=h+p[f+1]-c-c;g.push((c-h-v)*m),u.push(v*m*m)}this.xs=t,this.ys=r,this.c1s=p,this.c2s=g,this.c3s=u}}const hf=1;function ho(e){const t=e.nodeType===hf?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function Xt(e){return{x:e.clientX,y:e.clientY}}function vf(e){var t;return e.nodeName==="IMG"&&(ff()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function mf(e,t,r,n){let a=e?t.width:r,i=e?t.height:n;return fo()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function bf(e,t,r,n,a){const i=vf(t),s=ho(i?e:t),d={x:r.x-s.x,y:r.y-s.y},{offsetWidth:p,offsetHeight:g}=e,{anchorX:u,anchorY:c}=n,{dragPreviewWidth:f,dragPreviewHeight:h}=mf(i,t,p,g),m=()=>{let A=new La([0,.5,1],[d.y,d.y/g*h,d.y+h-g]).interpolate(c);return fo()&&i&&(A+=(window.devicePixelRatio-1)*h),A},v=()=>new La([0,.5,1],[d.x,d.x/p*f,d.x+f-p]).interpolate(u),{offsetX:y,offsetY:w}=a,S=y===0||y,E=w===0||w;return{x:S?y:v(),y:E?w:m()}}class xf{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function yf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){yf(e,a,r[a])})}return e}class wf{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Fa({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return Fa({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(Ba).some(r=>Ba[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=gf(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&ho(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=Xt(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,d=Lr(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const g=this.monitor.getSourceId(),u=this.sourceNodes.get(g),c=this.sourcePreviewNodes.get(g)||u;if(c){const{anchorX:f,anchorY:h,offsetX:m,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),S=bf(u,c,o,{anchorX:f,anchorY:h},{offsetX:m,offsetY:v});s.setDragImage(c,S.x,S.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:s}=a,d=Lr(s);d&&this.beginDragNativeItem(d,s)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Xt(a)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=Xt(a),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else Lr(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Xt(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new xf(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new uf(this.isNodeInDocument)}}const Df=function(t,r,n){return new wf(t,r,n)},Cf=({elements:e,onReorder:t,onSelect:r,selectedElement:n})=>{const a=i=>{if(!i.destination)return;const o=Array.from(e),[s]=o.splice(i.source.index,1);o.splice(i.destination.index,0,s),t(o)};return l.jsxs("div",{className:"bg-white ",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Capas"}),l.jsx(xg,{onDragEnd:a,children:l.jsx(so,{droppableId:"layers",children:i=>l.jsxs("div",{...i.droppableProps,ref:i.innerRef,className:"space-y-2",children:[e.map((o,s)=>l.jsx(rf,{draggableId:o.id,index:s,children:d=>l.jsxs("div",{ref:d.innerRef,...d.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===o.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>r(o.id),children:[l.jsx("div",{...d.dragHandleProps,className:"mr-2",children:l.jsx(Mo,{size:16})}),o.type==="image"?l.jsx(Tt,{size:16,className:"mr-2"}):l.jsx(nt,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm truncate",children:o.type==="text"?o.content.substring(0,20):`Imagen ${s+1}`})]})},o.id)),i.placeholder]})})})]})};function Sf({id:e,elements:t=[],selectedElement:r,onSelectElement:n,onAddElement:a,onUpdateElement:i,onDeleteElement:o,availableMasks:s=[],workspaceSize:d={width:800,height:600},cellSize:p="auto",cellStyle:g=""}){const[{isOver:u},c]=Zl(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:m=>{if(m.files){const v=new FileReader;v.onload=y=>{var w;if((w=y.target)!=null&&w.result){const S={id:`img-${Date.now()}`,type:"image",content:y.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(S),n(S.id,e)}},v.readAsDataURL(m.files[0])}},collect:m=>({isOver:!!m.isOver({shallow:!0})})})),f=()=>{const m=document.createElement("input");m.type="file",m.accept="image/*",m.onchange=v=>{if(v.target.files&&v.target.files[0]){const y=new FileReader;y.onload=w=>{var S;if((S=w.target)!=null&&S.result){const E={id:`img-${Date.now()}`,type:"image",content:w.target.result,position:{x:.05,y:.05},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(E),n(E.id,e)}},y.readAsDataURL(v.target.files[0])}},m.click()},h=t.length>0;return l.jsx("div",{ref:c,className:`relative w-full h-full ${g||"rounded-lg overflow-hidden"} ${u?"ring-2 ring-purple-500 bg-transparent":""} ${h?"bg-transparent":"border-2 border-dashed border-gray-300 bg-transparent hover:border-gray-400 hover:bg-gray-100"}`,onClick:m=>{m.target===m.currentTarget&&n(null,e)},style:{isolation:"isolate",background:h?"transparent":void 0,minHeight:"120px"},children:t.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer transition-colors",onClick:m=>{m.stopPropagation(),f()},children:[l.jsx(So,{className:"h-8 w-8 text-gray-300"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Haz clic o arrastra una imagen"})]}):t.map(m=>l.jsx("div",{className:"absolute inset-0",onClick:v=>v.stopPropagation(),children:m.type==="image"?l.jsx(ec,{element:m,isSelected:r===m.id,onSelect:()=>n(m.id,e),onUpdate:v=>i(m.id,v),onDelete:()=>o(m.id),availableMasks:s,workspaceSize:d}):l.jsx(tc,{element:m,workspaceSize:d,isSelected:r===m.id,onSelect:()=>n(m.id,e),onUpdate:v=>i(m.id,v),onDelete:()=>o(m.id)})},m.id))})}function If({currentLayoutId:e,onLayoutChange:t}){const[r,n]=x.useState("all"),a={all:{name:"Todos",layouts:ke},hero:{name:"Hero",layouts:ke.filter(i=>i.category==="hero")},editorial:{name:"Editorial",layouts:ke.filter(i=>i.category==="editorial")},storytelling:{name:"Historia",layouts:ke.filter(i=>i.category==="storytelling")},minimal:{name:"Minimal",layouts:ke.filter(i=>i.category==="minimal")},creative:{name:"Creativo",layouts:ke.filter(i=>i.category==="creative")},classic:{name:"Clásico",layouts:ke.filter(i=>i.category==="classic")}};return Object.keys(a).filter(i=>i==="all"||a[i].layouts.length>0),l.jsxs("div",{className:"w-full",children:[l.jsx("div",{className:"grid grid-cols-2  gap-3 max-h-96 overflow-y-auto overflow-x-hidden custom-scroll",children:a[r].layouts.map(i=>l.jsxs("div",{className:`relative group cursor-pointer transition-all duration-200 
                                 hover:shadow-md hover:scale-102
                        `,onClick:()=>t(i.id),children:[l.jsxs("div",{className:"aspect-square relative bg-white rounded-lg p-2 border border-gray-200",children:[l.jsx("div",{className:`w-full h-full grid ${i.template}`,style:{gap:"2px",padding:"4px"},children:Array.from({length:i.cells}).map((o,s)=>{var d,p;return l.jsx("div",{className:`bg-gradient-to-br from-purple-100 to-purple-200 ${(p=(d=i.cellStyles)==null?void 0:d[s])!=null&&p.includes("rounded")?"rounded":"rounded-sm"}`,style:{minHeight:"8px"}},s)})}),e===i.id&&l.jsx("div",{className:"absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2 w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),l.jsxs("div",{className:"mt-2 text-center",children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 truncate",children:i.name}),i.description&&l.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:i.description}),l.jsx("div",{className:"flex items-center justify-center mt-1 space-x-2",children:l.jsxs("span",{className:"text-xs text-gray-400",children:[i.cells," ",i.cells===1?"celda":"celdas"]})})]})]},i.id))}),a[r].layouts.length===0&&l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No hay layouts disponibles en esta categoría."})})]})}const Nf=({filters:e={},onFilterChange:t,selectedElement:r})=>{const[n,a]=x.useState("basic"),[i,o]=x.useState({basic:!0,color:!0,transform:!1,advanced:!1}),s=c=>{o(f=>({...f,[c]:!f[c]}))},d={brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal",flipHorizontal:!1,flipVertical:!1,...e},p=(c,f)=>{const h={...d,[c]:f};t(h)},g=()=>{t({brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal",flipHorizontal:!1,flipVertical:!1})},u=[{id:"basic",label:"Básico",icon:_o},...(r==null?void 0:r.type)==="image"?[{id:"presets",label:"Presets",icon:Ha}]:[],{id:"advanced",label:"Avanzado",icon:Ko}];return x.useEffect(()=>{n==="presets"&&(r==null?void 0:r.type)!=="image"&&a("basic")},[r==null?void 0:r.type,n]),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:u.map(c=>{const f=c.icon;return l.jsxs("button",{onClick:()=>a(c.id),className:`flex-1 flex items-center justify-center gap-1 py-2 px-3 rounded-md text-xs font-medium transition-colors ${n===c.id?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[l.jsx(f,{className:"h-3.5 w-3.5"}),c.label]},c.id)})}),"            ",l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-800",children:[n==="basic"&&"Controles básicos",n==="presets"&&"Filtros predefinidos",n==="advanced"&&"Configuración avanzada"]}),r&&l.jsxs("span",{className:"text-xs text-gray-500",children:[r.type==="image"?"Imagen":"Texto"," seleccionado"]})]}),l.jsx(he,{variant:"ghost",size:"sm",onClick:g,className:"text-xs",icon:l.jsx(Ga,{className:"h-3 w-3"}),children:"Reset"})]}),l.jsxs("div",{className:"space-y-4",children:[n==="basic"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ajustes básicos"}),l.jsx("button",{onClick:()=>s("basic"),className:"text-gray-400 hover:text-gray-600",children:i.basic?l.jsx(yr,{className:"h-4 w-4"}):l.jsx(Jt,{className:"h-4 w-4"})})]}),i.basic&&l.jsxs("div",{className:"space-y-3",children:[l.jsx(He,{label:"Brillo",value:d.brightness,onChange:c=>p("brightness",c),min:0,max:200,step:1,unit:"%"}),l.jsx(He,{label:"Contraste",value:d.contrast,onChange:c=>p("contrast",c),min:0,max:200,step:1,unit:"%"}),l.jsx(He,{label:"Saturación",value:d.saturation,onChange:c=>p("saturation",c),min:0,max:200,step:1,unit:"%"}),l.jsx(He,{label:"Opacidad",value:d.opacity,onChange:c=>p("opacity",c),min:0,max:100,step:1,unit:"%"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Color"}),l.jsx("button",{onClick:()=>s("color"),className:"text-gray-400 hover:text-gray-600",children:i.color?l.jsx(yr,{className:"h-4 w-4"}):l.jsx(Jt,{className:"h-4 w-4"})})]}),i.color&&l.jsxs("div",{className:"space-y-3",children:[l.jsx(He,{label:"Matiz",value:d.hue,onChange:c=>p("hue",c),min:-180,max:180,step:1,unit:"°"}),l.jsx(He,{label:"Tinte sepia",value:d.tint,onChange:c=>p("tint",c),min:0,max:100,step:1,unit:"%"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Transformar"}),l.jsx("button",{onClick:()=>s("transform"),className:"text-gray-400 hover:text-gray-600",children:i.transform?l.jsx(yr,{className:"h-4 w-4"}):l.jsx(Jt,{className:"h-4 w-4"})})]}),i.transform&&l.jsxs("div",{className:"space-y-3",children:[l.jsx(He,{label:"Escala",value:d.scale,onChange:c=>p("scale",c),min:.1,max:3,step:.1,unit:"x"}),l.jsx(He,{label:"Rotación",value:d.rotate,onChange:c=>p("rotate",c),min:-180,max:180,step:1,unit:"°"}),l.jsx(He,{label:"Desenfoque",value:d.blur,onChange:c=>p("blur",c),min:0,max:20,step:.5,unit:"px"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(he,{variant:d.flipHorizontal?"default":"outline",size:"sm",onClick:()=>p("flipHorizontal",!d.flipHorizontal),className:"text-xs",children:"Voltear H"}),l.jsx(he,{variant:d.flipVertical?"default":"outline",size:"sm",onClick:()=>p("flipVertical",!d.flipVertical),className:"text-xs",children:"Voltear V"})]})]})]})]}),"                ",n==="presets"&&l.jsx(is,{onSelectPreset:c=>{t({...d,...c})},selectedImage:r||null}),"                ",n==="advanced"&&l.jsx(os,{filters:d,onFilterChange:t,selectedElement:r})]})]})},Ef=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],Pf=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],Tf=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],Of=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],jf=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],Rf=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],Mf=({element:e,onUpdate:t,onClose:r})=>{var Se,oe,Ie,Oe,me,je,Re,Ee,Pe,ye,ue,ge,M,K,fe,pe,le,Te,be,I,G,Q,ee,_,xe,we,ne,Ve,Ze,mt,bt,xt,yt,wt,Dt,Ct,St,It,D,C,O;const[n,a]=x.useState(!1),[i,o]=x.useState(!1),[s,d]=x.useState(!1),[p,g]=x.useState(!1),[u,c]=x.useState(!1),[f,h]=x.useState(!1),[m,v]=x.useState(!1),[y,w]=x.useState(!1),[S,E]=x.useState("basic"),[k,A]=x.useState(((Se=e==null?void 0:e.style)==null?void 0:Se.color)||"#000000"),[q,U]=x.useState(((oe=e==null?void 0:e.style)==null?void 0:oe.backgroundColor)||"transparent"),R=x.useRef(null),B=x.useRef(null),F=x.useRef(null),te=x.useRef(null),P=x.useRef(null),J=x.useRef(null),ie=x.useRef(null);x.useEffect(()=>{function b(N){R.current&&!R.current.contains(N.target)&&a(!1),B.current&&!B.current.contains(N.target)&&o(!1),F.current&&!F.current.contains(N.target)&&g(!1),te.current&&!te.current.contains(N.target)&&c(!1),P.current&&!P.current.contains(N.target)&&h(!1),J.current&&!J.current.contains(N.target)&&d(!1),ie.current&&!ie.current.contains(N.target)&&v(!1)}return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]);const j=(b,N)=>{t({style:{...e==null?void 0:e.style,[b]:N}})},se=(b,N,H)=>{var W;t({style:{...e==null?void 0:e.style,[b]:((W=e==null?void 0:e.style)==null?void 0:W[b])===N?H:N}})},ve=(b,N)=>{j(b,N)};if(!e)return null;const X=({active:b,onClick:N,icon:H,title:W,className:$=""})=>l.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${b?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${$}`,onClick:N,title:W,children:H}),de=({onClick:b,icon:N,text:H,isOpen:W,title:$})=>l.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${W?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:b,title:$,children:[N&&l.jsx("span",{className:"flex-shrink-0",children:N}),H&&l.jsx("span",{className:"text-sm truncate",children:H}),l.jsx(Jt,{className:"h-3.5 w-3.5 opacity-70"})]});return l.jsx("div",{className:"  bg-white  rounded-lg shadow-sm p-4  border-gray-200  z-50 transition-all duration-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto p-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[l.jsx(nt,{className:"h-4 w-4"}),"Formato de texto"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>w(!y),title:y?"Modo compacto":"Modo expandido",children:y?l.jsx(Uo,{className:"h-4 w-4"}):l.jsx(qo,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:r,title:"Cerrar",children:l.jsx(Io,{className:"h-4 w-4"})})]})]}),y&&l.jsxs("div",{className:"flex border-b mb-2",children:[l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${S==="basic"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>E("basic"),children:"Básico"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${S==="paragraph"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>E("paragraph"),children:"Párrafo"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${S==="advanced"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>E("advanced"),children:"Avanzado"})]}),(S==="basic"||!y)&&l.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[l.jsx("div",{className:"relative",ref:F,children:l.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((Ie=e.style)==null?void 0:Ie.fontFamily)||"Arial",onChange:b=>{j("fontFamily",b.target.value)},children:Ef.map(b=>l.jsx("option",{value:b.value,style:{fontFamily:b.value},children:b.name},b.value))})}),l.jsxs("div",{className:"relative",ref:te,children:[l.jsx(de,{onClick:()=>c(!u),text:((Oe=e.style)==null?void 0:Oe.fontSize)||"16px",isOpen:u,title:"Tamaño de fuente"}),u&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:Pf.map(b=>l.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{j("fontSize",b),c(!1)},children:b},b))})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((me=e.style)==null?void 0:me.fontWeight)==="bold",onClick:()=>se("fontWeight","bold","normal"),icon:l.jsx(Oo,{className:"h-4 w-4"}),title:"Negrita"}),l.jsx(X,{active:((je=e.style)==null?void 0:je.fontStyle)==="italic",onClick:()=>se("fontStyle","italic","normal"),icon:l.jsx(zo,{className:"h-4 w-4"}),title:"Cursiva"}),l.jsx(X,{active:((Re=e.style)==null?void 0:Re.textDecoration)==="underline",onClick:()=>se("textDecoration","underline","none"),icon:l.jsx(rs,{className:"h-4 w-4"}),title:"Subrayado"}),l.jsx(X,{active:((Ee=e.style)==null?void 0:Ee.textDecoration)==="line-through",onClick:()=>se("textDecoration","line-through","none"),icon:l.jsx(Zo,{className:"h-4 w-4"}),title:"Tachado"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((Pe=e.style)==null?void 0:Pe.textAlign)==="left",onClick:()=>j("textAlign","left"),icon:l.jsx(Po,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),l.jsx(X,{active:((ye=e.style)==null?void 0:ye.textAlign)==="center",onClick:()=>j("textAlign","center"),icon:l.jsx(No,{className:"h-4 w-4"}),title:"Centrar"}),l.jsx(X,{active:((ue=e.style)==null?void 0:ue.textAlign)==="right",onClick:()=>j("textAlign","right"),icon:l.jsx(To,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),l.jsx(X,{active:((ge=e.style)==null?void 0:ge.textAlign)==="justify",onClick:()=>j("textAlign","justify"),icon:l.jsx(Eo,{className:"h-4 w-4"}),title:"Justificar"})]}),l.jsxs("div",{className:"relative",ref:R,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:k}}),l.jsx(Ha,{className:"h-4 w-4"})]}),n&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:k}})]}),l.jsx("input",{type:"color",value:k,onChange:b=>{A(b.target.value),j("color",b.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),l.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:Of.map(b=>l.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${k===b.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:b.color},onClick:()=>{A(b.color),j("color",b.color)},title:b.name},b.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:B,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>o(!i),title:"Color de fondo",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:q,backgroundImage:q==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),l.jsx(Vo,{className:"h-4 w-4"})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:q,backgroundImage:q==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),l.jsx("input",{type:"color",value:q==="transparent"?"#ffffff":q,onChange:b=>{U(b.target.value),j("backgroundColor",b.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:jf.map(b=>l.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${q===b.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:b.color,backgroundImage:b.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{U(b.color),j("backgroundColor",b.color)},title:b.name},b.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:P,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>h(!f),title:"Transformación de texto",children:l.jsx(jo,{className:"h-4 w-4"})}),f&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:Tf.map(b=>{var N;return l.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((N=e.style)==null?void 0:N.textTransform)===b.value?"bg-gray-100":""}`,style:{textTransform:b.value},onClick:()=>{j("textTransform",b.value),h(!1)},children:b.label},b.value)})})]}),l.jsxs("div",{className:"relative",ref:ie,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>v(!m),title:"Encabezados",children:l.jsx(nt,{className:"h-4 w-4"})}),m&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{j("fontSize","32px"),j("fontWeight","bold"),v(!1)},children:[l.jsx(Ao,{className:"h-4 w-4"})," ","Encabezado 1"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{j("fontSize","24px"),j("fontWeight","bold"),v(!1)},children:[l.jsx(ko,{className:"h-4 w-4"})," ","Encabezado 2"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{j("fontSize","20px"),j("fontWeight","bold"),v(!1)},children:[l.jsx(Bo,{className:"h-4 w-4"})," ","Encabezado 3"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{j("fontSize","16px"),j("fontWeight","bold"),v(!1)},children:[l.jsx(Lo,{className:"h-4 w-4"})," ","Encabezado 4"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{j("fontSize","16px"),j("fontWeight","normal"),v(!1)},children:[l.jsx(nt,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((M=e.style)==null?void 0:M.verticalAlign)==="super",onClick:()=>se("verticalAlign","super","baseline"),icon:l.jsx(ts,{className:"h-4 w-4"}),title:"Superíndice"}),l.jsx(X,{active:((K=e.style)==null?void 0:K.verticalAlign)==="sub",onClick:()=>se("verticalAlign","sub","baseline"),icon:l.jsx(es,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),y&&S==="paragraph"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((fe=e.style)==null?void 0:fe.listStyleType)==="disc",onClick:()=>{var b;return j("listStyleType",((b=e.style)==null?void 0:b.listStyleType)==="disc"?"none":"disc")},icon:l.jsx(Wo,{className:"h-4 w-4"}),title:"Lista con viñetas"}),l.jsx(X,{active:((pe=e.style)==null?void 0:pe.listStyleType)==="decimal",onClick:()=>{var b;return j("listStyleType",((b=e.style)==null?void 0:b.listStyleType)==="decimal"?"none":"decimal")},icon:l.jsx(Go,{className:"h-4 w-4"}),title:"Lista numerada"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{onClick:()=>{var N;const b=Number.parseInt(((N=e.style)==null?void 0:N.textIndent)||"0");j("textIndent",`${b+20}px`)},icon:l.jsx(Ho,{className:"h-4 w-4"}),title:"Aumentar sangría"}),l.jsx(X,{onClick:()=>{var N;const b=Number.parseInt(((N=e.style)==null?void 0:N.textIndent)||"0");b>=20&&j("textIndent",`${b-20}px`)},icon:l.jsx($o,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Hn,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((le=e.style)==null?void 0:le.lineHeight)||"1.5"),onChange:b=>ve("lineHeight",b.target.value),className:"w-24"}),l.jsx(Fr,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((Te=e.style)==null?void 0:Te.lineHeight)||"1.5"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Hn,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((be=e.style)==null?void 0:be.letterSpacing)||"0"),onChange:b=>ve("letterSpacing",`${b.target.value}px`),className:"w-24"}),l.jsx(Fr,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((I=e.style)==null?void 0:I.letterSpacing)||"0px"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((G=e.style)==null?void 0:G.fontStyle)==="italic"&&((Q=e.style)==null?void 0:Q.paddingLeft)==="20px"&&((ee=e.style)==null?void 0:ee.borderLeft)==="4px solid #ccc",onClick:()=>{var b,N,H;((b=e.style)==null?void 0:b.fontStyle)==="italic"&&((N=e.style)==null?void 0:N.paddingLeft)==="20px"&&((H=e.style)==null?void 0:H.borderLeft)==="4px solid #ccc"?(j("fontStyle","normal"),j("paddingLeft","0"),j("borderLeft","none")):(j("fontStyle","italic"),j("paddingLeft","20px"),j("borderLeft","4px solid #ccc"))},icon:l.jsx(Yo,{className:"h-4 w-4"}),title:"Formato de cita"}),l.jsx(X,{active:((_=e.style)==null?void 0:_.fontFamily)==="'Courier New', monospace"&&((xe=e.style)==null?void 0:xe.backgroundColor)==="#f5f5f5"&&((we=e.style)==null?void 0:we.padding)==="2px 4px",onClick:()=>{var b,N;((b=e.style)==null?void 0:b.fontFamily)==="'Courier New', monospace"&&((N=e.style)==null?void 0:N.backgroundColor)==="#f5f5f5"?(j("fontFamily","Arial, sans-serif"),j("backgroundColor","transparent"),j("padding","0")):(j("fontFamily","'Courier New', monospace"),j("backgroundColor","#f5f5f5"),j("padding","2px 4px"))},icon:l.jsx(Ro,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),y&&S==="advanced"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"relative",ref:J,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>d(!s),title:"Opciones de borde",children:[l.jsx(Qo,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Bordes"})]}),s&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),l.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((ne=e.style)==null?void 0:ne.borderStyle)||"none",onChange:b=>j("borderStyle",b.target.value),children:Rf.map(b=>l.jsx("option",{value:b.value,children:b.label},b.value))})]}),((Ve=e.style)==null?void 0:Ve.borderStyle)&&((Ze=e.style)==null?void 0:Ze.borderStyle)!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((mt=e.style)==null?void 0:mt.borderWidth)||"1"),onChange:b=>j("borderWidth",`${b.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((bt=e.style)==null?void 0:bt.borderWidth)||"1px"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:((xt=e.style)==null?void 0:xt.borderColor)||"#000000",onChange:b=>j("borderColor",b.target.value),className:"w-8 h-8"}),l.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(b=>l.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:b},onClick:()=>j("borderColor",b)},b))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((yt=e.style)==null?void 0:yt.borderRadius)||"0"),onChange:b=>j("borderRadius",`${b.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((wt=e.style)==null?void 0:wt.borderRadius)||"0px"})]})]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),l.jsx("button",{className:`px-2 py-1 text-xs rounded ${(Dt=e.style)!=null&&Dt.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var b;(b=e.style)!=null&&b.textShadow?j("textShadow",""):j("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(Ct=e.style)!=null&&Ct.textShadow?"Quitar":"Añadir"}),((St=e.style)==null?void 0:St.textShadow)&&l.jsxs("select",{className:"text-xs p-1 border rounded",value:(It=e.style)==null?void 0:It.textShadow,onChange:b=>j("textShadow",b.target.value),children:[l.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),l.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),l.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),l.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),l.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((D=e.style)==null?void 0:D.opacity)||"1"),onChange:b=>ve("opacity",b.target.value),className:"w-24"})}),l.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((C=e.style)==null?void 0:C.opacity)||"1")*100),"%"]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((O=e.style)==null?void 0:O.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var b;((b=e.style)==null?void 0:b.backgroundColor)==="#ffff00"?j("backgroundColor","transparent"):j("backgroundColor","#ffff00")},title:"Resaltar texto",children:[l.jsx(Fo,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[l.jsx(X,{onClick:()=>{alert("Función deshacer (implementar)")},icon:l.jsx(Ga,{className:"h-4 w-4"}),title:"Deshacer"}),l.jsx(X,{onClick:()=>{alert("Función rehacer (implementar)")},icon:l.jsx(Wa,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},$a=({currentSize:e,onSizeChange:t,presetData:r,workspaceDimensions:n})=>((()=>{if(r!=null&&r.canvas_config){const i=typeof r.canvas_config=="string"?JSON.parse(r.canvas_config):r.canvas_config;let o=i.width,s=i.height;return{width:o,height:s,unit:"cm"}}return null})(),l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:n&&l.jsxs("div",{className:"text-xs text-gray-500 ml-2",children:[l.jsxs("div",{children:["Actual: ",n.width,"x",n.height," px"]}),n.originalWidth&&l.jsxs("div",{children:["Original: ",n.originalWidth,"x",n.originalHeight," cm"]}),n.originalWidthPx&&l.jsxs("div",{children:["Original en px: ",n.originalWidthPx,"x",n.originalHeightPx," px"]}),n.scale&&n.scale<1&&l.jsxs("div",{children:["Escala: ",Math.round(n.scale*100),"%"]})]})}));function nh({albumId:e,itemId:t,presetId:r,pages:n}){var Ze,mt,bt,xt,yt,wt,Dt,Ct,St,It;const[a,i]=x.useState(null),[o,s]=x.useState(null),[d,p]=x.useState(!0),[g,u]=x.useState(null),[c,f]=x.useState([]),[h,m]=x.useState(0),[v,y]=x.useState(null),[w,S]=x.useState(null),[E,k]=x.useState("elements"),[A,q]=x.useState("basic"),[U,R]=x.useState([JSON.stringify(c)]),[B,F]=x.useState(0),[te,P]=x.useState(!1),[J,ie]=x.useState(null),[j,se]=x.useState({}),[ve,X]=x.useState(!1),[de,Se]=x.useState({elementId:null,cellId:null}),[oe,Ie]=x.useState(!1),Oe=()=>{if(e&&t&&r)return{albumId:e,itemId:t,presetId:r,pages:n||20};const D=new URLSearchParams(window.location.search);return{albumId:D.get("album"),itemId:D.get("item"),presetId:D.get("preset"),pages:parseInt(D.get("pages"))||20}},me=async()=>{try{p(!0),u(null);const D=Oe();if(console.log("🔍 Editor params:",D),!D.albumId||!D.presetId)throw new Error("Faltan parámetros requeridos: albumId y presetId");const C=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",O=`${C}/api/albums/${D.albumId}`,b=`${C}/api/item-presets/${D.presetId}`;console.log("🌐 Using endpoints:",{albumEndpoint:O,presetEndpoint:b,baseUrl:C}),console.log("📚 Cargando álbum...");const N=await fetch(O,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("📚 Album response status:",N.status),!N.ok){const qe=await N.text();throw console.error("❌ Album response error:",qe),new Error(`Error al cargar álbum: ${N.status} ${N.statusText}`)}const H=await N.json();console.log("✅ Album response data:",H);const W=H.data||H;console.log("📚 Album loaded:",W),i(W),console.log("🎨 Cargando preset...");const $=await fetch(b,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("🎨 Preset response status:",$.status),!$.ok){const qe=await $.text();throw console.error("❌ Preset response error:",qe),new Error(`Error al cargar preset: ${$.status} ${$.statusText}`)}const ce=await $.json();console.log("✅ Preset response data:",ce);const Ye=ce.data||ce;console.log("🎨 Preset loaded:",Ye),s(Ye),console.log("📄 Creando páginas..."),await je(Ye,W,D.pages)}catch(D){console.error("💥 Error loading album data:",D),u(D.message)}finally{p(!1)}},je=(D,C,O)=>{try{console.log("Creating pages from preset:",D),console.log("Album data:",C),console.log("Total pages requested:",O);const b=[];if(!D.cover_image||!D.content_layer_image||!D.final_layer_image)throw new Error("El preset no tiene todas las imágenes requeridas");const N=$=>$.startsWith("http")||$.startsWith("/storage/")?$:`/storage/${$}`;console.log(D);const H={id:"page-cover",type:"cover",layout:"layout-1",cells:[{id:"cell-cover-1",elements:[{id:"cover-base",type:"image",content:`/storage/images/item_preset/${D.cover_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0},...C.cover_image_path?[{id:"cover-custom",type:"image",content:`/storage/images/albums/covers/${C.cover_image_path}`,position:{x:10,y:10},size:{width:80,height:80},filters:{},mask:"none",zIndex:2}]:[]]}]};b.push(H);for(let $=1;$<=O;$++){const ce={id:`page-content-${$}`,type:"content",pageNumber:$,layout:"layout-1",cells:[{id:`cell-content-${$}-1`,elements:[{id:`content-base-${$}`,type:"image",content:`/storage/images/item_preset/${D.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};b.push(ce)}const W={id:"page-final",type:"final",layout:"layout-1",cells:[{id:"cell-final-1",elements:[{id:"final-base",type:"image",content:`/storage/images/item_preset/${D.final_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};b.push(W),console.log("✅ Created pages:",b),f(b),m(0),D.canvas_config&&(console.log("📐 Canvas config found, setting workspace to preset dimensions"),xe("preset"))}catch(b){throw console.error("❌ Error creating pages:",b),b}};x.useEffect(()=>{me()},[]);const Re=()=>{if(c.length===0)return"Cargando...";const D=c[h];if(!D)return"Página";switch(D.type){case"cover":return"Portada";case"content":return`Página ${D.pageNumber}`;case"final":return"Contraportada";default:return`Página ${h+1}`}},Ee=()=>{if(c.length===0)return!1;const D=c[h];return(D==null?void 0:D.type)==="content"},Pe=x.useCallback(()=>{if(!v||!w||c.length===0)return null;const D=c[h];if(!D)return null;const C=D.cells.find(O=>O.id===w);return C?C.elements.find(O=>O.id===v):null},[v,w,c,h]),ye=(D,C)=>{if(C){const O=c[h].cells.find(N=>N.id===C),b=O==null?void 0:O.elements.find(N=>N.id===D);if(b!=null&&b.locked){console.log("Elemento bloqueado, no se puede seleccionar");const N=document.createElement("div");N.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",N.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(N),setTimeout(()=>{document.body.contains(N)&&document.body.removeChild(N)},3e3);return}}if(C&&S(C),y(D),D){const O=c[h].cells.find(N=>N.id===(C||w)),b=O==null?void 0:O.elements.find(N=>N.id===D);(b==null?void 0:b.type)==="image"?(ie(b),console.log(J)):(b==null?void 0:b.type)==="text"?(X(!0),Se({elementId:D,cellId:C||w})):X(!1)}else X(!1),ie(null)},ue=()=>{if(c.length===0)return ke[0];const D=c[h];return D&&ke.find(C=>C.id===D.layout)||ke[0]},ge=D=>{f(D);const C=[...U.slice(0,B+1),JSON.stringify(D)];R(C),F(C.length-1)},M=D=>{const C=ke.find(H=>H.id===D);if(!C)return;const O=[...c],b=O[h],N=Array.from({length:C.cells}).map((H,W)=>b.cells[W]||{id:`cell-${b.id}-${W+1}`,elements:[]});O[h]={...b,layout:D,cells:N},ge(O),y(null),S(null)},K=()=>{if(!o)return;const D=c.filter(ce=>ce.type==="content"),O=(D.length>0?Math.max(...D.map(ce=>ce.pageNumber)):0)+1,b=`page-content-${O}`,N={id:b,type:"content",pageNumber:O,layout:"layout-1",cells:[{id:`cell-content-${O}-1`,elements:[{id:`content-base-${O}`,type:"image",content:`/storage/${o.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]},H=[...c],W=H.findIndex(ce=>ce.type==="final");W>-1?H.splice(W,0,N):H.push(N),ge(H);const $=H.findIndex(ce=>ce.id===b);m($)},fe=()=>{if(c.length<=3)return;const D=c[h];if(D.type==="cover"||D.type==="final"){console.log("No se puede eliminar la portada o contraportada");return}if(!confirm(`¿Estás seguro de eliminar la ${D.type==="content"?`página ${D.pageNumber}`:"página"}?`))return;const C=c.filter((O,b)=>b!==h);ge(C),m(Math.min(h,C.length-1))},pe=()=>{const D=c[h];if(D.type!=="content"){console.log("Solo se pueden duplicar páginas de contenido");return}const O=Math.max(...c.filter($=>$.type==="content").map($=>$.pageNumber))+1,b={...JSON.parse(JSON.stringify(D)),id:`page-content-${O}`,pageNumber:O,cells:D.cells.map($=>({...$,id:`cell-content-${O}-${$.id.split("-").pop()}`,elements:$.elements.map(ce=>({...ce,id:`${ce.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}))},N=[...c],H=N.findIndex($=>$.type==="final");H>-1?N.splice(H,0,b):N.push(b),ge(N);const W=N.findIndex($=>$.id===b.id);m(W)},le=(D,C)=>{const O=[...c],b=O[h].cells.findIndex(N=>N.id===D);b!==-1&&(O[h].cells[b].elements.push(C),ge(O),y(C.id),S(D))},Te=(D,C,O,b=!1)=>{const N=[...c],H=N[h].cells.findIndex(W=>W.id===D);if(H!==-1){if(b)N[h].cells[H].elements.push({...N[h].cells[H].elements.find(W=>W.id===C),...O});else{const W=N[h].cells[H].elements.findIndex($=>$.id===C);W!==-1&&(N[h].cells[H].elements[W]={...N[h].cells[H].elements[W],...O})}ge(N)}},be=(D,C)=>{const O=[...c],b=O[h].cells.findIndex(N=>N.id===D);b!==-1&&(O[h].cells[b].elements=O[h].cells[b].elements.filter(N=>N.id!==C),ge(O),v===C&&y(null))},I=()=>{B>0&&(F(B-1),f(JSON.parse(U[B-1])),y(null),S(null))},G=()=>{B<U.length-1&&(F(B+1),f(JSON.parse(U[B+1])),y(null),S(null))},Q=()=>{P(!te)},ee=()=>{const C={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:.05,y:.05},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};w?le(w,C):console.log("Selecciona una celda primero")},[_,xe]=x.useState("preset"),we=()=>{if(o!=null&&o.canvas_config){const $=typeof o.canvas_config=="string"?JSON.parse(o.canvas_config):o.canvas_config;let ce=$.width,Ye=$.height,qe=ce*37.8,et=Ye*37.8;if(qe&&et){const Ht=window.innerWidth*.6,zt=window.innerHeight*.7,Gt=Ht/qe,Wt=zt/et,ot=Math.min(Gt,Wt,1);return{width:Math.round(qe*ot),height:Math.round(et*ot),originalWidth:ce,originalHeight:Ye,scale:ot,unit:"cm",originalWidthPx:Math.round(qe),originalHeightPx:Math.round(et)}}}const D={square:{width:600,height:600},landscape:{width:1280,height:720},portrait:{width:600,height:800},wide:{width:1200,height:600},tall:{width:540,height:960},preset:{width:800,height:600}},C=D[_]||D.preset,O=window.innerWidth*.6,b=window.innerHeight*.7,N=O/C.width,H=b/C.height,W=Math.min(N,H,1);return{width:Math.round(C.width*W),height:Math.round(C.height*W),originalWidth:C.width,originalHeight:C.height,scale:W,unit:"px"}},[ne,Ve]=x.useState({width:800,height:600});return x.useEffect(()=>{const D=we();Ve(D)},[o,_]),x.useEffect(()=>{const D=()=>{const C=we();Ve(C)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[o,_]),x.useEffect(()=>{const D=async()=>{const O={};await Promise.all(c.map(async(b,N)=>{const H=document.getElementById(`page-${b.id}`);if(H)try{const W=await Do(H,{scale:.2,logging:!1,useCORS:!0,allowTaint:!0,ignoreElements:$=>$.classList.contains("ignore-thumbnail")});O[b.id]=W.toDataURL()}catch(W){console.error("Error generating thumbnail:",W),O[b.id]=null}})),se({...j,...O})},C=setTimeout(()=>{D()},500);return()=>clearTimeout(C)},[c,h]),l.jsx(Sl,{backend:Df,children:d?l.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cargando Editor"}),l.jsx("p",{className:"text-gray-600",children:"Preparando tu álbum personalizado..."})]})}):c.length===0||g?l.jsx("div",{className:"h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-4",children:g||"No se pudieron cargar los datos del álbum."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),l.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Volver"})]})]})}):l.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-gray-50",children:[l.jsx(wo,{isOpen:oe,onRequestClose:()=>Ie(!1),pages:c.map(D=>({...D,layout:ke.find(C=>C.id===D.layout)||ke[0]}))}),l.jsxs("header",{className:"fixed top-0 left-0 right-0 h-14 border-b bg-white flex items-center justify-between px-4 z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(he,{variant:"ghost",size:"sm",children:[l.jsx(zn,{className:"h-5 w-5 mr-1"}),"Regresar"]}),l.jsxs("div",{className:"ml-4 truncate",children:[l.jsx("h1",{className:"text-sm font-semibold text-gray-800 truncate",children:(a==null?void 0:a.title)||"Álbum Sin Título"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("p",{className:"text-xs text-gray-600",children:[Re()," ",c.length>0&&`• ${c.length} páginas total`]}),c.length>0&&l.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${Ee()?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:Ee()?"✏️ Editable":"🔒 Solo vista"})]})]})]}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx(he,{variant:"secondary",size:"sm",onClick:Q,icon:l.jsx(Wn,{className:"h-4 w-4"}),children:te?"Editar":"Vista previa"}),l.jsx(he,{variant:"secondary",size:"sm",onClick:()=>Ie(!0),icon:l.jsx(Gn,{className:"h-4 w-4"}),children:"Vista de Álbum"})]})]}),l.jsxs("div",{className:"flex w-full h-full pt-14",children:[l.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col",children:[l.jsx("div",{className:"p-3 border-b",children:l.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-md",children:[l.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${E==="elements"?"bg-white shadow-sm text-purple-700":"text-gray-600 hover:bg-white/50"}`,onClick:()=>k("elements"),children:"Elementos"}),l.jsx("button",{className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${E==="filters"?"bg-white shadow-sm text-purple-700":"text-gray-600 hover:bg-white/50"}`,onClick:()=>k("filters"),children:"Filtros"})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:[E==="elements"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-xs uppercase text-gray-500 mb-2",children:"Layouts"}),l.jsx(If,{currentLayoutId:(Ze=c[h])==null?void 0:Ze.layout,onLayoutChange:M})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-xs uppercase text-gray-500 mb-2",children:"Herramientas rápidas"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(he,{variant:"outline",size:"sm",onClick:()=>{const D=document.createElement("input");D.type="file",D.accept="image/*",D.onchange=C=>{if(C.target.files&&C.target.files[0]){const b={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},N=new FileReader;N.onload=H=>{var W;(W=H.target)!=null&&W.result&&(b.content=H.target.result,le(w||c[h].cells[0].id,b))},N.readAsDataURL(C.target.files[0])}},D.click()},className:"justify-start",icon:l.jsx(Tt,{className:"h-4 w-4"}),children:"Imagen"}),l.jsx(he,{variant:"outline",size:"sm",onClick:ee,className:"justify-start",icon:l.jsx(nt,{className:"h-4 w-4"}),children:"Texto"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-xs uppercase text-gray-500 mb-2",children:"Capas"}),l.jsx(Cf,{elements:((mt=c[h].cells.find(D=>D.id===w))==null?void 0:mt.elements)||[],onReorder:D=>{const C=[...c],O=C[h].cells.findIndex(b=>b.id===w);O!==-1&&(C[h].cells[O].elements=D,ge(C))},onSelect:ye,selectedElement:v})]})]}),E==="filters"&&l.jsx("div",{className:"space-y-4",children:(()=>{const D=Pe();return console.log("🔍 Filter tab - Current element:",D),console.log("🔍 Filter tab - Selected element ID:",v),console.log("🔍 Filter tab - Selected cell ID:",w),D?l.jsxs(l.Fragment,{children:[D.type==="image"&&l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Tt,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"text-sm font-medium",children:"Imagen seleccionada"})]}),l.jsx("div",{className:"w-full h-16 rounded-md overflow-hidden bg-gray-200",children:l.jsx("img",{src:D.content,alt:"",className:"w-full h-full object-cover"})})]}),l.jsx(Nf,{filters:D.filters||{},onFilterChange:C=>{Te(w,v,{filters:C})},selectedElement:D})]}):l.jsxs("div",{className:"text-center py-8 px-2",children:[l.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-3",children:l.jsx(Tt,{className:"h-6 w-6 text-gray-400 mx-auto"})}),l.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Selecciona un elemento"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Para aplicar filtros y efectos, primero selecciona una imagen o texto en el lienzo"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Debug: selectedElement=",v,", selectedCell=",w]})]})})()})]})]}),l.jsxs("main",{className:"flex-1 flex flex-col h-full",children:[l.jsx("div",{className:"bg-white border-b px-4 py-2 flex items-center justify-between",children:ve?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(he,{variant:"ghost",size:"sm",onClick:()=>X(!1),className:"h-8 px-2",icon:l.jsx(zn,{className:"h-4 w-4"}),children:"Volver"}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx(Mf,{element:Pe(),onUpdate:D=>{Te(de.cellId,de.elementId,D)},onClose:()=>X(!1)})}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx($a,{currentSize:_,onSizeChange:xe,presetData:o,workspaceDimensions:ne})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(he,{variant:"ghost",size:"sm",onClick:I,disabled:B<=0,className:"h-8 px-2",icon:l.jsx(ns,{className:"h-4 w-4"}),children:"Deshacer"}),l.jsx(he,{variant:"ghost",size:"sm",onClick:G,disabled:B>=U.length-1,className:"h-8 px-2",icon:l.jsx(Xo,{className:"h-4 w-4"}),children:"Rehacer"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(he,{variant:"ghost",size:"sm",onClick:()=>{const D=document.createElement("input");D.type="file",D.accept="image/*",D.onchange=C=>{if(C.target.files&&C.target.files[0]){const b={id:`img-${Date.now()}`,type:"image",content:"",position:{x:.1,y:.1},size:{width:.3,height:.3},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},N=new FileReader;N.onload=H=>{var W,$;(W=H.target)!=null&&W.result&&(b.content=H.target.result,w?le(w,b):($=c[h])!=null&&$.cells[0]&&le(c[h].cells[0].id,b))},N.readAsDataURL(C.target.files[0])}},D.click()},className:"h-8 px-2",icon:l.jsx(Tt,{className:"h-4 w-4"}),children:"Imagen"}),l.jsx(he,{variant:"ghost",size:"sm",onClick:ee,className:"h-8 px-2",icon:l.jsx(nt,{className:"h-4 w-4"}),children:"Texto"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),v&&l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(he,{variant:"ghost",size:"sm",onClick:()=>{if(v&&w){const D=Pe();if(D){const C={...D,id:`${D.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,position:{x:D.position.x+.05,y:D.position.y+.05}};le(w,C)}}},className:"h-8 px-2",icon:l.jsx(Zt,{className:"h-4 w-4"}),children:"Duplicar"}),l.jsx(he,{variant:"ghost",size:"sm",onClick:()=>{v&&w&&be(w,v)},className:"h-8 px-2 text-red-600 hover:text-red-700",icon:l.jsx(ct,{className:"h-4 w-4"}),children:"Eliminar"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"text-sm text-gray-600",children:c[h]&&l.jsxs("span",{children:[c[h].type==="cover"&&"Portada",c[h].type==="content"&&`Página ${c[h].pageNumber}`,c[h].type==="final"&&"Contraportada"]})}),l.jsx(he,{variant:te?"default":"ghost",size:"sm",onClick:Q,className:"h-8 px-2",icon:l.jsx(Wn,{className:"h-4 w-4"}),children:te?"Salir vista previa":"Vista previa"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(he,{variant:"ghost",size:"sm",onClick:()=>Ie(!0),className:"h-8 px-2",icon:l.jsx(Gn,{className:"h-4 w-4"}),children:"Previsualizar libro"}),l.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),l.jsx($a,{currentSize:_,onSizeChange:xe,presetData:o,workspaceDimensions:ne})]})]})}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-6 overflow-hidden bg-gray-100",children:te?l.jsx("div",{className:"bg-white rounded-lg shadow-lg",children:l.jsx("div",{className:"overflow-hidden",style:{width:ne.width,height:ne.height},children:l.jsx("div",{id:`page-${c[h].id}`,className:`grid ${ue().template} gap-6`,style:{width:"100%",height:"100%"},children:c[h].cells.map(D=>l.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:D.elements.map(C=>{var O,b,N,H,W,$,ce,Ye,qe,et,Ht,zt,Gt,Wt,ot,Pn,Tn,On,jn,Rn,Mn,An,kn,Bn,Ln;return C.type==="image"?l.jsx("div",{className:`absolute ${((O=Wr.find(vo=>vo.id===C.mask))==null?void 0:O.class)||""}`,style:{left:`${C.position.x}px`,top:`${C.position.y}px`,width:"100%",height:"100%"},children:l.jsx("img",{src:C.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                                                            brightness(${(((b=C.filters)==null?void 0:b.brightness)||100)/100})
                                                                            contrast(${(((N=C.filters)==null?void 0:N.contrast)||100)/100})
                                                                            saturate(${(((H=C.filters)==null?void 0:H.saturation)||100)/100})
                                                                            sepia(${(((W=C.filters)==null?void 0:W.tint)||0)/100})
                                                                            hue-rotate(${((($=C.filters)==null?void 0:$.hue)||0)*3.6}deg)
                                                                            blur(${((ce=C.filters)==null?void 0:ce.blur)||0}px)
                                                                        `,transform:`scale(${((Ye=C.filters)==null?void 0:Ye.scale)||1}) rotate(${((qe=C.filters)==null?void 0:qe.rotate)||0}deg) ${(et=C.filters)!=null&&et.flipHorizontal?"scaleX(-1)":""} ${(Ht=C.filters)!=null&&Ht.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((zt=C.filters)==null?void 0:zt.blendMode)||"normal",opacity:(((Gt=C.filters)==null?void 0:Gt.opacity)||100)/100}})},C.id):l.jsx("div",{className:"absolute",style:{left:`${C.position.x}px`,top:`${C.position.y}px`,fontFamily:(Wt=C.style)==null?void 0:Wt.fontFamily,fontSize:(ot=C.style)==null?void 0:ot.fontSize,fontWeight:(Pn=C.style)==null?void 0:Pn.fontWeight,fontStyle:(Tn=C.style)==null?void 0:Tn.fontStyle,textDecoration:(On=C.style)==null?void 0:On.textDecoration,color:(jn=C.style)==null?void 0:jn.color,textAlign:(Rn=C.style)==null?void 0:Rn.textAlign,backgroundColor:((Mn=C.style)==null?void 0:Mn.backgroundColor)||"transparent",padding:((An=C.style)==null?void 0:An.padding)||"8px",borderRadius:((kn=C.style)==null?void 0:kn.borderRadius)||"0px",border:((Bn=C.style)==null?void 0:Bn.border)||"none",opacity:((Ln=C.style)==null?void 0:Ln.opacity)||1},children:C.content},C.id)})},D.id))})})}):l.jsxs("div",{id:`page-${c[h].id}`,className:"bg-white rounded-lg shadow-xl",style:{width:ne.width,height:ne.height,position:"relative"},children:[(()=>{const D=c[h];let C=null;return D.type==="cover"&&(o!=null&&o.cover_image)?C=o.cover_image.startsWith("http")?o.cover_image:`/storage/images/item_preset/${o.cover_image}`:D.type==="content"&&(o!=null&&o.content_layer_image)?C=o.content_layer_image.startsWith("http")?o.content_layer_image:`/storage/images/item_preset/${o.content_layer_image}`:D.type==="final"&&(o!=null&&o.final_layer_image)&&(C=o.final_layer_image.startsWith("http")?o.final_layer_image:`/storage/images/item_preset/${o.final_layer_image}`),C?l.jsx("img",{src:C,alt:"background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0,pointerEvents:"none"}}):null})(),l.jsx("div",{className:`grid ${ue().template}`,style:{position:"relative",zIndex:1,width:"100%",height:"100%",boxSizing:"border-box",gap:((bt=ue().style)==null?void 0:bt.gap)||"16px",padding:((xt=ue().style)==null?void 0:xt.padding)||"16px"},children:c[h].cells.map(D=>{var C;return l.jsx(Sf,{id:D.id,elements:D.elements.filter(O=>!O.locked),workspaceSize:ne,cellStyle:(C=ue().cellStyles)==null?void 0:C[c[h].cells.indexOf(D)],selectedElement:w===D.id?v:null,onSelectElement:ye,onAddElement:O=>le(D.id,O),onUpdateElement:(O,b,N)=>Te(D.id,O,b,N),onDeleteElement:O=>be(D.id,O),availableMasks:ue().maskCategories.flatMap(O=>O.masks)},D.id)})})]})})]}),l.jsxs("aside",{className:"w-64 bg-white border-l flex flex-col h-full",children:[l.jsxs("div",{className:"p-3 border-b",children:[l.jsx("h3",{className:"font-medium text-xs uppercase text-gray-500",children:"Páginas"}),l.jsx("div",{className:"flex justify-end mt-2",children:l.jsxs("div",{className:"flex gap-1",children:[l.jsx(he,{variant:"ghost",size:"icon",onClick:pe,disabled:((yt=c[h])==null?void 0:yt.type)!=="content",title:((wt=c[h])==null?void 0:wt.type)!=="content"?"Solo se pueden duplicar páginas de contenido":"Duplicar página",className:"h-7 w-7",children:l.jsx(Zt,{className:"h-4 w-4"})}),l.jsx(he,{variant:"ghost",size:"icon",onClick:fe,disabled:c.length<=3||((Dt=c[h])==null?void 0:Dt.type)==="cover"||((Ct=c[h])==null?void 0:Ct.type)==="final",title:((St=c[h])==null?void 0:St.type)==="cover"||((It=c[h])==null?void 0:It.type)==="final"?"No se puede eliminar la portada o contraportada":c.length<=3?"Debe haber al menos una página de contenido":"Eliminar página",className:"h-7 w-7",children:l.jsx(ct,{className:"h-4 w-4"})}),l.jsxs(he,{variant:"outline",size:"sm",onClick:K,className:"flex items-center h-7",children:[l.jsx(Fr,{className:"h-3.5 w-3.5 mr-1"}),l.jsx("span",{className:"text-xs",children:"Nueva página"})]})]})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scroll",children:l.jsx("div",{className:"space-y-3",children:c.map((D,C)=>{let O="Página",b="",N="bg-gray-100";return D.type==="cover"?(O="Portada",b="📖",N="bg-purple-100"):D.type==="content"?(O=`Pág. ${D.pageNumber}`,b="📄",N="bg-blue-100"):D.type==="final"&&(O="Contraportada",b="📚",N="bg-green-100"),l.jsx("div",{className:`flex flex-col cursor-pointer hover:bg-gray-50 rounded-lg transition-colors ${h===C?"ring-2 ring-purple-400":""}`,onClick:()=>m(C),children:l.jsxs("div",{className:`relative ${N} rounded-md overflow-hidden border mb-1 aspect-[4/3]`,children:[l.jsxs("div",{className:"absolute top-1 left-1 right-1 flex justify-between items-start z-10",children:[l.jsxs("span",{className:"text-[10px] bg-white/90 px-1.5 py-0.5 rounded-full font-medium",children:[b," ",O]}),D.type==="content"&&l.jsx("span",{className:"text-[10px] bg-blue-500 text-white px-1.5 py-0.5 rounded-full",children:"Editable"})]}),j[D.id]?l.jsx("img",{src:j[D.id],alt:`Miniatura página ${C+1}`,className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:`grid ${ue().template} gap-0.5 w-full h-full p-1`,children:Array.from({length:ue().cells}).map((H,W)=>l.jsx("div",{className:"bg-gray-200 rounded-sm"},W))})})]})},D.id)})})})]})]})]})})}export{nh as default};

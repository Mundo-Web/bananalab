import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{r as x,R as re}from"./index-BH53Isel.js";import{a as _n,b as No,_ as _t,e as B}from"./objectWithoutPropertiesLoose-G_JZ8CQC.js";import{h as ea}from"./hoist-non-react-statics.cjs-lJxeXavk.js";import{r as Eo,R as Po}from"./index-rimy3MAc.js";import{c as K}from"./createLucideIcon-Cy5Ya80P.js";import{I as Fr,S as To,P as Oo}from"./sparkles-BeGvo0qS.js";import{B as Ro,h as jo}from"./Editor-BOPpn0r-.js";import{e as Ao}from"./index-BSWw-p5k.js";import{T as gt}from"./trash-2-DK1wnsDn.js";import{U as Mo}from"./upload-qgEr5bIl.js";import{X as ko}from"./x-DBMwyD6F.js";import{M as ta}from"./minus-jyhodMPN.js";import{P as $r}from"./plus-Bot15Khs.js";import{C as Bo}from"./chevron-down-DS-mdh9v.js";import{C as Lo}from"./chevron-left-B2s3ZsB7.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./index.es-p8wkj5I3.js";import"./index-Bv81MoWS.js";import"./index-Chjiymov.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=K("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=K("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=K("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=K("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=K("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=K("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=K("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=K("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=K("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=K("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=K("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=K("FlipVertical",[["path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3",key:"14bfxa"}],["path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3",key:"14rx03"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=K("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=K("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=K("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=K("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=K("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=K("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=K("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=K("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=K("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=K("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=K("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=K("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=K("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=K("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=K("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=K("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=K("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=K("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=K("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=K("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=K("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=K("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=K("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=K("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=K("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=K("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function We({children:e,onClick:t,className:r="",variant:n="default",size:a="default",disabled:i=!1,icon:o=null}){const s="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},p={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return l.jsxs("button",{className:`${s} ${c[n]} ${p[a]} ${r} gap-2`,onClick:t,disabled:i,children:[o&&l.jsx("span",{className:"w-4 h-4",children:o}),e]})}const Ve=({value:e=[50],min:t=0,max:r=100,step:n=1,onValueChange:a,label:i,unit:o="%"})=>{const[s,c]=x.useState(e[0]),p=g=>{const d=Number.parseInt(g.target.value);c(d),a&&a([d])};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i}),l.jsxs("span",{className:"text-sm text-gray-500",children:[s,o]})]}),l.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:l.jsx("input",{type:"range",min:t,max:r,step:n,value:s,onChange:p,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},ys=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:105,contrast:115,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],_a=x.createContext({dragDropManager:void 0});function Oe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ra=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),na=function(){return Math.random().toString(36).substring(7).split("").join(".")},aa={INIT:"@@redux/INIT"+na(),REPLACE:"@@redux/REPLACE"+na()};function xs(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Zr(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Oe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Oe(1));return r(Zr)(e,t)}if(typeof e!="function")throw new Error(Oe(2));var a=e,i=t,o=[],s=o,c=!1;function p(){s===o&&(s=o.slice())}function g(){if(c)throw new Error(Oe(3));return i}function d(y){if(typeof y!="function")throw new Error(Oe(4));if(c)throw new Error(Oe(5));var h=!0;return p(),s.push(y),function(){if(h){if(c)throw new Error(Oe(6));h=!1,p();var w=s.indexOf(y);s.splice(w,1),o=null}}}function u(y){if(!xs(y))throw new Error(Oe(7));if(typeof y.type>"u")throw new Error(Oe(8));if(c)throw new Error(Oe(9));try{c=!0,i=a(i,y)}finally{c=!1}for(var h=o=s,m=0;m<h.length;m++){var w=h[m];w()}return y}function f(y){if(typeof y!="function")throw new Error(Oe(10));a=y,u({type:aa.REPLACE})}function v(){var y,h=d;return y={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Oe(11));function C(){w.next&&w.next(g())}C();var I=h(C);return{unsubscribe:I}}},y[ra]=function(){return this},y}return u({type:aa.INIT}),n={dispatch:u,subscribe:d,getState:g,replaceReducer:f},n[ra]=v,n}function ia(e,t){return function(){return t(e.apply(this,arguments))}}function oa(e,t){if(typeof e=="function")return ia(e,t);if(typeof e!="object"||e===null)throw new Error(Oe(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=ia(a,t))}return r}function ei(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function ws(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Oe(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(c){return c(o)});return i=ei.apply(void 0,s)(a.dispatch),_n(_n({},a),{},{dispatch:i})}}}function U(e,t,...r){if(Ds()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Ds(){return typeof process<"u"&&!0}function Ss(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function Cs(e,t){return e.filter(r=>r!==t)}function ti(e){return typeof e=="object"}function Is(e,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function Ns(e,t){return e.filter(r=>t.indexOf(r)>-1)}const _r="dnd-core/INIT_COORDS",cr="dnd-core/BEGIN_DRAG",en="dnd-core/PUBLISH_DRAG_SOURCE",ur="dnd-core/HOVER",dr="dnd-core/DROP",pr="dnd-core/END_DRAG";function sa(e,t){return{type:_r,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const Es={type:_r,payload:{clientOffset:null,sourceClientOffset:null}};function Ps(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,s=e.getMonitor(),c=e.getRegistry();e.dispatch(sa(i)),Ts(r,s,c);const p=js(r,s);if(p==null){e.dispatch(Es);return}let g=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");Os(o),g=o(p)}e.dispatch(sa(i,g));const u=c.getSource(p).beginDrag(s,p);if(u==null)return;Rs(u),c.pinSource(p);const f=c.getSourceType(p);return{type:cr,payload:{itemType:f,item:u,sourceId:p,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!a}}}}function Ts(e,t,r){U(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){U(r.getSource(n),"Expected sourceIds to be registered.")})}function Os(e){U(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Rs(e){U(ti(e),"Item must be an object.")}function js(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function As(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){As(e,a,r[a])})}return e}function ks(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();Bs(n),$s(n).forEach((o,s)=>{const c=Ls(o,s,a,n),p={type:dr,payload:{dropResult:Ms({},r,c)}};e.dispatch(p)})}}function Bs(e){U(e.isDragging(),"Cannot call drop while not dragging."),U(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function Ls(e,t,r,n){const a=r.getTarget(e);let i=a?a.drop(n,e):void 0;return Fs(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function Fs(e){U(typeof e>"u"||ti(e),"Drop result must either be an object or undefined.")}function $s(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Gs(e){return function(){const r=e.getMonitor(),n=e.getRegistry();Hs(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:pr}}}function Hs(e){U(e.isDragging(),"Cannot call endDrag while not dragging.")}function Gr(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function zs(e){return function(r,{clientOffset:n}={}){Ws(r);const a=r.slice(0),i=e.getMonitor(),o=e.getRegistry(),s=i.getItemType();return qs(a,o,s),Us(a,i,o),Vs(a,i,o),{type:ur,payload:{targetIds:a,clientOffset:n||null}}}}function Ws(e){U(Array.isArray(e),"Expected targetIds to be an array.")}function Us(e,t,r){U(t.isDragging(),"Cannot call hover while not dragging."),U(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];U(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);U(i,"Expected targetIds to be registered.")}}function qs(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],i=t.getTargetType(a);Gr(i,r)||e.splice(n,1)}}function Vs(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function Ys(e){return function(){if(e.getMonitor().isDragging())return{type:en}}}function Xs(e){return{beginDrag:Ps(e),publishDragSource:Ys(e),hover:zs(e),drop:ks(e),endDrag:Gs(e)}}class Js{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const s=i.apply(t,o);typeof s<"u"&&r(s)}}const a=Xs(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function Ks(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ri(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qs(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:ri(Ks(t,n),r)}function Zs(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:ri(t,r)}const Bt=[],tn=[];Bt.__IS_NONE__=!0;tn.__IS_ALL__=!0;function _s(e,t){return e===Bt?!1:e===tn||typeof t>"u"?!0:Ns(t,e).length>0}class el{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;U(typeof t=="function","listener must be a function."),U(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!_s(o.dirtyHandlerIds,n)||t()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){U(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return U(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(U(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return Gr(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(U(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!Gr(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(t);return n?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Qs(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Zs(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const la=typeof global<"u"?global:self,ni=la.MutationObserver||la.WebKitMutationObserver;function ai(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function tl(e){let t=1;const r=new ni(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const rl=typeof ni=="function"?tl:ai;class nl{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=rl(this.flush),this.requestErrorThrow=ai(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class al{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class il{create(t){const r=this.freeTasks,n=r.length?r.pop():new al(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const ii=new nl,ol=new il(ii.registerPendingError);function sl(e){ii.enqueueTask(ol.create(e))}const rn="dnd-core/ADD_SOURCE",nn="dnd-core/ADD_TARGET",an="dnd-core/REMOVE_SOURCE",fr="dnd-core/REMOVE_TARGET";function ll(e){return{type:rn,payload:{sourceId:e}}}function cl(e){return{type:nn,payload:{targetId:e}}}function ul(e){return{type:an,payload:{sourceId:e}}}function dl(e){return{type:fr,payload:{targetId:e}}}function pl(e){U(typeof e.canDrag=="function","Expected canDrag to be a function."),U(typeof e.beginDrag=="function","Expected beginDrag to be a function."),U(typeof e.endDrag=="function","Expected endDrag to be a function.")}function fl(e){U(typeof e.canDrop=="function","Expected canDrop to be a function."),U(typeof e.hover=="function","Expected hover to be a function."),U(typeof e.drop=="function","Expected beginDrag to be a function.")}function Hr(e,t){if(t&&Array.isArray(e)){e.forEach(r=>Hr(r,!1));return}U(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Fe;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Fe||(Fe={}));let gl=0;function vl(){return gl++}function hl(e){const t=vl().toString();switch(e){case Fe.SOURCE:return`S${t}`;case Fe.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function ca(e){switch(e[0]){case"S":return Fe.SOURCE;case"T":return Fe.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function ua(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class ml{addSource(t,r){Hr(t),pl(r);const n=this.addHandler(Fe.SOURCE,t,r);return this.store.dispatch(ll(n)),n}addTarget(t,r){Hr(t,!0),fl(r);const n=this.addHandler(Fe.TARGET,t,r);return this.store.dispatch(cl(n)),n}containsHandler(t){return ua(this.dragSources,t)||ua(this.dropTargets,t)}getSource(t,r=!1){return U(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return U(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return U(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return U(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return ca(t)===Fe.SOURCE}isTargetId(t){return ca(t)===Fe.TARGET}removeSource(t){U(this.getSource(t),"Expected an existing source."),this.store.dispatch(ul(t)),sl(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){U(this.getTarget(t),"Expected an existing target."),this.store.dispatch(dl(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);U(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){U(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=hl(t);return this.types.set(a,r),t===Fe.SOURCE?this.dragSources.set(a,n):t===Fe.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const bl=(e,t)=>e===t;function yl(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function xl(e,t,r=bl){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function wl(e=Bt,t){switch(t.type){case ur:break;case rn:case nn:case fr:case an:return Bt;case cr:case en:case pr:case dr:default:return tn}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=Is(r,n);if(!(a.length>0||!xl(r,n)))return Bt;const o=n[n.length-1],s=r[r.length-1];return o!==s&&(o&&a.push(o),s&&a.push(s)),a}function Dl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Dl(e,a,r[a])})}return e}const da={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Cl(e=da,t){const{payload:r}=t;switch(t.type){case _r:case cr:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case ur:return yl(e.clientOffset,r.clientOffset)?e:Sl({},e,{clientOffset:r.clientOffset});case pr:case dr:return da;default:return e}}function Il(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Il(e,a,r[a])})}return e}const Nl={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function El(e=Nl,t){const{payload:r}=t;switch(t.type){case cr:return dt({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case en:return dt({},e,{isSourcePublic:!0});case ur:return dt({},e,{targetIds:r.targetIds});case fr:return e.targetIds.indexOf(r.targetId)===-1?e:dt({},e,{targetIds:Cs(e.targetIds,r.targetId)});case dr:return dt({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case pr:return dt({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function Pl(e=0,t){switch(t.type){case rn:case nn:return e+1;case an:case fr:return e-1;default:return e}}function Tl(e=0){return e+1}function Ol(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Ol(e,a,r[a])})}return e}function jl(e={},t){return{dirtyHandlerIds:wl(e.dirtyHandlerIds,{type:t.type,payload:Rl({},t.payload,{prevTargetIds:Ss(e,"dragOperation.targetIds",[])})}),dragOffset:Cl(e.dragOffset,t),refCount:Pl(e.refCount,t),dragOperation:El(e.dragOperation,t),stateId:Tl(e.stateId)}}function Al(e,t=void 0,r={},n=!1){const a=Ml(n),i=new el(a,new ml(a)),o=new Js(a,i),s=e(o,t,r);return o.receiveBackend(s),o}function Ml(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Zr(jl,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function kl(e,t){if(e==null)return{};var r=Bl(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bl(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let pa=0;const Qt=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Ll=x.memo(function(t){var{children:r}=t,n=kl(t,["children"]);const[a,i]=Fl(n);return x.useEffect(()=>{if(i){const o=oi();return++pa,()=>{--pa===0&&(o[Qt]=null)}}},[]),l.jsx(_a.Provider,{value:a,children:r})});function Fl(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=$l(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function $l(e,t=oi(),r,n){const a=t;return a[Qt]||(a[Qt]={dragDropManager:Al(e,t,r,n)}),a[Qt]}function oi(){return typeof global<"u"?global:window}const it=typeof window<"u"?x.useLayoutEffect:x.useEffect;function Gl(e,t,r){const[n,a]=x.useState(()=>t(e)),i=x.useCallback(()=>{const o=t(e);Ao(n,o)||(a(o),r&&r())},[n,e,r]);return it(i),[n,i]}function Hl(e,t,r){const[n,a]=Gl(e,t,r);return it(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function si(e,t,r){return Hl(t,e||(()=>({})),()=>r.reconnect())}function li(e,t){const r=[];return typeof e!="function"&&r.push(e),x.useMemo(()=>typeof e=="function"?e():e,r)}function zl(e){return x.useMemo(()=>e.hooks.dragSource(),[e])}function Wl(e){return x.useMemo(()=>e.hooks.dragPreview(),[e])}let wr=!1,Dr=!1;class Ul{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){U(!wr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return wr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{wr=!1}}isDragging(){if(!this.sourceId)return!1;U(!Dr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Dr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Dr=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let Sr=!1;class ql{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;U(!Sr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Sr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Sr=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function Vl(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function Yl(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function zr(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const p=i[c];if(!s(p))return!1;const g=e[p],d=t[p];if(a=void 0,a===!1||a===void 0&&g!==d)return!1}return!0}function Wr(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Xl(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function Jl(e){return(t=null,r=null)=>{if(!x.isValidElement(t)){const i=t;return e(i,r),i}const n=t;return Xl(n),Kl(n,r?i=>e(i,r):e)}}function ci(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=Jl(n);t[r]=()=>a}}),t}function fa(e,t){typeof e=="function"?e(t):e.current=t}function Kl(e,t){const r=e.ref;return U(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?x.cloneElement(e,{ref:n=>{fa(r,n),fa(t,n)}}):x.cloneElement(e,{ref:t})}class Ql{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!zr(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!zr(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=ci({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Wr(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Wr(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class Zl{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!zr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=ci({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Wr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function bt(){const{dragDropManager:e}=x.useContext(_a);return U(e!=null,"Expected drag drop context"),e}function _l(e,t){const r=bt(),n=x.useMemo(()=>new Ql(r.getBackend()),[r]);return it(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),it(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function ec(){const e=bt();return x.useMemo(()=>new Ul(e),[e])}class tc{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function rc(e,t,r){const n=x.useMemo(()=>new tc(e,t,r),[t,r]);return x.useEffect(()=>{n.spec=e},[e]),n}function nc(e){return x.useMemo(()=>{const t=e.type;return U(t!=null,"spec.type must be defined"),t},[e])}function ac(e,t,r){const n=bt(),a=rc(e,t,r),i=nc(e);it(function(){if(i!=null){const[s,c]=Yl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c}},[n,t,r,a,i])}function ui(e,t){const r=li(e);U(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=ec(),a=_l(r.options,r.previewOptions);return ac(r,n,a),[si(r.collect,n,a),zl(a),Wl(a)]}function ic(e){return x.useMemo(()=>e.hooks.dropTarget(),[e])}function oc(e){const t=bt(),r=x.useMemo(()=>new Zl(t.getBackend()),[t]);return it(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function sc(){const e=bt();return x.useMemo(()=>new ql(e),[e])}function lc(e){const{accept:t}=e;return x.useMemo(()=>(U(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class cc{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function uc(e,t){const r=x.useMemo(()=>new cc(e,t),[t]);return x.useEffect(()=>{r.spec=e},[e]),r}function dc(e,t,r){const n=bt(),a=uc(e,t),i=lc(e);it(function(){const[s,c]=Vl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c},[n,t,a,r,i.map(o=>o.toString()).join("|")])}function pc(e,t){const r=li(e),n=sc(),a=oc(r.options);return dc(r,n,a),[si(r.collect,n,a),ic(a)]}const er=[{id:"none",name:"Sin máscara",class:"",category:"Básicas"},{id:"circle",name:"Círculo",class:"mask-circle",category:"Básicas"},{id:"rounded",name:"Redondeado",class:"mask-rounded",category:"Básicas"},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas"},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas"},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas"},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas"},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos"},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos"},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos"},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos"},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas"},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas"},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas"},{id:"rounded-sm",name:"Redondeado pequeño",class:"mask-rounded-sm",category:"Básicas"},{id:"rounded-lg",name:"Redondeado grande",class:"mask-rounded-lg",category:"Básicas"},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas"},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas"},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas"}];function fc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,availableMasks:i=[]}){var ve,ae,ye,Se,fe,Ce,Ie,De,Y,he,pe,se,Pe,Ne,Re,Te;const[{isDragging:o},s]=ui(()=>({type:"IMAGE_ELEMENT",item:{id:e.id},collect:T=>({isDragging:!!T.isDragging()})})),c=x.useRef(null),[p,g]=x.useState(!1),[d,u]=x.useState({x:0,y:0}),[f,v]=x.useState(!1),[y,h]=x.useState({x:0,y:0}),m={filter:`
      brightness(${(((ve=e.filters)==null?void 0:ve.brightness)||100)/100})
      contrast(${(((ae=e.filters)==null?void 0:ae.contrast)||100)/100})
      saturate(${(((ye=e.filters)==null?void 0:ye.saturation)||100)/100})
      sepia(${(((Se=e.filters)==null?void 0:Se.tint)||0)/100})
      hue-rotate(${(((fe=e.filters)==null?void 0:fe.hue)||0)*3.6}deg)
      blur(${((Ce=e.filters)==null?void 0:Ce.blur)||0}px)
    `,transform:`scale(${((Ie=e.filters)==null?void 0:Ie.scale)||1}) rotate(${((De=e.filters)==null?void 0:De.rotate)||0}deg) ${(Y=e.filters)!=null&&Y.flipHorizontal?"scaleX(-1)":""} ${(he=e.filters)!=null&&he.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((pe=e.filters)==null?void 0:pe.blendMode)||"normal",opacity:(((se=e.filters)==null?void 0:se.opacity)||100)/100},w=er.find(T=>T.id===e.mask)||er[0],C=T=>{t&&(T.stopPropagation(),g(!0),u({x:T.clientX-e.position.x,y:T.clientY-e.position.y}))},I=T=>{if(p&&c.current){const X=T.clientX-d.x,ie=T.clientY-d.y;n({position:{x:X,y:ie}})}},M=()=>{g(!1)};x.useEffect(()=>{p&&(window.addEventListener("mousemove",I),window.addEventListener("mouseup",M));const T=X=>{f&&!X.target.closest(".context-menu")&&v(!1)};return document.addEventListener("click",T),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",M),document.removeEventListener("click",T)}},[p,d,f]);const A=x.useCallback(T=>{c.current=T,s(T)},[s]),L=T=>{T.preventDefault(),T.stopPropagation(),h({x:T.clientX,y:T.clientY}),v(!0)},V=()=>{const T=document.createElement("input");T.type="file",T.accept="image/*",T.onchange=X=>{if(X.target.files&&X.target.files[0]){const ie=new FileReader;ie.onload=ue=>{var xe;(xe=ue.target)!=null&&xe.result&&n({content:ue.target.result})},ie.readAsDataURL(X.target.files[0])}},T.click(),v(!1)},$=()=>{const T={...JSON.parse(JSON.stringify(e)),id:`img-${Date.now()}`,position:{x:e.position.x+20,y:e.position.y+20}};n(T,!0),v(!1)},[G,z]=x.useState(!1),[ee,P]=x.useState(null),[H,ne]=x.useState({width:0,height:0}),[O,de]=x.useState({x:0,y:0}),ce=(T,X)=>{var ie,ue,xe,ze;T.stopPropagation(),T.preventDefault(),z(!0),P(X),de({x:T.clientX,y:T.clientY}),ne({width:((ie=e.size)==null?void 0:ie.width)||((ue=c.current)==null?void 0:ue.offsetWidth)||200,height:((xe=e.size)==null?void 0:xe.height)||((ze=c.current)==null?void 0:ze.offsetHeight)||200})},Q=x.useCallback(T=>{if(!G||!c.current)return;const X=T.clientX-O.x,ie=T.clientY-O.y;c.current.parentElement.getBoundingClientRect();let ue=H.width,xe=H.height;switch(ee){case"right":ue=Math.max(50,H.width+X);break;case"bottom":xe=Math.max(50,H.height+ie);break;case"bottomRight":ue=Math.max(50,H.width+X),xe=Math.max(50,H.height+ie);break}n({size:{width:ue,height:ee==="right"?H.height:xe}})},[G,O,H,ee,e.position]),oe=x.useCallback(()=>{z(!1),P(null)},[]);return x.useEffect(()=>(G&&(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",oe)),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",oe)}),[G,Q,oe]),l.jsxs("div",{ref:A,className:`absolute ${w.class} ${t?"ring-2 ring-purple-500":""} ${o?"opacity-50":"opacity-100"}`,style:{position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,width:(Pe=e.size)!=null&&Pe.width?`${e.size.width}px`:"200px",height:(Ne=e.size)!=null&&Ne.height?`${e.size.height}px`:"200px",cursor:t?"move":"pointer",zIndex:t?1:0,opacity:t?.9:1,transition:"opacity 0.2s, z-index 0.2s",pointerEvents:"all",overflow:"visible"},onClick:T=>{T.stopPropagation(),r()},onMouseDown:T=>{T.stopPropagation(),C(T),t||n({zIndex:Math.max(...elements.map(X=>X.zIndex||0))+1})},onContextMenu:L,children:[l.jsxs("div",{className:"w-full h-full overflow-hidden relative",children:[l.jsx("img",{src:e.content,alt:"Imagen cargada",className:"w-full h-full object-cover",style:{...m,mixBlendMode:((Re=e.filters)==null?void 0:Re.blendMode)||"normal",opacity:(((Te=e.filters)==null?void 0:Te.opacity)||100)/100}}),t&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-purple-500 rounded-full cursor-se-resize",style:{transform:"translate(50%, 50%)"},onMouseDown:T=>{T.stopPropagation(),ce(T,"bottomRight")}}),l.jsx("div",{className:"absolute bottom-0 w-3 h-3 bg-purple-500 rounded-full cursor-s-resize",style:{left:"50%",transform:"translateX(-50%) translateY(50%)"},onMouseDown:T=>{T.stopPropagation(),ce(T,"bottom")}}),l.jsx("div",{className:"absolute right-0 w-3 h-3 bg-purple-500 rounded-full cursor-e-resize",style:{top:"50%",transform:"translateY(-50%) translateX(50%)"},onMouseDown:T=>{T.stopPropagation(),ce(T,"right")}})]})]}),t&&l.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[l.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:T=>{var X;T.stopPropagation(),n({filters:{...e.filters,rotate:(((X=e.filters)==null?void 0:X.rotate)||0)+90}})},children:l.jsx(Za,{className:"h-4 w-4 text-gray-700"})}),l.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:T=>{T.stopPropagation(),a()},children:l.jsx(gt,{className:"h-4 w-4 text-gray-700"})})]}),f&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48 context-menu",style:{left:`${y.x}px`,top:`${y.y}px`},onClick:T=>T.stopPropagation(),children:[l.jsx("button",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 text-gray-500",onClick:()=>v(!1),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:V,children:[l.jsx(ds,{className:"h-4 w-4"}),"Reemplazar imagen"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:$,children:[l.jsx(Qr,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var T;n({filters:{...e.filters,opacity:Math.max(0,(((T=e.filters)==null?void 0:T.opacity)||100)-10)}}),v(!1)},children:[l.jsx(Qa,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),v(!1)},children:[l.jsx(gt,{className:"h-4 w-4"}),"Eliminar"]})]})]})]})}function gc({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a}){var H,ne,O,de,ce,Q,oe,ve,ae,ye,Se,fe,Ce,Ie,De,Y,he,pe,se,Pe,Ne,Re,Te,T,X,ie,ue,xe,ze;const[i,o]=x.useState(!1),s=x.useRef(null),c=x.useRef(null),[{isDragging:p},g]=ui(()=>({type:"TEXT_ELEMENT",item:{id:e.id},collect:F=>({isDragging:!!F.isDragging()})})),[d,u]=x.useState(!1),[f,v]=x.useState({x:0,y:0}),[y,h]=x.useState(!1),[m,w]=x.useState({x:0,y:0}),C=()=>{o(!1)},I=F=>{n({content:F.target.value})},M=F=>{F.key==="Enter"&&o(!1)},A=F=>{t&&!i&&(F.stopPropagation(),u(!0),v({x:F.clientX-e.position.x,y:F.clientY-e.position.y}))},L=F=>{if(d&&c.current){const ge=c.current.parentElement.getBoundingClientRect(),ke=F.clientX-f.x,Ue=F.clientY-f.y,_e=ge.width-c.current.offsetWidth,et=ge.height-c.current.offsetHeight,tt=Math.max(0,Math.min(ke,_e)),rt=Math.max(0,Math.min(Ue,et));n({position:{x:tt,y:rt}})}},V=()=>{u(!1)},$=F=>{F.preventDefault(),F.stopPropagation(),w({x:F.clientX,y:F.clientY}),h(!0)},G=()=>{const F={...JSON.parse(JSON.stringify(e)),id:`text-${Date.now()}`,position:{x:e.position.x+10,y:e.position.y+10}};n(F,!0),h(!1)};x.useEffect(()=>(d&&(window.addEventListener("mousemove",L),window.addEventListener("mouseup",V)),()=>{window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",V)}),[d,f]);const z=x.useCallback(F=>{c.current=F,g(F)},[g]),ee=(H=e.style)!=null&&H.textShadow?`${e.style.textShadowX||0}px ${e.style.textShadowY||0}px ${e.style.textShadowBlur||0}px ${e.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",P={...e.style,position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,cursor:t&&!i?"move":"pointer",textShadow:ee,zIndex:10,fontFamily:((ne=e.style)==null?void 0:ne.fontFamily)||"Arial",fontSize:((O=e.style)==null?void 0:O.fontSize)||"16px",color:((de=e.style)==null?void 0:de.color)||"#000000",fontWeight:((ce=e.style)==null?void 0:ce.fontWeight)||"normal",fontStyle:((Q=e.style)==null?void 0:Q.fontStyle)||"normal",textDecoration:((oe=e.style)==null?void 0:oe.textDecoration)||"none",textAlign:((ve=e.style)==null?void 0:ve.textAlign)||"left",backgroundColor:((ae=e.style)==null?void 0:ae.backgroundColor)||"transparent",padding:((ye=e.style)==null?void 0:ye.padding)||"8px",borderRadius:((Se=e.style)==null?void 0:Se.borderRadius)||"0px",border:((fe=e.style)==null?void 0:fe.border)||"none",opacity:((Ce=e.style)==null?void 0:Ce.opacity)!==void 0?e.style.opacity:1};return x.useEffect(()=>{var ge,ke;const F=(ke=(ge=e.style)==null?void 0:ge.fontFamily)==null?void 0:ke.replace(/'/g,"");if(F&&!document.fonts.check(`12px ${F}`)){const Ue=new FontFace(F,`local(${F})`);Ue.load().then(()=>document.fonts.add(Ue))}},[(Ie=e.style)==null?void 0:Ie.fontFamily]),l.jsxs("div",{ref:z,className:`${t?"ring-2 ring-purple-500":""} ${p?"opacity-50":"opacity-100"}`,style:P,onClick:F=>{F.stopPropagation(),r(),!i&&t&&(o(!0),setTimeout(()=>{s.current&&(s.current.focus(),s.current.select())},0))},onMouseDown:A,onContextMenu:$,children:[i?l.jsx("input",{ref:s,type:"text",value:e.content,onChange:I,onBlur:C,onKeyDown:M,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(De=e.style)==null?void 0:De.fontFamily,fontSize:(Y=e.style)==null?void 0:Y.fontSize,fontWeight:(he=e.style)==null?void 0:he.fontWeight,fontStyle:(pe=e.style)==null?void 0:pe.fontStyle,textDecoration:(se=e.style)==null?void 0:se.textDecoration,color:(Pe=e.style)==null?void 0:Pe.color,textAlign:(Ne=e.style)==null?void 0:Ne.textAlign,minWidth:"100px"},autoFocus:!0}):l.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((Re=e.style)==null?void 0:Re.backgroundColor)||"transparent",padding:((Te=e.style)==null?void 0:Te.padding)||"8px",borderRadius:((T=e.style)==null?void 0:T.borderRadius)||"0px",border:((X=e.style)==null?void 0:X.border)||"none",fontFamily:((ie=e.style)==null?void 0:ie.fontFamily)||"Arial"},children:e.content||"Editar texto"}),t&&l.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:F=>{var ge;F.stopPropagation(),n({style:{...e.style,fontWeight:((ge=e.style)==null?void 0:ge.fontWeight)==="bold"?"normal":"bold"}})},children:l.jsx("span",{className:`text-xs ${((ue=e.style)==null?void 0:ue.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:F=>{var ge;F.stopPropagation(),n({style:{...e.style,fontStyle:((ge=e.style)==null?void 0:ge.fontStyle)==="italic"?"normal":"italic"}})},children:l.jsx("span",{className:`text-xs ${((xe=e.style)==null?void 0:xe.fontStyle)==="italic"?"italic":""}`,children:"I"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:F=>{var ge;F.stopPropagation(),n({style:{...e.style,textDecoration:((ge=e.style)==null?void 0:ge.textDecoration)==="underline"?"none":"underline"}})},children:l.jsx("span",{className:`text-xs ${((ze=e.style)==null?void 0:ze.textDecoration)==="underline"?"underline":""}`,children:"U"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:F=>{F.stopPropagation(),a()},children:l.jsx(gt,{className:"h-3 w-3 text-gray-700"})})]}),y&&l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${m.x}px`,top:`${m.y}px`},onClick:F=>F.stopPropagation(),children:[l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{o(!0),h(!1)},children:[l.jsx(ft,{className:"h-4 w-4"}),"Editar texto"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:G,children:[l.jsx(Qr,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var F;n({style:{...e.style,opacity:Math.max(0,(((F=e.style)==null?void 0:F.opacity)||1)-.1)}}),h(!1)},children:[l.jsx(Qa,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),h(!1)},children:[l.jsx(gt,{className:"h-4 w-4"}),"Eliminar"]})]})]})}function di(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,No(e,t)}var pi=re.createContext(null);function vc(e){e()}var fi=vc,hc=function(t){return fi=t},mc=function(){return fi};function bc(){var e=mc(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var ga={notify:function(){},get:function(){return[]}};function gi(e,t){var r,n=ga;function a(d){return c(),n.subscribe(d)}function i(){n.notify()}function o(){g.onStateChange&&g.onStateChange()}function s(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=bc())}function p(){r&&(r(),r=void 0,n.clear(),n=ga)}var g={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:s,trySubscribe:c,tryUnsubscribe:p,getListeners:function(){return n}};return g}var vi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect;function yc(e){var t=e.store,r=e.context,n=e.children,a=x.useMemo(function(){var s=gi(t);return{store:t,subscription:s}},[t]),i=x.useMemo(function(){return t.getState()},[t]);vi(function(){var s=a.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),i!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[a,i]);var o=r||pi;return re.createElement(o.Provider,{value:a},n)}var Cr={exports:{}},te={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va;function xc(){if(va)return te;va=1;var e=60103,t=60106,r=60107,n=60108,a=60114,i=60109,o=60110,s=60112,c=60113,p=60120,g=60115,d=60116,u=60121,f=60122,v=60117,y=60129,h=60131;if(typeof Symbol=="function"&&Symbol.for){var m=Symbol.for;e=m("react.element"),t=m("react.portal"),r=m("react.fragment"),n=m("react.strict_mode"),a=m("react.profiler"),i=m("react.provider"),o=m("react.context"),s=m("react.forward_ref"),c=m("react.suspense"),p=m("react.suspense_list"),g=m("react.memo"),d=m("react.lazy"),u=m("react.block"),f=m("react.server.block"),v=m("react.fundamental"),y=m("react.debug_trace_mode"),h=m("react.legacy_hidden")}function w(P){if(typeof P=="object"&&P!==null){var H=P.$$typeof;switch(H){case e:switch(P=P.type,P){case r:case a:case n:case c:case p:return P;default:switch(P=P&&P.$$typeof,P){case o:case s:case d:case g:case i:return P;default:return H}}case t:return H}}}var C=i,I=e,M=s,A=r,L=d,V=g,$=t,G=a,z=n,ee=c;return te.ContextConsumer=o,te.ContextProvider=C,te.Element=I,te.ForwardRef=M,te.Fragment=A,te.Lazy=L,te.Memo=V,te.Portal=$,te.Profiler=G,te.StrictMode=z,te.Suspense=ee,te.isAsyncMode=function(){return!1},te.isConcurrentMode=function(){return!1},te.isContextConsumer=function(P){return w(P)===o},te.isContextProvider=function(P){return w(P)===i},te.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},te.isForwardRef=function(P){return w(P)===s},te.isFragment=function(P){return w(P)===r},te.isLazy=function(P){return w(P)===d},te.isMemo=function(P){return w(P)===g},te.isPortal=function(P){return w(P)===t},te.isProfiler=function(P){return w(P)===a},te.isStrictMode=function(P){return w(P)===n},te.isSuspense=function(P){return w(P)===c},te.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===a||P===y||P===n||P===c||P===p||P===h||typeof P=="object"&&P!==null&&(P.$$typeof===d||P.$$typeof===g||P.$$typeof===i||P.$$typeof===o||P.$$typeof===s||P.$$typeof===v||P.$$typeof===u||P[0]===f)},te.typeOf=w,te}var ha;function wc(){return ha||(ha=1,Cr.exports=xc()),Cr.exports}var Dc=wc(),Sc=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Cc=["reactReduxForwardedRef"],Ic=[],Nc=[null,null];function Ec(e,t){var r=e[1];return[t.payload,r+1]}function ma(e,t,r){vi(function(){return e.apply(void 0,t)},r)}function Pc(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function Tc(e,t,r,n,a,i,o,s,c,p){if(e){var g=!1,d=null,u=function(){if(!g){var y=t.getState(),h,m;try{h=n(y,a.current)}catch(w){m=w,d=w}m||(d=null),h===i.current?o.current||c():(i.current=h,s.current=h,o.current=!0,p({type:"STORE_UPDATED",payload:{error:m}}))}};r.onStateChange=u,r.trySubscribe(),u();var f=function(){if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d};return f}}var Oc=function(){return[null,0]};function Rc(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(C){return"ConnectAdvanced("+C+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,s=r.renderCountProp,c=s===void 0?void 0:s,p=r.shouldHandleStateChanges,g=p===void 0?!0:p,d=r.storeKey,u=d===void 0?"store":d;r.withRef;var f=r.forwardRef,v=f===void 0?!1:f,y=r.context,h=y===void 0?pi:y,m=_t(r,Sc),w=h;return function(I){var M=I.displayName||I.name||"Component",A=a(M),L=B({},m,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:g,storeKey:u,displayName:A,wrappedComponentName:M,WrappedComponent:I}),V=m.pure;function $(H){return e(H.dispatch,L)}var G=V?x.useMemo:function(H){return H()};function z(H){var ne=x.useMemo(function(){var ie=H.reactReduxForwardedRef,ue=_t(H,Cc);return[H.context,ie,ue]},[H]),O=ne[0],de=ne[1],ce=ne[2],Q=x.useMemo(function(){return O&&O.Consumer&&Dc.isContextConsumer(re.createElement(O.Consumer,null))?O:w},[O,w]),oe=x.useContext(Q),ve=!!H.store&&!!H.store.getState&&!!H.store.dispatch;oe&&oe.store;var ae=ve?H.store:oe.store,ye=x.useMemo(function(){return $(ae)},[ae]),Se=x.useMemo(function(){if(!g)return Nc;var ie=gi(ae,ve?null:oe.subscription),ue=ie.notifyNestedSubs.bind(ie);return[ie,ue]},[ae,ve,oe]),fe=Se[0],Ce=Se[1],Ie=x.useMemo(function(){return ve?oe:B({},oe,{subscription:fe})},[ve,oe,fe]),De=x.useReducer(Ec,Ic,Oc),Y=De[0],he=Y[0],pe=De[1];if(he&&he.error)throw he.error;var se=x.useRef(),Pe=x.useRef(ce),Ne=x.useRef(),Re=x.useRef(!1),Te=G(function(){return Ne.current&&ce===Pe.current?Ne.current:ye(ae.getState(),ce)},[ae,he,ce]);ma(Pc,[Pe,se,Re,ce,Te,Ne,Ce]),ma(Tc,[g,ae,fe,ye,Pe,se,Re,Ne,Ce,pe],[ae,fe,ye]);var T=x.useMemo(function(){return re.createElement(I,B({},Te,{ref:de}))},[de,I,Te]),X=x.useMemo(function(){return g?re.createElement(Q.Provider,{value:Ie},T):T},[Q,T,Ie]);return X}var ee=V?re.memo(z):z;if(ee.WrappedComponent=I,ee.displayName=z.displayName=A,v){var P=re.forwardRef(function(ne,O){return re.createElement(ee,B({},ne,{reactReduxForwardedRef:O}))});return P.displayName=A,P.WrappedComponent=I,ea(P,I)}return ea(ee,I)}}function ba(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ir(e,t){if(ba(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!ba(e[r[a]],t[r[a]]))return!1;return!0}function jc(e,t){var r={},n=function(o){var s=e[o];typeof s=="function"&&(r[o]=function(){return t(s.apply(void 0,arguments))})};for(var a in e)n(a);return r}function on(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function ya(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function hi(e,t){return function(n,a){a.displayName;var i=function(s,c){return i.dependsOnOwnProps?i.mapToProps(s,c):i.mapToProps(s)};return i.dependsOnOwnProps=!0,i.mapToProps=function(s,c){i.mapToProps=e,i.dependsOnOwnProps=ya(e);var p=i(s,c);return typeof p=="function"&&(i.mapToProps=p,i.dependsOnOwnProps=ya(p),p=i(s,c)),p},i}}function Ac(e){return typeof e=="function"?hi(e):void 0}function Mc(e){return e?void 0:on(function(t){return{dispatch:t}})}function kc(e){return e&&typeof e=="object"?on(function(t){return jc(e,t)}):void 0}const Bc=[Ac,Mc,kc];function Lc(e){return typeof e=="function"?hi(e):void 0}function Fc(e){return e?void 0:on(function(){return{}})}const $c=[Lc,Fc];function Gc(e,t,r){return B({},r,e,t)}function Hc(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,s;return function(p,g,d){var u=e(p,g,d);return o?(!a||!i(u,s))&&(s=u):(o=!0,s=u),s}}}function zc(e){return typeof e=="function"?Hc(e):void 0}function Wc(e){return e?void 0:function(){return Gc}}const Uc=[zc,Wc];var qc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Vc(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function Yc(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,s=a.areStatePropsEqual,c=!1,p,g,d,u,f;function v(C,I){return p=C,g=I,d=e(p,g),u=t(n,g),f=r(d,u,g),c=!0,f}function y(){return d=e(p,g),t.dependsOnOwnProps&&(u=t(n,g)),f=r(d,u,g),f}function h(){return e.dependsOnOwnProps&&(d=e(p,g)),t.dependsOnOwnProps&&(u=t(n,g)),f=r(d,u,g),f}function m(){var C=e(p,g),I=!s(C,d);return d=C,I&&(f=r(d,u,g)),f}function w(C,I){var M=!o(I,g),A=!i(C,p,I,g);return p=C,g=I,M&&A?y():M?h():A?m():f}return function(I,M){return c?w(I,M):v(I,M)}}function Xc(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=_t(t,qc),o=r(e,i),s=n(e,i),c=a(e,i),p=i.pure?Yc:Vc;return p(o,s,c,e,i)}var Jc=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Nr(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Kc(e,t){return e===t}function Qc(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?Rc:r,a=t.mapStateToPropsFactories,i=a===void 0?$c:a,o=t.mapDispatchToPropsFactories,s=o===void 0?Bc:o,c=t.mergePropsFactories,p=c===void 0?Uc:c,g=t.selectorFactory,d=g===void 0?Xc:g;return function(f,v,y,h){h===void 0&&(h={});var m=h,w=m.pure,C=w===void 0?!0:w,I=m.areStatesEqual,M=I===void 0?Kc:I,A=m.areOwnPropsEqual,L=A===void 0?Ir:A,V=m.areStatePropsEqual,$=V===void 0?Ir:V,G=m.areMergedPropsEqual,z=G===void 0?Ir:G,ee=_t(m,Jc),P=Nr(f,i,"mapStateToProps"),H=Nr(v,s,"mapDispatchToProps"),ne=Nr(y,p,"mergeProps");return n(d,B({methodName:"connect",getDisplayName:function(de){return"Connect("+de+")"},shouldHandleStateChanges:!!f,initMapStateToProps:P,initMapDispatchToProps:H,initMergeProps:ne,pure:C,areStatesEqual:M,areOwnPropsEqual:L,areStatePropsEqual:$,areMergedPropsEqual:z},ee))}}const mi=Qc();hc(Eo.unstable_batchedUpdates);function Zc(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function bi(e,t){var r=x.useState(function(){return{inputs:t,result:e()}})[0],n=x.useRef(!0),a=x.useRef(r),i=n.current||!!(t&&a.current.inputs&&Zc(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return x.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function _c(e,t){return bi(function(){return e},t)}var _=bi,k=_c,eu="Invariant failed";function tu(e,t){throw new Error(eu)}var He=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,s=a-r,c={top:r,right:n,bottom:a,left:i,width:o,height:s,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},sn=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},xa=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},ru=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Er={top:0,right:0,bottom:0,left:0},ln=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?Er:n,i=t.border,o=i===void 0?Er:i,s=t.padding,c=s===void 0?Er:s,p=He(sn(r,a)),g=He(xa(r,o)),d=He(xa(g,c));return{marginBox:p,borderBox:He(r),paddingBox:g,contentBox:d,margin:a,border:o,padding:c}},Le=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&tu(),a},nu=function(){return{x:window.pageXOffset,y:window.pageYOffset}},tr=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,s=ru(n,r);return ln({borderBox:s,border:a,margin:i,padding:o})},rr=function(t,r){return r===void 0&&(r=nu()),tr(t,r)},yi=function(t,r){var n={top:Le(r.marginTop),right:Le(r.marginRight),bottom:Le(r.marginBottom),left:Le(r.marginLeft)},a={top:Le(r.paddingTop),right:Le(r.paddingRight),bottom:Le(r.paddingBottom),left:Le(r.paddingLeft)},i={top:Le(r.borderTopWidth),right:Le(r.borderRightWidth),bottom:Le(r.borderBottomWidth),left:Le(r.borderLeftWidth)};return ln({borderBox:t,margin:n,padding:a,border:i})},xi=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return yi(r,n)},wa=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function au(e,t){return!!(e===t||wa(e)&&wa(t))}function iu(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!au(e[r],t[r]))return!1;return!0}function me(e,t){t===void 0&&(t=iu);var r,n=[],a,i=!1;function o(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i&&r===this&&t(s,n)||(a=e.apply(this,s),i=!0,r=this,n=s),a}return o}var $t=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];r=s,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function wi(e,t){}wi.bind(null,"warn");wi.bind(null,"error");function Xe(){}function ou(e,t){return B({},e,{},t)}function $e(e,t,r){var n=t.map(function(a){var i=ou(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var su="Invariant failed";function nr(e){this.message=e}nr.prototype.toString=function(){return this.message};function N(e,t){throw new nr(su)}var lu=function(e){di(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Xe,n.onWindowError=function(s){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var p=s.error;p instanceof nr&&s.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(s){n.callbacks=s},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=$e(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof nr){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(re.Component),cu=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ar=function(t){return t+1},uu=function(t){return`
  You have lifted an item in position `+ar(t.source.index)+`
`},Di=function(t,r){var n=t.droppableId===r.droppableId,a=ar(t.index),i=ar(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},Si=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},du=function(t){var r=t.destination;if(r)return Di(t.source,r);var n=t.combine;return n?Si(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Da=function(t){return`
  The item has returned to its starting position
  of `+ar(t.index)+`
`},pu=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Da(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+Di(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+Si(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Da(t.source)+`
  `},Zt={dragHandleUsageInstructions:cu,onDragStart:uu,onDragUpdate:du,onDragEnd:pu},be={x:0,y:0},we=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},je=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Je=function(t,r){return t.x===r.x&&t.y===r.y},yt=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},ot=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Gt=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Sa=function(t,r){return Math.min.apply(Math,r.map(function(n){return Gt(t,n)}))},Ci=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},fu=function(e,t){var r=He({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Ut=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Ca=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},gu={top:0,right:0,bottom:0,left:0},vu=function(t,r){return r?Ut(t,r.scroll.diff.displacement):t},hu=function(t,r,n){if(n&&n.increasedBy){var a;return B({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},mu=function(t,r){return r&&r.shouldClipSubject?fu(r.pageMarginBox,t):He(t)},vt=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=vu(t.marginBox,a),o=hu(i,n,r),s=mu(o,a);return{page:t,withPlaceholder:r,active:s}},cn=function(e,t){e.frame||N();var r=e.frame,n=je(t,r.scroll.initial),a=yt(n),i=B({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=vt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),s=B({},e,{frame:i,subject:o});return s};function ir(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function un(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Ze(e,t){if(e.find)return e.find(t);var r=un(e,t);if(r!==-1)return e[r]}function Ii(e){return Array.prototype.slice.call(e)}var Ni=me(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Ei=me(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),gr=me(function(e){return ir(e)}),bu=me(function(e){return ir(e)}),xt=me(function(e,t){var r=bu(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function dn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function vr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var hr=me(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),yu=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=dn(i);if(!o)return null;function s(y){var h={type:"COMBINE",combine:{draggableId:y,droppableId:n.descriptor.id}};return B({},i,{at:h})}var c=i.displaced.all,p=c.length?c[0]:null;if(t)return p?s(p):null;var g=hr(r,a);if(!p){if(!g.length)return null;var d=g[g.length-1];return s(d.descriptor.id)}var u=un(g,function(y){return y.descriptor.id===p});u===-1&&N();var f=u-1;if(f<0)return null;var v=g[f];return s(v.descriptor.id)},wt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Pi={point:be,value:0},Ht={invisible:{},visible:{},all:[]},xu={displaced:Ht,displacedBy:Pi,at:null},Ge=function(e,t){return function(r){return e<=r&&r<=t}},Ti=function(e){var t=Ge(e.top,e.bottom),r=Ge(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),s=i&&o;if(s)return!0;var c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,g=c&&p;if(g)return!0;var d=c&&o||p&&i;return d}},wu=function(e){var t=Ge(e.top,e.bottom),r=Ge(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},pn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Oi={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Du=function(e){return function(t){var r=Ge(t.top,t.bottom),n=Ge(t.left,t.right);return function(a){return e===pn?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},Su=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:be;return Ut(t,n)},Cu=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},Iu=function(t,r,n){return n(r)(t)},fn=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,s=i?Su(r,n):r;return Cu(s,n,o)&&Iu(s,a,o)},Nu=function(t){return fn(B({},t,{isVisibleThroughFrameFn:Ti}))},Ri=function(t){return fn(B({},t,{isVisibleThroughFrameFn:wu}))},Eu=function(t){return fn(B({},t,{isVisibleThroughFrameFn:Du(t.destination.axis)}))},Pu=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function Tu(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return He(sn(r,n))}function zt(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,p){var g=Tu(p,n),d=p.descriptor.id;c.all.push(d);var u=Nu({target:g,destination:r,viewport:a,withDroppableDisplacement:!0});if(!u)return c.invisible[p.descriptor.id]=!0,c;var f=Pu(d,o,i),v={draggableId:d,shouldAnimate:f};return c.visible[d]=v,c},{all:[],visible:{},invisible:{}})}function Ou(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Ia(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=Ou(t,{inHomeList:r});return{displaced:Ht,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function or(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,c=e.forceShouldAnimate,p=wt(t,n);if(s==null)return Ia({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var g=Ze(r,function(y){return y.descriptor.index===s});if(!g)return Ia({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var d=hr(t,r),u=r.indexOf(g),f=d.slice(u),v=zt({afterDragging:f,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:v,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function Qe(e,t){return!!t.effected[e]}var Ru=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,s=n[o],c=s.descriptor.index,p=Qe(o,i);return p?t?c:c-1:t?c+1:c},ju=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index,p=r?c:c+1;return o<s||o>p?null:o},Au=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,c=e.viewport,p=e.afterCritical,g=s.at;if(g||N(),g.type==="REORDER"){var d=ju({isMovingForward:t,isInHomeList:r,location:g.destination,insideDestination:o});return d==null?null:or({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})}var u=Ru({isMovingForward:t,destination:i,displaced:s.displaced,draggables:a,combine:g.combine,afterCritical:p});return u==null?null:or({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:u})},Mu=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return Qe(n,r)?i?be:yt(a.point):i?a.point:be},ku=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=vr(r);a||N();var i=a.draggableId,o=n[i].page.borderBox.center,s=Mu({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return we(o,s)},ji=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},Bu=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},gn=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},Na=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return ot(r.line,n.marginBox[r.end]+ji(r,a),gn(r,n.marginBox,a))},Ea=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return ot(r.line,n.marginBox[r.start]-Bu(r,a),gn(r,n.marginBox,a))},Lu=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return ot(r.line,n.contentBox[r.start]+ji(r,a),gn(r,n.contentBox,a))},Fu=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=xt(a.descriptor.id,n),s=r.page,c=a.axis;if(!o.length)return Lu({axis:c,moveInto:a.page,isMoving:s});var p=t.displaced,g=t.displacedBy,d=p.all[0];if(d){var u=n[d];if(Qe(d,i))return Ea({axis:c,moveRelativeTo:u.page,isMoving:s});var f=tr(u.page,g.point);return Ea({axis:c,moveRelativeTo:f,isMoving:s})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return s.borderBox.center;if(Qe(v.descriptor.id,i)){var y=tr(v.page,yt(i.displacedBy.point));return Na({axis:c,moveRelativeTo:y,isMoving:s})}return Na({axis:c,moveRelativeTo:v.page,isMoving:s})},Ur=function(e,t){var r=e.frame;return r?we(t,r.scroll.diff.displacement):t},$u=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,s=n.page.borderBox.center,c=r.at;return!a||!c?s:c.type==="REORDER"?Fu({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):ku({impact:r,draggables:i,afterCritical:o})},mr=function(e){var t=$u(e),r=e.droppable,n=r?Ur(r,t):t;return n},Ai=function(e,t){var r=je(t,e.scroll.initial),n=yt(r),a=He({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function Pa(e,t){return e.map(function(r){return t[r]})}function Gu(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var Hu=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=Ai(r,we(r.scroll.current,i)),s=n.frame?cn(n,we(n.frame.scroll.current,i)):n,c=t.displaced,p=zt({afterDragging:Pa(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),g=zt({afterDragging:Pa(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),d={},u={},f=[c,p,g];c.all.forEach(function(y){var h=Gu(y,f);if(h){u[y]=h;return}d[y]=!0});var v=B({},t,{displaced:{all:c.all,invisible:d,visible:u}});return v},zu=function(e,t){return we(e.scroll.diff.displacement,t)},vn=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=zu(n,t),i=je(a,r.page.borderBox.center);return we(r.client.borderBox.center,i)},Mi=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,c=je(n,t.page.borderBox.center),p=Ut(t.page.borderBox,c),g={target:p,destination:r,withDroppableDisplacement:i,viewport:a};return s?Eu(g):Ri(g)},Wu=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var g=xt(n.descriptor.id,a),d=wt(r,n),u=yu({isMovingForward:t,draggable:r,destination:n,insideDestination:g,previousImpact:i})||Au({isMovingForward:t,isInHomeList:d,draggable:r,draggables:a,destination:n,insideDestination:g,previousImpact:i,viewport:o,afterCritical:p});if(!u)return null;var f=mr({impact:u,draggable:r,droppable:n,draggables:a,afterCritical:p}),v=Mi({draggable:r,destination:n,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var y=vn({pageBorderBoxCenter:f,draggable:r,viewport:o});return{clientSelection:y,impact:u,scrollJumpRequest:null}}var h=je(f,s),m=Hu({impact:u,viewport:o,destination:n,draggables:a,maxScrollChange:h});return{clientSelection:c,impact:m,scrollJumpRequest:h}},Ee=function(t){var r=t.subject.active;return r||N(),r},Uu=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var s=n.axis,c=Ge(o[s.start],o[s.end]),p=gr(a).filter(function(d){return d!==n}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return Ti(i.frame)(Ee(d))}).filter(function(d){var u=Ee(d);return t?o[s.crossAxisEnd]<u[s.crossAxisEnd]:u[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(d){var u=Ee(d),f=Ge(u[s.start],u[s.end]);return c(u[s.start])||c(u[s.end])||f(o[s.start])||f(o[s.end])}).sort(function(d,u){var f=Ee(d)[s.crossAxisStart],v=Ee(u)[s.crossAxisStart];return t?f-v:v-f}).filter(function(d,u,f){return Ee(d)[s.crossAxisStart]===Ee(f[0])[s.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var g=p.filter(function(d){var u=Ge(Ee(d)[s.start],Ee(d)[s.end]);return u(r[s.line])});return g.length===1?g[0]:g.length>1?g.sort(function(d,u){return Ee(d)[s.start]-Ee(u)[s.start]})[0]:p.sort(function(d,u){var f=Sa(r,Ca(Ee(d))),v=Sa(r,Ca(Ee(u)));return f!==v?f-v:Ee(d)[s.start]-Ee(u)[s.start]})[0]},Ta=function(t,r){var n=t.page.borderBox.center;return Qe(t.descriptor.id,r)?je(n,r.displacedBy.point):n},qu=function(t,r){var n=t.page.borderBox;return Qe(t.descriptor.id,r)?Ut(n,yt(r.displacedBy.point)):n},Vu=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(s){return Ri({target:qu(s,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(s,c){var p=Gt(t,Ur(n,Ta(s,i))),g=Gt(t,Ur(n,Ta(c,i)));return p<g?-1:g<p?1:s.descriptor.index-c.descriptor.index});return o[0]||null},qt=me(function(t,r){var n=r[t.line];return{value:n,point:ot(t.line,n)}}),Yu=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return ot(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=xt(t.descriptor.id,n),s=o.reduce(function(g,d){return g+d.client.marginBox[a.size]},0),c=s+r[a.line],p=c-i;return p<=0?null:ot(a.line,p)},ki=function(t,r){return B({},t,{scroll:B({},t.scroll,{max:r})})},Bi=function(t,r,n){var a=t.frame;wt(r,t)&&N(),t.subject.withPlaceholder&&N();var i=qt(t.axis,r.displaceBy).point,o=Yu(t,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=vt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return B({},t,{subject:c})}var p=o?we(a.scroll.max,o):a.scroll.max,g=ki(a,p),d=vt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:g});return B({},t,{subject:d,frame:g})},Xu=function(t){var r=t.subject.withPlaceholder;r||N();var n=t.frame;if(!n){var a=vt({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return B({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||N();var o=ki(n,i),s=vt({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return B({},t,{subject:s,frame:o})},Ju=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var p={displaced:Ht,displacedBy:Pi,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},g=mr({impact:p,draggable:a,droppable:o,draggables:i,afterCritical:c}),d=wt(a,o)?o:Bi(o,a,i),u=Mi({draggable:a,destination:d,newPageBorderBoxCenter:g,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return u?p:null}var f=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var h=r.descriptor.index;return r.descriptor.id===a.descriptor.id||f?h:h+1}(),y=qt(o.axis,a.displaceBy);return or({draggable:a,insideDestination:n,destination:o,viewport:s,displacedBy:y,last:Ht,index:v})},Ku=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,c=e.afterCritical,p=Uu({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:s});if(!p)return null;var g=xt(p.descriptor.id,i),d=Vu({pageBorderBoxCenter:r,viewport:s,destination:p,insideDestination:g,afterCritical:c}),u=Ju({previousPageBorderBoxCenter:r,destination:p,draggable:n,draggables:i,moveRelativeTo:d,insideDestination:g,viewport:s,afterCritical:c});if(!u)return null;var f=mr({impact:u,draggable:n,droppable:p,draggables:i,afterCritical:c}),v=vn({pageBorderBoxCenter:f,draggable:n,viewport:s});return{clientSelection:v,impact:u,scrollJumpRequest:null}},Ae=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Qu=function(t,r){var n=Ae(t);return n?r[n]:null},Zu=function(e){var t=e.state,r=e.type,n=Qu(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,s=o.axis.direction,c=s==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||s==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var p=r==="MOVE_DOWN"||r==="MOVE_RIGHT",g=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,u=t.dimensions,f=u.draggables,v=u.droppables;return c?Wu({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:g,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Ku({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:g,isOver:o,draggables:f,droppables:v,viewport:t.viewport,afterCritical:t.afterCritical})};function at(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Li(e){var t=Ge(e.top,e.bottom),r=Ge(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function _u(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function ed(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var s=o.axis,c=ot(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Gt(a,c)}}).sort(function(o,s){return s.distance-o.distance});return i[0]?i[0].id:null}function td(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=gr(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!_u(t,o))return!1;if(Li(o)(t.center))return!0;var s=i.axis,c=o.center[s.crossAxisLine],p=t[s.crossAxisStart],g=t[s.crossAxisEnd],d=Ge(o[s.crossAxisStart],o[s.crossAxisEnd]),u=d(p),f=d(g);return!u&&!f?!0:u?p<c:g>c});return a.length?a.length===1?a[0].descriptor.id:ed({pageBorderBox:t,draggable:r,candidates:a}):null}var Fi=function(t,r){return He(Ut(t,r))},rd=function(e,t){var r=e.frame;return r?Fi(t,r.scroll.diff.value):t};function $i(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function nd(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var ad=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,c=n.axis,p=qt(n.axis,r.displaceBy),g=p.value,d=t[c.start],u=t[c.end],f=hr(r,a),v=Ze(f,function(h){var m=h.descriptor.id,w=h.page.borderBox.center[c.line],C=Qe(m,s),I=$i({displaced:i,id:m});return C?I?u<=w:d<w-g:I?u<=w+g:d<w}),y=nd({draggable:r,closest:v,inHomeList:wt(r,n)});return or({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:p,index:y})},id=4,od=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,c=qt(a.axis,t.displaceBy),p=c.value,g=r[s.start],d=r[s.end],u=hr(t,i),f=Ze(u,function(y){var h=y.descriptor.id,m=y.page.borderBox,w=m[s.size],C=w/id,I=Qe(h,o),M=$i({displaced:n.displaced,id:h});return I?M?d>m[s.start]+C&&d<m[s.end]-C:g>m[s.start]-p+C&&g<m[s.end]-p-C:M?d>m[s.start]+p+C&&d<m[s.end]+p-C:g>m[s.start]+C&&g<m[s.end]-C});if(!f)return null;var v={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:a.descriptor.id}}};return v},Gi=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,c=Fi(r.page.borderBox,t),p=td({pageBorderBox:c,draggable:r,droppables:a});if(!p)return xu;var g=a[p],d=xt(g.descriptor.id,n),u=rd(g,c);return od({pageBorderBoxWithDroppableScroll:u,draggable:r,previousImpact:i,destination:g,insideDestination:d,afterCritical:s})||ad({pageBorderBoxWithDroppableScroll:u,draggable:r,destination:g,insideDestination:d,last:i.displaced,viewport:o,afterCritical:s})},hn=function(e,t){var r;return B({},e,(r={},r[t.descriptor.id]=t,r))},sd=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=Ae(r),o=Ae(n);if(!i||i===o)return a;var s=a[i];if(!s.subject.withPlaceholder)return a;var c=Xu(s);return hn(a,c)},ld=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=sd({previousImpact:a,impact:i,droppables:n}),s=Ae(i);if(!s)return o;var c=n[s];if(wt(t,c)||c.subject.withPlaceholder)return o;var p=Bi(c,t,r);return hn(o,p)},Lt=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||t.viewport,c=n||t.dimensions,p=r||t.current.client.selection,g=je(p,t.initial.client.selection),d={offset:g,selection:p,borderBoxCenter:we(t.initial.client.borderBoxCenter,g)},u={selection:we(d.selection,s.scroll.current),borderBoxCenter:we(d.borderBoxCenter,s.scroll.current),offset:we(d.offset,s.scroll.diff.value)},f={client:d,page:u};if(t.phase==="COLLECTING")return B({phase:"COLLECTING"},t,{dimensions:c,viewport:s,current:f});var v=c.draggables[t.critical.draggable.id],y=i||Gi({pageOffset:u.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),h=ld({draggable:v,impact:y,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),m=B({},t,{current:f,dimensions:{draggables:c.draggables,droppables:h},impact:y,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return m};function cd(e,t){return e.map(function(r){return t[r]})}var Hi=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,s=cd(o.all,n),c=zt({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return B({},t,{displaced:c})},zi=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=mr({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return vn({pageBorderBoxCenter:s,draggable:r,viewport:i})},Wi=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&N();var a=t.impact,i=n||t.viewport,o=r||t.dimensions,s=o.draggables,c=o.droppables,p=s[t.critical.draggable.id],g=Ae(a);g||N();var d=c[g],u=Hi({impact:a,viewport:i,destination:d,draggables:s}),f=zi({impact:u,draggable:p,droppable:d,draggables:s,viewport:i,afterCritical:t.afterCritical});return Lt({impact:u,clientSelection:f,state:t,dimensions:o,viewport:i})},ud=function(e){return{index:e.index,droppableId:e.droppableId}},Ui=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=qt(r.axis,t.displaceBy),o=xt(r.descriptor.id,n),s=o.indexOf(t);s===-1&&N();var c=o.slice(s+1),p=c.reduce(function(f,v){return f[v.descriptor.id]=!0,f},{}),g={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:p},d=zt({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),u={displaced:d,displacedBy:i,at:{type:"REORDER",destination:ud(t.descriptor)}};return{impact:u,afterCritical:g}},dd=function(e,t){return{draggables:e.draggables,droppables:hn(e.droppables,t)}},pd=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=tr(t.client,r),i=rr(a,n),o=B({},t,{placeholder:B({},t.placeholder,{client:a}),client:a,page:i});return o},fd=function(e){var t=e.frame;return t||N(),t},gd=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,s=r[o],c=fd(s),p=c.scroll.diff.value,g=we(a,p),d=pd({draggable:i,offset:g,initialWindowScroll:n.scroll.initial});return d})},vd=function(e){var t=e.state,r=e.published,n=r.modified.map(function(C){var I=t.dimensions.droppables[C.droppableId],M=cn(I,C.scroll);return M}),a=B({},t.dimensions.droppables,{},Ni(n)),i=Ei(gd({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=B({},t.dimensions.draggables,{},i);r.removals.forEach(function(C){delete o[C]});var s={droppables:a,draggables:o},c=Ae(t.impact),p=c?s.droppables[c]:null,g=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],u=Ui({draggable:g,home:d,draggables:o,viewport:t.viewport}),f=u.impact,v=u.afterCritical,y=p&&p.isCombineEnabled?t.impact:f,h=Gi({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:y,viewport:t.viewport,afterCritical:v}),m=B({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:h,onLiftImpact:f,dimensions:s,afterCritical:v,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return m;var w=B({phase:"DROP_PENDING"},m,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return w},qr=function(t){return t.movementMode==="SNAP"},Pr=function(t,r,n){var a=dd(t.dimensions,r);return!qr(t)||n?Lt({state:t,dimensions:a}):Wi({state:t,dimensions:a})};function Tr(e){return e.isDragging&&e.movementMode==="SNAP"?B({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Oa={phase:"IDLE",completed:null,shouldFlush:!1},hd=function(e,t){if(e===void 0&&(e=Oa),t.type==="FLUSH")return B({},Oa,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&N();var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,s=r.movementMode,c=o.draggables[n.draggable.id],p=o.droppables[n.droppable.id],g={selection:a,borderBoxCenter:c.client.borderBox.center,offset:be},d={client:g,page:{selection:we(g.selection,i.scroll.initial),borderBoxCenter:we(g.selection,i.scroll.initial),offset:we(g.selection,i.scroll.diff.value)}},u=gr(o.droppables).every(function(pe){return!pe.isFixedOnPage}),f=Ui({draggable:c,home:p,draggables:o.draggables,viewport:i}),v=f.impact,y=f.afterCritical,h={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:o,initial:d,current:d,isWindowScrollAllowed:u,impact:v,afterCritical:y,onLiftImpact:v,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return h}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&N();var m=B({phase:"COLLECTING"},e,{phase:"COLLECTING"});return m}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||N(),vd({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;at(e)||N();var w=t.payload.client;return Je(w,e.current.client.selection)?e:Lt({state:e,clientSelection:w,impact:qr(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Tr(e);at(e)||N();var C=t.payload,I=C.id,M=C.newScroll,A=e.dimensions.droppables[I];if(!A)return e;var L=cn(A,M);return Pr(e,L,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;at(e)||N();var V=t.payload,$=V.id,G=V.isEnabled,z=e.dimensions.droppables[$];z||N(),z.isEnabled===G&&N();var ee=B({},z,{isEnabled:G});return Pr(e,ee,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;at(e)||N();var P=t.payload,H=P.id,ne=P.isCombineEnabled,O=e.dimensions.droppables[H];O||N(),O.isCombineEnabled===ne&&N();var de=B({},O,{isCombineEnabled:ne});return Pr(e,de,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;at(e)||N(),e.isWindowScrollAllowed||N();var ce=t.payload.newScroll;if(Je(e.viewport.scroll.current,ce))return Tr(e);var Q=Ai(e.viewport,ce);return qr(e)?Wi({state:e,viewport:Q}):Lt({state:e,viewport:Q})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!at(e))return e;var oe=t.payload.maxScroll;if(Je(oe,e.viewport.scroll.max))return e;var ve=B({},e.viewport,{scroll:B({},e.viewport.scroll,{max:oe})});return B({phase:"DRAGGING"},e,{viewport:ve})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&N();var ae=Zu({state:e,type:t.type});return ae?Lt({state:e,impact:ae.impact,clientSelection:ae.clientSelection,scrollJumpRequest:ae.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var ye=t.payload.reason;e.phase!=="COLLECTING"&&N();var Se=B({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:ye});return Se}if(t.type==="DROP_ANIMATE"){var fe=t.payload,Ce=fe.completed,Ie=fe.dropDuration,De=fe.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||N();var Y={phase:"DROP_ANIMATING",completed:Ce,dropDuration:Ie,newHomeClientOffset:De,dimensions:e.dimensions};return Y}if(t.type==="DROP_COMPLETE"){var he=t.payload.completed;return{phase:"IDLE",completed:he,shouldFlush:!1}}return e},md=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},bd=function(t){return{type:"LIFT",payload:t}},yd=function(t){return{type:"INITIAL_PUBLISH",payload:t}},xd=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},wd=function(){return{type:"COLLECTION_STARTING",payload:null}},Dd=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Sd=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Cd=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},qi=function(t){return{type:"MOVE",payload:t}},Id=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},Nd=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},Ed=function(){return{type:"MOVE_UP",payload:null}},Pd=function(){return{type:"MOVE_DOWN",payload:null}},Td=function(){return{type:"MOVE_RIGHT",payload:null}},Od=function(){return{type:"MOVE_LEFT",payload:null}},mn=function(){return{type:"FLUSH",payload:null}},Rd=function(t){return{type:"DROP_ANIMATE",payload:t}},bn=function(t){return{type:"DROP_COMPLETE",payload:t}},Vi=function(t){return{type:"DROP",payload:t}},jd=function(t){return{type:"DROP_PENDING",payload:t}},Yi=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Ad=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,s=o.id,c=o.clientSelection,p=o.movementMode,g=r();g.phase==="DROP_ANIMATING"&&n(bn({completed:g.completed})),r().phase!=="IDLE"&&N(),n(mn()),n(md({draggableId:s,movementMode:p}));var d={shouldPublishImmediately:p==="SNAP"},u={draggableId:s,scrollOptions:d},f=e.startPublishing(u),v=f.critical,y=f.dimensions,h=f.viewport;n(yd({critical:v,dimensions:y,clientSelection:c,movementMode:p,viewport:h}))}}}},Md=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},yn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wt={opacity:{drop:0,combining:.7},scale:{drop:.75}},xn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},nt=xn.outOfTheWay+"s "+yn.outOfTheWay,Ft={fluid:"opacity "+nt,snap:"transform "+nt+", opacity "+nt,drop:function(t){var r=t+"s "+yn.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+nt,placeholder:"height "+nt+", width "+nt+", margin "+nt},Ra=function(t){return Je(t,be)?null:"translate("+t.x+"px, "+t.y+"px)"},Vr={moveTo:Ra,drop:function(t,r){var n=Ra(t);return n?r?n+" scale("+Wt.scale.drop+")":n:null}},Yr=xn.minDropTime,Xi=xn.maxDropTime,kd=Xi-Yr,ja=1500,Bd=.6,Ld=function(e){var t=e.current,r=e.destination,n=e.reason,a=Gt(t,r);if(a<=0)return Yr;if(a>=ja)return Xi;var i=a/ja,o=Yr+kd*i,s=n==="CANCEL"?o*Bd:o;return Number(s.toFixed(2))},Fd=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,s=n.droppables,c=Ae(t),p=c?s[c]:null,g=s[r.descriptor.droppableId],d=zi({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:p||g,viewport:a}),u=je(d,r.client.borderBox.center);return u},$d=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var s=Hi({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=B({},n,{displaced:Ht});return{impact:c,didDropInsideDroppable:!0}},Gd=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(jd({reason:o}));return}if(i.phase!=="IDLE"){var s=i.phase==="DROP_PENDING"&&i.isWaiting;s&&N(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||N();var c=i.critical,p=i.dimensions,g=p.draggables[i.critical.draggable.id],d=$d({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=d.impact,f=d.didDropInsideDroppable,v=f?dn(u):null,y=f?vr(u):null,h={index:c.draggable.index,droppableId:c.droppable.id},m={draggableId:g.descriptor.id,type:g.descriptor.type,source:h,reason:o,mode:i.movementMode,destination:v,combine:y},w=Fd({impact:u,draggable:g,dimensions:p,viewport:i.viewport,afterCritical:i.afterCritical}),C={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:u},I=!Je(i.current.client.offset,w)||!!m.combine;if(!I){r(bn({completed:C}));return}var M=Ld({current:i.current.client.offset,destination:w,reason:o}),A={newHomeClientOffset:w,dropDuration:M,completed:C};r(Rd(A))}}}},Ji=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Hd(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function zd(e){var t=e.onWindowScroll;function r(){t(Ji())}var n=$t(r),a=Hd(n),i=Xe;function o(){return i!==Xe}function s(){o()&&N(),i=$e(window,[a])}function c(){o()||N(),n.cancel(),i(),i=Xe}return{start:s,stop:c,isActive:o}}var Wd=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Ud=function(e){var t=zd({onWindowScroll:function(n){e.dispatch(Id({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Wd(n)&&t.stop(),r(n)}}},qd=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},Vd=function(){var e=[],t=function(i){var o=un(e,function(p){return p.timerId===i});o===-1&&N();var s=e.splice(o,1),c=s[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),s={timerId:o,callback:i};e.push(s)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},Yd=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Xd=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Jd=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},At=function(t,r){r()},Vt=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Or=function(t,r,n,a){if(!t){n(a(r));return}var i=qd(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},Kd=function(e,t){var r=Vd(),n=null,a=function(u,f){n&&N(),At("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var y={draggableId:u,mode:f};v(y)}})},i=function(u,f){n&&N(),At("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(Vt(u,f))})},o=function(u,f){n&&N();var v=Vt(u,f);n={mode:f,lastCritical:u,lastLocation:v.source,lastCombine:null},r.add(function(){At("onDragStart",function(){return Or(e().onDragStart,v,t,Zt.onDragStart)})})},s=function(u,f){var v=dn(f),y=vr(f);n||N();var h=!Jd(u,n.lastCritical);h&&(n.lastCritical=u);var m=!Yd(n.lastLocation,v);m&&(n.lastLocation=v);var w=!Xd(n.lastCombine,y);if(w&&(n.lastCombine=y),!(!h&&!m&&!w)){var C=B({},Vt(u,n.mode),{combine:y,destination:v});r.add(function(){At("onDragUpdate",function(){return Or(e().onDragUpdate,C,t,Zt.onDragUpdate)})})}},c=function(){n||N(),r.flush()},p=function(u){n||N(),n=null,At("onDragEnd",function(){return Or(e().onDragEnd,u,t,Zt.onDragEnd)})},g=function(){if(n){var u=B({},Vt(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(u)}};return{beforeCapture:a,beforeStart:i,start:o,update:s,flush:c,drop:p,abort:g}},Qd=function(e,t){var r=Kd(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var s=i.payload.completed.result;r.flush(),a(i),r.drop(s);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Zd=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&N(),e.dispatch(bn({completed:n.completed}))}}},_d=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Yi())}};r=requestAnimationFrame(function(){r=null,t=$e(window,[o])})}}}},ep=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},tp=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},rp=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},np=function(e){return function(t){return function(r){return function(n){if(rp(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&N(),e.start(a);return}r(n),e.scroll(t.getState())}}}},ap=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Vi({reason:n.reason})))}}}},ip=ei,op=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return Zr(hd,ip(ws(Md(n),ep(t),Ad(t),Gd,Zd,_d,ap,np(o),Ud,tp(r),Qd(a,i))))},Rr=function(){return{additions:{},removals:{},modified:{}}};function sp(e){var t=e.registry,r=e.callbacks,n=Rr(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,d=g.additions,u=g.removals,f=g.modified,v=Object.keys(d).map(function(m){return t.draggable.getById(m).getDimension(be)}).sort(function(m,w){return m.descriptor.index-w.descriptor.index}),y=Object.keys(f).map(function(m){var w=t.droppable.getById(m),C=w.callbacks.getScrollWhileDragging();return{droppableId:m,scroll:C}}),h={additions:v,removals:Object.keys(u),modified:y};n=Rr(),r.publish(h)}))},o=function(g){var d=g.descriptor.id;n.additions[d]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],i()},s=function(g){var d=g.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Rr())};return{add:o,remove:s,stop:c}}var Ki=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=je({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},Qi=function(){var e=document.documentElement;return e||N(),e},Zi=function(){var e=Qi(),t=Ki({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},lp=function(){var e=Ji(),t=Zi(),r=e.y,n=e.x,a=Qi(),i=a.clientWidth,o=a.clientHeight,s=n+i,c=r+o,p=He({top:r,left:n,right:s,bottom:c}),g={frame:p,scroll:{initial:e,current:e,max:t,diff:{value:be,displacement:be}}};return g},cp=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=lp(),i=a.scroll.current,o=t.droppable,s=n.droppable.getAllByType(o.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(d){return d.getDimension(i)}),p={draggables:Ei(c),droppables:Ni(s)},g={dimensions:p,critical:t,viewport:a};return g};function Aa(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var up=function(e,t){var r=null,n=sp({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(f,v){e.droppable.exists(f)||N(),r&&t.updateDroppableIsEnabled({id:f,isEnabled:v})},i=function(f,v){r&&(e.droppable.exists(f)||N(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:v}))},o=function(f,v){r&&(e.droppable.exists(f)||N(),t.updateDroppableScroll({id:f,newScroll:v}))},s=function(f,v){r&&e.droppable.getById(f).callbacks.scroll(v)},c=function(){if(r){n.stop();var f=r.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},p=function(f){r||N();var v=r.critical.draggable;f.type==="ADDITION"&&Aa(e,v,f.value)&&n.add(f.value),f.type==="REMOVAL"&&Aa(e,v,f.value)&&n.remove(f.value)},g=function(f){r&&N();var v=e.draggable.getById(f.draggableId),y=e.droppable.getById(v.descriptor.droppableId),h={draggable:v.descriptor,droppable:y.descriptor},m=e.subscribe(p);return r={critical:h,unsubscribe:m},cp({critical:h,registry:e,scrollOptions:f.scrollOptions})},d={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:s,updateDroppableScroll:o,startPublishing:g,stopPublishing:c};return d},_i=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},dp=function(e){window.scrollBy(e.x,e.y)},pp=me(function(e){return gr(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),fp=function(t,r){var n=Ze(pp(r),function(a){return a.frame||N(),Li(a.frame.pageMarginBox)(t)});return n},gp=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=fp(t,n);return i},Ke={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},vp=function(e,t){var r=e[t.size]*Ke.startFromPercentage,n=e[t.size]*Ke.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},eo=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},wn=1,hp=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Ke.maxPixelScroll;if(e===t.startScrollingFrom)return wn;var r=eo({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=Ke.maxPixelScroll*Ke.ease(n);return Math.ceil(a)},Ma=Ke.durationDampening.accelerateAt,ka=Ke.durationDampening.stopDampeningAt,mp=function(e,t){var r=t,n=ka,a=Date.now(),i=a-r;if(i>=ka)return e;if(i<Ma)return wn;var o=eo({startOfRange:Ma,endOfRange:n,current:i}),s=e*Ke.ease(o);return Math.ceil(s)},Ba=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=hp(t,r);return i===0?0:a?Math.max(mp(i,n),wn):i},La=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=vp(t,a),s=r[a.end]<r[a.start];return s?Ba({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*Ba({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},bp=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},yp=Ci(function(e){return e===0?0:e}),to=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},s=La({container:r,distanceToEdges:o,dragStartTime:t,axis:pn,shouldUseTimeDampening:i}),c=La({container:r,distanceToEdges:o,dragStartTime:t,axis:Oi,shouldUseTimeDampening:i}),p=yp({x:c,y:s});if(Je(p,be))return null;var g=bp({container:r,subject:n,proposedScroll:p});return g?Je(g,be)?null:g:null},xp=Ci(function(e){return e===0?0:e>0?1:-1}),Dn=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=we(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return Je(o,be)?null:o}}(),ro=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=xp(a),s=Dn({max:i,current:n,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},Sn=function(t,r){return ro({current:t.scroll.current,max:t.scroll.max,change:r})},wp=function(t,r){if(!Sn(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return Dn({current:a,max:n,change:r})},Cn=function(t,r){var n=t.frame;return n?ro({current:n.scroll.current,max:n.scroll.max,change:r}):!1},Dp=function(t,r){var n=t.frame;return!n||!Cn(t,r)?null:Dn({current:n.scroll.current,max:n.scroll.max,change:r})},Sp=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=to({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&Sn(t,o)?o:null},Cp=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=to({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return s&&Cn(t,s)?s:null},Fa=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],c=s.page.marginBox;if(t.isWindowScrollAllowed){var p=t.viewport,g=Sp({dragStartTime:r,viewport:p,subject:c,center:o,shouldUseTimeDampening:n});if(g){a(g);return}}var d=gp({center:o,destination:Ae(t.impact),droppables:t.dimensions.droppables});if(d){var u=Cp({dragStartTime:r,droppable:d,subject:c,center:o,shouldUseTimeDampening:n});u&&i(d.descriptor.id,u)}},Ip=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=$t(t),a=$t(r),i=null,o=function(g){i||N();var d=i,u=d.shouldUseTimeDampening,f=d.dragStartTime;Fa({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:f,shouldUseTimeDampening:u})},s=function(g){i&&N();var d=Date.now(),u=!1,f=function(){u=!0};Fa({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),i={dragStartTime:d,shouldUseTimeDampening:u},u&&o(g)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:s,stop:c,scroll:o}},Np=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(p,g){var d=we(p.current.client.selection,g);t({client:d})},i=function(p,g){if(!Cn(p,g))return g;var d=Dp(p,g);if(!d)return r(p.descriptor.id,g),null;var u=je(g,d);r(p.descriptor.id,u);var f=je(g,u);return f},o=function(p,g,d){if(!p||!Sn(g,d))return d;var u=wp(g,d);if(!u)return n(d),null;var f=je(d,u);n(f);var v=je(d,f);return v},s=function(p){var g=p.scrollJumpRequest;if(g){var d=Ae(p.impact);d||N();var u=i(p.dimensions.droppables[d],g);if(u){var f=p.viewport,v=o(p.isWindowScrollAllowed,f,u);v&&a(p,v)}}};return s},Ep=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=Ip({scrollWindow:r,scrollDroppable:t}),i=Np({move:n,scrollWindow:r,scrollDroppable:t}),o=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&i(p)}},s={scroll:o,start:a.start,stop:a.stop};return s},ht="data-rbd",mt=function(){var e=ht+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Xr=function(){var e=ht+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Pp=function(){var e=ht+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),$a={contextId:ht+"-scroll-container-context-id"},Tp=function(t){return function(r){return"["+r+'="'+t+'"]'}},Mt=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},Op="pointer-events: none;",Rp=function(e){var t=Tp(e),r=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(mt.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:Op,dropAnimating:s}}}(),n=function(){var s=`
      transition: `+Ft.outOfTheWay+`;
    `;return{selector:t(Xr.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),a={selector:t(Pp.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:Mt(o,"always"),resting:Mt(o,"resting"),dragging:Mt(o,"dragging"),dropAnimating:Mt(o,"dropAnimating"),userCancel:Mt(o,"userCancel")}},Me=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,jr=function(){var t=document.querySelector("head");return t||N(),t},Ga=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function jp(e,t){var r=_(function(){return Rp(e)},[e]),n=x.useRef(null),a=x.useRef(null),i=k(me(function(d){var u=a.current;u||N(),u.textContent=d}),[]),o=k(function(d){var u=n.current;u||N(),u.textContent=d},[]);Me(function(){!n.current&&!a.current||N();var d=Ga(t),u=Ga(t);return n.current=d,a.current=u,d.setAttribute(ht+"-always",e),u.setAttribute(ht+"-dynamic",e),jr().appendChild(d),jr().appendChild(u),o(r.always),i(r.resting),function(){var f=function(y){var h=y.current;h||N(),jr().removeChild(h),y.current=null};f(n),f(a)}},[t,o,i,r.always,r.resting,e]);var s=k(function(){return i(r.dragging)},[i,r.dragging]),c=k(function(d){if(d==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),p=k(function(){a.current&&i(r.resting)},[i,r.resting]),g=_(function(){return{dragging:s,dropping:c,resting:p}},[s,c,p]);return g}var no=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function br(e){return e instanceof no(e).HTMLElement}function Ap(e,t){var r="["+mt.contextId+'="'+e+'"]',n=Ii(document.querySelectorAll(r));if(!n.length)return null;var a=Ze(n,function(i){return i.getAttribute(mt.draggableId)===t});return!a||!br(a)?null:a}function Mp(e){var t=x.useRef({}),r=x.useRef(null),n=x.useRef(null),a=x.useRef(!1),i=k(function(u,f){var v={id:u,focus:f};return t.current[u]=v,function(){var h=t.current,m=h[u];m!==v&&delete h[u]}},[]),o=k(function(u){var f=Ap(e,u);f&&f!==document.activeElement&&f.focus()},[e]),s=k(function(u,f){r.current===u&&(r.current=f)},[]),c=k(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var u=r.current;u&&o(u)}))},[o]),p=k(function(u){r.current=null;var f=document.activeElement;f&&f.getAttribute(mt.draggableId)===u&&(r.current=u)},[]);Me(function(){return a.current=!0,function(){a.current=!1;var u=n.current;u&&cancelAnimationFrame(u)}},[]);var g=_(function(){return{register:i,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:s}},[i,p,c,s]);return g}function kp(){var e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){var f=t.indexOf(d);f!==-1&&t.splice(f,1)}}function n(d){t.length&&t.forEach(function(u){return u(d)})}function a(d){return e.draggables[d]||null}function i(d){var u=a(d);return u||N(),u}var o={register:function(u){e.draggables[u.descriptor.id]=u,n({type:"ADDITION",value:u})},update:function(u,f){var v=e.draggables[f.descriptor.id];v&&v.uniqueId===u.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:function(u){var f=u.descriptor.id,v=a(f);v&&u.uniqueId===v.uniqueId&&(delete e.draggables[f],n({type:"REMOVAL",value:u}))},getById:i,findById:a,exists:function(u){return!!a(u)},getAllByType:function(u){return ir(e.draggables).filter(function(f){return f.descriptor.type===u})}};function s(d){return e.droppables[d]||null}function c(d){var u=s(d);return u||N(),u}var p={register:function(u){e.droppables[u.descriptor.id]=u},unregister:function(u){var f=s(u.descriptor.id);f&&u.uniqueId===f.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:s,exists:function(u){return!!s(u)},getAllByType:function(u){return ir(e.droppables).filter(function(f){return f.descriptor.type===u})}};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:p,subscribe:r,clean:g}}function Bp(){var e=_(kp,[]);return x.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var In=re.createContext(null),sr=function(){var e=document.body;return e||N(),e},Lp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Fp=function(t){return"rbd-announcement-"+t};function $p(e){var t=_(function(){return Fp(e)},[e]),r=x.useRef(null);x.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),B(i.style,Lp),sr().appendChild(i),function(){setTimeout(function(){var c=sr();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=k(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var Gp=0,Hp={separator:"::"};function Nn(e,t){return t===void 0&&(t=Hp),_(function(){return""+e+t.separator+Gp++},[t.separator,e])}function zp(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Wp(e){var t=e.contextId,r=e.text,n=Nn("hidden-text",{separator:"-"}),a=_(function(){return zp({contextId:t,uniqueId:n})},[n,t]);return x.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",sr().appendChild(o),function(){var c=sr();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var yr=re.createContext(null);function ao(e){var t=x.useRef(e);return x.useEffect(function(){t.current=e}),t}function Up(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&N();var s={abandon:o};return e=s,s}function a(){e||N(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var qp=9,Vp=13,En=27,io=32,Yp=33,Xp=34,Jp=35,Kp=36,Qp=37,Zp=38,_p=39,ef=40,Yt,tf=(Yt={},Yt[Vp]=!0,Yt[qp]=!0,Yt),oo=function(e){tf[e.keyCode]&&e.preventDefault()},xr=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Ze(t,function(n){return"on"+n in document});return r||e}(),so=0,Ha=5;function rf(e,t){return Math.abs(t.x-e.x)>=Ha||Math.abs(t.y-e.y)>=Ha}var za={type:"IDLE"};function nf(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,c=o.clientX,p=o.clientY;if(s===so){var g={x:c,y:p},d=n();if(d.type==="DRAGGING"){o.preventDefault(),d.actions.move(g);return}d.type!=="PENDING"&&N();var u=d.point;if(rf(u,g)){o.preventDefault();var f=d.actions.fluidLift(g);a({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(o){var s=n();if(s.type!=="DRAGGING"){t();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var s=n();if(s.type==="PENDING"){t();return}if(o.keyCode===En){o.preventDefault(),t();return}oo(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=n();if(s.type==="IDLE"&&N(),s.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:xr,fn:t}]}function af(e){var t=x.useRef(za),r=x.useRef(Xe),n=_(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===so&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var u=e.findClosestDraggableId(d);if(u){var f=e.tryGetLock(u,o,{sourceEvent:d});if(f){d.preventDefault();var v={x:d.clientX,y:d.clientY};r.current(),p(f,v)}}}}}},[e]),a=_(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var u=e.findClosestDraggableId(d);if(u){var f=e.findOptionsForDraggable(u);f&&(f.shouldRespectForcePress||e.canGetLock(u)&&d.preventDefault())}}}}},[e]),i=k(function(){var d={passive:!1,capture:!0};r.current=$e(window,[a,n],d)},[a,n]),o=k(function(){var g=t.current;g.type!=="IDLE"&&(t.current=za,r.current(),i())},[i]),s=k(function(){var g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),c=k(function(){var d={capture:!0,passive:!1},u=nf({cancel:s,completed:o,getPhase:function(){return t.current},setPhase:function(v){t.current=v}});r.current=$e(window,u,d)},[s,o]),p=k(function(d,u){t.current.type!=="IDLE"&&N(),t.current={type:"PENDING",point:u,actions:d},c()},[c]);Me(function(){return i(),function(){r.current()}},[i])}var pt;function of(){}var sf=(pt={},pt[Xp]=!0,pt[Yp]=!0,pt[Kp]=!0,pt[Jp]=!0,pt);function lf(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===En){i.preventDefault(),r();return}if(i.keyCode===io){i.preventDefault(),n();return}if(i.keyCode===ef){i.preventDefault(),e.moveDown();return}if(i.keyCode===Zp){i.preventDefault(),e.moveUp();return}if(i.keyCode===_p){i.preventDefault(),e.moveRight();return}if(i.keyCode===Qp){i.preventDefault(),e.moveLeft();return}if(sf[i.keyCode]){i.preventDefault();return}oo(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:xr,fn:r}]}function cf(e){var t=x.useRef(of),r=_(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==io)return;var o=e.findClosestDraggableId(i);if(!o)return;var s=e.tryGetLock(o,g,{sourceEvent:i});if(!s)return;i.preventDefault();var c=!0,p=s.snapLift();t.current();function g(){c||N(),c=!1,t.current(),n()}t.current=$e(window,lf(p,g),{capture:!0,passive:!1})}}},[e]),n=k(function(){var i={passive:!1,capture:!0};t.current=$e(window,[r],i)},[r]);Me(function(){return n(),function(){t.current()}},[n])}var Ar={type:"IDLE"},uf=120,df=.15;function pf(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===En&&a.preventDefault(),t()}},{eventName:xr,fn:t}]}function ff(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var s=i.touches[0],c=s.clientX,p=s.clientY,g={x:c,y:p};i.preventDefault(),o.actions.move(g)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&N();var s=i.touches[0];if(s){var c=s.force>=df;if(c){var p=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){p&&t();return}if(p){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:xr,fn:t}]}function gf(e){var t=x.useRef(Ar),r=x.useRef(Xe),n=k(function(){return t.current},[]),a=k(function(f){t.current=f},[]),i=_(function(){return{eventName:"touchstart",fn:function(f){if(!f.defaultPrevented){var v=e.findClosestDraggableId(f);if(v){var y=e.tryGetLock(v,s,{sourceEvent:f});if(y){var h=f.touches[0],m=h.clientX,w=h.clientY,C={x:m,y:w};r.current(),d(y,C)}}}}}},[e]),o=k(function(){var f={capture:!0,passive:!1};r.current=$e(window,[i],f)},[i]),s=k(function(){var u=t.current;u.type!=="IDLE"&&(u.type==="PENDING"&&clearTimeout(u.longPressTimerId),a(Ar),r.current(),o())},[o,a]),c=k(function(){var u=t.current;s(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[s]),p=k(function(){var f={capture:!0,passive:!1},v={cancel:c,completed:s,getPhase:n},y=$e(window,ff(v),f),h=$e(window,pf(v),f);r.current=function(){y(),h()}},[c,n,s]),g=k(function(){var f=n();f.type!=="PENDING"&&N();var v=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[n,a]),d=k(function(f,v){n().type!=="IDLE"&&N();var y=setTimeout(g,uf);a({type:"PENDING",point:v,actions:f,longPressTimerId:y}),p()},[p,n,a,g]);Me(function(){return o(),function(){r.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(Ar))}},[n,o,a]),Me(function(){var f=$e(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return f},[])}var vf={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function lo(e,t){if(t==null)return!1;var r=!!vf[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:lo(e,t.parentElement)}function hf(e,t){var r=t.target;return br(r)?lo(e,r):!1}var mf=function(e){return He(e.getBoundingClientRect()).center};function bf(e){return e instanceof no(e).Element}var yf=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Ze(t,function(n){return n in Element.prototype});return r||e}();function co(e,t){return e==null?null:e[yf](t)?e:co(e.parentElement,t)}function xf(e,t){return e.closest?e.closest(t):co(e,t)}function wf(e){return"["+mt.contextId+'="'+e+'"]'}function Df(e,t){var r=t.target;if(!bf(r))return null;var n=wf(e),a=xf(r,n);return!a||!br(a)?null:a}function Sf(e,t){var r=Df(e,t);return r?r.getAttribute(mt.draggableId):null}function Cf(e,t){var r="["+Xr.contextId+'="'+e+'"]',n=Ii(document.querySelectorAll(r)),a=Ze(n,function(i){return i.getAttribute(Xr.id)===t});return!a||!br(a)?null:a}function If(e){e.preventDefault()}function Xt(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function uo(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!_i(r.getState(),a))}function Nf(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,c=uo({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var p=a.draggable.getById(i),g=Cf(r,p.descriptor.id);if(!g||s&&!p.options.canDragInteractiveElements&&hf(g,s))return null;var d=t.claim(o||Xe),u="PRE_DRAG";function f(){return p.options.shouldRespectForcePress}function v(){return t.isActive(d)}function y(A,L){Xt({expected:A,phase:u,isLockActive:v,shouldWarn:!0})&&n.dispatch(L())}var h=y.bind(null,"DRAGGING");function m(A){function L(){t.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(L(),u!=="PRE_DRAG"&&N()),n.dispatch(bd(A.liftActionArgs)),u="DRAGGING";function V($,G){if(G===void 0&&(G={shouldBlockNextClick:!1}),A.cleanup(),G.shouldBlockNextClick){var z=$e(window,[{eventName:"click",fn:If,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}L(),n.dispatch(Vi({reason:$}))}return B({isActive:function(){return Xt({expected:"DRAGGING",phase:u,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:f,drop:function(G){return V("DROP",G)},cancel:function(G){return V("CANCEL",G)}},A.actions)}function w(A){var L=$t(function($){h(function(){return qi({client:$})})}),V=m({liftActionArgs:{id:i,clientSelection:A,movementMode:"FLUID"},cleanup:function(){return L.cancel()},actions:{move:L}});return B({},V,{move:L})}function C(){var A={moveUp:function(){return h(Ed)},moveRight:function(){return h(Td)},moveDown:function(){return h(Pd)},moveLeft:function(){return h(Od)}};return m({liftActionArgs:{id:i,clientSelection:mf(g),movementMode:"SNAP"},cleanup:Xe,actions:A})}function I(){var A=Xt({expected:"PRE_DRAG",phase:u,isLockActive:v,shouldWarn:!0});A&&t.release()}var M={isActive:function(){return Xt({expected:"PRE_DRAG",phase:u,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:f,fluidLift:w,snapLift:C,abort:I};return M}var Ef=[af,cf,gf];function Pf(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?Ef:[],a||[]),s=x.useState(function(){return Up()})[0],c=k(function(w,C){w.isDragging&&!C.isDragging&&s.tryAbandon()},[s]);Me(function(){var w=r.getState(),C=r.subscribe(function(){var I=r.getState();c(w,I),w=I});return C},[s,r,c]),Me(function(){return s.tryAbandon},[s.tryAbandon]);for(var p=k(function(m){return uo({lockAPI:s,registry:n,store:r,draggableId:m})},[s,n,r]),g=k(function(m,w,C){return Nf({lockAPI:s,registry:n,contextId:t,store:r,draggableId:m,forceSensorStop:w,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[t,s,n,r]),d=k(function(m){return Sf(t,m)},[t]),u=k(function(m){var w=n.draggable.findById(m);return w?w.options:null},[n.draggable]),f=k(function(){s.isClaimed()&&(s.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(mn()))},[s,r]),v=k(s.isClaimed,[s]),y=_(function(){return{canGetLock:p,tryGetLock:g,findClosestDraggableId:d,findOptionsForDraggable:u,tryReleaseLock:f,isLockClaimed:v}},[p,g,d,u,f,v]),h=0;h<o.length;h++)o[h](y)}var Tf=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function kt(e){return e.current||N(),e.current}function Of(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=x.useRef(null),s=ao(e),c=k(function(){return Tf(s.current)},[s]),p=$p(t),g=Wp({contextId:t,text:i}),d=jp(t,a),u=k(function($){kt(o).dispatch($)},[]),f=_(function(){return oa({publishWhileDragging:xd,updateDroppableScroll:Dd,updateDroppableIsEnabled:Sd,updateDroppableIsCombineEnabled:Cd,collectionStarting:wd},u)},[u]),v=Bp(),y=_(function(){return up(v,f)},[v,f]),h=_(function(){return Ep(B({scrollWindow:dp,scrollDroppable:y.scrollDroppable},oa({move:qi},u)))},[y.scrollDroppable,u]),m=Mp(t),w=_(function(){return op({announce:p,autoScroller:h,dimensionMarshal:y,focusMarshal:m,getResponders:c,styleMarshal:d})},[p,h,y,m,c,d]);o.current=w;var C=k(function(){var $=kt(o),G=$.getState();G.phase!=="IDLE"&&$.dispatch(mn())},[]),I=k(function(){var $=kt(o).getState();return $.isDragging||$.phase==="DROP_ANIMATING"},[]),M=_(function(){return{isDragging:I,tryAbort:C}},[I,C]);r(M);var A=k(function($){return _i(kt(o).getState(),$)},[]),L=k(function(){return at(kt(o).getState())},[]),V=_(function(){return{marshal:y,focus:m,contextId:t,canLift:A,isMovementAllowed:L,dragHandleUsageInstructionsId:g,registry:v}},[t,y,g,m,A,L,v]);return Pf({contextId:t,store:w,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(function(){return C},[C]),re.createElement(yr.Provider,{value:V},re.createElement(yc,{context:In,store:w},e.children))}var Rf=0;function jf(){return _(function(){return""+Rf++},[])}function Af(e){var t=jf(),r=e.dragHandleUsageInstructions||Zt.dragHandleUsageInstructions;return re.createElement(lu,null,function(n){return re.createElement(Of,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var po=function(t){return function(r){return t===r}},Mf=po("scroll"),kf=po("auto"),Wa=function(t,r){return r(t.overflowX)||r(t.overflowY)},Bf=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return Wa(n,Mf)||Wa(n,kf)},Lf=function(){return!1},Ff=function e(t){return t==null?null:t===document.body?Lf()?t:null:t===document.documentElement?null:Bf(t)?t:e(t.parentElement)},Jr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},$f=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Gf=function(e){var t=Ff(e),r=$f(e);return{closestScrollable:t,isFixedOnPage:r}},Hf=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,c=e.closest,p=function(){if(!c)return null;var f=c.scrollSize,v=c.client,y=Ki({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:f,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:y,diff:{value:be,displacement:be}}}}(),g=i==="vertical"?pn:Oi,d=vt({page:s,withPlaceholder:null,axis:g,frame:p}),u={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:r,client:o,page:s,frame:p,subject:d};return u},zf=function(t,r){var n=xi(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,s=i+r.scrollWidth,c={top:a,right:s,bottom:o,left:i},p=sn(c,n.border),g=ln({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return g},Wf=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,p=n.closestScrollable,g=zf(t,p),d=rr(g,a),u=function(){if(!p)return null;var v=xi(p),y={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:v,page:rr(v,a),scroll:Jr(p),scrollSize:y,shouldClipSubject:c}}(),f=Hf({descriptor:r,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:i,client:g,page:d,closest:u});return f},Uf={passive:!1},qf={passive:!0},Ua=function(e){return e.shouldPublishImmediately?Uf:qf};function lr(e){var t=x.useContext(e);return t||N(),t}var Jt=function(t){return t&&t.env.closestScrollable||null};function Vf(e){var t=x.useRef(null),r=lr(yr),n=Nn("droppable"),a=r.registry,i=r.marshal,o=ao(e),s=_(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=x.useRef(s),p=_(function(){return me(function(I,M){t.current||N();var A={x:I,y:M};i.updateDroppableScroll(s.id,A)})},[s.id,i]),g=k(function(){var I=t.current;return!I||!I.env.closestScrollable?be:Jr(I.env.closestScrollable)},[]),d=k(function(){var I=g();p(I.x,I.y)},[g,p]),u=_(function(){return $t(d)},[d]),f=k(function(){var I=t.current,M=Jt(I);I&&M||N();var A=I.scrollOptions;if(A.shouldPublishImmediately){d();return}u()},[u,d]),v=k(function(I,M){t.current&&N();var A=o.current,L=A.getDroppableRef();L||N();var V=Gf(L),$={ref:L,descriptor:s,env:V,scrollOptions:M};t.current=$;var G=Wf({ref:L,descriptor:s,env:V,windowScroll:I,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),z=V.closestScrollable;return z&&(z.setAttribute($a.contextId,r.contextId),z.addEventListener("scroll",f,Ua($.scrollOptions))),G},[r.contextId,s,f,o]),y=k(function(){var I=t.current,M=Jt(I);return I&&M||N(),Jr(M)},[]),h=k(function(){var I=t.current;I||N();var M=Jt(I);t.current=null,M&&(u.cancel(),M.removeAttribute($a.contextId),M.removeEventListener("scroll",f,Ua(I.scrollOptions)))},[f,u]),m=k(function(I){var M=t.current;M||N();var A=Jt(M);A||N(),A.scrollTop+=I.y,A.scrollLeft+=I.x},[]),w=_(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:y,dragStopped:h,scroll:m}},[h,v,y,m]),C=_(function(){return{uniqueId:n,descriptor:s,callbacks:w}},[w,s,n]);Me(function(){return c.current=C.descriptor,a.droppable.register(C),function(){t.current&&h(),a.droppable.unregister(C)}},[w,s,h,C,i,a.droppable]),Me(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Me(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Mr(){}var qa={width:0,height:0,margin:gu},Yf=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?qa:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Xf=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=Yf({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Ft.placeholder:null}};function Jf(e){var t=x.useRef(null),r=k(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,s=x.useState(e.animate==="open"),c=s[0],p=s[1];x.useEffect(function(){return c?n!=="open"?(r(),p(!1),Mr):t.current?Mr:(t.current=setTimeout(function(){t.current=null,p(!1)}),r):Mr},[n,c,r]);var g=k(function(u){u.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),d=Xf({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return re.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":o,onTransitionEnd:g,ref:e.innerRef})}var Kf=re.memo(Jf),Pn=re.createContext(null),Qf=function(e){di(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(re.PureComponent),Va={dragging:5e3,dropAnimating:4500},Zf=function(t,r){return r?Ft.drop(r.duration):t?Ft.snap:Ft.fluid},_f=function(t,r){return t?r?Wt.opacity.drop:Wt.opacity.combining:null},eg=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function tg(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,s=eg(e),c=!!i,p=c?Vr.drop(n,o):Vr.moveTo(n),g={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Zf(s,i),transform:p,opacity:_f(o,c),zIndex:c?Va.dropAnimating:Va.dragging,pointerEvents:"none"};return g}function rg(e){return{transform:Vr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function ng(e){return e.type==="DRAGGING"?tg(e):rg(e)}function ag(e,t,r){r===void 0&&(r=be);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=yi(a,n),o=rr(i,r),s={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},p={descriptor:e,placeholder:s,displaceBy:c,client:i,page:o};return p}function ig(e){var t=Nn("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,c=_(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:s}},[i,s,o]),p=k(function(f){var v=a();return v||N(),ag(r,v,f)},[r,a]),g=_(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:p}},[r,p,c,t]),d=x.useRef(g),u=x.useRef(!0);Me(function(){return n.draggable.register(d.current),function(){return n.draggable.unregister(d.current)}},[n.draggable]),Me(function(){if(u.current){u.current=!1;return}var f=d.current;d.current=g,n.draggable.update(g,f)},[g,n.draggable])}function og(e){e.preventDefault()}function sg(e){var t=x.useRef(null),r=k(function($){t.current=$},[]),n=k(function(){return t.current},[]),a=lr(yr),i=a.contextId,o=a.dragHandleUsageInstructionsId,s=a.registry,c=lr(Pn),p=c.type,g=c.droppableId,d=_(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:g}},[e.draggableId,e.index,p,g]),u=e.children,f=e.draggableId,v=e.isEnabled,y=e.shouldRespectForcePress,h=e.canDragInteractiveElements,m=e.isClone,w=e.mapped,C=e.dropAnimationFinished;if(!m){var I=_(function(){return{descriptor:d,registry:s,getDraggableRef:n,canDragInteractiveElements:h,shouldRespectForcePress:y,isEnabled:v}},[d,s,n,h,y,v]);ig(I)}var M=_(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:og}:null},[i,o,f,v]),A=k(function($){w.type==="DRAGGING"&&w.dropping&&$.propertyName==="transform"&&C()},[C,w]),L=_(function(){var $=ng(w),G=w.type==="DRAGGING"&&w.dropping?A:null,z={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":f,style:$,onTransitionEnd:G},dragHandleProps:M};return z},[i,M,f,w,A,r]),V=_(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return u(L,w.snapshot,V)}var fo=function(e,t){return e===t},go=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},lg=function(t){return t.combine?t.combine.draggableId:null},cg=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function ug(){var e=me(function(a,i){return{x:a,y:i}}),t=me(function(a,i,o,s,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:s,combineTargetFor:null}}),r=me(function(a,i,o,s,c,p,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:i,offset:a,dimension:o,forceShouldAnimate:g,snapshot:t(i,s,c,p,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var s=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],p=Ae(i.impact),g=cg(i.impact),d=i.forceShouldAnimate;return r(e(s.x,s.y),i.movementMode,c,o.isClone,p,g,d)}if(i.phase==="DROP_ANIMATING"){var u=i.completed;if(u.result.draggableId!==o.draggableId)return null;var f=o.isClone,v=i.dimensions.draggables[o.draggableId],y=u.result,h=y.mode,m=go(y),w=lg(y),C=i.dropDuration,I={duration:C,curve:yn.drop,moveTo:i.newHomeClientOffset,opacity:w?Wt.opacity.drop:null,scale:w?Wt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:v,dropping:I,draggingOver:m,combineWith:w,mode:h,forceShouldAnimate:null,snapshot:t(h,f,m,w,I)}}}return null};return n}function vo(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var dg={mapped:{type:"SECONDARY",offset:be,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:vo(null)}};function pg(){var e=me(function(o,s){return{x:o,y:s}}),t=me(vo),r=me(function(o,s,c){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:c,snapshot:t(s)}}}),n=function(s){return s?r(be,s,!0):null},a=function(s,c,p,g){var d=p.displaced.visible[s],u=!!(g.inVirtualList&&g.effected[s]),f=vr(p),v=f&&f.draggableId===s?c:null;if(!d){if(!u)return n(v);if(p.displaced.invisible[s])return null;var y=yt(g.displacedBy.point),h=e(y.x,y.y);return r(h,v,!0)}if(u)return n(v);var m=p.displacedBy.point,w=e(m.x,m.y);return r(w,v,d.shouldAnimate)},i=function(s,c){if(s.isDragging)return s.critical.draggable.id===c.draggableId?null:a(c.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var p=s.completed;return p.result.draggableId===c.draggableId?null:a(c.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return i}var fg=function(){var t=ug(),r=pg(),n=function(i,o){return t(i,o)||r(i,o)||dg};return n},gg={dropAnimationFinished:Yi},vg=mi(fg,gg,null,{context:In,pure:!0,areStatePropsEqual:fo})(sg);function ho(e){var t=lr(Pn),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:re.createElement(vg,e)}function hg(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return re.createElement(ho,B({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function mg(e){var t=x.useContext(yr);t||N();var r=t.contextId,n=t.isMovementAllowed,a=x.useRef(null),i=x.useRef(null),o=e.children,s=e.droppableId,c=e.type,p=e.mode,g=e.direction,d=e.ignoreContainerClipping,u=e.isDropDisabled,f=e.isCombineEnabled,v=e.snapshot,y=e.useClone,h=e.updateViewportMaxScroll,m=e.getContainerForClone,w=k(function(){return a.current},[]),C=k(function(z){a.current=z},[]);k(function(){return i.current},[]);var I=k(function(z){i.current=z},[]),M=k(function(){n()&&h({maxScroll:Zi()})},[n,h]);Vf({droppableId:s,type:c,mode:p,direction:g,isDropDisabled:u,isCombineEnabled:f,ignoreContainerClipping:d,getDroppableRef:w});var A=re.createElement(Qf,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(z){var ee=z.onClose,P=z.data,H=z.animate;return re.createElement(Kf,{placeholder:P,onClose:ee,innerRef:I,animate:H,contextId:r,onTransitionEnd:M})}),L=_(function(){return{innerRef:C,placeholder:A,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}},[r,s,A,C]),V=y?y.dragging.draggableId:null,$=_(function(){return{droppableId:s,type:c,isUsingCloneFor:V}},[s,V,c]);function G(){if(!y)return null;var z=y.dragging,ee=y.render,P=re.createElement(ho,{draggableId:z.draggableId,index:z.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(H,ne){return ee(H,ne,z)});return Po.createPortal(P,m())}return re.createElement(Pn.Provider,{value:$},o(L,v),G())}var kr=function(t,r){return t===r.droppable.type},Ya=function(t,r){return r.draggables[t.draggable.id]},bg=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=B({},t,{shouldAnimatePlaceholder:!1}),n=me(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=me(function(o,s,c,p,g,d){var u=g.descriptor.id,f=g.descriptor.droppableId===o;if(f){var v=d?{render:d,dragging:n(g.descriptor)}:null,y={isDraggingOver:c,draggingOverWith:c?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:v}}if(!s)return r;if(!p)return t;var h={isDraggingOver:c,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}}),i=function(s,c){var p=c.droppableId,g=c.type,d=!c.isDropDisabled,u=c.renderClone;if(s.isDragging){var f=s.critical;if(!kr(g,f))return r;var v=Ya(f,s.dimensions),y=Ae(s.impact)===p;return a(p,d,y,y,v,u)}if(s.phase==="DROP_ANIMATING"){var h=s.completed;if(!kr(g,h.critical))return r;var m=Ya(h.critical,s.dimensions);return a(p,d,go(h.result)===p,Ae(h.impact)===p,m,u)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var w=s.completed;if(!kr(g,w.critical))return r;var C=Ae(w.impact)===p,I=!!(w.impact.at&&w.impact.at.type==="COMBINE"),M=w.critical.droppable.id===p;return C?I?t:r:M?t:r}return r};return i},yg={updateViewportMaxScroll:Nd};function xg(){return document.body||N(),document.body}var wg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:xg},mo=mi(bg,yg,null,{context:In,pure:!0,areStatePropsEqual:fo})(mg);mo.defaultProps=wg;function bo(e){let t=null;return()=>(t==null&&(t=e()),t)}function Dg(e,t){return e.filter(r=>r!==t)}function Sg(e,t){const r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class Cg{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=Sg(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=Dg(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class Ig{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const yo="__NATIVE_FILE__",xo="__NATIVE_URL__",wo="__NATIVE_TEXT__",Do="__NATIVE_HTML__",Xa=Object.freeze(Object.defineProperty({__proto__:null,FILE:yo,HTML:Do,TEXT:wo,URL:xo},Symbol.toStringTag,{value:"Module"}));function Br(e,t,r){const n=t.reduce((a,i)=>a||e.getData(i),"");return n??r}const Kr={[yo]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Do]:{exposeProperties:{html:(e,t)=>Br(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[xo]:{exposeProperties:{urls:(e,t)=>Br(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[wo]:{exposeProperties:{text:(e,t)=>Br(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Ng(e,t){const r=Kr[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new Ig(r);return n.loadDataTransfer(t),n}function Lr(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(Kr).filter(r=>{const n=Kr[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const Eg=bo(()=>/firefox/i.test(navigator.userAgent)),So=bo(()=>!!window.safari);class Ja{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let s=r.length-1;if(t===r[s])return n[s];let c=0,p=o.length-1,g;for(;c<=p;){g=Math.floor(.5*(c+p));const f=r[g];if(f<t)c=g+1;else if(f>t)p=g-1;else return n[g]}s=Math.max(0,p);const d=t-r[s],u=d*d;return n[s]+a[s]*d+i[s]*u+o[s]*d*u}constructor(t,r){const{length:n}=t,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,v)=>t[f]<t[v]?-1:1);const i=[],o=[];let s,c;for(let f=0;f<n-1;f++)s=t[f+1]-t[f],c=r[f+1]-r[f],i.push(s),o.push(c/s);const p=[o[0]];for(let f=0;f<i.length-1;f++){const v=o[f],y=o[f+1];if(v*y<=0)p.push(0);else{s=i[f];const h=i[f+1],m=s+h;p.push(3*m/((m+h)/v+(m+s)/y))}}p.push(o[o.length-1]);const g=[],d=[];let u;for(let f=0;f<p.length-1;f++){u=o[f];const v=p[f],y=1/i[f],h=v+p[f+1]-u-u;g.push((u-v-h)*y),d.push(h*y*y)}this.xs=t,this.ys=r,this.c1s=p,this.c2s=g,this.c3s=d}}const Pg=1;function Co(e){const t=e.nodeType===Pg?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function Kt(e){return{x:e.clientX,y:e.clientY}}function Tg(e){var t;return e.nodeName==="IMG"&&(Eg()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function Og(e,t,r,n){let a=e?t.width:r,i=e?t.height:n;return So()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function Rg(e,t,r,n,a){const i=Tg(t),s=Co(i?e:t),c={x:r.x-s.x,y:r.y-s.y},{offsetWidth:p,offsetHeight:g}=e,{anchorX:d,anchorY:u}=n,{dragPreviewWidth:f,dragPreviewHeight:v}=Og(i,t,p,g),y=()=>{let A=new Ja([0,.5,1],[c.y,c.y/g*v,c.y+v-g]).interpolate(u);return So()&&i&&(A+=(window.devicePixelRatio-1)*v),A},h=()=>new Ja([0,.5,1],[c.x,c.x/p*f,c.x+f-p]).interpolate(d),{offsetX:m,offsetY:w}=a,C=m===0||m,I=w===0||w;return{x:C?m:h(),y:I?w:y()}}class jg{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function Ag(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Ag(e,a,r[a])})}return e}class Mg{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Ka({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return Ka({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(Xa).some(r=>Xa[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Ng(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&Co(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=Kt(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,c=Lr(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const g=this.monitor.getSourceId(),d=this.sourceNodes.get(g),u=this.sourcePreviewNodes.get(g)||d;if(u){const{anchorX:f,anchorY:v,offsetX:y,offsetY:h}=this.getCurrentSourcePreviewNodeOptions(),C=Rg(d,u,o,{anchorX:f,anchorY:v},{offsetX:y,offsetY:h});s.setDragImage(u,C.x,C.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:s}=a,c=Lr(s);c&&this.beginDragNativeItem(c,s)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Kt(a)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=Kt(a),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else Lr(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Kt(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new jg(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Cg(this.isNodeInDocument)}}const kg=function(t,r,n){return new Mg(t,r,n)},Bg=({elements:e,onReorder:t,onSelect:r,selectedElement:n})=>{const a=i=>{if(!i.destination)return;const o=Array.from(e),[s]=o.splice(i.source.index,1);o.splice(i.destination.index,0,s),t(o)};return l.jsxs("div",{className:"bg-white ",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Capas"}),l.jsx(Af,{onDragEnd:a,children:l.jsx(mo,{droppableId:"layers",children:i=>l.jsxs("div",{...i.droppableProps,ref:i.innerRef,className:"space-y-2",children:[e.map((o,s)=>l.jsx(hg,{draggableId:o.id,index:s,children:c=>l.jsxs("div",{ref:c.innerRef,...c.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===o.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>r(o.id),children:[l.jsx("div",{...c.dragHandleProps,className:"mr-2",children:l.jsx(Jo,{size:16})}),o.type==="image"?l.jsx(Fr,{size:16,className:"mr-2"}):l.jsx(ft,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm truncate",children:o.type==="text"?o.content.substring(0,20):`Imagen ${s+1}`})]})},o.id)),i.placeholder]})})})]})},Ye=[{id:"layout-1",name:"Cuatro fotos",template:"grid-cols-2 grid-rows-2",cells:4,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square","rounded-sm","rounded-lg","rounded-full","rounded-rect"]},{name:"Formas",masks:["heart","star","hexagon","triangle","diamond","badge","speech","burst"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave","diagonal","bevel","poster","inner-frame"]},{name:"Creativas",masks:["leaf","cloud","flower","ornate","blob1","blob2","blob3"]}]},{id:"layout-2",name:"Dos fotos horizontales",template:"grid-cols-1 grid-rows-2",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-3",name:"Tres fotos mixtas",template:"grid-cols-3 [grid-template-columns:1fr_2fr]",cells:3,maskCategories:[{name:"Formas",masks:["heart","star","hexagon","triangle"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-4",name:"Dos fotos verticales",template:"grid-cols-2 grid-rows-1",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded"]},{name:"Formas",masks:["heart","star","hexagon"]}]},{id:"layout-5",name:"Mosaico",template:"grid-cols-3 grid-rows-2",cells:6,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]},{id:"layout-6",name:"Individual",template:"grid-cols-1 grid-rows-1",cells:1,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]}];function Lg({id:e,elements:t=[],selectedElement:r,onSelectElement:n,onAddElement:a,onUpdateElement:i,onDeleteElement:o,availableMasks:s=[],size:c="square"}){const[{isOver:p},g]=pc(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:f=>{if(f.files){const v=new FileReader;v.onload=y=>{var h;if((h=y.target)!=null&&h.result){const m={id:`img-${Date.now()}`,type:"image",content:y.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(m),n(m.id,e)}},v.readAsDataURL(f.files[0])}},collect:f=>({isOver:!!f.isOver({shallow:!0})})})),d=()=>{const f=document.createElement("input");f.type="file",f.accept="image/*",f.onchange=v=>{if(v.target.files&&v.target.files[0]){const y=new FileReader;y.onload=h=>{var m;if((m=h.target)!=null&&m.result){const w={id:`img-${Date.now()}`,type:"image",content:h.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(w),n(w.id,e)}},y.readAsDataURL(v.target.files[0])}},f.click()},u={square:"aspect-square",landscape:"aspect-video",portrait:"aspect-[3/4]",wide:"aspect-[2/1]",tall:"aspect-[9/16]",custom:"h-[500px]"};return l.jsx("div",{ref:g,className:`relative ${u[c]} bg-gray-50 rounded-lg overflow-hidden ${p?"ring-2 ring-purple-500 bg-purple-50":""}`,onClick:f=>{f.target===f.currentTarget&&n(null,e)},style:{isolation:"isolate",background:"white"},children:t.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:f=>{f.stopPropagation(),d()},children:[l.jsx(Mo,{className:"h-8 w-8 text-gray-400"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Haz clic o arrastra una imagen"})]}):t.map(f=>l.jsx("div",{className:"absolute inset-0",onClick:v=>v.stopPropagation(),children:f.type==="image"?l.jsx(fc,{element:f,isSelected:r===f.id,onSelect:()=>n(f.id,e),onUpdate:v=>i(f.id,v),onDelete:()=>o(f.id),availableMasks:s}):l.jsx(gc,{element:f,isSelected:r===f.id,onSelect:()=>n(f.id,e),onUpdate:v=>i(f.id,v),onDelete:()=>o(f.id)})},f.id))})}const Fg=({element:e,onUpdate:t,selectedImage:r})=>{var n;return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),l.jsx(Ve,{label:"Opacidad",value:[((n=e.filters)==null?void 0:n.opacity)||100],min:0,max:100,onValueChange:a=>t({filters:{...e.filters,opacity:a[0]}})})]})},$g=({onSelectPreset:e,selectedImage:t})=>{const r=n=>({filter:`
            brightness(${n.brightness}%)
            contrast(${n.contrast}%)
            saturate(${n.saturation}%)
            sepia(${n.tint}%)
            hue-rotate(${n.hue}deg)
            blur(${n.blur}px)
        `});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:ys.map(n=>l.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>e(n.filters),children:[l.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:t?l.jsx("img",{src:t.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r(n.filters)}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:l.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:l.jsx(To,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},Gg=({selectedMask:e,onSelect:t,availableMasks:r=[],selectedImage:n})=>{var s;const[a,i]=x.useState("Básicas"),o={};return er.forEach(c=>{o[c.category]||(o[c.category]=[]),(r.includes(c.id)||c.id==="none")&&o[c.category].push(c)}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Máscaras de imagen"}),l.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 border-b",children:Object.keys(o).map(c=>o[c].length>0&&l.jsx("button",{onClick:()=>i(c),className:`px-4 py-2 text-sm rounded-t-md transition font-medium ${a===c?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600"}`,children:c},c))}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:(s=o[a])==null?void 0:s.map(c=>l.jsxs("div",{onClick:()=>t(c.id),className:`cursor-pointer border rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all ${e===c.id?"ring-2 ring-purple-500 border-purple-300":"border-gray-200"}`,children:[l.jsx("div",{className:"aspect-square bg-white flex items-center justify-center p-2",children:l.jsx("img",{src:n==null?void 0:n.content,alt:c.name,className:`w-full h-full object-cover ${c.class}`})}),l.jsx("p",{className:"text-center text-sm text-gray-700 p-1 truncate",children:c.name})]},c.id))})]})},Hg=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],zg=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],Wg=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],Ug=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],qg=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],Vg=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],Yg=({element:e,onUpdate:t,onClose:r})=>{var ve,ae,ye,Se,fe,Ce,Ie,De,Y,he,pe,se,Pe,Ne,Re,Te,T,X,ie,ue,xe,ze,F,ge,ke,Ue,_e,et,tt,rt,Dt,St,Ct,It,Nt,Et,Pt,Tt,Ot,Rt,jt;const[n,a]=x.useState(!1),[i,o]=x.useState(!1),[s,c]=x.useState(!1),[p,g]=x.useState(!1),[d,u]=x.useState(!1),[f,v]=x.useState(!1),[y,h]=x.useState(!1),[m,w]=x.useState(!1),[C,I]=x.useState("basic"),[M,A]=x.useState(((ve=e==null?void 0:e.style)==null?void 0:ve.color)||"#000000"),[L,V]=x.useState(((ae=e==null?void 0:e.style)==null?void 0:ae.backgroundColor)||"transparent"),$=x.useRef(null),G=x.useRef(null),z=x.useRef(null),ee=x.useRef(null),P=x.useRef(null),H=x.useRef(null),ne=x.useRef(null);x.useEffect(()=>{function S(Z){$.current&&!$.current.contains(Z.target)&&a(!1),G.current&&!G.current.contains(Z.target)&&o(!1),z.current&&!z.current.contains(Z.target)&&g(!1),ee.current&&!ee.current.contains(Z.target)&&u(!1),P.current&&!P.current.contains(Z.target)&&v(!1),H.current&&!H.current.contains(Z.target)&&c(!1),ne.current&&!ne.current.contains(Z.target)&&h(!1)}return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const O=(S,Z)=>{t({style:{...e==null?void 0:e.style,[S]:Z}})},de=(S,Z,Be)=>{var qe;t({style:{...e==null?void 0:e.style,[S]:((qe=e==null?void 0:e.style)==null?void 0:qe[S])===Z?Be:Z}})},ce=(S,Z)=>{O(S,Z)};if(!e)return null;const Q=({active:S,onClick:Z,icon:Be,title:qe,className:st=""})=>l.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${S?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${st}`,onClick:Z,title:qe,children:Be}),oe=({onClick:S,icon:Z,text:Be,isOpen:qe,title:st})=>l.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${qe?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:S,title:st,children:[Z&&l.jsx("span",{className:"flex-shrink-0",children:Z}),Be&&l.jsx("span",{className:"text-sm truncate",children:Be}),l.jsx(Bo,{className:"h-3.5 w-3.5 opacity-70"})]});return l.jsx("div",{className:"  bg-white  rounded-lg shadow-sm p-4  border-gray-200  z-50 transition-all duration-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto p-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[l.jsx(ft,{className:"h-4 w-4"}),"Formato de texto"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>w(!m),title:m?"Modo compacto":"Modo expandido",children:m?l.jsx(ss,{className:"h-4 w-4"}):l.jsx(os,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:r,title:"Cerrar",children:l.jsx(ko,{className:"h-4 w-4"})})]})]}),m&&l.jsxs("div",{className:"flex border-b mb-2",children:[l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="basic"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("basic"),children:"Básico"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="paragraph"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("paragraph"),children:"Párrafo"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="advanced"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("advanced"),children:"Avanzado"})]}),(C==="basic"||!m)&&l.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[l.jsx("div",{className:"relative",ref:z,children:l.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((ye=e.style)==null?void 0:ye.fontFamily)||"Arial",onChange:S=>{O("fontFamily",S.target.value)},children:Hg.map(S=>l.jsx("option",{value:S.value,style:{fontFamily:S.value},children:S.name},S.value))})}),l.jsxs("div",{className:"relative",ref:ee,children:[l.jsx(oe,{onClick:()=>u(!d),text:((Se=e.style)==null?void 0:Se.fontSize)||"16px",isOpen:d,title:"Tamaño de fuente"}),d&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:zg.map(S=>l.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{O("fontSize",S),u(!1)},children:S},S))})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((fe=e.style)==null?void 0:fe.fontWeight)==="bold",onClick:()=>de("fontWeight","bold","normal"),icon:l.jsx(zo,{className:"h-4 w-4"}),title:"Negrita"}),l.jsx(Q,{active:((Ce=e.style)==null?void 0:Ce.fontStyle)==="italic",onClick:()=>de("fontStyle","italic","normal"),icon:l.jsx(ns,{className:"h-4 w-4"}),title:"Cursiva"}),l.jsx(Q,{active:((Ie=e.style)==null?void 0:Ie.textDecoration)==="underline",onClick:()=>de("textDecoration","underline","none"),icon:l.jsx(ms,{className:"h-4 w-4"}),title:"Subrayado"}),l.jsx(Q,{active:((De=e.style)==null?void 0:De.textDecoration)==="line-through",onClick:()=>de("textDecoration","line-through","none"),icon:l.jsx(gs,{className:"h-4 w-4"}),title:"Tachado"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((Y=e.style)==null?void 0:Y.textAlign)==="left",onClick:()=>O("textAlign","left"),icon:l.jsx(Go,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),l.jsx(Q,{active:((he=e.style)==null?void 0:he.textAlign)==="center",onClick:()=>O("textAlign","center"),icon:l.jsx(Fo,{className:"h-4 w-4"}),title:"Centrar"}),l.jsx(Q,{active:((pe=e.style)==null?void 0:pe.textAlign)==="right",onClick:()=>O("textAlign","right"),icon:l.jsx(Ho,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),l.jsx(Q,{active:((se=e.style)==null?void 0:se.textAlign)==="justify",onClick:()=>O("textAlign","justify"),icon:l.jsx($o,{className:"h-4 w-4"}),title:"Justificar"})]}),l.jsxs("div",{className:"relative",ref:$,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:M}}),l.jsx(Oo,{className:"h-4 w-4"})]}),n&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:M}})]}),l.jsx("input",{type:"color",value:M,onChange:S=>{A(S.target.value),O("color",S.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),l.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:Ug.map(S=>l.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${M===S.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:S.color},onClick:()=>{A(S.color),O("color",S.color)},title:S.name},S.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:G,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>o(!i),title:"Color de fondo",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:L,backgroundImage:L==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),l.jsx(ls,{className:"h-4 w-4"})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:L,backgroundImage:L==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),l.jsx("input",{type:"color",value:L==="transparent"?"#ffffff":L,onChange:S=>{V(S.target.value),O("backgroundColor",S.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:qg.map(S=>l.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${L===S.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:S.color,backgroundImage:S.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{V(S.color),O("backgroundColor",S.color)},title:S.name},S.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:P,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>v(!f),title:"Transformación de texto",children:l.jsx(Uo,{className:"h-4 w-4"})}),f&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:Wg.map(S=>{var Z;return l.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((Z=e.style)==null?void 0:Z.textTransform)===S.value?"bg-gray-100":""}`,style:{textTransform:S.value},onClick:()=>{O("textTransform",S.value),v(!1)},children:S.label},S.value)})})]}),l.jsxs("div",{className:"relative",ref:ne,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>h(!y),title:"Encabezados",children:l.jsx(ft,{className:"h-4 w-4"})}),y&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","32px"),O("fontWeight","bold"),h(!1)},children:[l.jsx(Ko,{className:"h-4 w-4"})," ","Encabezado 1"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","24px"),O("fontWeight","bold"),h(!1)},children:[l.jsx(Qo,{className:"h-4 w-4"})," ","Encabezado 2"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","20px"),O("fontWeight","bold"),h(!1)},children:[l.jsx(Zo,{className:"h-4 w-4"})," ","Encabezado 3"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","16px"),O("fontWeight","bold"),h(!1)},children:[l.jsx(_o,{className:"h-4 w-4"})," ","Encabezado 4"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","16px"),O("fontWeight","normal"),h(!1)},children:[l.jsx(ft,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((Pe=e.style)==null?void 0:Pe.verticalAlign)==="super",onClick:()=>de("verticalAlign","super","baseline"),icon:l.jsx(hs,{className:"h-4 w-4"}),title:"Superíndice"}),l.jsx(Q,{active:((Ne=e.style)==null?void 0:Ne.verticalAlign)==="sub",onClick:()=>de("verticalAlign","sub","baseline"),icon:l.jsx(vs,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),m&&C==="paragraph"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((Re=e.style)==null?void 0:Re.listStyleType)==="disc",onClick:()=>{var S;return O("listStyleType",((S=e.style)==null?void 0:S.listStyleType)==="disc"?"none":"disc")},icon:l.jsx(is,{className:"h-4 w-4"}),title:"Lista con viñetas"}),l.jsx(Q,{active:((Te=e.style)==null?void 0:Te.listStyleType)==="decimal",onClick:()=>{var S;return O("listStyleType",((S=e.style)==null?void 0:S.listStyleType)==="decimal"?"none":"decimal")},icon:l.jsx(as,{className:"h-4 w-4"}),title:"Lista numerada"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{onClick:()=>{var Z;const S=Number.parseInt(((Z=e.style)==null?void 0:Z.textIndent)||"0");O("textIndent",`${S+20}px`)},icon:l.jsx(rs,{className:"h-4 w-4"}),title:"Aumentar sangría"}),l.jsx(Q,{onClick:()=>{var Z;const S=Number.parseInt(((Z=e.style)==null?void 0:Z.textIndent)||"0");S>=20&&O("textIndent",`${S-20}px`)},icon:l.jsx(ts,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ta,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((T=e.style)==null?void 0:T.lineHeight)||"1.5"),onChange:S=>ce("lineHeight",S.target.value),className:"w-24"}),l.jsx($r,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((X=e.style)==null?void 0:X.lineHeight)||"1.5"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ta,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((ie=e.style)==null?void 0:ie.letterSpacing)||"0"),onChange:S=>ce("letterSpacing",`${S.target.value}px`),className:"w-24"}),l.jsx($r,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((ue=e.style)==null?void 0:ue.letterSpacing)||"0px"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(Q,{active:((xe=e.style)==null?void 0:xe.fontStyle)==="italic"&&((ze=e.style)==null?void 0:ze.paddingLeft)==="20px"&&((F=e.style)==null?void 0:F.borderLeft)==="4px solid #ccc",onClick:()=>{var S,Z,Be;((S=e.style)==null?void 0:S.fontStyle)==="italic"&&((Z=e.style)==null?void 0:Z.paddingLeft)==="20px"&&((Be=e.style)==null?void 0:Be.borderLeft)==="4px solid #ccc"?(O("fontStyle","normal"),O("paddingLeft","0"),O("borderLeft","none")):(O("fontStyle","italic"),O("paddingLeft","20px"),O("borderLeft","4px solid #ccc"))},icon:l.jsx(cs,{className:"h-4 w-4"}),title:"Formato de cita"}),l.jsx(Q,{active:((ge=e.style)==null?void 0:ge.fontFamily)==="'Courier New', monospace"&&((ke=e.style)==null?void 0:ke.backgroundColor)==="#f5f5f5"&&((Ue=e.style)==null?void 0:Ue.padding)==="2px 4px",onClick:()=>{var S,Z;((S=e.style)==null?void 0:S.fontFamily)==="'Courier New', monospace"&&((Z=e.style)==null?void 0:Z.backgroundColor)==="#f5f5f5"?(O("fontFamily","Arial, sans-serif"),O("backgroundColor","transparent"),O("padding","0")):(O("fontFamily","'Courier New', monospace"),O("backgroundColor","#f5f5f5"),O("padding","2px 4px"))},icon:l.jsx(qo,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),m&&C==="advanced"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"relative",ref:H,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>c(!s),title:"Opciones de borde",children:[l.jsx(fs,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Bordes"})]}),s&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),l.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((_e=e.style)==null?void 0:_e.borderStyle)||"none",onChange:S=>O("borderStyle",S.target.value),children:Vg.map(S=>l.jsx("option",{value:S.value,children:S.label},S.value))})]}),((et=e.style)==null?void 0:et.borderStyle)&&((tt=e.style)==null?void 0:tt.borderStyle)!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((rt=e.style)==null?void 0:rt.borderWidth)||"1"),onChange:S=>O("borderWidth",`${S.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((Dt=e.style)==null?void 0:Dt.borderWidth)||"1px"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:((St=e.style)==null?void 0:St.borderColor)||"#000000",onChange:S=>O("borderColor",S.target.value),className:"w-8 h-8"}),l.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(S=>l.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:S},onClick:()=>O("borderColor",S)},S))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((Ct=e.style)==null?void 0:Ct.borderRadius)||"0"),onChange:S=>O("borderRadius",`${S.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((It=e.style)==null?void 0:It.borderRadius)||"0px"})]})]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),l.jsx("button",{className:`px-2 py-1 text-xs rounded ${(Nt=e.style)!=null&&Nt.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var S;(S=e.style)!=null&&S.textShadow?O("textShadow",""):O("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(Et=e.style)!=null&&Et.textShadow?"Quitar":"Añadir"}),((Pt=e.style)==null?void 0:Pt.textShadow)&&l.jsxs("select",{className:"text-xs p-1 border rounded",value:(Tt=e.style)==null?void 0:Tt.textShadow,onChange:S=>O("textShadow",S.target.value),children:[l.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),l.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),l.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),l.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),l.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((Ot=e.style)==null?void 0:Ot.opacity)||"1"),onChange:S=>ce("opacity",S.target.value),className:"w-24"})}),l.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((Rt=e.style)==null?void 0:Rt.opacity)||"1")*100),"%"]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((jt=e.style)==null?void 0:jt.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var S;((S=e.style)==null?void 0:S.backgroundColor)==="#ffff00"?O("backgroundColor","transparent"):O("backgroundColor","#ffff00")},title:"Resaltar texto",children:[l.jsx(es,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[l.jsx(Q,{onClick:()=>{alert("Función deshacer (implementar)")},icon:l.jsx(ps,{className:"h-4 w-4"}),title:"Deshacer"}),l.jsx(Q,{onClick:()=>{alert("Función rehacer (implementar)")},icon:l.jsx(Za,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},Xg=({currentSize:e,onSizeChange:t})=>{const r=[{id:"square",label:"Cuadrado (1:1)",width:600,height:600},{id:"landscape",label:"Paisaje (16:9)",width:1280,height:720},{id:"portrait",label:"Retrato (3:4)",width:600,height:800},{id:"wide",label:"Ancho (2:1)",width:1200,height:600},{id:"tall",label:"Alto (9:16)",width:540,height:960}];return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:[l.jsx("label",{htmlFor:"canvas-size",className:"text-sm font-medium text-gray-700",children:"Lienzo:"}),l.jsxs("div",{className:"relative w-full sm:w-40",children:[l.jsx("select",{id:"canvas-size",value:e,onChange:n=>t(n.target.value),className:"w-full appearance-none bg-white border border-gray-300 rounded-md pl-3 pr-10 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:r.map(n=>l.jsx("option",{value:n.id,children:n.label},n.id))}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})};function mv({albumId:e,itemId:t,presetId:r,pages:n}){var _e,et,tt,rt,Dt,St,Ct,It,Nt,Et,Pt,Tt,Ot,Rt,jt,S,Z,Be,qe,st,Tn,On,Rn,jn,An,Mn,kn,Bn,Ln;const[a,i]=x.useState(null),[o,s]=x.useState(null),[c,p]=x.useState(!0),[g,d]=x.useState(null),[u,f]=x.useState([]),[v,y]=x.useState(0),[h,m]=x.useState(null),[w,C]=x.useState(null),[I,M]=x.useState("elements"),[A,L]=x.useState("basic"),[V,$]=x.useState([JSON.stringify(u)]),[G,z]=x.useState(0),[ee,P]=x.useState(!1),[H,ne]=x.useState(null),[O,de]=x.useState({}),[ce,Q]=x.useState(!1),[oe,ve]=x.useState({elementId:null,cellId:null}),[ae,ye]=x.useState(!1),Se=()=>{if(e&&t&&r)return{albumId:e,itemId:t,presetId:r,pages:n||20};const b=new URLSearchParams(window.location.search);return{albumId:b.get("albumId"),itemId:b.get("itemId"),presetId:b.get("presetId"),pages:parseInt(b.get("pages"))||20}},fe=async()=>{try{p(!0),d(null);const b=Se();if(console.log("🔍 Editor params:",b),!b.albumId||!b.presetId)throw new Error("Faltan parámetros requeridos: albumId y presetId");const D=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||b.albumId==="1"||!isNaN(b.albumId),E=window.location.origin.includes("bananalab")?"/projects/bananalab/public":"",R=D?`${E}/api/test/albums/${b.albumId}`:`${E}/api/albums/${b.albumId}`,j=D?`${E}/api/test/item-presets/${b.presetId}`:`${E}/api/item-presets/${b.presetId}`;console.log("🌐 Using endpoints:",{albumEndpoint:R,presetEndpoint:j,isTestMode:D,baseUrl:E}),console.log("📚 Cargando álbum...");const W=await fetch(R,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("📚 Album response status:",W.status),!W.ok){const ut=await W.text();throw console.error("❌ Album response error:",ut),new Error(`Error al cargar álbum: ${W.status} ${W.statusText}`)}const q=await W.json();console.log("✅ Album response data:",q);const J=q.data||q;console.log("📚 Album loaded:",J),i(J),console.log("🎨 Cargando preset...");const le=await fetch(j,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(console.log("🎨 Preset response status:",le.status),!le.ok){const ut=await le.text();throw console.error("❌ Preset response error:",ut),new Error(`Error al cargar preset: ${le.status} ${le.statusText}`)}const lt=await le.json();console.log("✅ Preset response data:",lt);const ct=lt.data||lt;console.log("🎨 Preset loaded:",ct),s(ct),console.log("📄 Creando páginas..."),await Ce(ct,J,b.pages)}catch(b){console.error("💥 Error loading album data:",b),d(b.message)}finally{p(!1)}},Ce=(b,D,E)=>{try{console.log("Creating pages from preset:",b),console.log("Album data:",D),console.log("Total pages requested:",E);const R=[];if(!b.cover_image||!b.content_layer_image||!b.final_layer_image)throw new Error("El preset no tiene todas las imágenes requeridas");const j=J=>J.startsWith("http")||J.startsWith("/storage/")?J:`/storage/${J}`,W={id:"page-cover",type:"cover",layout:"layout-1",cells:[{id:"cell-cover-1",elements:[{id:"cover-base",type:"image",content:j(b.cover_image),position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0},...D.cover_image_path?[{id:"cover-custom",type:"image",content:j(D.cover_image_path),position:{x:10,y:10},size:{width:80,height:80},filters:{},mask:"none",zIndex:2}]:[]]}]};R.push(W);for(let J=1;J<=E;J++){const le={id:`page-content-${J}`,type:"content",pageNumber:J,layout:"layout-1",cells:[{id:`cell-content-${J}-1`,elements:[{id:`content-base-${J}`,type:"image",content:j(b.content_layer_image),position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};R.push(le)}const q={id:"page-final",type:"final",layout:"layout-1",cells:[{id:"cell-final-1",elements:[{id:"final-base",type:"image",content:j(b.final_layer_image),position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]};R.push(q),console.log("✅ Created pages:",R),f(R),y(0)}catch(R){throw console.error("❌ Error creating pages:",R),R}};x.useEffect(()=>{fe()},[]);const Ie=()=>{if(u.length===0)return"Cargando...";const b=u[v];if(!b)return"Página";switch(b.type){case"cover":return"Portada";case"content":return`Página ${b.pageNumber}`;case"final":return"Contraportada";default:return`Página ${v+1}`}},De=()=>{if(u.length===0)return!1;const b=u[v];return(b==null?void 0:b.type)==="content"},Y=x.useCallback(()=>{if(!h||!w||u.length===0)return null;const b=u[v];if(!b)return null;const D=b.cells.find(E=>E.id===w);return D?D.elements.find(E=>E.id===h):null},[h,w,u,v]),he=(b,D)=>{if(D){const E=u[v].cells.find(j=>j.id===D),R=E==null?void 0:E.elements.find(j=>j.id===b);if(R!=null&&R.locked){console.log("Elemento bloqueado, no se puede seleccionar");const j=document.createElement("div");j.className="fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-700 px-4 py-2 rounded-lg z-50",j.textContent="Este elemento es parte del diseño base y no se puede editar",document.body.appendChild(j),setTimeout(()=>{document.body.contains(j)&&document.body.removeChild(j)},3e3);return}}if(D&&C(D),m(b),b){const E=u[v].cells.find(j=>j.id===(D||w)),R=E==null?void 0:E.elements.find(j=>j.id===b);(R==null?void 0:R.type)==="image"?(ne(R),console.log(H)):(R==null?void 0:R.type)==="text"?(Q(!0),ve({elementId:b,cellId:D||w})):Q(!1)}else Q(!1),ne(null)},pe=()=>{if(u.length===0)return Ye[0];const b=u[v];return b&&Ye.find(D=>D.id===b.layout)||Ye[0]},se=b=>{f(b);const D=[...V.slice(0,G+1),JSON.stringify(b)];$(D),z(D.length-1)},Pe=b=>{const D=Ye.find(W=>W.id===b);if(!D)return;const E=[...u],R=E[v],j=Array.from({length:D.cells}).map((W,q)=>R.cells[q]||{id:`cell-${R.id}-${q+1}`,elements:[]});E[v]={...R,layout:b,cells:j},se(E),m(null),C(null)},Ne=()=>{if(!o)return;const b=u.filter(le=>le.type==="content"),E=(b.length>0?Math.max(...b.map(le=>le.pageNumber)):0)+1,R=`page-content-${E}`,j={id:R,type:"content",pageNumber:E,layout:"layout-1",cells:[{id:`cell-content-${E}-1`,elements:[{id:`content-base-${E}`,type:"image",content:`/storage/${o.content_layer_image}`,position:{x:0,y:0},size:{width:100,height:100},filters:{},mask:"none",zIndex:1,locked:!0}]}]},W=[...u],q=W.findIndex(le=>le.type==="final");q>-1?W.splice(q,0,j):W.push(j),se(W);const J=W.findIndex(le=>le.id===R);y(J)},Re=()=>{if(u.length<=3)return;const b=u[v];if(b.type==="cover"||b.type==="final"){console.log("No se puede eliminar la portada o contraportada");return}if(!confirm(`¿Estás seguro de eliminar la ${b.type==="content"?`página ${b.pageNumber}`:"página"}?`))return;const D=u.filter((E,R)=>R!==v);se(D),y(Math.min(v,D.length-1))},Te=()=>{const b=u[v];if(b.type!=="content"){console.log("Solo se pueden duplicar páginas de contenido");return}const E=Math.max(...u.filter(J=>J.type==="content").map(J=>J.pageNumber))+1,R={...JSON.parse(JSON.stringify(b)),id:`page-content-${E}`,pageNumber:E,cells:b.cells.map(J=>({...J,id:`cell-content-${E}-${J.id.split("-").pop()}`,elements:J.elements.map(le=>({...le,id:`${le.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}))},j=[...u],W=j.findIndex(J=>J.type==="final");W>-1?j.splice(W,0,R):j.push(R),se(j);const q=j.findIndex(J=>J.id===R.id);y(q)},T=(b,D)=>{const E=[...u],R=E[v].cells.findIndex(j=>j.id===b);R!==-1&&(E[v].cells[R].elements.push(D),se(E),m(D.id),C(b))},X=(b,D,E,R=!1)=>{const j=[...u],W=j[v].cells.findIndex(q=>q.id===b);if(W!==-1){if(R)j[v].cells[W].elements.push({...j[v].cells[W].elements.find(q=>q.id===D),...E});else{const q=j[v].cells[W].elements.findIndex(J=>J.id===D);q!==-1&&(j[v].cells[W].elements[q]={...j[v].cells[W].elements[q],...E})}se(j)}},ie=(b,D)=>{const E=[...u],R=E[v].cells.findIndex(j=>j.id===b);R!==-1&&(E[v].cells[R].elements=E[v].cells[R].elements.filter(j=>j.id!==D),se(E),h===D&&m(null))},ue=()=>{G>0&&(z(G-1),f(JSON.parse(V[G-1])),m(null),C(null))},xe=()=>{G<V.length-1&&(z(G+1),f(JSON.parse(V[G+1])),m(null),C(null))},ze=()=>{P(!ee)},F=()=>{const D={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:20,y:20},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};w?T(w,D):console.log("Selecciona una celda primero")},ge=b=>{var D;!h||!w||X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,...b}})},[ke,Ue]=x.useState("square");return x.useEffect(()=>{const b=async()=>{const E={};await Promise.all(u.map(async(R,j)=>{const W=document.getElementById(`page-${R.id}`);if(W)try{const q=await jo(W,{scale:.2,logging:!1,useCORS:!0,allowTaint:!0,ignoreElements:J=>J.classList.contains("ignore-thumbnail")});E[R.id]=q.toDataURL()}catch(q){console.error("Error generating thumbnail:",q),E[R.id]=null}})),de({...O,...E})},D=setTimeout(()=>{b()},500);return()=>clearTimeout(D)},[u,v]),l.jsx(Ll,{backend:kg,children:c?l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cargando Editor"}),l.jsx("p",{className:"text-gray-600",children:"Preparando tu álbum personalizado..."})]})}):u.length===0||g?l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-4",children:g||"No se pudieron cargar los datos del álbum."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Reintentar"}),l.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Volver"})]})]})}):l.jsx("div",{className:"bg-white py-4",children:l.jsxs("div",{className:"flex flex-col min-h-screen  mx-auto  max-w-[82rem]",children:[l.jsxs("header",{className:"border-b bg-white py-4 flex items-center justify-between ",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(We,{variant:"ghost",size:"sm",children:[l.jsx(Lo,{className:"h-5 w-5 mr-1"}),"Regresar"]}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:(a==null?void 0:a.title)||"Álbum Sin Título"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("p",{className:"text-sm text-gray-600",children:[Ie()," ",u.length>0&&`• ${u.length} páginas total`]}),u.length>0&&l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${De()?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:De()?"✏️ Editable":"🔒 Solo vista"})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(We,{variant:"secondary",onClick:ze,icon:l.jsx(Vo,{className:"h-4 w-4"}),children:ee?"Editar":"Vista previa"}),l.jsx(We,{variant:"secondary",onClick:()=>ye(!0),icon:l.jsx(Wo,{className:"h-4 w-4"}),children:"Vista de Álbum"})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx("aside",{className:"w-64 border-r bg-white p-4 overflow-y-auto shadow-sm",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex border-b pb-4",children:[l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${I==="elements"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>M("elements"),children:"Elementos"}),l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${I==="filters"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>M("filters"),children:"Filtros"})]}),I==="elements"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Layouts"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ye.map(b=>l.jsxs("div",{className:`border rounded-md p-1 cursor-pointer hover:border-purple-500 ${u[v].layout===b.id?"border-purple-500 ring-1 ring-purple-200":""}`,onClick:()=>Pe(b.id),children:[l.jsx("div",{className:`grid ${b.template} gap-1 h-20`,children:Array.from({length:b.cells}).map((D,E)=>l.jsx("div",{className:"bg-gray-100 rounded-sm flex items-center justify-center",children:l.jsx(Fr,{className:"h-3 w-3 text-gray-400"})},E))}),l.jsx("p",{className:"text-xs text-center mt-1 truncate",children:b.name})]},b.id))})]}),l.jsx("div",{children:l.jsx(Bg,{elements:((_e=u[v].cells.find(b=>b.id===w))==null?void 0:_e.elements)||[],onReorder:b=>{const D=[...u],E=D[v].cells.findIndex(R=>R.id===w);E!==-1&&(D[v].cells[E].elements=b,se(D))},onSelect:he,selectedElement:h})})]}),I==="filters"&&l.jsx(l.Fragment,{children:h?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl w-full max-w-md mx-auto",children:[{key:"basic",label:"Básicos"},{key:"transform",label:"Avanzados"}].map(b=>l.jsx("button",{onClick:()=>L(b.key),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200
                ${A===b.key?"bg-purple-600 text-white shadow":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:b.label},b.key))}),A==="basic"&&l.jsxs(l.Fragment,{children:[l.jsx($g,{onSelectPreset:ge,selectedImage:H}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes básicos"}),l.jsx(Ve,{label:"Brillo",value:[((tt=(et=Y())==null?void 0:et.filters)==null?void 0:tt.brightness)||100],min:0,max:200,onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,brightness:b[0]}})}}),l.jsx(Ve,{label:"Contraste",value:[((Dt=(rt=Y())==null?void 0:rt.filters)==null?void 0:Dt.contrast)||100],min:0,max:200,onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,contrast:b[0]}})}}),l.jsx(Ve,{label:"Saturación",value:[((Ct=(St=Y())==null?void 0:St.filters)==null?void 0:Ct.saturation)||100],min:0,max:200,onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,saturation:b[0]}})}}),l.jsx(Ve,{label:"Tono",value:[((Nt=(It=Y())==null?void 0:It.filters)==null?void 0:Nt.hue)||0],min:0,max:360,unit:"°",onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,hue:b[0]}})}}),l.jsx(Ve,{label:"Sepia",value:[((Pt=(Et=Y())==null?void 0:Et.filters)==null?void 0:Pt.tint)||0],min:0,max:100,onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,tint:b[0]}})}}),l.jsx(Ve,{label:"Desenfoque",value:[((Ot=(Tt=Y())==null?void 0:Tt.filters)==null?void 0:Ot.blur)||0],min:0,max:20,unit:"px",onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,blur:b[0]}})}})]})]}),A==="transform"&&l.jsxs("div",{className:"space-y-4",children:[((Rt=Y())==null?void 0:Rt.type)==="image"&&l.jsx(Gg,{onSelect:b=>X(w,h,{mask:b}),selectedMask:((jt=Y())==null?void 0:jt.mask)||"none",availableMasks:pe().maskCategories.flatMap(b=>b.masks),selectedImage:H}),l.jsx(Fg,{selectedImage:H,element:Y(),onUpdate:b=>X(w,h,b)}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h3",{className:" font-medium pt-4",children:"Transformación"})}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(We,{variant:(Z=(S=Y())==null?void 0:S.filters)!=null&&Z.flipHorizontal?"secondary":"outline",size:"sm",icon:l.jsx(Yo,{className:"h-4 w-4"}),className:"justify-start ",onClick:()=>{var b,D,E;return X(w,h,{filters:{...(b=Y())==null?void 0:b.filters,flipHorizontal:!((E=(D=Y())==null?void 0:D.filters)!=null&&E.flipHorizontal)}})},children:"Giro Horizontal"}),l.jsx(We,{variant:(qe=(Be=Y())==null?void 0:Be.filters)!=null&&qe.flipVertical?"secondary":"outline",size:"sm",icon:l.jsx(Xo,{className:"h-4 w-4"}),className:"justify-start",onClick:()=>{var b,D,E;return X(w,h,{filters:{...(b=Y())==null?void 0:b.filters,flipVertical:!((E=(D=Y())==null?void 0:D.filters)!=null&&E.flipVertical)}})},children:"Giro Vertical"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ve,{label:"Rotación",value:[((Tn=(st=Y())==null?void 0:st.filters)==null?void 0:Tn.rotate)||0],min:0,max:360,unit:"°",onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,rotate:b[0]}})}}),l.jsx(Ve,{label:"Escala",value:[(((Rn=(On=Y())==null?void 0:On.filters)==null?void 0:Rn.scale)||1)*100],min:10,max:200,unit:"%",onValueChange:b=>{var D;return X(w,h,{filters:{...(D=Y())==null?void 0:D.filters,scale:b[0]/100}})}})]})]})]})]}):l.jsx("h2",{className:"font-medium text-center",children:"Agrega imágenes y textos al área de trabajo y selecciona tu imagen para ver nuevas opciones"})})]})}),l.jsx(Ro,{isOpen:ae,onRequestClose:()=>ye(!1),pages:u.map(b=>({...b,layout:Ye.find(D=>D.id===b.layout)||Ye[0]}))}),l.jsxs("main",{className:"flex-1 overflow-auto bg-gray-100 p-6",children:[l.jsx("div",{className:"max-w-5xl mx-auto ",children:ee?l.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg page-preview",children:l.jsx("div",{className:`grid ${pe().template} gap-6 aspect-[4/3]`,children:u[v].cells.map(b=>l.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:b.elements.map(D=>{var E,R,j,W,q,J,le,lt,ct,ut,Fn,$n,Gn,Hn,zn,Wn,Un,qn,Vn,Yn,Xn,Jn,Kn,Qn,Zn;return D.type==="image"?l.jsx("div",{className:`absolute ${((E=er.find(Io=>Io.id===D.mask))==null?void 0:E.class)||""}`,style:{left:`${D.position.x}px`,top:`${D.position.y}px`,width:"100%",height:"100%"},children:l.jsx("img",{src:D.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                    brightness(${(((R=D.filters)==null?void 0:R.brightness)||100)/100})
                                    contrast(${(((j=D.filters)==null?void 0:j.contrast)||100)/100})
                                    saturate(${(((W=D.filters)==null?void 0:W.saturation)||100)/100})
                                    sepia(${(((q=D.filters)==null?void 0:q.tint)||0)/100})
                                    hue-rotate(${(((J=D.filters)==null?void 0:J.hue)||0)*3.6}deg)
                                    blur(${((le=D.filters)==null?void 0:le.blur)||0}px)
                                  `,transform:`scale(${((lt=D.filters)==null?void 0:lt.scale)||1}) rotate(${((ct=D.filters)==null?void 0:ct.rotate)||0}deg) ${(ut=D.filters)!=null&&ut.flipHorizontal?"scaleX(-1)":""} ${(Fn=D.filters)!=null&&Fn.flipVertical?"scaleY(-1)":""}`,mixBlendMode:(($n=D.filters)==null?void 0:$n.blendMode)||"normal",opacity:(((Gn=D.filters)==null?void 0:Gn.opacity)||100)/100}})},D.id):l.jsx("div",{className:"absolute",style:{left:`${D.position.x}px`,top:`${D.position.y}px`,fontFamily:(Hn=D.style)==null?void 0:Hn.fontFamily,fontSize:(zn=D.style)==null?void 0:zn.fontSize,fontWeight:(Wn=D.style)==null?void 0:Wn.fontWeight,fontStyle:(Un=D.style)==null?void 0:Un.fontStyle,textDecoration:(qn=D.style)==null?void 0:qn.textDecoration,color:(Vn=D.style)==null?void 0:Vn.color,textAlign:(Yn=D.style)==null?void 0:Yn.textAlign,backgroundColor:((Xn=D.style)==null?void 0:Xn.backgroundColor)||"transparent",padding:((Jn=D.style)==null?void 0:Jn.padding)||"8px",borderRadius:((Kn=D.style)==null?void 0:Kn.borderRadius)||"0px",border:((Qn=D.style)==null?void 0:Qn.border)||"none",opacity:((Zn=D.style)==null?void 0:Zn.opacity)||1},children:D.content},D.id)})},b.id))})}):l.jsxs("div",{className:"space-y-6",children:[ce?l.jsx(Yg,{element:Y(),onUpdate:b=>{X(oe.cellId,oe.elementId,b)},onClose:()=>Q(!1)}):l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center gap-4",children:[l.jsx(We,{variant:"ghost",size:"icon",onClick:ue,disabled:G<=0,children:l.jsx(bs,{className:"h-5 w-5"})}),l.jsx(We,{variant:"ghost",size:"icon",onClick:xe,disabled:G>=V.length-1,children:l.jsx(us,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(We,{variant:"ghost",size:"icon",onClick:()=>{const b=document.createElement("input");b.type="file",b.accept="image/*",b.onchange=D=>{if(D.target.files&&D.target.files[0]){const R={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},j=new FileReader;j.onload=W=>{var q;(q=W.target)!=null&&q.result&&(R.content=W.target.result,T(w||u[v].cells[0].id,R))},j.readAsDataURL(D.target.files[0])}},b.click()},children:l.jsx(Fr,{className:"h-5 w-5"})}),l.jsx(We,{variant:"ghost",size:"icon",onClick:F,children:l.jsx(ft,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(We,{variant:"ghost",size:"icon",onClick:()=>{h&&w&&ie(w,h)},disabled:!h,children:l.jsx(gt,{className:"h-5 w-5"})}),l.jsx(Xg,{currentSize:ke,onSizeChange:Ue})]}),l.jsx("div",{id:`page-${u[v].id}`,className:`bg-white rounded-lg shadow-lg overflow-hidden page-preview w-full ${pe().cells<=4,""}`,style:{width:ke.width,height:ke.height},children:l.jsx("div",{className:`grid ${pe().template} gap-4   p-4 max-h-full`,children:u[v].cells.map(b=>l.jsx(Lg,{id:b.id,elements:b.elements,size:ke,selectedElement:w===b.id?h:null,onSelectElement:he,onAddElement:D=>{const E=[...u],R=E[v].cells.findIndex(j=>j.id===b.id);R!==-1&&(E[v].cells[R].elements.push(D),se(E),m(D.id),C(b.id))},onUpdateElement:(D,E,R)=>{const j=[...u],W=j[v].cells.findIndex(q=>q.id===b.id);if(W!==-1){if(R)j[v].cells[W].elements.push({...j[v].cells[W].elements.find(q=>q.id===D),...E});else{const q=j[v].cells[W].elements.findIndex(J=>J.id===D);q!==-1&&(j[v].cells[W].elements[q]={...j[v].cells[W].elements[q],...E})}se(j)}},onDeleteElement:D=>{const E=[...u],R=E[v].cells.findIndex(j=>j.id===b.id);R!==-1&&(E[v].cells[R].elements=E[v].cells[R].elements.filter(j=>j.id!==D),se(E),h===D&&m(null))},availableMasks:pe().maskCategories.flatMap(D=>D.masks)},b.id))})})]})}),l.jsx("aside",{className:"max-w-5xl mt-6 mx-auto bg-white p-4 rounded-lg border",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"font-medium",children:"Páginas"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:Te,disabled:((jn=u[v])==null?void 0:jn.type)!=="content",title:((An=u[v])==null?void 0:An.type)!=="content"?"Solo se pueden duplicar páginas de contenido":"Duplicar página",children:l.jsx(Qr,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:Re,disabled:u.length<=3||((Mn=u[v])==null?void 0:Mn.type)==="cover"||((kn=u[v])==null?void 0:kn.type)==="final",title:((Bn=u[v])==null?void 0:Bn.type)==="cover"||((Ln=u[v])==null?void 0:Ln.type)==="final"?"No se puede eliminar la portada o contraportada":u.length<=3?"Debe haber al menos una página de contenido":"Eliminar página",children:l.jsx(gt,{className:"h-4 w-4"})}),l.jsxs("button",{className:"flex items-center gap-1 px-3 py-1 text-sm border rounded-md hover:bg-gray-50",onClick:Ne,children:[l.jsx($r,{className:"h-4 w-4"}),l.jsx("span",{children:"Nueva página"})]})]})]}),l.jsx("div",{className:"flex overflow-x-auto gap-3 custom-scroll",children:u==null?void 0:u.map((b,D)=>{let E="Página",R="",j="bg-gray-100";return b.type==="cover"?(E="Portada",R="📖",j="bg-purple-100"):b.type==="content"?(E=`Pág. ${b.pageNumber}`,R="📄",j="bg-blue-100"):b.type==="final"&&(E="Contraportada",R="📚",j="bg-green-100"),l.jsx("div",{className:"flex-shrink-0 w-40 p-4 cursor-pointer hover:bg-gray-50 rounded-lg transition-colors",onClick:()=>y(D),children:l.jsxs("div",{className:`relative ${j} h-48 rounded-md overflow-hidden border-2 transition-all ${v===D?"border-purple-500 shadow-lg":"border-transparent"}`,children:[l.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start z-10",children:[l.jsxs("span",{className:"text-xs bg-white/90 px-2 py-1 rounded-full font-medium flex items-center gap-1",children:[R," ",E]}),b.type==="content"&&l.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:"Editable"})]}),O[b.id]?l.jsx("img",{src:O[b.id],alt:`Miniatura página ${D+1}`,className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:`grid ${pe().template} gap-1 w-full h-full p-1`,children:Array.from({length:pe().cells}).map((W,q)=>l.jsx("div",{className:"bg-gray-200 rounded-sm"},q))})})]})},b.id)})})]})})]})]})]})})})}export{mv as default};

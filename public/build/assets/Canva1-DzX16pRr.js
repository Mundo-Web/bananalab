import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BOnQTV8N.js";import{I as k}from"./ItemPresetsRest-BDS9KUxS.js";import{m as s}from"./proxy-DTU49k-A.js";import{C as j}from"./chevron-left-JcR9Fe4w.js";import{P as y}from"./palette-BTxIxfA-.js";import{A as v}from"./index-BNMCJu8J.js";import{c as b}from"./createLucideIcon-DfjclApS.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./main-Bp3JhiuO.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./ModalImportItem-08p2KSos.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=b("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=b("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),m={container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},item:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}},hover:{y:-5,scale:1.03,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",transition:{duration:.2}}},button:{hover:{x:-3},tap:{scale:.95}},title:{hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{duration:.5}}}},z=({producto:a,onClick:g})=>{const[u,p]=o.useState(!1),[c,h]=o.useState(!1),l=Number(a.precio)||29.99,n=Number(a.descuento)||0,d=n>0&&l>n?n:l,x=n>0?(l-d)/l*100:0;return e.jsxs(s.div,{className:"block bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition-all cursor-pointer relative group",variants:m.item,whileHover:{scale:1.02,boxShadow:"0px 12px 24px rgba(0, 0, 0, 0.15)",transition:{duration:.3}},whileTap:{scale:.98},onClick:()=>g(a.id),onHoverStart:()=>p(!0),onHoverEnd:()=>p(!1),children:[x>0&&e.jsx("div",{className:"absolute top-3 right-3 z-20",children:e.jsxs(s.div,{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold",initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:["-",Math.round(x),"%"]})}),e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-50 to-gray-100 relative overflow-hidden",children:[e.jsx(s.img,{src:a.imagen,alt:a.titulo,className:"w-full h-full object-cover",initial:{scale:1},animate:{scale:u?1.05:1},transition:{duration:.3},onError:f=>f.target.src="/assets/img/backgrounds/resources/default-image.png"}),e.jsx(v,{children:u&&e.jsx(s.div,{className:"absolute inset-0 bg-black/20 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(s.div,{className:"bg-white text-primary rounded-full p-4 shadow-xl",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(N,{size:24})})})})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"font-bold text-gray-800 text-lg line-clamp-1 flex-1",children:a.titulo})}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:a.descripcion}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col",children:[x>0&&e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["S/ ",Number(l).toFixed(2)]}),e.jsxs("span",{className:"text-xl font-bold text-primary",children:["S/ ",Number(d).toFixed(2)]})]})}),a.item_preset_id&&e.jsx("div",{className:"mt-3 flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:[e.jsx(C,{size:12}),"Diseño personalizable"]})})]}),e.jsx("a",{href:`/canva2?item=${a.item_id||a.id}&preset=${a.item_preset_id||a.id}`,className:"absolute inset-0 z-10","aria-label":`Editar ${a.titulo}`})]})};function B({data:a,filteredData:g}){const[u,p]=o.useState(null),[c,h]=o.useState([]),[l,n]=o.useState(!0),[d,x]=o.useState(null),f=new k;o.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("item");r?w(r):n(!1)},[]);const w=async i=>{try{n(!0),console.log("Cargando presets para item:",i);const r=await f.getByItem(i);if(r&&r.data){console.log("Presets cargados:",r.data);const S=r.data.map(t=>({id:t.id,imagen:`/storage/images/item_preset/${t.image}`,titulo:t.name||`Preset ${t.id}`,descripcion:t.description||"Diseño predefinido personalizable con múltiples opciones de personalización",precio:t==null?void 0:t.price,descuento:t==null?void 0:t.discount,item_preset_id:t.id,item_id:i,design_layers:t.design_layers,fecha_creacion:new Date().toISOString()}));h(S),x({id:i})}else console.warn("No se encontraron presets para el item:",i),h([])}catch(r){console.error("Error al cargar presets:",r),h(productos)}finally{n(!1)}},P=i=>{p(c.find(r=>r.id===i))};return e.jsxs(s.div,{className:"container mx-auto px-4 py-8 max-w-7xl font-paragraph",initial:"hidden",animate:"visible",variants:m.container,children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs(s.button,{className:"flex items-center text-primary hover:text-primary/80 transition-colors",variants:m.button,whileHover:"hover",whileTap:"tap",onClick:()=>window.history.back(),children:[e.jsx(j,{className:"h-6 w-6"}),e.jsx("span",{className:"ml-1 font-medium",children:"Regresar"})]}),c.length>0&&e.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{size:16}),e.jsxs("span",{children:[c.length," diseños disponibles"]})]})})]}),e.jsxs(s.div,{className:"mb-8",variants:m.title,children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4  customtext-primary",children:d?"Elige tu diseño predefinido":"Diseños predefinidos"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl",children:"Selecciona uno de nuestros diseños profesionales y personalízalo a tu gusto. Todos los diseños incluyen múltiples capas editables y son perfectos para cualquier ocasión."})]}),l&&e.jsxs(s.div,{className:"flex flex-col justify-center items-center py-20",initial:{opacity:0},animate:{opacity:1},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary/20 border-t-primary"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(y,{className:"h-6 w-6 text-primary animate-pulse"})})]}),e.jsxs(s.div,{className:"mt-6 text-center",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cargando diseños increíbles"}),e.jsx("p",{className:"text-gray-600",children:"Preparando los mejores diseños para ti..."})]})]}),!l&&e.jsx(e.Fragment,{children:c.length>0?e.jsx(s.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",variants:m.container,children:e.jsx(v,{children:c.map(i=>e.jsx(s.div,{variants:m.item,layoutId:`product-${i.id}`,children:e.jsx(z,{producto:i,onClick:P})},i.id))})}):e.jsx(s.div,{className:"text-center py-20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-gray-100 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6",children:e.jsx(y,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:d?"No hay diseños disponibles":"No se encontraron diseños"}),e.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:d?"Este producto aún no tiene diseños predefinidos disponibles. ¡Pero puedes crear tu propio diseño desde cero!":"Parece que no hay diseños cargados en este momento. Intenta recargar la página o contacta con soporte."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(s.button,{className:"bg-primary text-white px-8 py-3 rounded-xl hover:opacity-90 transition-all font-medium flex items-center justify-center gap-2",onClick:()=>window.history.back(),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(j,{size:18}),"Regresar al producto"]}),e.jsxs(s.button,{className:"border-2 border-primary text-primary px-8 py-3 rounded-xl hover:bg-primary hover:text-white transition-all font-medium flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(N,{size:18}),"Crear desde cero"]})]})]})})})]})}export{B as default};

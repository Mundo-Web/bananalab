var Q=Object.defineProperty;var Y=(a,r,t)=>r in a?Q(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t;var E=(a,r,t)=>Y(a,typeof r!="symbol"?r+"":r,t);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as v}from"./index-BOnQTV8N.js";import{I as ee}from"./ItemPresetsRest-BDS9KUxS.js";import{m as P}from"./main-Bp3JhiuO.js";import{m as n}from"./proxy-DTU49k-A.js";import{C as ae}from"./chevron-left-JcR9Fe4w.js";import{S as L}from"./sparkles-DvmvZ6mJ.js";import{A as M}from"./arrow-right-MB8dWH_Y.js";import{U as H}from"./upload-GO9GDST_.js";import{A as G}from"./index-BNMCJu8J.js";import{c as B}from"./createLucideIcon-DfjclApS.js";import{P as te}from"./palette-BTxIxfA-.js";import{C as q}from"./chevron-down-uIVDLcM-.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./ModalImportItem-08p2KSos.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=B("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=B("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),j=class j{};E(j,"checkAuth",async()=>{var r;try{const{status:t,result:o}=await P.Fetch("./api/auth/check",{method:"GET"});return{authenticated:t&&o.status===200,user:((r=o==null?void 0:o.data)==null?void 0:r.user)||null,message:(o==null?void 0:o.message)||null}}catch(t){return console.error("Error checking authentication:",t),{authenticated:!1,user:null,message:"Error al verificar autenticación"}}}),E(j,"saveAlbum",async r=>{var t;try{console.log("Guardando álbum:",r);const o=new FormData;Object.keys(r).forEach(d=>{r[d]!==null&&r[d]!==void 0&&(d==="custom_options"&&typeof r[d]=="object"?o.append(d,JSON.stringify(r[d])):o.append(d,r[d]))}),r.selected_pages!==void 0&&o.append("pages",r.selected_pages),r.selected_cover_type!==void 0&&o.append("cover_type",r.selected_cover_type),r.selected_finish!==void 0&&o.append("finish_type",r.selected_finish),console.log("FormData preparada");const g=await fetch("./api/albums",{method:"POST",body:o,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},credentials:"include"});if(!g.ok){const d=await g.text();console.error("Respuesta RAW del backend:",d);let l;try{l=JSON.parse(d)}catch{l={message:d}}throw new Error((l==null?void 0:l.message)||"Error al guardar el álbum")}const h=await g.json();if(console.log("Respuesta del servidor:",h),!g.ok||h.status!==201)throw new Error((h==null?void 0:h.message)||"Error al guardar el álbum");return P.Notify.add({icon:"/assets/img/icon.svg",title:"Álbum guardado",body:"Tu álbum se ha guardado exitosamente",type:"success"}),h}catch(o){throw console.error("Error en saveAlbum:",o),P.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:o.message,type:"danger"}),o}}),E(j,"updateAlbum",async(r,t)=>{var o;try{console.log("Actualizando álbum:",r,t);const g=new FormData;Object.keys(t).forEach(l=>{t[l]!==null&&t[l]!==void 0&&(l==="custom_options"&&typeof t[l]=="object"||l==="album_pages_data"&&typeof t[l]=="object"?g.append(l,JSON.stringify(t[l])):g.append(l,t[l]))}),t.selected_pages!==void 0&&g.append("pages",t.selected_pages),t.selected_cover_type!==void 0&&g.append("cover_type",t.selected_cover_type),t.selected_finish!==void 0&&g.append("finish_type",t.selected_finish),console.log("FormData preparada para actualización");const h=await fetch(`./api/albums/${r}`,{method:"PUT",body:g,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},credentials:"include"});if(!h.ok){const l=await h.text();console.error("Respuesta RAW del backend:",l);let i;try{i=JSON.parse(l)}catch{i={message:l}}throw new Error((i==null?void 0:i.message)||"Error al actualizar el álbum")}const d=await h.json();if(console.log("Respuesta del servidor (actualización):",d),!h.ok||d.status!==200)throw new Error((d==null?void 0:d.message)||"Error al actualizar el álbum");return d}catch(g){throw console.error("Error en updateAlbum:",g),g}}),E(j,"autoSaveAlbum",async(r,t)=>{try{console.log("Auto-guardando álbum:",r);const o=await j.updateAlbum(r,t);return console.log("Auto-guardado exitoso"),o}catch(o){throw console.error("Error en auto-guardado:",o),o}}),E(j,"getUserAlbums",async()=>{try{const{status:r,result:t}=await P.Fetch("./api/albums",{method:"GET"});if(!r||t.status!==200)throw new Error((t==null?void 0:t.message)||"Error al obtener álbumes");return t.data}catch(r){return P.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),[]}}),E(j,"getAlbum",async r=>{try{const{status:t,result:o}=await P.Fetch(`./api/albums/${r}`,{method:"GET"});if(!t||o.status!==200)throw new Error((o==null?void 0:o.message)||"Error al obtener el álbum");return o.data}catch(t){throw P.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),t}});let C=j;const I=({value:a,onChange:r,placeholder:t,options:o=[],disabled:g=!1})=>{const[h,d]=v.useState(!1),[l,i]=v.useState("");v.useEffect(()=>{if(a&&o.length>0){const y=o.find(w=>(w.value||w)===a);i(y?y.label||y:a)}else i("")},[a,o]);const N=(y,w)=>{r(y),i(w),d(!1)};return g||o.length===0?e.jsxs("div",{className:"w-full p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-400 cursor-not-allowed flex items-center justify-between",children:[e.jsx("span",{children:t}),e.jsx(q,{size:16,className:"text-gray-400"})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>d(!h),className:`w-full p-3 border border-gray-300 rounded-lg bg-white text-left cursor-pointer 
                         hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent 
                         transition-all duration-200 ease-out flex items-center justify-between`,children:[e.jsx("span",{className:l?"text-gray-900":"text-gray-400",children:l||t}),e.jsx(q,{size:16,className:`text-gray-400 transition-transform duration-200 ${h?"rotate-180":""}`})]}),e.jsx(G,{children:h&&e.jsx(n.div,{initial:{opacity:0,y:-8,scale:.96},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.96},transition:{duration:.15,ease:"easeOut"},className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:o.map((y,w)=>{const A=y.value||y,k=y.label||y,_=A===a;return e.jsx("button",{type:"button",onClick:()=>N(A,k),className:`w-full px-3 py-2.5 text-left transition-colors duration-150 
                                              first:rounded-t-lg last:rounded-b-lg focus:outline-none
                                              ${_?"bg-purple-50 text-purple-700 font-medium":"hover:bg-gray-50 hover:text-gray-900"}`,children:k},w)})})}),h&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)})]})},S={container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},item:{hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:120,damping:12,mass:.5}}},button:{hover:{x:-5,backgroundColor:"rgba(243, 244, 246, 0.8)",transition:{type:"spring",stiffness:400}},tap:{scale:.96,transition:{type:"spring",stiffness:400}}},image:{hidden:{opacity:0,scale:.95,rotate:-2},visible:{opacity:1,scale:1,rotate:0,transition:{type:"spring",stiffness:80,damping:15,delay:.3}},hover:{scale:1.02,transition:{type:"spring",stiffness:300}}},featureIcon:{hidden:{scale:0,opacity:0},visible:a=>({scale:1,opacity:1,transition:{delay:.5+a*.1,type:"spring",stiffness:300}})}};function Ne(){var U;const[a,r]=v.useState(null),[t,o]=v.useState(!0),[g,h]=v.useState(null),[d,l]=v.useState(null),[i,N]=v.useState({titulo:"",paginas:"",tapa:"",acabado:""}),[y,w]=v.useState(!1),[A,k]=v.useState(null),[_,R]=v.useState(!1),[J,T]=v.useState(!1),D=new ee,X=()=>{const s=[],c=`${i.paginas} páginas`||(a!=null&&a.default_pages?`${a.default_pages} páginas`:"50 páginas");s.push({icon:e.jsx(se,{size:20}),text:c}),s.push({icon:e.jsx(te,{size:20}),text:"Personalizable"});const p=`Tapa ${i.tapa}`||`Tapa ${a==null?void 0:a.default_cover}`||"Tapa dura premium";return s.push({icon:e.jsx(re,{size:20}),text:p}),s},V=()=>{var s;return i.titulo&&i.titulo.trim()!==""?i.titulo:(a==null?void 0:a.name)||((s=a==null?void 0:a.item)==null?void 0:s.name)||"Libro Personalizado"};v.useEffect(()=>{(async()=>{try{const c=new URLSearchParams(window.location.search),p=c.get("preset"),u=c.get("item");if(console.log("URL params:",{presetId:p,itemId:u}),p){console.log("Cargando preset:",p),o(!0);const f=await D.getPresetById(p);if(console.log("Datos del preset recibidos:",f),f.success){const x=f.data;console.log("Preset data:",x);let m={...x};if(typeof x.pages_options=="string")try{m.pages_options=JSON.parse(x.pages_options)}catch(b){console.warn("Error parsing pages_options:",b),m.pages_options=[]}if(typeof x.cover_options=="string")try{m.cover_options=JSON.parse(x.cover_options)}catch(b){console.warn("Error parsing cover_options:",b),m.cover_options=[]}if(typeof x.finish_options=="string")try{m.finish_options=JSON.parse(x.finish_options)}catch(b){console.warn("Error parsing finish_options:",b),m.finish_options=[]}if(r(m),N(b=>{var z,F,O;return{...b,titulo:"",paginas:m.default_pages||m.pages_options&&Array.isArray(m.pages_options)&&((z=m.pages_options[0])==null?void 0:z.label)||"50 páginas",tapa:m.default_cover||m.cover_options&&Array.isArray(m.cover_options)&&((F=m.cover_options[0])==null?void 0:F.label)||"Tapa Dura Personalizable",acabado:m.default_finish||m.finish_options&&Array.isArray(m.finish_options)&&((O=m.finish_options[0])==null?void 0:O.label)||"Limado"}}),x.image&&typeof x.image=="string"){const b=x.image.startsWith("/")?x.image:`/storage/images/item_preset/${x.image}`;l(b)}}else console.error("Error al cargar preset:",f.message),r({id:p,name:"Preset no encontrado",description:"No se pudo cargar la información del preset",image:null});o(!1)}else console.log("No hay preset ID en URL, usando datos por defecto"),r({id:null,name:"Preset por defecto",description:"Diseño personalizable para tu regalo especial",image:null,item_id:u||null}),o(!1)}catch(c){console.error("Error al cargar preset:",c),r({id:null,name:"Error al cargar",description:"Hubo un problema al cargar el preset",image:null}),o(!1)}})()},[]),v.useEffect(()=>{(async()=>{try{const c=await C.checkAuth();w(c.authenticated),k(c.user)}catch(c){console.error("Error al verificar autenticación:",c),w(!1),k(null)}})()},[]);const W=s=>{const c=s.target.files[0];if(c){h(c);const p=new FileReader;p.onload=u=>{l(u.target.result)},p.readAsDataURL(c)}},K=async s=>{var c;if(s&&(s.preventDefault(),s.stopPropagation()),!y)return console.log("Usuario no autenticado, mostrando modal de login"),T(!0),!1;if(!i.titulo.trim()){alert("Por favor, ingresa un título para tu álbum");return}if(!i.paginas){alert("Por favor, selecciona la cantidad de páginas");return}if(!i.tapa){alert("Por favor, selecciona el tipo de tapa");return}if(!i.acabado){alert("Por favor, selecciona el tipo de acabado");return}try{R(!0);const p=new URLSearchParams(window.location.search);let u=p.get("item"),f=p.get("preset");if(console.log("Parámetros URL:",{itemId:u,presetId:f}),console.log("Estado preset:",a),!u&&(a!=null&&a.item_id)&&(u=a.item_id.toString(),console.log("Usando item_id del preset:",u)),!f&&(a!=null&&a.id)&&(f=a.id.toString(),console.log("Usando preset.id:",f)),a!=null&&a.item_id&&(u=a.item_id.toString()),a!=null&&a.id&&(f=a.id.toString()),console.log("Corregido para backend:",{itemId:u,presetId:f}),!u||!f){const b=[];throw u||b.push("ID del item"),f||b.push("ID del preset"),console.error("Datos faltantes para guardar álbum:",{itemId:u,presetId:f,preset:a,urlParams:Object.fromEntries(p.entries())}),new Error(`Faltan datos requeridos: ${b.join(", ")}. 
                    Asegúrate de acceder desde la página de selección de productos.
                    
Información de debug:
- URL item: ${p.get("item")}
- URL preset: ${p.get("preset")}
- Estado preset.id: ${a==null?void 0:a.id}
- Estado preset.item_id: ${a==null?void 0:a.item_id}`)}console.log("Guardando álbum con:",{itemId:u,presetId:f,preset:a});const x={item_id:u,item_preset_id:f,title:i.titulo,description:`Álbum personalizado con ${i.paginas} páginas, tapa ${i.tapa}, acabado ${i.acabado}`,selected_pages:parseInt(i.paginas),selected_cover_type:i.tapa,selected_finish:i.acabado,cover_image:g,custom_options:{selected_options:{pages:i.paginas,cover:i.tapa,finish:i.acabado},preset_data:a}};console.log("Enviando datos del álbum:",x);const m=await C.saveAlbum(x);if(m&&m.data){const b=((c=m.data.album)==null?void 0:c.id)||m.data.id;console.log("Álbum guardado exitosamente:",m.data);const z=new URLSearchParams({album:b,item:u,preset:f,pages:i.paginas,cover:i.tapa,finish:i.acabado});setTimeout(()=>{window.location.href=`/editor?${z.toString()}`},1e3)}}catch(p){console.error("Error al guardar álbum:",p);let u="Error al guardar el álbum";p.message.includes("Faltan datos requeridos")?u=p.message:p.message.includes("401")?(u="Tu sesión ha expirado. Por favor, inicia sesión nuevamente.",w(!1),T(!0)):p.message.includes("500")?u="Error interno del servidor. Por favor, intenta nuevamente.":(p.message.includes("network")||p.message.includes("fetch"))&&(u="Error de conexión. Verifica tu conexión a internet e intenta nuevamente."),alert(u)}finally{R(!1)}},$=()=>{console.log("Cerrando modal de login"),T(!1)},Z=s=>{s&&(s.preventDefault(),s.stopPropagation()),console.log("Redirigiendo a login");const c=encodeURIComponent(window.location.href);setTimeout(()=>{window.location.href=`/iniciar-sesion?redirect=${c}`},100)};return e.jsxs(n.div,{className:"container mx-auto px-4 py-8 max-w-7xl font-paragraph bg-gradient-to-b from-white to-purple-50 min-h-screen",initial:"hidden",animate:"visible",variants:S.container,children:[(()=>{const s=new URLSearchParams(window.location.search),c=s.get("item"),p=s.get("preset");return!c||!p?e.jsx(n.div,{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Advertencia:"})," No se detectaron parámetros válidos en la URL. Para una experiencia completa, accede desde la página de selección de productos.",e.jsx("br",{}),e.jsxs("span",{className:"text-xs text-yellow-600",children:["Parámetros esperados: item=",c?"✓":"✗",", preset=",p?"✓":"✗"]})]})})]})}):null})(),e.jsx(n.div,{className:"fixed inset-0 overflow-hidden pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[...Array(10)].map((s,c)=>e.jsx(n.div,{className:"absolute rounded-full bg-purple-100 opacity-20",style:{width:Math.random()*200+100,height:Math.random()*200+100,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,Math.random()*100-50],x:[0,Math.random()*100-50],opacity:[.2,.3,.2]},transition:{duration:Math.random()*10+10,repeat:1/0,repeatType:"reverse"}},c))}),e.jsxs(n.button,{className:"flex items-center  mb-6 p-3 rounded-xl transition-all z-10 relative",variants:S.button,whileHover:"hover",whileTap:"tap",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,type:"spring"},onClick:()=>window.history.back(),children:[e.jsx(ae,{className:"h-6 w-6"}),e.jsx("span",{className:"ml-1 font-medium",children:"Regresar"})]}),e.jsxs("div",{className:"md:flex md:gap-10 md:items-start relative z-10",children:[e.jsxs("div",{className:"md:w-1/2",children:[e.jsxs(n.div,{className:"mb-8",variants:S.item,children:[t?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n.h1,{className:"text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-500 bg-clip-text text-transparent",initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,type:"spring",stiffness:100},children:V()}),e.jsx(n.p,{className:"text-base md:text-lg text-gray-700 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:(a==null?void 0:a.description)||"El libro es de 22×22 cm, de tapa dura que tiene un diseño especial de boda personalizable para agregar una foto o imagen, nombres y fecha del evento. En su interior viene con 50 páginas de papel couché de 170 grs. en blanco para que los invitados puedan escribir sus mensajes."})]}),e.jsx(n.div,{className:"mt-6 flex flex-wrap gap-3",children:X().map((s,c)=>e.jsxs(n.div,{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm",custom:c,variants:S.featureIcon,whileHover:{y:-2},children:[e.jsx(n.span,{whileHover:{scale:1.1},children:s.icon}),e.jsx("span",{className:"text-sm font-medium",children:s.text})]},c))})]}),e.jsxs(n.form,{className:"space-y-6 bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white",variants:S.container,initial:"hidden",animate:"visible",children:[e.jsxs(n.div,{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Título del Libro"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i.titulo,onChange:s=>N({...i,titulo:s.target.value}),className:`w-full p-3 bg-white rounded-lg border border-gray-300 text-sm 
                                             focus:ring-2 focus:ring-purple-600 focus:border-transparent focus:outline-none 
                                             hover:border-gray-400 transition-all duration-200 ease-out
                                             placeholder:text-gray-400`,placeholder:`${(a==null?void 0:a.name)||((U=a==null?void 0:a.item)==null?void 0:U.name)||"Libro Personalizado"} (personaliza tu título)`}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(L,{size:16})})]})]}),e.jsxs(n.div,{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad de Páginas"}),e.jsx(I,{value:i.paginas,onChange:s=>N({...i,paginas:s}),placeholder:"Selecciona páginas",options:a!=null&&a.pages_options&&Array.isArray(a.pages_options)?a.pages_options:[{value:"24 páginas",label:"24 páginas"},{value:"50 páginas",label:"50 páginas"},{value:"100 páginas",label:"100 páginas"}]})]}),e.jsxs(n.div,{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Tapa"}),e.jsx(I,{value:i.tapa,onChange:s=>N({...i,tapa:s}),placeholder:"Selecciona tipo de tapa",options:a!=null&&a.cover_options&&Array.isArray(a.cover_options)?a.cover_options:[{value:"Tapa Dura Personalizable",label:"Tapa Dura Personalizable"},{value:"Tapa Blanda",label:"Tapa Blanda"}]})]}),e.jsxs(n.div,{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Acabado"}),e.jsx(I,{value:i.acabado,onChange:s=>N({...i,acabado:s}),placeholder:"Selecciona tipo de acabado",options:a!=null&&a.finish_options&&Array.isArray(a.finish_options)?a.finish_options:[{value:"Limado",label:"Limado"},{value:"Brillante",label:"Brillante"},{value:"Mate",label:"Mate"}]})]}),e.jsx(n.div,{className:"pt-4",children:e.jsxs(n.button,{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),K(s)},disabled:_,className:`block text-center w-full py-4 px-6 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all relative overflow-hidden group ${_?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-500 text-white"}`,whileHover:_?{}:{scale:1.02,boxShadow:"0 10px 25px -5px rgba(139, 92, 246, 0.4)"},whileTap:_?{}:{scale:.98},children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx(n.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Guardando..."]}):y?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:20}),"Crear proyecto",e.jsx(M,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}):e.jsxs(e.Fragment,{children:["Inicia sesión para crear",e.jsx(M,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})}),!_&&e.jsx(n.span,{className:"absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-pink-600 to-purple-700"})]})})]})]}),e.jsx(n.div,{className:"mt-8 md:mt-0 md:w-1/2 sticky top-6",variants:S.image,whileHover:"hover",children:e.jsx(n.div,{className:"bg-white rounded-2xl shadow-2xl border-2 border-white relative overflow-hidden min-h-[600px] flex flex-col",initial:{rotate:-1,scale:.95},animate:{rotate:0,scale:1},whileHover:{scale:1.02,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},children:t?e.jsx("div",{className:"animate-pulse flex-1 flex items-center justify-center",children:e.jsx("div",{className:"w-full h-[500px] bg-gray-200 rounded-lg m-6"})}):e.jsxs(e.Fragment,{children:[e.jsxs(n.div,{className:"flex-1 relative cursor-pointer group",whileHover:{backgroundColor:"rgba(245, 243, 255, 0.3)"},whileTap:{scale:.98},children:[e.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),d?e.jsxs("div",{className:"relative h-full min-h-[500px] flex items-center justify-center p-6",children:[e.jsx(n.img,{src:d,alt:"Portada personalizada",className:"max-w-full max-h-full object-contain rounded-lg shadow-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},onError:s=>{console.warn("Error al cargar imagen:",d),s.target.src="/assets/img/backgrounds/resources/default-image.png"}}),e.jsx(n.div,{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",initial:{opacity:0},children:e.jsxs("div",{className:"bg-white/90 backdrop-blur px-6 py-3 rounded-full shadow-lg flex items-center gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Cambiar imagen"})]})}),e.jsx(n.div,{className:"absolute top-4 right-4 bg-purple-500 text-white px-3 py-2 rounded-full shadow-lg flex items-center gap-2",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,type:"spring"},children:e.jsx("span",{className:"text-sm font-medium",children:"✓ Imagen personalizada"})})]}):e.jsx("div",{className:"h-full min-h-[500px] flex flex-col items-center justify-center p-8 border-4 border-dashed border-purple-200 m-6 rounded-2xl bg-gradient-to-br from-purple-50/50 to-pink-50/50",children:e.jsxs(n.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx(n.div,{className:"w-20 h-20 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center mb-6 mx-auto",whileHover:{scale:1.1,rotate:5},animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:2},children:e.jsx(H,{className:"w-10 h-10 text-purple-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Arrastra tu imagen aquí"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"O haz clic para seleccionar una imagen desde tu dispositivo. Esta será la portada de tu libro personalizado."}),e.jsx(n.div,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-semibold shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Seleccionar imagen"}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Formatos soportados: PNG, JPG, JPEG"}),(a==null?void 0:a.image)&&e.jsxs(n.div,{className:"mt-6 p-4 bg-white/50 rounded-xl",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Vista previa del diseño:"}),e.jsx("img",{src:a.image,alt:"Diseño preset",className:"w-24 h-24 object-cover rounded-lg mx-auto opacity-60",onError:s=>{s.target.style.display="none"}})]})]})})]}),e.jsx(n.div,{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 border-t border-purple-100",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{size:18,className:"text-purple-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:(a==null?void 0:a.name)||"Diseño Personalizado"})]})})})]})})})]}),e.jsx(G,{children:J&&e.jsx(n.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:$,children:e.jsx(n.div,{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:"¡Inicia sesión para continuar!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Para guardar tu álbum personalizado necesitas tener una cuenta activa."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n.button,{type:"button",onClick:Z,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all cursor-pointer block text-center",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Iniciar sesión"}),e.jsx(n.button,{type:"button",onClick:$,className:"w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Continuar sin guardar"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["¿No tienes cuenta?",e.jsx("a",{href:"/crear-cuenta",className:"text-purple-600 hover:underline ml-1",children:"Regístrate gratis"})]})]})})})})]})}export{Ne as default};

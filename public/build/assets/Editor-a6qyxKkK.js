import{j as l}from"./AboutSimple-Cf8x2fCZ.js";import{r as b,R as ne}from"./index-BH53Isel.js";import{a as Tn,b as ro,_ as Ht,e as F}from"./objectWithoutPropertiesLoose-G_JZ8CQC.js";import{h as Rn}from"./hoist-non-react-statics.cjs-lJxeXavk.js";import{r as no,R as ao}from"./index-rimy3MAc.js";import{c as U}from"./createLucideIcon-Cy5Ya80P.js";import{B as io,h as oo}from"./Editor-BOPpn0r-.js";import{e as so}from"./index-BSWw-p5k.js";import{T as ut}from"./trash-2-DK1wnsDn.js";import{U as lo}from"./upload-qgEr5bIl.js";import{S as co,P as uo}from"./sparkles-bXAtWA17.js";import{X as po}from"./x-DBMwyD6F.js";import{M as An}from"./minus-jyhodMPN.js";import{P as Er}from"./plus-Bot15Khs.js";import{C as fo}from"./chevron-down-DS-mdh9v.js";import{C as go}from"./chevron-left-B2s3ZsB7.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./index.es-p8wkj5I3.js";import"./index-Bv81MoWS.js";import"./index-Chjiymov.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=U("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=U("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=U("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=U("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=U("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=U("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=U("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=U("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=U("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=U("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=U("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=U("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=U("FlipVertical",[["path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3",key:"14bfxa"}],["path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3",key:"14rx03"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=U("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=U("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=U("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=U("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=U("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=U("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=U("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=U("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=U("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=U("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=U("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=U("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=U("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=U("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=U("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=U("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=U("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=U("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=U("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=U("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=U("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=U("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=U("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=U("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=U("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=U("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=U("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function We({children:e,onClick:t,className:r="",variant:n="default",size:a="default",disabled:i=!1,icon:o=null}){const s="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},p={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return l.jsxs("button",{className:`${s} ${c[n]} ${p[a]} ${r} gap-2`,onClick:t,disabled:i,children:[o&&l.jsx("span",{className:"w-4 h-4",children:o}),e]})}const qe=({value:e=[50],min:t=0,max:r=100,step:n=1,onValueChange:a,label:i,unit:o="%"})=>{const[s,c]=b.useState(e[0]),p=g=>{const u=Number.parseInt(g.target.value);c(u),a&&a([u])};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i}),l.jsxs("span",{className:"text-sm text-gray-500",children:[s,o]})]}),l.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:l.jsx("input",{type:"range",min:t,max:r,step:n,value:s,onChange:p,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},Ko=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:105,contrast:115,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],Ta=b.createContext({dragDropManager:void 0});function Oe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Mn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),jn=function(){return Math.random().toString(36).substring(7).split("").join(".")},kn={INIT:"@@redux/INIT"+jn(),REPLACE:"@@redux/REPLACE"+jn()};function Qo(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function $r(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Oe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Oe(1));return r($r)(e,t)}if(typeof e!="function")throw new Error(Oe(2));var a=e,i=t,o=[],s=o,c=!1;function p(){s===o&&(s=o.slice())}function g(){if(c)throw new Error(Oe(3));return i}function u(h){if(typeof h!="function")throw new Error(Oe(4));if(c)throw new Error(Oe(5));var y=!0;return p(),s.push(h),function(){if(y){if(c)throw new Error(Oe(6));y=!1,p();var D=s.indexOf(h);s.splice(D,1),o=null}}}function d(h){if(!Qo(h))throw new Error(Oe(7));if(typeof h.type>"u")throw new Error(Oe(8));if(c)throw new Error(Oe(9));try{c=!0,i=a(i,h)}finally{c=!1}for(var y=o=s,m=0;m<y.length;m++){var D=y[m];D()}return h}function f(h){if(typeof h!="function")throw new Error(Oe(10));a=h,d({type:kn.REPLACE})}function v(){var h,y=u;return h={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(Oe(11));function C(){D.next&&D.next(g())}C();var I=y(C);return{unsubscribe:I}}},h[Mn]=function(){return this},h}return d({type:kn.INIT}),n={dispatch:d,subscribe:u,getState:g,replaceReducer:f},n[Mn]=v,n}function Bn(e,t){return function(){return t(e.apply(this,arguments))}}function Ln(e,t){if(typeof e=="function")return Bn(e,t);if(typeof e!="object"||e===null)throw new Error(Oe(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=Bn(a,t))}return r}function Ra(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function Zo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Oe(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(c){return c(o)});return i=Ra.apply(void 0,s)(a.dispatch),Tn(Tn({},a),{},{dispatch:i})}}}function W(e,t,...r){if(_o()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function _o(){return typeof process<"u"&&!0}function es(e,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,e)}function ts(e,t){return e.filter(r=>r!==t)}function Aa(e){return typeof e=="object"}function rs(e,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function ns(e,t){return e.filter(r=>t.indexOf(r)>-1)}const Hr="dnd-core/INIT_COORDS",Qt="dnd-core/BEGIN_DRAG",zr="dnd-core/PUBLISH_DRAG_SOURCE",Zt="dnd-core/HOVER",_t="dnd-core/DROP",er="dnd-core/END_DRAG";function Fn(e,t){return{type:Hr,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const as={type:Hr,payload:{clientOffset:null,sourceClientOffset:null}};function is(e){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,s=e.getMonitor(),c=e.getRegistry();e.dispatch(Fn(i)),os(r,s,c);const p=cs(r,s);if(p==null){e.dispatch(as);return}let g=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");ss(o),g=o(p)}e.dispatch(Fn(i,g));const d=c.getSource(p).beginDrag(s,p);if(d==null)return;ls(d),c.pinSource(p);const f=c.getSourceType(p);return{type:Qt,payload:{itemType:f,item:d,sourceId:p,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!a}}}}function os(e,t,r){W(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){W(r.getSource(n),"Expected sourceIds to be registered.")})}function ss(e){W(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function ls(e){W(Aa(e),"Item must be an object.")}function cs(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function us(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ds(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){us(e,a,r[a])})}return e}function ps(e){return function(r={}){const n=e.getMonitor(),a=e.getRegistry();fs(n),hs(n).forEach((o,s)=>{const c=gs(o,s,a,n),p={type:_t,payload:{dropResult:ds({},r,c)}};e.dispatch(p)})}}function fs(e){W(e.isDragging(),"Cannot call drop while not dragging."),W(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function gs(e,t,r,n){const a=r.getTarget(e);let i=a?a.drop(n,e):void 0;return vs(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function vs(e){W(typeof e>"u"||Aa(e),"Drop result must either be an object or undefined.")}function hs(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function ms(e){return function(){const r=e.getMonitor(),n=e.getRegistry();bs(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:er}}}function bs(e){W(e.isDragging(),"Cannot call endDrag while not dragging.")}function Pr(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function ys(e){return function(r,{clientOffset:n}={}){xs(r);const a=r.slice(0),i=e.getMonitor(),o=e.getRegistry(),s=i.getItemType();return ws(a,o,s),Ds(a,i,o),Ss(a,i,o),{type:Zt,payload:{targetIds:a,clientOffset:n||null}}}}function xs(e){W(Array.isArray(e),"Expected targetIds to be an array.")}function Ds(e,t,r){W(t.isDragging(),"Cannot call hover while not dragging."),W(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){const a=e[n];W(e.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);W(i,"Expected targetIds to be registered.")}}function ws(e,t,r){for(let n=e.length-1;n>=0;n--){const a=e[n],i=t.getTargetType(a);Pr(i,r)||e.splice(n,1)}}function Ss(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function Cs(e){return function(){if(e.getMonitor().isDragging())return{type:zr}}}function Is(e){return{beginDrag:is(e),publishDragSource:Cs(e),hover:ys(e),drop:ps(e),endDrag:ms(e)}}class Es{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const s=i.apply(t,o);typeof s<"u"&&r(s)}}const a=Is(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function Ns(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Ma(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ps(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:Ma(Ns(t,n),r)}function Os(e){const{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:Ma(t,r)}const Ct=[],Wr=[];Ct.__IS_NONE__=!0;Wr.__IS_ALL__=!0;function Ts(e,t){return e===Ct?!1:e===Wr||typeof t>"u"?!0:ns(t,e).length>0}class Rs{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;W(typeof t=="function","listener must be a function."),W(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!Ts(o.dirtyHandlerIds,n)||t()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){W(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return W(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(W(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return Pr(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(W(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!Pr(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(t);return n?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Ps(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Os(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const Gn=typeof global<"u"?global:self,ja=Gn.MutationObserver||Gn.WebKitMutationObserver;function ka(e){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),e()}}}function As(e){let t=1;const r=new ja(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const Ms=typeof ja=="function"?As:ka;class js{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=Ms(this.flush),this.requestErrorThrow=ka(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class ks{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class Bs{create(t){const r=this.freeTasks,n=r.length?r.pop():new ks(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const Ba=new js,Ls=new Bs(Ba.registerPendingError);function Fs(e){Ba.enqueueTask(Ls.create(e))}const Ur="dnd-core/ADD_SOURCE",qr="dnd-core/ADD_TARGET",Vr="dnd-core/REMOVE_SOURCE",tr="dnd-core/REMOVE_TARGET";function Gs(e){return{type:Ur,payload:{sourceId:e}}}function $s(e){return{type:qr,payload:{targetId:e}}}function Hs(e){return{type:Vr,payload:{sourceId:e}}}function zs(e){return{type:tr,payload:{targetId:e}}}function Ws(e){W(typeof e.canDrag=="function","Expected canDrag to be a function."),W(typeof e.beginDrag=="function","Expected beginDrag to be a function."),W(typeof e.endDrag=="function","Expected endDrag to be a function.")}function Us(e){W(typeof e.canDrop=="function","Expected canDrop to be a function."),W(typeof e.hover=="function","Expected hover to be a function."),W(typeof e.drop=="function","Expected beginDrag to be a function.")}function Or(e,t){if(t&&Array.isArray(e)){e.forEach(r=>Or(r,!1));return}W(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Be;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Be||(Be={}));let qs=0;function Vs(){return qs++}function Ys(e){const t=Vs().toString();switch(e){case Be.SOURCE:return`S${t}`;case Be.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function $n(e){switch(e[0]){case"S":return Be.SOURCE;case"T":return Be.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Hn(e,t){const r=e.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class Xs{addSource(t,r){Or(t),Ws(r);const n=this.addHandler(Be.SOURCE,t,r);return this.store.dispatch(Gs(n)),n}addTarget(t,r){Or(t,!0),Us(r);const n=this.addHandler(Be.TARGET,t,r);return this.store.dispatch($s(n)),n}containsHandler(t){return Hn(this.dragSources,t)||Hn(this.dropTargets,t)}getSource(t,r=!1){return W(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return W(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return W(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return W(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return $n(t)===Be.SOURCE}isTargetId(t){return $n(t)===Be.TARGET}removeSource(t){W(this.getSource(t),"Expected an existing source."),this.store.dispatch(Hs(t)),Fs(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){W(this.getTarget(t),"Expected an existing target."),this.store.dispatch(zs(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);W(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){W(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=Ys(t);return this.types.set(a,r),t===Be.SOURCE?this.dragSources.set(a,n):t===Be.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const Js=(e,t)=>e===t;function Ks(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Qs(e,t,r=Js){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function Zs(e=Ct,t){switch(t.type){case Zt:break;case Ur:case qr:case tr:case Vr:return Ct;case Qt:case zr:case er:case _t:default:return Wr}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=rs(r,n);if(!(a.length>0||!Qs(r,n)))return Ct;const o=n[n.length-1],s=r[r.length-1];return o!==s&&(o&&a.push(o),s&&a.push(s)),a}function _s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function el(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){_s(e,a,r[a])})}return e}const zn={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function tl(e=zn,t){const{payload:r}=t;switch(t.type){case Hr:case Qt:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Zt:return Ks(e.clientOffset,r.clientOffset)?e:el({},e,{clientOffset:r.clientOffset});case er:case _t:return zn;default:return e}}function rl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){rl(e,a,r[a])})}return e}const nl={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function al(e=nl,t){const{payload:r}=t;switch(t.type){case Qt:return ot({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case zr:return ot({},e,{isSourcePublic:!0});case Zt:return ot({},e,{targetIds:r.targetIds});case tr:return e.targetIds.indexOf(r.targetId)===-1?e:ot({},e,{targetIds:ts(e.targetIds,r.targetId)});case _t:return ot({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case er:return ot({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function il(e=0,t){switch(t.type){case Ur:case qr:return e+1;case Vr:case tr:return e-1;default:return e}}function ol(e=0){return e+1}function sl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){sl(e,a,r[a])})}return e}function cl(e={},t){return{dirtyHandlerIds:Zs(e.dirtyHandlerIds,{type:t.type,payload:ll({},t.payload,{prevTargetIds:es(e,"dragOperation.targetIds",[])})}),dragOffset:tl(e.dragOffset,t),refCount:il(e.refCount,t),dragOperation:al(e.dragOperation,t),stateId:ol(e.stateId)}}function ul(e,t=void 0,r={},n=!1){const a=dl(n),i=new Rs(a,new Xs(a)),o=new Es(a,i),s=e(o,t,r);return o.receiveBackend(s),o}function dl(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return $r(cl,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function pl(e,t){if(e==null)return{};var r=fl(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fl(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}let Wn=0;const Gt=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var gl=b.memo(function(t){var{children:r}=t,n=pl(t,["children"]);const[a,i]=vl(n);return b.useEffect(()=>{if(i){const o=La();return++Wn,()=>{--Wn===0&&(o[Gt]=null)}}},[]),l.jsx(Ta.Provider,{value:a,children:r})});function vl(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=hl(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function hl(e,t=La(),r,n){const a=t;return a[Gt]||(a[Gt]={dragDropManager:ul(e,t,r,n)}),a[Gt]}function La(){return typeof global<"u"?global:window}const nt=typeof window<"u"?b.useLayoutEffect:b.useEffect;function ml(e,t,r){const[n,a]=b.useState(()=>t(e)),i=b.useCallback(()=>{const o=t(e);so(n,o)||(a(o),r&&r())},[n,e,r]);return nt(i),[n,i]}function bl(e,t,r){const[n,a]=ml(e,t,r);return nt(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(a,{handlerIds:[o]})},[e,a]),n}function Fa(e,t,r){return bl(t,e||(()=>({})),()=>r.reconnect())}function Ga(e,t){const r=[];return typeof e!="function"&&r.push(e),b.useMemo(()=>typeof e=="function"?e():e,r)}function yl(e){return b.useMemo(()=>e.hooks.dragSource(),[e])}function xl(e){return b.useMemo(()=>e.hooks.dragPreview(),[e])}let cr=!1,ur=!1;class Dl{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){W(!cr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return cr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{cr=!1}}isDragging(){if(!this.sourceId)return!1;W(!ur,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ur=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{ur=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let dr=!1;class wl{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;W(!dr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return dr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{dr=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function Sl(e,t,r){const n=r.getRegistry(),a=n.addTarget(e,t);return[a,()=>n.removeTarget(a)]}function Cl(e,t,r){const n=r.getRegistry(),a=n.addSource(e,t);return[a,()=>n.removeSource(a)]}function Tr(e,t,r,n){let a;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const p=i[c];if(!s(p))return!1;const g=e[p],u=t[p];if(a=void 0,a===!1||a===void 0&&g!==u)return!1}return!0}function Rr(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Il(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function El(e){return(t=null,r=null)=>{if(!b.isValidElement(t)){const i=t;return e(i,r),i}const n=t;return Il(n),Nl(n,r?i=>e(i,r):e)}}function $a(e){const t={};return Object.keys(e).forEach(r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const a=El(n);t[r]=()=>a}}),t}function Un(e,t){typeof e=="function"?e(t):e.current=t}function Nl(e,t){const r=e.ref;return W(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?b.cloneElement(e,{ref:n=>{Un(r,n),Un(t,n)}}):b.cloneElement(e,{ref:t})}class Pl{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Tr(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Tr(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=$a({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Rr(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Rr(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class Ol{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Tr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=$a({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Rr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function gt(){const{dragDropManager:e}=b.useContext(Ta);return W(e!=null,"Expected drag drop context"),e}function Tl(e,t){const r=gt(),n=b.useMemo(()=>new Pl(r.getBackend()),[r]);return nt(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),nt(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function Rl(){const e=gt();return b.useMemo(()=>new Dl(e),[e])}class Al{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function Ml(e,t,r){const n=b.useMemo(()=>new Al(e,t,r),[t,r]);return b.useEffect(()=>{n.spec=e},[e]),n}function jl(e){return b.useMemo(()=>{const t=e.type;return W(t!=null,"spec.type must be defined"),t},[e])}function kl(e,t,r){const n=gt(),a=Ml(e,t,r),i=jl(e);nt(function(){if(i!=null){const[s,c]=Cl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c}},[n,t,r,a,i])}function Ha(e,t){const r=Ga(e);W(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=Rl(),a=Tl(r.options,r.previewOptions);return kl(r,n,a),[Fa(r.collect,n,a),yl(a),xl(a)]}function Bl(e){return b.useMemo(()=>e.hooks.dropTarget(),[e])}function Ll(e){const t=gt(),r=b.useMemo(()=>new Ol(t.getBackend()),[t]);return nt(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}function Fl(){const e=gt();return b.useMemo(()=>new wl(e),[e])}function Gl(e){const{accept:t}=e;return b.useMemo(()=>(W(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class $l{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function Hl(e,t){const r=b.useMemo(()=>new $l(e,t),[t]);return b.useEffect(()=>{r.spec=e},[e]),r}function zl(e,t,r){const n=gt(),a=Hl(e,t),i=Gl(e);nt(function(){const[s,c]=Sl(i,a,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),c},[n,t,a,r,i.map(o=>o.toString()).join("|")])}function Wl(e,t){const r=Ga(e),n=Fl(),a=Ll(r.options);return zl(r,n,a),[Fa(r.collect,n,a),Bl(a)]}const zt=[{id:"none",name:"Sin máscara",class:"",category:"Básicas"},{id:"circle",name:"Círculo",class:"mask-circle",category:"Básicas"},{id:"rounded",name:"Redondeado",class:"mask-rounded",category:"Básicas"},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas"},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas"},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas"},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas"},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos"},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos"},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos"},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos"},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas"},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas"},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas"},{id:"rounded-sm",name:"Redondeado pequeño",class:"mask-rounded-sm",category:"Básicas"},{id:"rounded-lg",name:"Redondeado grande",class:"mask-rounded-lg",category:"Básicas"},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas"},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas"},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas"}];function Ul({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a,availableMasks:i=[]}){var Q,ie,me,ye,ue,xe,De,de,Ee,pe,we,Ne,Se,be,Pe,Ce;const[{isDragging:o},s]=Ha(()=>({type:"IMAGE_ELEMENT",item:{id:e.id},collect:P=>({isDragging:!!P.isDragging()})})),c=b.useRef(null),[p,g]=b.useState(!1),[u,d]=b.useState({x:0,y:0}),[f,v]=b.useState(!1),[h,y]=b.useState({x:0,y:0}),m={filter:`
      brightness(${(((Q=e.filters)==null?void 0:Q.brightness)||100)/100})
      contrast(${(((ie=e.filters)==null?void 0:ie.contrast)||100)/100})
      saturate(${(((me=e.filters)==null?void 0:me.saturation)||100)/100})
      sepia(${(((ye=e.filters)==null?void 0:ye.tint)||0)/100})
      hue-rotate(${(((ue=e.filters)==null?void 0:ue.hue)||0)*3.6}deg)
      blur(${((xe=e.filters)==null?void 0:xe.blur)||0}px)
    `,transform:`scale(${((De=e.filters)==null?void 0:De.scale)||1}) rotate(${((de=e.filters)==null?void 0:de.rotate)||0}deg) ${(Ee=e.filters)!=null&&Ee.flipHorizontal?"scaleX(-1)":""} ${(pe=e.filters)!=null&&pe.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((we=e.filters)==null?void 0:we.blendMode)||"normal",opacity:(((Ne=e.filters)==null?void 0:Ne.opacity)||100)/100},D=zt.find(P=>P.id===e.mask)||zt[0],C=P=>{t&&(P.stopPropagation(),g(!0),d({x:P.clientX-e.position.x,y:P.clientY-e.position.y}))},I=P=>{if(p&&c.current){const ee=P.clientX-u.x,re=P.clientY-u.y;n({position:{x:ee,y:re}})}},R=()=>{g(!1)};b.useEffect(()=>{p&&(window.addEventListener("mousemove",I),window.addEventListener("mouseup",R));const P=ee=>{f&&!ee.target.closest(".context-menu")&&v(!1)};return document.addEventListener("click",P),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",R),document.removeEventListener("click",P)}},[p,u,f]);const T=b.useCallback(P=>{c.current=P,s(P)},[s]),k=P=>{P.preventDefault(),P.stopPropagation(),y({x:P.clientX,y:P.clientY}),v(!0)},V=()=>{const P=document.createElement("input");P.type="file",P.accept="image/*",P.onchange=ee=>{if(ee.target.files&&ee.target.files[0]){const re=new FileReader;re.onload=oe=>{var fe;(fe=oe.target)!=null&&fe.result&&n({content:oe.target.result})},re.readAsDataURL(ee.target.files[0])}},P.click(),v(!1)},$=()=>{const P={...JSON.parse(JSON.stringify(e)),id:`img-${Date.now()}`,position:{x:e.position.x+20,y:e.position.y+20}};n(P,!0),v(!1)},[q,z]=b.useState(!1),[j,N]=b.useState(null),[B,J]=b.useState({width:0,height:0}),[O,le]=b.useState({x:0,y:0}),se=(P,ee)=>{var re,oe,fe,Ge;P.stopPropagation(),P.preventDefault(),z(!0),N(ee),le({x:P.clientX,y:P.clientY}),J({width:((re=e.size)==null?void 0:re.width)||((oe=c.current)==null?void 0:oe.offsetWidth)||200,height:((fe=e.size)==null?void 0:fe.height)||((Ge=c.current)==null?void 0:Ge.offsetHeight)||200})},X=b.useCallback(P=>{if(!q||!c.current)return;const ee=P.clientX-O.x,re=P.clientY-O.y;c.current.parentElement.getBoundingClientRect();let oe=B.width,fe=B.height;switch(j){case"right":oe=Math.max(50,B.width+ee);break;case"bottom":fe=Math.max(50,B.height+re);break;case"bottomRight":oe=Math.max(50,B.width+ee),fe=Math.max(50,B.height+re);break}n({size:{width:oe,height:j==="right"?B.height:fe}})},[q,O,B,j,e.position]),ae=b.useCallback(()=>{z(!1),N(null)},[]);return b.useEffect(()=>(q&&(window.addEventListener("mousemove",X),window.addEventListener("mouseup",ae)),()=>{window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",ae)}),[q,X,ae]),l.jsxs("div",{ref:T,className:`absolute ${D.class} ${t?"ring-2 ring-purple-500":""} ${o?"opacity-50":"opacity-100"}`,style:{position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,width:(Se=e.size)!=null&&Se.width?`${e.size.width}px`:"200px",height:(be=e.size)!=null&&be.height?`${e.size.height}px`:"200px",cursor:t?"move":"pointer",zIndex:t?1:0,opacity:t?.9:1,transition:"opacity 0.2s, z-index 0.2s",pointerEvents:"all",overflow:"visible"},onClick:P=>{P.stopPropagation(),r()},onMouseDown:P=>{P.stopPropagation(),C(P),t||n({zIndex:Math.max(...elements.map(ee=>ee.zIndex||0))+1})},onContextMenu:k,children:[l.jsxs("div",{className:"w-full h-full overflow-hidden relative",children:[l.jsx("img",{src:e.content,alt:"Imagen cargada",className:"w-full h-full object-cover",style:{...m,mixBlendMode:((Pe=e.filters)==null?void 0:Pe.blendMode)||"normal",opacity:(((Ce=e.filters)==null?void 0:Ce.opacity)||100)/100}}),t&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-purple-500 rounded-full cursor-se-resize",style:{transform:"translate(50%, 50%)"},onMouseDown:P=>{P.stopPropagation(),se(P,"bottomRight")}}),l.jsx("div",{className:"absolute bottom-0 w-3 h-3 bg-purple-500 rounded-full cursor-s-resize",style:{left:"50%",transform:"translateX(-50%) translateY(50%)"},onMouseDown:P=>{P.stopPropagation(),se(P,"bottom")}}),l.jsx("div",{className:"absolute right-0 w-3 h-3 bg-purple-500 rounded-full cursor-e-resize",style:{top:"50%",transform:"translateY(-50%) translateX(50%)"},onMouseDown:P=>{P.stopPropagation(),se(P,"right")}})]})]}),t&&l.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[l.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:P=>{var ee;P.stopPropagation(),n({filters:{...e.filters,rotate:(((ee=e.filters)==null?void 0:ee.rotate)||0)+90}})},children:l.jsx(Oa,{className:"h-4 w-4 text-gray-700"})}),l.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:P=>{P.stopPropagation(),a()},children:l.jsx(ut,{className:"h-4 w-4 text-gray-700"})})]}),f&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48 context-menu",style:{left:`${h.x}px`,top:`${h.y}px`},onClick:P=>P.stopPropagation(),children:[l.jsx("button",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 text-gray-500",onClick:()=>v(!1),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:V,children:[l.jsx(zo,{className:"h-4 w-4"}),"Reemplazar imagen"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:$,children:[l.jsx(Gr,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var P;n({filters:{...e.filters,opacity:Math.max(0,(((P=e.filters)==null?void 0:P.opacity)||100)-10)}}),v(!1)},children:[l.jsx(Pa,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),v(!1)},children:[l.jsx(ut,{className:"h-4 w-4"}),"Eliminar"]})]})]})]})}function ql({element:e,isSelected:t,onSelect:r,onUpdate:n,onDelete:a}){var B,J,O,le,se,X,ae,Q,ie,me,ye,ue,xe,De,de,Ee,pe,we,Ne,Se,be,Pe,Ce,P,ee,re,oe,fe,Ge;const[i,o]=b.useState(!1),s=b.useRef(null),c=b.useRef(null),[{isDragging:p},g]=Ha(()=>({type:"TEXT_ELEMENT",item:{id:e.id},collect:G=>({isDragging:!!G.isDragging()})})),[u,d]=b.useState(!1),[f,v]=b.useState({x:0,y:0}),[h,y]=b.useState(!1),[m,D]=b.useState({x:0,y:0}),C=()=>{o(!1)},I=G=>{n({content:G.target.value})},R=G=>{G.key==="Enter"&&o(!1)},T=G=>{t&&!i&&(G.stopPropagation(),d(!0),v({x:G.clientX-e.position.x,y:G.clientY-e.position.y}))},k=G=>{if(u&&c.current){const ce=c.current.parentElement.getBoundingClientRect(),He=G.clientX-f.x,ze=G.clientY-f.y,Qe=ce.width-c.current.offsetWidth,Ze=ce.height-c.current.offsetHeight,_e=Math.max(0,Math.min(He,Qe)),et=Math.max(0,Math.min(ze,Ze));n({position:{x:_e,y:et}})}},V=()=>{d(!1)},$=G=>{G.preventDefault(),G.stopPropagation(),D({x:G.clientX,y:G.clientY}),y(!0)},q=()=>{const G={...JSON.parse(JSON.stringify(e)),id:`text-${Date.now()}`,position:{x:e.position.x+10,y:e.position.y+10}};n(G,!0),y(!1)};b.useEffect(()=>(u&&(window.addEventListener("mousemove",k),window.addEventListener("mouseup",V)),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",V)}),[u,f]);const z=b.useCallback(G=>{c.current=G,g(G)},[g]),j=(B=e.style)!=null&&B.textShadow?`${e.style.textShadowX||0}px ${e.style.textShadowY||0}px ${e.style.textShadowBlur||0}px ${e.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",N={...e.style,position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,cursor:t&&!i?"move":"pointer",textShadow:j,zIndex:10,fontFamily:((J=e.style)==null?void 0:J.fontFamily)||"Arial",fontSize:((O=e.style)==null?void 0:O.fontSize)||"16px",color:((le=e.style)==null?void 0:le.color)||"#000000",fontWeight:((se=e.style)==null?void 0:se.fontWeight)||"normal",fontStyle:((X=e.style)==null?void 0:X.fontStyle)||"normal",textDecoration:((ae=e.style)==null?void 0:ae.textDecoration)||"none",textAlign:((Q=e.style)==null?void 0:Q.textAlign)||"left",backgroundColor:((ie=e.style)==null?void 0:ie.backgroundColor)||"transparent",padding:((me=e.style)==null?void 0:me.padding)||"8px",borderRadius:((ye=e.style)==null?void 0:ye.borderRadius)||"0px",border:((ue=e.style)==null?void 0:ue.border)||"none",opacity:((xe=e.style)==null?void 0:xe.opacity)!==void 0?e.style.opacity:1};return b.useEffect(()=>{var ce,He;const G=(He=(ce=e.style)==null?void 0:ce.fontFamily)==null?void 0:He.replace(/'/g,"");if(G&&!document.fonts.check(`12px ${G}`)){const ze=new FontFace(G,`local(${G})`);ze.load().then(()=>document.fonts.add(ze))}},[(De=e.style)==null?void 0:De.fontFamily]),l.jsxs("div",{ref:z,className:`${t?"ring-2 ring-purple-500":""} ${p?"opacity-50":"opacity-100"}`,style:N,onClick:G=>{G.stopPropagation(),r(),!i&&t&&(o(!0),setTimeout(()=>{s.current&&(s.current.focus(),s.current.select())},0))},onMouseDown:T,onContextMenu:$,children:[i?l.jsx("input",{ref:s,type:"text",value:e.content,onChange:I,onBlur:C,onKeyDown:R,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(de=e.style)==null?void 0:de.fontFamily,fontSize:(Ee=e.style)==null?void 0:Ee.fontSize,fontWeight:(pe=e.style)==null?void 0:pe.fontWeight,fontStyle:(we=e.style)==null?void 0:we.fontStyle,textDecoration:(Ne=e.style)==null?void 0:Ne.textDecoration,color:(Se=e.style)==null?void 0:Se.color,textAlign:(be=e.style)==null?void 0:be.textAlign,minWidth:"100px"},autoFocus:!0}):l.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((Pe=e.style)==null?void 0:Pe.backgroundColor)||"transparent",padding:((Ce=e.style)==null?void 0:Ce.padding)||"8px",borderRadius:((P=e.style)==null?void 0:P.borderRadius)||"0px",border:((ee=e.style)==null?void 0:ee.border)||"none",fontFamily:((re=e.style)==null?void 0:re.fontFamily)||"Arial"},children:e.content||"Editar texto"}),t&&l.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:G=>{var ce;G.stopPropagation(),n({style:{...e.style,fontWeight:((ce=e.style)==null?void 0:ce.fontWeight)==="bold"?"normal":"bold"}})},children:l.jsx("span",{className:`text-xs ${((oe=e.style)==null?void 0:oe.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:G=>{var ce;G.stopPropagation(),n({style:{...e.style,fontStyle:((ce=e.style)==null?void 0:ce.fontStyle)==="italic"?"normal":"italic"}})},children:l.jsx("span",{className:`text-xs ${((fe=e.style)==null?void 0:fe.fontStyle)==="italic"?"italic":""}`,children:"I"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:G=>{var ce;G.stopPropagation(),n({style:{...e.style,textDecoration:((ce=e.style)==null?void 0:ce.textDecoration)==="underline"?"none":"underline"}})},children:l.jsx("span",{className:`text-xs ${((Ge=e.style)==null?void 0:Ge.textDecoration)==="underline"?"underline":""}`,children:"U"})}),l.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:G=>{G.stopPropagation(),a()},children:l.jsx(ut,{className:"h-3 w-3 text-gray-700"})})]}),h&&l.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${m.x}px`,top:`${m.y}px`},onClick:G=>G.stopPropagation(),children:[l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{o(!0),y(!1)},children:[l.jsx(ct,{className:"h-4 w-4"}),"Editar texto"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:q,children:[l.jsx(Gr,{className:"h-4 w-4"}),"Duplicar"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var G;n({style:{...e.style,opacity:Math.max(0,(((G=e.style)==null?void 0:G.opacity)||1)-.1)}}),y(!1)},children:[l.jsx(Pa,{className:"h-4 w-4"}),"Reducir opacidad"]}),l.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{a(),y(!1)},children:[l.jsx(ut,{className:"h-4 w-4"}),"Eliminar"]})]})]})}function za(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ro(e,t)}var Wa=ne.createContext(null);function Vl(e){e()}var Ua=Vl,Yl=function(t){return Ua=t},Xl=function(){return Ua};function Jl(){var e=Xl(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var qn={notify:function(){},get:function(){return[]}};function qa(e,t){var r,n=qn;function a(u){return c(),n.subscribe(u)}function i(){n.notify()}function o(){g.onStateChange&&g.onStateChange()}function s(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=Jl())}function p(){r&&(r(),r=void 0,n.clear(),n=qn)}var g={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:s,trySubscribe:c,tryUnsubscribe:p,getListeners:function(){return n}};return g}var Va=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect;function Kl(e){var t=e.store,r=e.context,n=e.children,a=b.useMemo(function(){var s=qa(t);return{store:t,subscription:s}},[t]),i=b.useMemo(function(){return t.getState()},[t]);Va(function(){var s=a.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),i!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[a,i]);var o=r||Wa;return ne.createElement(o.Provider,{value:a},n)}var pr={exports:{}},te={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vn;function Ql(){if(Vn)return te;Vn=1;var e=60103,t=60106,r=60107,n=60108,a=60114,i=60109,o=60110,s=60112,c=60113,p=60120,g=60115,u=60116,d=60121,f=60122,v=60117,h=60129,y=60131;if(typeof Symbol=="function"&&Symbol.for){var m=Symbol.for;e=m("react.element"),t=m("react.portal"),r=m("react.fragment"),n=m("react.strict_mode"),a=m("react.profiler"),i=m("react.provider"),o=m("react.context"),s=m("react.forward_ref"),c=m("react.suspense"),p=m("react.suspense_list"),g=m("react.memo"),u=m("react.lazy"),d=m("react.block"),f=m("react.server.block"),v=m("react.fundamental"),h=m("react.debug_trace_mode"),y=m("react.legacy_hidden")}function D(N){if(typeof N=="object"&&N!==null){var B=N.$$typeof;switch(B){case e:switch(N=N.type,N){case r:case a:case n:case c:case p:return N;default:switch(N=N&&N.$$typeof,N){case o:case s:case u:case g:case i:return N;default:return B}}case t:return B}}}var C=i,I=e,R=s,T=r,k=u,V=g,$=t,q=a,z=n,j=c;return te.ContextConsumer=o,te.ContextProvider=C,te.Element=I,te.ForwardRef=R,te.Fragment=T,te.Lazy=k,te.Memo=V,te.Portal=$,te.Profiler=q,te.StrictMode=z,te.Suspense=j,te.isAsyncMode=function(){return!1},te.isConcurrentMode=function(){return!1},te.isContextConsumer=function(N){return D(N)===o},te.isContextProvider=function(N){return D(N)===i},te.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},te.isForwardRef=function(N){return D(N)===s},te.isFragment=function(N){return D(N)===r},te.isLazy=function(N){return D(N)===u},te.isMemo=function(N){return D(N)===g},te.isPortal=function(N){return D(N)===t},te.isProfiler=function(N){return D(N)===a},te.isStrictMode=function(N){return D(N)===n},te.isSuspense=function(N){return D(N)===c},te.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===a||N===h||N===n||N===c||N===p||N===y||typeof N=="object"&&N!==null&&(N.$$typeof===u||N.$$typeof===g||N.$$typeof===i||N.$$typeof===o||N.$$typeof===s||N.$$typeof===v||N.$$typeof===d||N[0]===f)},te.typeOf=D,te}var Yn;function Zl(){return Yn||(Yn=1,pr.exports=Ql()),pr.exports}var _l=Zl(),ec=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],tc=["reactReduxForwardedRef"],rc=[],nc=[null,null];function ac(e,t){var r=e[1];return[t.payload,r+1]}function Xn(e,t,r){Va(function(){return e.apply(void 0,t)},r)}function ic(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function oc(e,t,r,n,a,i,o,s,c,p){if(e){var g=!1,u=null,d=function(){if(!g){var h=t.getState(),y,m;try{y=n(h,a.current)}catch(D){m=D,u=D}m||(u=null),y===i.current?o.current||c():(i.current=y,s.current=y,o.current=!0,p({type:"STORE_UPDATED",payload:{error:m}}))}};r.onStateChange=d,r.trySubscribe(),d();var f=function(){if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return f}}var sc=function(){return[null,0]};function lc(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(C){return"ConnectAdvanced("+C+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,s=r.renderCountProp,c=s===void 0?void 0:s,p=r.shouldHandleStateChanges,g=p===void 0?!0:p,u=r.storeKey,d=u===void 0?"store":u;r.withRef;var f=r.forwardRef,v=f===void 0?!1:f,h=r.context,y=h===void 0?Wa:h,m=Ht(r,ec),D=y;return function(I){var R=I.displayName||I.name||"Component",T=a(R),k=F({},m,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:g,storeKey:d,displayName:T,wrappedComponentName:R,WrappedComponent:I}),V=m.pure;function $(B){return e(B.dispatch,k)}var q=V?b.useMemo:function(B){return B()};function z(B){var J=b.useMemo(function(){var re=B.reactReduxForwardedRef,oe=Ht(B,tc);return[B.context,re,oe]},[B]),O=J[0],le=J[1],se=J[2],X=b.useMemo(function(){return O&&O.Consumer&&_l.isContextConsumer(ne.createElement(O.Consumer,null))?O:D},[O,D]),ae=b.useContext(X),Q=!!B.store&&!!B.store.getState&&!!B.store.dispatch;ae&&ae.store;var ie=Q?B.store:ae.store,me=b.useMemo(function(){return $(ie)},[ie]),ye=b.useMemo(function(){if(!g)return nc;var re=qa(ie,Q?null:ae.subscription),oe=re.notifyNestedSubs.bind(re);return[re,oe]},[ie,Q,ae]),ue=ye[0],xe=ye[1],De=b.useMemo(function(){return Q?ae:F({},ae,{subscription:ue})},[Q,ae,ue]),de=b.useReducer(ac,rc,sc),Ee=de[0],pe=Ee[0],we=de[1];if(pe&&pe.error)throw pe.error;var Ne=b.useRef(),Se=b.useRef(se),be=b.useRef(),Pe=b.useRef(!1),Ce=q(function(){return be.current&&se===Se.current?be.current:me(ie.getState(),se)},[ie,pe,se]);Xn(ic,[Se,Ne,Pe,se,Ce,be,xe]),Xn(oc,[g,ie,ue,me,Se,Ne,Pe,be,xe,we],[ie,ue,me]);var P=b.useMemo(function(){return ne.createElement(I,F({},Ce,{ref:le}))},[le,I,Ce]),ee=b.useMemo(function(){return g?ne.createElement(X.Provider,{value:De},P):P},[X,P,De]);return ee}var j=V?ne.memo(z):z;if(j.WrappedComponent=I,j.displayName=z.displayName=T,v){var N=ne.forwardRef(function(J,O){return ne.createElement(j,F({},J,{reactReduxForwardedRef:O}))});return N.displayName=T,N.WrappedComponent=I,Rn(N,I)}return Rn(j,I)}}function Jn(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function fr(e,t){if(Jn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Jn(e[r[a]],t[r[a]]))return!1;return!0}function cc(e,t){var r={},n=function(o){var s=e[o];typeof s=="function"&&(r[o]=function(){return t(s.apply(void 0,arguments))})};for(var a in e)n(a);return r}function Yr(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function Kn(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Ya(e,t){return function(n,a){a.displayName;var i=function(s,c){return i.dependsOnOwnProps?i.mapToProps(s,c):i.mapToProps(s)};return i.dependsOnOwnProps=!0,i.mapToProps=function(s,c){i.mapToProps=e,i.dependsOnOwnProps=Kn(e);var p=i(s,c);return typeof p=="function"&&(i.mapToProps=p,i.dependsOnOwnProps=Kn(p),p=i(s,c)),p},i}}function uc(e){return typeof e=="function"?Ya(e):void 0}function dc(e){return e?void 0:Yr(function(t){return{dispatch:t}})}function pc(e){return e&&typeof e=="object"?Yr(function(t){return cc(e,t)}):void 0}const fc=[uc,dc,pc];function gc(e){return typeof e=="function"?Ya(e):void 0}function vc(e){return e?void 0:Yr(function(){return{}})}const hc=[gc,vc];function mc(e,t,r){return F({},r,e,t)}function bc(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,s;return function(p,g,u){var d=e(p,g,u);return o?(!a||!i(d,s))&&(s=d):(o=!0,s=d),s}}}function yc(e){return typeof e=="function"?bc(e):void 0}function xc(e){return e?void 0:function(){return mc}}const Dc=[yc,xc];var wc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Sc(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function Cc(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,s=a.areStatePropsEqual,c=!1,p,g,u,d,f;function v(C,I){return p=C,g=I,u=e(p,g),d=t(n,g),f=r(u,d,g),c=!0,f}function h(){return u=e(p,g),t.dependsOnOwnProps&&(d=t(n,g)),f=r(u,d,g),f}function y(){return e.dependsOnOwnProps&&(u=e(p,g)),t.dependsOnOwnProps&&(d=t(n,g)),f=r(u,d,g),f}function m(){var C=e(p,g),I=!s(C,u);return u=C,I&&(f=r(u,d,g)),f}function D(C,I){var R=!o(I,g),T=!i(C,p,I,g);return p=C,g=I,R&&T?h():R?y():T?m():f}return function(I,R){return c?D(I,R):v(I,R)}}function Ic(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=Ht(t,wc),o=r(e,i),s=n(e,i),c=a(e,i),p=i.pure?Cc:Sc;return p(o,s,c,e,i)}var Ec=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function gr(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Nc(e,t){return e===t}function Pc(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?lc:r,a=t.mapStateToPropsFactories,i=a===void 0?hc:a,o=t.mapDispatchToPropsFactories,s=o===void 0?fc:o,c=t.mergePropsFactories,p=c===void 0?Dc:c,g=t.selectorFactory,u=g===void 0?Ic:g;return function(f,v,h,y){y===void 0&&(y={});var m=y,D=m.pure,C=D===void 0?!0:D,I=m.areStatesEqual,R=I===void 0?Nc:I,T=m.areOwnPropsEqual,k=T===void 0?fr:T,V=m.areStatePropsEqual,$=V===void 0?fr:V,q=m.areMergedPropsEqual,z=q===void 0?fr:q,j=Ht(m,Ec),N=gr(f,i,"mapStateToProps"),B=gr(v,s,"mapDispatchToProps"),J=gr(h,p,"mergeProps");return n(u,F({methodName:"connect",getDisplayName:function(le){return"Connect("+le+")"},shouldHandleStateChanges:!!f,initMapStateToProps:N,initMapDispatchToProps:B,initMergeProps:J,pure:C,areStatesEqual:R,areOwnPropsEqual:k,areStatePropsEqual:$,areMergedPropsEqual:z},j))}}const Xa=Pc();Yl(no.unstable_batchedUpdates);function Oc(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ja(e,t){var r=b.useState(function(){return{inputs:t,result:e()}})[0],n=b.useRef(!0),a=b.useRef(r),i=n.current||!!(t&&a.current.inputs&&Oc(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return b.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function Tc(e,t){return Ja(function(){return e},t)}var K=Ja,M=Tc,Rc="Invariant failed";function Ac(e,t){throw new Error(Rc)}var $e=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,s=a-r,c={top:r,right:n,bottom:a,left:i,width:o,height:s,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},Xr=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Qn=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Mc=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},vr={top:0,right:0,bottom:0,left:0},Jr=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?vr:n,i=t.border,o=i===void 0?vr:i,s=t.padding,c=s===void 0?vr:s,p=$e(Xr(r,a)),g=$e(Qn(r,o)),u=$e(Qn(g,c));return{marginBox:p,borderBox:$e(r),paddingBox:g,contentBox:u,margin:a,border:o,padding:c}},ke=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&Ac(),a},jc=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Wt=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,s=Mc(n,r);return Jr({borderBox:s,border:a,margin:i,padding:o})},Ut=function(t,r){return r===void 0&&(r=jc()),Wt(t,r)},Ka=function(t,r){var n={top:ke(r.marginTop),right:ke(r.marginRight),bottom:ke(r.marginBottom),left:ke(r.marginLeft)},a={top:ke(r.paddingTop),right:ke(r.paddingRight),bottom:ke(r.paddingBottom),left:ke(r.paddingLeft)},i={top:ke(r.borderTopWidth),right:ke(r.borderRightWidth),bottom:ke(r.borderBottomWidth),left:ke(r.borderLeftWidth)};return Jr({borderBox:t,margin:n,padding:a,border:i})},Qa=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Ka(r,n)},Zn=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function kc(e,t){return!!(e===t||Zn(e)&&Zn(t))}function Bc(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!kc(e[r],t[r]))return!1;return!0}function ge(e,t){t===void 0&&(t=Bc);var r,n=[],a,i=!1;function o(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i&&r===this&&t(s,n)||(a=e.apply(this,s),i=!0,r=this,n=s),a}return o}var Nt=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];r=s,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function Za(e,t){}Za.bind(null,"warn");Za.bind(null,"error");function Ve(){}function Lc(e,t){return F({},e,{},t)}function Le(e,t,r){var n=t.map(function(a){var i=Lc(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var Fc="Invariant failed";function qt(e){this.message=e}qt.prototype.toString=function(){return this.message};function E(e,t){throw new qt(Fc)}var Gc=function(e){za(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Ve,n.onWindowError=function(s){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var p=s.error;p instanceof qt&&s.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(s){n.callbacks=s},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Le(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof qt){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ne.Component),$c=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Vt=function(t){return t+1},Hc=function(t){return`
  You have lifted an item in position `+Vt(t.source.index)+`
`},_a=function(t,r){var n=t.droppableId===r.droppableId,a=Vt(t.index),i=Vt(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},ei=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},zc=function(t){var r=t.destination;if(r)return _a(t.source,r);var n=t.combine;return n?ei(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},_n=function(t){return`
  The item has returned to its starting position
  of `+Vt(t.index)+`
`},Wc=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+_n(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+_a(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+ei(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+_n(t.source)+`
  `},$t={dragHandleUsageInstructions:$c,onDragStart:Hc,onDragUpdate:zc,onDragEnd:Wc},ve={x:0,y:0},he=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},Te=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Ye=function(t,r){return t.x===r.x&&t.y===r.y},vt=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},at=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Pt=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},ea=function(t,r){return Math.min.apply(Math,r.map(function(n){return Pt(t,n)}))},ti=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},Uc=function(e,t){var r=$e({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},At=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ta=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},qc={top:0,right:0,bottom:0,left:0},Vc=function(t,r){return r?At(t,r.scroll.diff.displacement):t},Yc=function(t,r,n){if(n&&n.increasedBy){var a;return F({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},Xc=function(t,r){return r&&r.shouldClipSubject?Uc(r.pageMarginBox,t):$e(t)},dt=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=Vc(t.marginBox,a),o=Yc(i,n,r),s=Xc(o,a);return{page:t,withPlaceholder:r,active:s}},Kr=function(e,t){e.frame||E();var r=e.frame,n=Te(t,r.scroll.initial),a=vt(n),i=F({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=dt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),s=F({},e,{frame:i,subject:o});return s};function Yt(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Qr(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Ke(e,t){if(e.find)return e.find(t);var r=Qr(e,t);if(r!==-1)return e[r]}function ri(e){return Array.prototype.slice.call(e)}var ni=ge(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),ai=ge(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),rr=ge(function(e){return Yt(e)}),Jc=ge(function(e){return Yt(e)}),ht=ge(function(e,t){var r=Jc(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function Zr(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function nr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var ar=ge(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),Kc=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=Zr(i);if(!o)return null;function s(h){var y={type:"COMBINE",combine:{draggableId:h,droppableId:n.descriptor.id}};return F({},i,{at:y})}var c=i.displaced.all,p=c.length?c[0]:null;if(t)return p?s(p):null;var g=ar(r,a);if(!p){if(!g.length)return null;var u=g[g.length-1];return s(u.descriptor.id)}var d=Qr(g,function(h){return h.descriptor.id===p});d===-1&&E();var f=d-1;if(f<0)return null;var v=g[f];return s(v.descriptor.id)},mt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},ii={point:ve,value:0},Ot={invisible:{},visible:{},all:[]},Qc={displaced:Ot,displacedBy:ii,at:null},Fe=function(e,t){return function(r){return e<=r&&r<=t}},oi=function(e){var t=Fe(e.top,e.bottom),r=Fe(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),s=i&&o;if(s)return!0;var c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,g=c&&p;if(g)return!0;var u=c&&o||p&&i;return u}},Zc=function(e){var t=Fe(e.top,e.bottom),r=Fe(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},_r={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},si={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},_c=function(e){return function(t){var r=Fe(t.top,t.bottom),n=Fe(t.left,t.right);return function(a){return e===_r?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},eu=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:ve;return At(t,n)},tu=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},ru=function(t,r,n){return n(r)(t)},en=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,s=i?eu(r,n):r;return tu(s,n,o)&&ru(s,a,o)},nu=function(t){return en(F({},t,{isVisibleThroughFrameFn:oi}))},li=function(t){return en(F({},t,{isVisibleThroughFrameFn:Zc}))},au=function(t){return en(F({},t,{isVisibleThroughFrameFn:_c(t.destination.axis)}))},iu=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function ou(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return $e(Xr(r,n))}function Tt(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,p){var g=ou(p,n),u=p.descriptor.id;c.all.push(u);var d=nu({target:g,destination:r,viewport:a,withDroppableDisplacement:!0});if(!d)return c.invisible[p.descriptor.id]=!0,c;var f=iu(u,o,i),v={draggableId:u,shouldAnimate:f};return c.visible[u]=v,c},{all:[],visible:{},invisible:{}})}function su(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function ra(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=su(t,{inHomeList:r});return{displaced:Ot,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function Xt(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,c=e.forceShouldAnimate,p=mt(t,n);if(s==null)return ra({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var g=Ke(r,function(h){return h.descriptor.index===s});if(!g)return ra({insideDestination:r,inHomeList:p,displacedBy:i,destination:n});var u=ar(t,r),d=r.indexOf(g),f=u.slice(d),v=Tt({afterDragging:f,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:v,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function Je(e,t){return!!t.effected[e]}var lu=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,s=n[o],c=s.descriptor.index,p=Je(o,i);return p?t?c:c-1:t?c+1:c},cu=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index,p=r?c:c+1;return o<s||o>p?null:o},uu=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,c=e.viewport,p=e.afterCritical,g=s.at;if(g||E(),g.type==="REORDER"){var u=cu({isMovingForward:t,isInHomeList:r,location:g.destination,insideDestination:o});return u==null?null:Xt({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:u})}var d=lu({isMovingForward:t,destination:i,displaced:s.displaced,draggables:a,combine:g.combine,afterCritical:p});return d==null?null:Xt({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})},du=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return Je(n,r)?i?ve:vt(a.point):i?a.point:ve},pu=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=nr(r);a||E();var i=a.draggableId,o=n[i].page.borderBox.center,s=du({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return he(o,s)},ci=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},fu=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},tn=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},na=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return at(r.line,n.marginBox[r.end]+ci(r,a),tn(r,n.marginBox,a))},aa=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return at(r.line,n.marginBox[r.start]-fu(r,a),tn(r,n.marginBox,a))},gu=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return at(r.line,n.contentBox[r.start]+ci(r,a),tn(r,n.contentBox,a))},vu=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=ht(a.descriptor.id,n),s=r.page,c=a.axis;if(!o.length)return gu({axis:c,moveInto:a.page,isMoving:s});var p=t.displaced,g=t.displacedBy,u=p.all[0];if(u){var d=n[u];if(Je(u,i))return aa({axis:c,moveRelativeTo:d.page,isMoving:s});var f=Wt(d.page,g.point);return aa({axis:c,moveRelativeTo:f,isMoving:s})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return s.borderBox.center;if(Je(v.descriptor.id,i)){var h=Wt(v.page,vt(i.displacedBy.point));return na({axis:c,moveRelativeTo:h,isMoving:s})}return na({axis:c,moveRelativeTo:v.page,isMoving:s})},Ar=function(e,t){var r=e.frame;return r?he(t,r.scroll.diff.displacement):t},hu=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,s=n.page.borderBox.center,c=r.at;return!a||!c?s:c.type==="REORDER"?vu({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):pu({impact:r,draggables:i,afterCritical:o})},ir=function(e){var t=hu(e),r=e.droppable,n=r?Ar(r,t):t;return n},ui=function(e,t){var r=Te(t,e.scroll.initial),n=vt(r),a=$e({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function ia(e,t){return e.map(function(r){return t[r]})}function mu(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var bu=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=ui(r,he(r.scroll.current,i)),s=n.frame?Kr(n,he(n.frame.scroll.current,i)):n,c=t.displaced,p=Tt({afterDragging:ia(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),g=Tt({afterDragging:ia(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),u={},d={},f=[c,p,g];c.all.forEach(function(h){var y=mu(h,f);if(y){d[h]=y;return}u[h]=!0});var v=F({},t,{displaced:{all:c.all,invisible:u,visible:d}});return v},yu=function(e,t){return he(e.scroll.diff.displacement,t)},rn=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=yu(n,t),i=Te(a,r.page.borderBox.center);return he(r.client.borderBox.center,i)},di=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,c=Te(n,t.page.borderBox.center),p=At(t.page.borderBox,c),g={target:p,destination:r,withDroppableDisplacement:i,viewport:a};return s?au(g):li(g)},xu=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var g=ht(n.descriptor.id,a),u=mt(r,n),d=Kc({isMovingForward:t,draggable:r,destination:n,insideDestination:g,previousImpact:i})||uu({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:n,insideDestination:g,previousImpact:i,viewport:o,afterCritical:p});if(!d)return null;var f=ir({impact:d,draggable:r,droppable:n,draggables:a,afterCritical:p}),v=di({draggable:r,destination:n,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var h=rn({pageBorderBoxCenter:f,draggable:r,viewport:o});return{clientSelection:h,impact:d,scrollJumpRequest:null}}var y=Te(f,s),m=bu({impact:d,viewport:o,destination:n,draggables:a,maxScrollChange:y});return{clientSelection:c,impact:m,scrollJumpRequest:y}},Ie=function(t){var r=t.subject.active;return r||E(),r},Du=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var s=n.axis,c=Fe(o[s.start],o[s.end]),p=rr(a).filter(function(u){return u!==n}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return oi(i.frame)(Ie(u))}).filter(function(u){var d=Ie(u);return t?o[s.crossAxisEnd]<d[s.crossAxisEnd]:d[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(u){var d=Ie(u),f=Fe(d[s.start],d[s.end]);return c(d[s.start])||c(d[s.end])||f(o[s.start])||f(o[s.end])}).sort(function(u,d){var f=Ie(u)[s.crossAxisStart],v=Ie(d)[s.crossAxisStart];return t?f-v:v-f}).filter(function(u,d,f){return Ie(u)[s.crossAxisStart]===Ie(f[0])[s.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var g=p.filter(function(u){var d=Fe(Ie(u)[s.start],Ie(u)[s.end]);return d(r[s.line])});return g.length===1?g[0]:g.length>1?g.sort(function(u,d){return Ie(u)[s.start]-Ie(d)[s.start]})[0]:p.sort(function(u,d){var f=ea(r,ta(Ie(u))),v=ea(r,ta(Ie(d)));return f!==v?f-v:Ie(u)[s.start]-Ie(d)[s.start]})[0]},oa=function(t,r){var n=t.page.borderBox.center;return Je(t.descriptor.id,r)?Te(n,r.displacedBy.point):n},wu=function(t,r){var n=t.page.borderBox;return Je(t.descriptor.id,r)?At(n,vt(r.displacedBy.point)):n},Su=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(s){return li({target:wu(s,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(s,c){var p=Pt(t,Ar(n,oa(s,i))),g=Pt(t,Ar(n,oa(c,i)));return p<g?-1:g<p?1:s.descriptor.index-c.descriptor.index});return o[0]||null},Mt=ge(function(t,r){var n=r[t.line];return{value:n,point:at(t.line,n)}}),Cu=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return at(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=ht(t.descriptor.id,n),s=o.reduce(function(g,u){return g+u.client.marginBox[a.size]},0),c=s+r[a.line],p=c-i;return p<=0?null:at(a.line,p)},pi=function(t,r){return F({},t,{scroll:F({},t.scroll,{max:r})})},fi=function(t,r,n){var a=t.frame;mt(r,t)&&E(),t.subject.withPlaceholder&&E();var i=Mt(t.axis,r.displaceBy).point,o=Cu(t,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=dt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return F({},t,{subject:c})}var p=o?he(a.scroll.max,o):a.scroll.max,g=pi(a,p),u=dt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:g});return F({},t,{subject:u,frame:g})},Iu=function(t){var r=t.subject.withPlaceholder;r||E();var n=t.frame;if(!n){var a=dt({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return F({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||E();var o=pi(n,i),s=dt({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return F({},t,{subject:s,frame:o})},Eu=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var p={displaced:Ot,displacedBy:ii,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},g=ir({impact:p,draggable:a,droppable:o,draggables:i,afterCritical:c}),u=mt(a,o)?o:fi(o,a,i),d=di({draggable:a,destination:u,newPageBorderBoxCenter:g,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?p:null}var f=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var y=r.descriptor.index;return r.descriptor.id===a.descriptor.id||f?y:y+1}(),h=Mt(o.axis,a.displaceBy);return Xt({draggable:a,insideDestination:n,destination:o,viewport:s,displacedBy:h,last:Ot,index:v})},Nu=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,c=e.afterCritical,p=Du({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:s});if(!p)return null;var g=ht(p.descriptor.id,i),u=Su({pageBorderBoxCenter:r,viewport:s,destination:p,insideDestination:g,afterCritical:c}),d=Eu({previousPageBorderBoxCenter:r,destination:p,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:g,viewport:s,afterCritical:c});if(!d)return null;var f=ir({impact:d,draggable:n,droppable:p,draggables:i,afterCritical:c}),v=rn({pageBorderBoxCenter:f,draggable:n,viewport:s});return{clientSelection:v,impact:d,scrollJumpRequest:null}},Re=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Pu=function(t,r){var n=Re(t);return n?r[n]:null},Ou=function(e){var t=e.state,r=e.type,n=Pu(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,s=o.axis.direction,c=s==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||s==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var p=r==="MOVE_DOWN"||r==="MOVE_RIGHT",g=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,d=t.dimensions,f=d.draggables,v=d.droppables;return c?xu({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Nu({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:g,isOver:o,draggables:f,droppables:v,viewport:t.viewport,afterCritical:t.afterCritical})};function rt(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function gi(e){var t=Fe(e.top,e.bottom),r=Fe(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function Tu(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Ru(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var s=o.axis,c=at(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Pt(a,c)}}).sort(function(o,s){return s.distance-o.distance});return i[0]?i[0].id:null}function Au(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=rr(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!Tu(t,o))return!1;if(gi(o)(t.center))return!0;var s=i.axis,c=o.center[s.crossAxisLine],p=t[s.crossAxisStart],g=t[s.crossAxisEnd],u=Fe(o[s.crossAxisStart],o[s.crossAxisEnd]),d=u(p),f=u(g);return!d&&!f?!0:d?p<c:g>c});return a.length?a.length===1?a[0].descriptor.id:Ru({pageBorderBox:t,draggable:r,candidates:a}):null}var vi=function(t,r){return $e(At(t,r))},Mu=function(e,t){var r=e.frame;return r?vi(t,r.scroll.diff.value):t};function hi(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function ju(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var ku=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,c=n.axis,p=Mt(n.axis,r.displaceBy),g=p.value,u=t[c.start],d=t[c.end],f=ar(r,a),v=Ke(f,function(y){var m=y.descriptor.id,D=y.page.borderBox.center[c.line],C=Je(m,s),I=hi({displaced:i,id:m});return C?I?d<=D:u<D-g:I?d<=D+g:u<D}),h=ju({draggable:r,closest:v,inHomeList:mt(r,n)});return Xt({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:p,index:h})},Bu=4,Lu=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,c=Mt(a.axis,t.displaceBy),p=c.value,g=r[s.start],u=r[s.end],d=ar(t,i),f=Ke(d,function(h){var y=h.descriptor.id,m=h.page.borderBox,D=m[s.size],C=D/Bu,I=Je(y,o),R=hi({displaced:n.displaced,id:y});return I?R?u>m[s.start]+C&&u<m[s.end]-C:g>m[s.start]-p+C&&g<m[s.end]-p-C:R?u>m[s.start]+p+C&&u<m[s.end]+p-C:g>m[s.start]+C&&g<m[s.end]-C});if(!f)return null;var v={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:a.descriptor.id}}};return v},mi=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,c=vi(r.page.borderBox,t),p=Au({pageBorderBox:c,draggable:r,droppables:a});if(!p)return Qc;var g=a[p],u=ht(g.descriptor.id,n),d=Mu(g,c);return Lu({pageBorderBoxWithDroppableScroll:d,draggable:r,previousImpact:i,destination:g,insideDestination:u,afterCritical:s})||ku({pageBorderBoxWithDroppableScroll:d,draggable:r,destination:g,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},nn=function(e,t){var r;return F({},e,(r={},r[t.descriptor.id]=t,r))},Fu=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=Re(r),o=Re(n);if(!i||i===o)return a;var s=a[i];if(!s.subject.withPlaceholder)return a;var c=Iu(s);return nn(a,c)},Gu=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=Fu({previousImpact:a,impact:i,droppables:n}),s=Re(i);if(!s)return o;var c=n[s];if(mt(t,c)||c.subject.withPlaceholder)return o;var p=fi(c,t,r);return nn(o,p)},It=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||t.viewport,c=n||t.dimensions,p=r||t.current.client.selection,g=Te(p,t.initial.client.selection),u={offset:g,selection:p,borderBoxCenter:he(t.initial.client.borderBoxCenter,g)},d={selection:he(u.selection,s.scroll.current),borderBoxCenter:he(u.borderBoxCenter,s.scroll.current),offset:he(u.offset,s.scroll.diff.value)},f={client:u,page:d};if(t.phase==="COLLECTING")return F({phase:"COLLECTING"},t,{dimensions:c,viewport:s,current:f});var v=c.draggables[t.critical.draggable.id],h=i||mi({pageOffset:d.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),y=Gu({draggable:v,impact:h,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),m=F({},t,{current:f,dimensions:{draggables:c.draggables,droppables:y},impact:h,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return m};function $u(e,t){return e.map(function(r){return t[r]})}var bi=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,s=$u(o.all,n),c=Tt({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return F({},t,{displaced:c})},yi=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=ir({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return rn({pageBorderBoxCenter:s,draggable:r,viewport:i})},xi=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&E();var a=t.impact,i=n||t.viewport,o=r||t.dimensions,s=o.draggables,c=o.droppables,p=s[t.critical.draggable.id],g=Re(a);g||E();var u=c[g],d=bi({impact:a,viewport:i,destination:u,draggables:s}),f=yi({impact:d,draggable:p,droppable:u,draggables:s,viewport:i,afterCritical:t.afterCritical});return It({impact:d,clientSelection:f,state:t,dimensions:o,viewport:i})},Hu=function(e){return{index:e.index,droppableId:e.droppableId}},Di=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=Mt(r.axis,t.displaceBy),o=ht(r.descriptor.id,n),s=o.indexOf(t);s===-1&&E();var c=o.slice(s+1),p=c.reduce(function(f,v){return f[v.descriptor.id]=!0,f},{}),g={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:p},u=Tt({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),d={displaced:u,displacedBy:i,at:{type:"REORDER",destination:Hu(t.descriptor)}};return{impact:d,afterCritical:g}},zu=function(e,t){return{draggables:e.draggables,droppables:nn(e.droppables,t)}},Wu=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=Wt(t.client,r),i=Ut(a,n),o=F({},t,{placeholder:F({},t.placeholder,{client:a}),client:a,page:i});return o},Uu=function(e){var t=e.frame;return t||E(),t},qu=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,s=r[o],c=Uu(s),p=c.scroll.diff.value,g=he(a,p),u=Wu({draggable:i,offset:g,initialWindowScroll:n.scroll.initial});return u})},Vu=function(e){var t=e.state,r=e.published,n=r.modified.map(function(C){var I=t.dimensions.droppables[C.droppableId],R=Kr(I,C.scroll);return R}),a=F({},t.dimensions.droppables,{},ni(n)),i=ai(qu({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=F({},t.dimensions.draggables,{},i);r.removals.forEach(function(C){delete o[C]});var s={droppables:a,draggables:o},c=Re(t.impact),p=c?s.droppables[c]:null,g=s.draggables[t.critical.draggable.id],u=s.droppables[t.critical.droppable.id],d=Di({draggable:g,home:u,draggables:o,viewport:t.viewport}),f=d.impact,v=d.afterCritical,h=p&&p.isCombineEnabled?t.impact:f,y=mi({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:h,viewport:t.viewport,afterCritical:v}),m=F({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:y,onLiftImpact:f,dimensions:s,afterCritical:v,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return m;var D=F({phase:"DROP_PENDING"},m,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return D},Mr=function(t){return t.movementMode==="SNAP"},hr=function(t,r,n){var a=zu(t.dimensions,r);return!Mr(t)||n?It({state:t,dimensions:a}):xi({state:t,dimensions:a})};function mr(e){return e.isDragging&&e.movementMode==="SNAP"?F({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var sa={phase:"IDLE",completed:null,shouldFlush:!1},Yu=function(e,t){if(e===void 0&&(e=sa),t.type==="FLUSH")return F({},sa,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&E();var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,s=r.movementMode,c=o.draggables[n.draggable.id],p=o.droppables[n.droppable.id],g={selection:a,borderBoxCenter:c.client.borderBox.center,offset:ve},u={client:g,page:{selection:he(g.selection,i.scroll.initial),borderBoxCenter:he(g.selection,i.scroll.initial),offset:he(g.selection,i.scroll.diff.value)}},d=rr(o.droppables).every(function(we){return!we.isFixedOnPage}),f=Di({draggable:c,home:p,draggables:o.draggables,viewport:i}),v=f.impact,h=f.afterCritical,y={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:d,impact:v,afterCritical:h,onLiftImpact:v,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return y}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&E();var m=F({phase:"COLLECTING"},e,{phase:"COLLECTING"});return m}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||E(),Vu({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;rt(e)||E();var D=t.payload.client;return Ye(D,e.current.client.selection)?e:It({state:e,clientSelection:D,impact:Mr(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return mr(e);rt(e)||E();var C=t.payload,I=C.id,R=C.newScroll,T=e.dimensions.droppables[I];if(!T)return e;var k=Kr(T,R);return hr(e,k,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;rt(e)||E();var V=t.payload,$=V.id,q=V.isEnabled,z=e.dimensions.droppables[$];z||E(),z.isEnabled===q&&E();var j=F({},z,{isEnabled:q});return hr(e,j,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;rt(e)||E();var N=t.payload,B=N.id,J=N.isCombineEnabled,O=e.dimensions.droppables[B];O||E(),O.isCombineEnabled===J&&E();var le=F({},O,{isCombineEnabled:J});return hr(e,le,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;rt(e)||E(),e.isWindowScrollAllowed||E();var se=t.payload.newScroll;if(Ye(e.viewport.scroll.current,se))return mr(e);var X=ui(e.viewport,se);return Mr(e)?xi({state:e,viewport:X}):It({state:e,viewport:X})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!rt(e))return e;var ae=t.payload.maxScroll;if(Ye(ae,e.viewport.scroll.max))return e;var Q=F({},e.viewport,{scroll:F({},e.viewport.scroll,{max:ae})});return F({phase:"DRAGGING"},e,{viewport:Q})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&E();var ie=Ou({state:e,type:t.type});return ie?It({state:e,impact:ie.impact,clientSelection:ie.clientSelection,scrollJumpRequest:ie.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var me=t.payload.reason;e.phase!=="COLLECTING"&&E();var ye=F({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:me});return ye}if(t.type==="DROP_ANIMATE"){var ue=t.payload,xe=ue.completed,De=ue.dropDuration,de=ue.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||E();var Ee={phase:"DROP_ANIMATING",completed:xe,dropDuration:De,newHomeClientOffset:de,dimensions:e.dimensions};return Ee}if(t.type==="DROP_COMPLETE"){var pe=t.payload.completed;return{phase:"IDLE",completed:pe,shouldFlush:!1}}return e},Xu=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Ju=function(t){return{type:"LIFT",payload:t}},Ku=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Qu=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},Zu=function(){return{type:"COLLECTION_STARTING",payload:null}},_u=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},ed=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},td=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},wi=function(t){return{type:"MOVE",payload:t}},rd=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},nd=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},ad=function(){return{type:"MOVE_UP",payload:null}},id=function(){return{type:"MOVE_DOWN",payload:null}},od=function(){return{type:"MOVE_RIGHT",payload:null}},sd=function(){return{type:"MOVE_LEFT",payload:null}},an=function(){return{type:"FLUSH",payload:null}},ld=function(t){return{type:"DROP_ANIMATE",payload:t}},on=function(t){return{type:"DROP_COMPLETE",payload:t}},Si=function(t){return{type:"DROP",payload:t}},cd=function(t){return{type:"DROP_PENDING",payload:t}},Ci=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},ud=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,s=o.id,c=o.clientSelection,p=o.movementMode,g=r();g.phase==="DROP_ANIMATING"&&n(on({completed:g.completed})),r().phase!=="IDLE"&&E(),n(an()),n(Xu({draggableId:s,movementMode:p}));var u={shouldPublishImmediately:p==="SNAP"},d={draggableId:s,scrollOptions:u},f=e.startPublishing(d),v=f.critical,h=f.dimensions,y=f.viewport;n(Ku({critical:v,dimensions:h,clientSelection:c,movementMode:p,viewport:y}))}}}},dd=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},sn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Rt={opacity:{drop:0,combining:.7},scale:{drop:.75}},ln={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},tt=ln.outOfTheWay+"s "+sn.outOfTheWay,Et={fluid:"opacity "+tt,snap:"transform "+tt+", opacity "+tt,drop:function(t){var r=t+"s "+sn.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+tt,placeholder:"height "+tt+", width "+tt+", margin "+tt},la=function(t){return Ye(t,ve)?null:"translate("+t.x+"px, "+t.y+"px)"},jr={moveTo:la,drop:function(t,r){var n=la(t);return n?r?n+" scale("+Rt.scale.drop+")":n:null}},kr=ln.minDropTime,Ii=ln.maxDropTime,pd=Ii-kr,ca=1500,fd=.6,gd=function(e){var t=e.current,r=e.destination,n=e.reason,a=Pt(t,r);if(a<=0)return kr;if(a>=ca)return Ii;var i=a/ca,o=kr+pd*i,s=n==="CANCEL"?o*fd:o;return Number(s.toFixed(2))},vd=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,s=n.droppables,c=Re(t),p=c?s[c]:null,g=s[r.descriptor.droppableId],u=yi({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:p||g,viewport:a}),d=Te(u,r.client.borderBox.center);return d},hd=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var s=bi({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=F({},n,{displaced:Ot});return{impact:c,didDropInsideDroppable:!0}},md=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(cd({reason:o}));return}if(i.phase!=="IDLE"){var s=i.phase==="DROP_PENDING"&&i.isWaiting;s&&E(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||E();var c=i.critical,p=i.dimensions,g=p.draggables[i.critical.draggable.id],u=hd({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=u.impact,f=u.didDropInsideDroppable,v=f?Zr(d):null,h=f?nr(d):null,y={index:c.draggable.index,droppableId:c.droppable.id},m={draggableId:g.descriptor.id,type:g.descriptor.type,source:y,reason:o,mode:i.movementMode,destination:v,combine:h},D=vd({impact:d,draggable:g,dimensions:p,viewport:i.viewport,afterCritical:i.afterCritical}),C={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:d},I=!Ye(i.current.client.offset,D)||!!m.combine;if(!I){r(on({completed:C}));return}var R=gd({current:i.current.client.offset,destination:D,reason:o}),T={newHomeClientOffset:D,dropDuration:R,completed:C};r(ld(T))}}}},Ei=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function bd(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function yd(e){var t=e.onWindowScroll;function r(){t(Ei())}var n=Nt(r),a=bd(n),i=Ve;function o(){return i!==Ve}function s(){o()&&E(),i=Le(window,[a])}function c(){o()||E(),n.cancel(),i(),i=Ve}return{start:s,stop:c,isActive:o}}var xd=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Dd=function(e){var t=yd({onWindowScroll:function(n){e.dispatch(rd({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&xd(n)&&t.stop(),r(n)}}},wd=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},Sd=function(){var e=[],t=function(i){var o=Qr(e,function(p){return p.timerId===i});o===-1&&E();var s=e.splice(o,1),c=s[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),s={timerId:o,callback:i};e.push(s)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},Cd=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Id=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Ed=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},Dt=function(t,r){r()},jt=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},br=function(t,r,n,a){if(!t){n(a(r));return}var i=wd(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},Nd=function(e,t){var r=Sd(),n=null,a=function(d,f){n&&E(),Dt("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var h={draggableId:d,mode:f};v(h)}})},i=function(d,f){n&&E(),Dt("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(jt(d,f))})},o=function(d,f){n&&E();var v=jt(d,f);n={mode:f,lastCritical:d,lastLocation:v.source,lastCombine:null},r.add(function(){Dt("onDragStart",function(){return br(e().onDragStart,v,t,$t.onDragStart)})})},s=function(d,f){var v=Zr(f),h=nr(f);n||E();var y=!Ed(d,n.lastCritical);y&&(n.lastCritical=d);var m=!Cd(n.lastLocation,v);m&&(n.lastLocation=v);var D=!Id(n.lastCombine,h);if(D&&(n.lastCombine=h),!(!y&&!m&&!D)){var C=F({},jt(d,n.mode),{combine:h,destination:v});r.add(function(){Dt("onDragUpdate",function(){return br(e().onDragUpdate,C,t,$t.onDragUpdate)})})}},c=function(){n||E(),r.flush()},p=function(d){n||E(),n=null,Dt("onDragEnd",function(){return br(e().onDragEnd,d,t,$t.onDragEnd)})},g=function(){if(n){var d=F({},jt(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(d)}};return{beforeCapture:a,beforeStart:i,start:o,update:s,flush:c,drop:p,abort:g}},Pd=function(e,t){var r=Nd(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var s=i.payload.completed.result;r.flush(),a(i),r.drop(s);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Od=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&E(),e.dispatch(on({completed:n.completed}))}}},Td=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Ci())}};r=requestAnimationFrame(function(){r=null,t=Le(window,[o])})}}}},Rd=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},Ad=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Md=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},jd=function(e){return function(t){return function(r){return function(n){if(Md(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&E(),e.start(a);return}r(n),e.scroll(t.getState())}}}},kd=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Si({reason:n.reason})))}}}},Bd=Ra,Ld=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return $r(Yu,Bd(Zo(dd(n),Rd(t),ud(t),md,Od,Td,kd,jd(o),Dd,Ad(r),Pd(a,i))))},yr=function(){return{additions:{},removals:{},modified:{}}};function Fd(e){var t=e.registry,r=e.callbacks,n=yr(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var g=n,u=g.additions,d=g.removals,f=g.modified,v=Object.keys(u).map(function(m){return t.draggable.getById(m).getDimension(ve)}).sort(function(m,D){return m.descriptor.index-D.descriptor.index}),h=Object.keys(f).map(function(m){var D=t.droppable.getById(m),C=D.callbacks.getScrollWhileDragging();return{droppableId:m,scroll:C}}),y={additions:v,removals:Object.keys(d),modified:h};n=yr(),r.publish(y)}))},o=function(g){var u=g.descriptor.id;n.additions[u]=g,n.modified[g.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],i()},s=function(g){var u=g.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=yr())};return{add:o,remove:s,stop:c}}var Ni=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=Te({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},Pi=function(){var e=document.documentElement;return e||E(),e},Oi=function(){var e=Pi(),t=Ni({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},Gd=function(){var e=Ei(),t=Oi(),r=e.y,n=e.x,a=Pi(),i=a.clientWidth,o=a.clientHeight,s=n+i,c=r+o,p=$e({top:r,left:n,right:s,bottom:c}),g={frame:p,scroll:{initial:e,current:e,max:t,diff:{value:ve,displacement:ve}}};return g},$d=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=Gd(),i=a.scroll.current,o=t.droppable,s=n.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),p={draggables:ai(c),droppables:ni(s)},g={dimensions:p,critical:t,viewport:a};return g};function ua(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Hd=function(e,t){var r=null,n=Fd({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(f,v){e.droppable.exists(f)||E(),r&&t.updateDroppableIsEnabled({id:f,isEnabled:v})},i=function(f,v){r&&(e.droppable.exists(f)||E(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:v}))},o=function(f,v){r&&(e.droppable.exists(f)||E(),t.updateDroppableScroll({id:f,newScroll:v}))},s=function(f,v){r&&e.droppable.getById(f).callbacks.scroll(v)},c=function(){if(r){n.stop();var f=r.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},p=function(f){r||E();var v=r.critical.draggable;f.type==="ADDITION"&&ua(e,v,f.value)&&n.add(f.value),f.type==="REMOVAL"&&ua(e,v,f.value)&&n.remove(f.value)},g=function(f){r&&E();var v=e.draggable.getById(f.draggableId),h=e.droppable.getById(v.descriptor.droppableId),y={draggable:v.descriptor,droppable:h.descriptor},m=e.subscribe(p);return r={critical:y,unsubscribe:m},$d({critical:y,registry:e,scrollOptions:f.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:s,updateDroppableScroll:o,startPublishing:g,stopPublishing:c};return u},Ti=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},zd=function(e){window.scrollBy(e.x,e.y)},Wd=ge(function(e){return rr(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Ud=function(t,r){var n=Ke(Wd(r),function(a){return a.frame||E(),gi(a.frame.pageMarginBox)(t)});return n},qd=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=Ud(t,n);return i},Xe={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Vd=function(e,t){var r=e[t.size]*Xe.startFromPercentage,n=e[t.size]*Xe.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},Ri=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},cn=1,Yd=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Xe.maxPixelScroll;if(e===t.startScrollingFrom)return cn;var r=Ri({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=Xe.maxPixelScroll*Xe.ease(n);return Math.ceil(a)},da=Xe.durationDampening.accelerateAt,pa=Xe.durationDampening.stopDampeningAt,Xd=function(e,t){var r=t,n=pa,a=Date.now(),i=a-r;if(i>=pa)return e;if(i<da)return cn;var o=Ri({startOfRange:da,endOfRange:n,current:i}),s=e*Xe.ease(o);return Math.ceil(s)},fa=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=Yd(t,r);return i===0?0:a?Math.max(Xd(i,n),cn):i},ga=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=Vd(t,a),s=r[a.end]<r[a.start];return s?fa({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*fa({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},Jd=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},Kd=ti(function(e){return e===0?0:e}),Ai=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},s=ga({container:r,distanceToEdges:o,dragStartTime:t,axis:_r,shouldUseTimeDampening:i}),c=ga({container:r,distanceToEdges:o,dragStartTime:t,axis:si,shouldUseTimeDampening:i}),p=Kd({x:c,y:s});if(Ye(p,ve))return null;var g=Jd({container:r,subject:n,proposedScroll:p});return g?Ye(g,ve)?null:g:null},Qd=ti(function(e){return e===0?0:e>0?1:-1}),un=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=he(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return Ye(o,ve)?null:o}}(),Mi=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=Qd(a),s=un({max:i,current:n,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},dn=function(t,r){return Mi({current:t.scroll.current,max:t.scroll.max,change:r})},Zd=function(t,r){if(!dn(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return un({current:a,max:n,change:r})},pn=function(t,r){var n=t.frame;return n?Mi({current:n.scroll.current,max:n.scroll.max,change:r}):!1},_d=function(t,r){var n=t.frame;return!n||!pn(t,r)?null:un({current:n.scroll.current,max:n.scroll.max,change:r})},ep=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=Ai({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&dn(t,o)?o:null},tp=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=Ai({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return s&&pn(t,s)?s:null},va=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],c=s.page.marginBox;if(t.isWindowScrollAllowed){var p=t.viewport,g=ep({dragStartTime:r,viewport:p,subject:c,center:o,shouldUseTimeDampening:n});if(g){a(g);return}}var u=qd({center:o,destination:Re(t.impact),droppables:t.dimensions.droppables});if(u){var d=tp({dragStartTime:r,droppable:u,subject:c,center:o,shouldUseTimeDampening:n});d&&i(u.descriptor.id,d)}},rp=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Nt(t),a=Nt(r),i=null,o=function(g){i||E();var u=i,d=u.shouldUseTimeDampening,f=u.dragStartTime;va({state:g,scrollWindow:n,scrollDroppable:a,dragStartTime:f,shouldUseTimeDampening:d})},s=function(g){i&&E();var u=Date.now(),d=!1,f=function(){d=!0};va({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),i={dragStartTime:u,shouldUseTimeDampening:d},d&&o(g)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:s,stop:c,scroll:o}},np=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(p,g){var u=he(p.current.client.selection,g);t({client:u})},i=function(p,g){if(!pn(p,g))return g;var u=_d(p,g);if(!u)return r(p.descriptor.id,g),null;var d=Te(g,u);r(p.descriptor.id,d);var f=Te(g,d);return f},o=function(p,g,u){if(!p||!dn(g,u))return u;var d=Zd(g,u);if(!d)return n(u),null;var f=Te(u,d);n(f);var v=Te(u,f);return v},s=function(p){var g=p.scrollJumpRequest;if(g){var u=Re(p.impact);u||E();var d=i(p.dimensions.droppables[u],g);if(d){var f=p.viewport,v=o(p.isWindowScrollAllowed,f,d);v&&a(p,v)}}};return s},ap=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=rp({scrollWindow:r,scrollDroppable:t}),i=np({move:n,scrollWindow:r,scrollDroppable:t}),o=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&i(p)}},s={scroll:o,start:a.start,stop:a.stop};return s},pt="data-rbd",ft=function(){var e=pt+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Br=function(){var e=pt+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),ip=function(){var e=pt+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),ha={contextId:pt+"-scroll-container-context-id"},op=function(t){return function(r){return"["+r+'="'+t+'"]'}},wt=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},sp="pointer-events: none;",lp=function(e){var t=op(e),r=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ft.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:sp,dropAnimating:s}}}(),n=function(){var s=`
      transition: `+Et.outOfTheWay+`;
    `;return{selector:t(Br.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),a={selector:t(ip.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:wt(o,"always"),resting:wt(o,"resting"),dragging:wt(o,"dragging"),dropAnimating:wt(o,"dropAnimating"),userCancel:wt(o,"userCancel")}},Ae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect,xr=function(){var t=document.querySelector("head");return t||E(),t},ma=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function cp(e,t){var r=K(function(){return lp(e)},[e]),n=b.useRef(null),a=b.useRef(null),i=M(ge(function(u){var d=a.current;d||E(),d.textContent=u}),[]),o=M(function(u){var d=n.current;d||E(),d.textContent=u},[]);Ae(function(){!n.current&&!a.current||E();var u=ma(t),d=ma(t);return n.current=u,a.current=d,u.setAttribute(pt+"-always",e),d.setAttribute(pt+"-dynamic",e),xr().appendChild(u),xr().appendChild(d),o(r.always),i(r.resting),function(){var f=function(h){var y=h.current;y||E(),xr().removeChild(y),h.current=null};f(n),f(a)}},[t,o,i,r.always,r.resting,e]);var s=M(function(){return i(r.dragging)},[i,r.dragging]),c=M(function(u){if(u==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),p=M(function(){a.current&&i(r.resting)},[i,r.resting]),g=K(function(){return{dragging:s,dropping:c,resting:p}},[s,c,p]);return g}var ji=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function or(e){return e instanceof ji(e).HTMLElement}function up(e,t){var r="["+ft.contextId+'="'+e+'"]',n=ri(document.querySelectorAll(r));if(!n.length)return null;var a=Ke(n,function(i){return i.getAttribute(ft.draggableId)===t});return!a||!or(a)?null:a}function dp(e){var t=b.useRef({}),r=b.useRef(null),n=b.useRef(null),a=b.useRef(!1),i=M(function(d,f){var v={id:d,focus:f};return t.current[d]=v,function(){var y=t.current,m=y[d];m!==v&&delete y[d]}},[]),o=M(function(d){var f=up(e,d);f&&f!==document.activeElement&&f.focus()},[e]),s=M(function(d,f){r.current===d&&(r.current=f)},[]),c=M(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var d=r.current;d&&o(d)}))},[o]),p=M(function(d){r.current=null;var f=document.activeElement;f&&f.getAttribute(ft.draggableId)===d&&(r.current=d)},[]);Ae(function(){return a.current=!0,function(){a.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var g=K(function(){return{register:i,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:s}},[i,p,c,s]);return g}function pp(){var e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var f=t.indexOf(u);f!==-1&&t.splice(f,1)}}function n(u){t.length&&t.forEach(function(d){return d(u)})}function a(u){return e.draggables[u]||null}function i(u){var d=a(u);return d||E(),d}var o={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,f){var v=e.draggables[f.descriptor.id];v&&v.uniqueId===d.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var f=d.descriptor.id,v=a(f);v&&d.uniqueId===v.uniqueId&&(delete e.draggables[f],n({type:"REMOVAL",value:d}))},getById:i,findById:a,exists:function(d){return!!a(d)},getAllByType:function(d){return Yt(e.draggables).filter(function(f){return f.descriptor.type===d})}};function s(u){return e.droppables[u]||null}function c(u){var d=s(u);return d||E(),d}var p={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var f=s(d.descriptor.id);f&&d.uniqueId===f.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:s,exists:function(d){return!!s(d)},getAllByType:function(d){return Yt(e.droppables).filter(function(f){return f.descriptor.type===d})}};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:p,subscribe:r,clean:g}}function fp(){var e=K(pp,[]);return b.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var fn=ne.createContext(null),Jt=function(){var e=document.body;return e||E(),e},gp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},vp=function(t){return"rbd-announcement-"+t};function hp(e){var t=K(function(){return vp(e)},[e]),r=b.useRef(null);b.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),F(i.style,gp),Jt().appendChild(i),function(){setTimeout(function(){var c=Jt();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=M(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var mp=0,bp={separator:"::"};function gn(e,t){return t===void 0&&(t=bp),K(function(){return""+e+t.separator+mp++},[t.separator,e])}function yp(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function xp(e){var t=e.contextId,r=e.text,n=gn("hidden-text",{separator:"-"}),a=K(function(){return yp({contextId:t,uniqueId:n})},[n,t]);return b.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",Jt().appendChild(o),function(){var c=Jt();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var sr=ne.createContext(null);function ki(e){var t=b.useRef(e);return b.useEffect(function(){t.current=e}),t}function Dp(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&E();var s={abandon:o};return e=s,s}function a(){e||E(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var wp=9,Sp=13,vn=27,Bi=32,Cp=33,Ip=34,Ep=35,Np=36,Pp=37,Op=38,Tp=39,Rp=40,kt,Ap=(kt={},kt[Sp]=!0,kt[wp]=!0,kt),Li=function(e){Ap[e.keyCode]&&e.preventDefault()},lr=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Ke(t,function(n){return"on"+n in document});return r||e}(),Fi=0,ba=5;function Mp(e,t){return Math.abs(t.x-e.x)>=ba||Math.abs(t.y-e.y)>=ba}var ya={type:"IDLE"};function jp(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,c=o.clientX,p=o.clientY;if(s===Fi){var g={x:c,y:p},u=n();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(g);return}u.type!=="PENDING"&&E();var d=u.point;if(Mp(d,g)){o.preventDefault();var f=u.actions.fluidLift(g);a({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(o){var s=n();if(s.type!=="DRAGGING"){t();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var s=n();if(s.type==="PENDING"){t();return}if(o.keyCode===vn){o.preventDefault(),t();return}Li(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=n();if(s.type==="IDLE"&&E(),s.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:lr,fn:t}]}function kp(e){var t=b.useRef(ya),r=b.useRef(Ve),n=K(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===Fi&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var d=e.findClosestDraggableId(u);if(d){var f=e.tryGetLock(d,o,{sourceEvent:u});if(f){u.preventDefault();var v={x:u.clientX,y:u.clientY};r.current(),p(f,v)}}}}}},[e]),a=K(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var d=e.findClosestDraggableId(u);if(d){var f=e.findOptionsForDraggable(d);f&&(f.shouldRespectForcePress||e.canGetLock(d)&&u.preventDefault())}}}}},[e]),i=M(function(){var u={passive:!1,capture:!0};r.current=Le(window,[a,n],u)},[a,n]),o=M(function(){var g=t.current;g.type!=="IDLE"&&(t.current=ya,r.current(),i())},[i]),s=M(function(){var g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),c=M(function(){var u={capture:!0,passive:!1},d=jp({cancel:s,completed:o,getPhase:function(){return t.current},setPhase:function(v){t.current=v}});r.current=Le(window,d,u)},[s,o]),p=M(function(u,d){t.current.type!=="IDLE"&&E(),t.current={type:"PENDING",point:d,actions:u},c()},[c]);Ae(function(){return i(),function(){r.current()}},[i])}var st;function Bp(){}var Lp=(st={},st[Ip]=!0,st[Cp]=!0,st[Np]=!0,st[Ep]=!0,st);function Fp(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===vn){i.preventDefault(),r();return}if(i.keyCode===Bi){i.preventDefault(),n();return}if(i.keyCode===Rp){i.preventDefault(),e.moveDown();return}if(i.keyCode===Op){i.preventDefault(),e.moveUp();return}if(i.keyCode===Tp){i.preventDefault(),e.moveRight();return}if(i.keyCode===Pp){i.preventDefault(),e.moveLeft();return}if(Lp[i.keyCode]){i.preventDefault();return}Li(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:lr,fn:r}]}function Gp(e){var t=b.useRef(Bp),r=K(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Bi)return;var o=e.findClosestDraggableId(i);if(!o)return;var s=e.tryGetLock(o,g,{sourceEvent:i});if(!s)return;i.preventDefault();var c=!0,p=s.snapLift();t.current();function g(){c||E(),c=!1,t.current(),n()}t.current=Le(window,Fp(p,g),{capture:!0,passive:!1})}}},[e]),n=M(function(){var i={passive:!1,capture:!0};t.current=Le(window,[r],i)},[r]);Ae(function(){return n(),function(){t.current()}},[n])}var Dr={type:"IDLE"},$p=120,Hp=.15;function zp(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===vn&&a.preventDefault(),t()}},{eventName:lr,fn:t}]}function Wp(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var s=i.touches[0],c=s.clientX,p=s.clientY,g={x:c,y:p};i.preventDefault(),o.actions.move(g)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&E();var s=i.touches[0];if(s){var c=s.force>=Hp;if(c){var p=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){p&&t();return}if(p){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:lr,fn:t}]}function Up(e){var t=b.useRef(Dr),r=b.useRef(Ve),n=M(function(){return t.current},[]),a=M(function(f){t.current=f},[]),i=K(function(){return{eventName:"touchstart",fn:function(f){if(!f.defaultPrevented){var v=e.findClosestDraggableId(f);if(v){var h=e.tryGetLock(v,s,{sourceEvent:f});if(h){var y=f.touches[0],m=y.clientX,D=y.clientY,C={x:m,y:D};r.current(),u(h,C)}}}}}},[e]),o=M(function(){var f={capture:!0,passive:!1};r.current=Le(window,[i],f)},[i]),s=M(function(){var d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),a(Dr),r.current(),o())},[o,a]),c=M(function(){var d=t.current;s(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[s]),p=M(function(){var f={capture:!0,passive:!1},v={cancel:c,completed:s,getPhase:n},h=Le(window,Wp(v),f),y=Le(window,zp(v),f);r.current=function(){h(),y()}},[c,n,s]),g=M(function(){var f=n();f.type!=="PENDING"&&E();var v=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[n,a]),u=M(function(f,v){n().type!=="IDLE"&&E();var h=setTimeout(g,$p);a({type:"PENDING",point:v,actions:f,longPressTimerId:h}),p()},[p,n,a,g]);Ae(function(){return o(),function(){r.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(Dr))}},[n,o,a]),Ae(function(){var f=Le(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return f},[])}var qp={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Gi(e,t){if(t==null)return!1;var r=!!qp[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Gi(e,t.parentElement)}function Vp(e,t){var r=t.target;return or(r)?Gi(e,r):!1}var Yp=function(e){return $e(e.getBoundingClientRect()).center};function Xp(e){return e instanceof ji(e).Element}var Jp=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Ke(t,function(n){return n in Element.prototype});return r||e}();function $i(e,t){return e==null?null:e[Jp](t)?e:$i(e.parentElement,t)}function Kp(e,t){return e.closest?e.closest(t):$i(e,t)}function Qp(e){return"["+ft.contextId+'="'+e+'"]'}function Zp(e,t){var r=t.target;if(!Xp(r))return null;var n=Qp(e),a=Kp(r,n);return!a||!or(a)?null:a}function _p(e,t){var r=Zp(e,t);return r?r.getAttribute(ft.draggableId):null}function ef(e,t){var r="["+Br.contextId+'="'+e+'"]',n=ri(document.querySelectorAll(r)),a=Ke(n,function(i){return i.getAttribute(Br.id)===t});return!a||!or(a)?null:a}function tf(e){e.preventDefault()}function Bt(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function Hi(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!Ti(r.getState(),a))}function rf(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,c=Hi({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var p=a.draggable.getById(i),g=ef(r,p.descriptor.id);if(!g||s&&!p.options.canDragInteractiveElements&&Vp(g,s))return null;var u=t.claim(o||Ve),d="PRE_DRAG";function f(){return p.options.shouldRespectForcePress}function v(){return t.isActive(u)}function h(T,k){Bt({expected:T,phase:d,isLockActive:v,shouldWarn:!0})&&n.dispatch(k())}var y=h.bind(null,"DRAGGING");function m(T){function k(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(k(),d!=="PRE_DRAG"&&E()),n.dispatch(Ju(T.liftActionArgs)),d="DRAGGING";function V($,q){if(q===void 0&&(q={shouldBlockNextClick:!1}),T.cleanup(),q.shouldBlockNextClick){var z=Le(window,[{eventName:"click",fn:tf,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}k(),n.dispatch(Si({reason:$}))}return F({isActive:function(){return Bt({expected:"DRAGGING",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:f,drop:function(q){return V("DROP",q)},cancel:function(q){return V("CANCEL",q)}},T.actions)}function D(T){var k=Nt(function($){y(function(){return wi({client:$})})}),V=m({liftActionArgs:{id:i,clientSelection:T,movementMode:"FLUID"},cleanup:function(){return k.cancel()},actions:{move:k}});return F({},V,{move:k})}function C(){var T={moveUp:function(){return y(ad)},moveRight:function(){return y(od)},moveDown:function(){return y(id)},moveLeft:function(){return y(sd)}};return m({liftActionArgs:{id:i,clientSelection:Yp(g),movementMode:"SNAP"},cleanup:Ve,actions:T})}function I(){var T=Bt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!0});T&&t.release()}var R={isActive:function(){return Bt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:f,fluidLift:D,snapLift:C,abort:I};return R}var nf=[kp,Gp,Up];function af(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?nf:[],a||[]),s=b.useState(function(){return Dp()})[0],c=M(function(D,C){D.isDragging&&!C.isDragging&&s.tryAbandon()},[s]);Ae(function(){var D=r.getState(),C=r.subscribe(function(){var I=r.getState();c(D,I),D=I});return C},[s,r,c]),Ae(function(){return s.tryAbandon},[s.tryAbandon]);for(var p=M(function(m){return Hi({lockAPI:s,registry:n,store:r,draggableId:m})},[s,n,r]),g=M(function(m,D,C){return rf({lockAPI:s,registry:n,contextId:t,store:r,draggableId:m,forceSensorStop:D,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[t,s,n,r]),u=M(function(m){return _p(t,m)},[t]),d=M(function(m){var D=n.draggable.findById(m);return D?D.options:null},[n.draggable]),f=M(function(){s.isClaimed()&&(s.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(an()))},[s,r]),v=M(s.isClaimed,[s]),h=K(function(){return{canGetLock:p,tryGetLock:g,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:f,isLockClaimed:v}},[p,g,u,d,f,v]),y=0;y<o.length;y++)o[y](h)}var of=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function St(e){return e.current||E(),e.current}function sf(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=b.useRef(null),s=ki(e),c=M(function(){return of(s.current)},[s]),p=hp(t),g=xp({contextId:t,text:i}),u=cp(t,a),d=M(function($){St(o).dispatch($)},[]),f=K(function(){return Ln({publishWhileDragging:Qu,updateDroppableScroll:_u,updateDroppableIsEnabled:ed,updateDroppableIsCombineEnabled:td,collectionStarting:Zu},d)},[d]),v=fp(),h=K(function(){return Hd(v,f)},[v,f]),y=K(function(){return ap(F({scrollWindow:zd,scrollDroppable:h.scrollDroppable},Ln({move:wi},d)))},[h.scrollDroppable,d]),m=dp(t),D=K(function(){return Ld({announce:p,autoScroller:y,dimensionMarshal:h,focusMarshal:m,getResponders:c,styleMarshal:u})},[p,y,h,m,c,u]);o.current=D;var C=M(function(){var $=St(o),q=$.getState();q.phase!=="IDLE"&&$.dispatch(an())},[]),I=M(function(){var $=St(o).getState();return $.isDragging||$.phase==="DROP_ANIMATING"},[]),R=K(function(){return{isDragging:I,tryAbort:C}},[I,C]);r(R);var T=M(function($){return Ti(St(o).getState(),$)},[]),k=M(function(){return rt(St(o).getState())},[]),V=K(function(){return{marshal:h,focus:m,contextId:t,canLift:T,isMovementAllowed:k,dragHandleUsageInstructionsId:g,registry:v}},[t,h,g,m,T,k,v]);return af({contextId:t,store:D,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),b.useEffect(function(){return C},[C]),ne.createElement(sr.Provider,{value:V},ne.createElement(Kl,{context:fn,store:D},e.children))}var lf=0;function cf(){return K(function(){return""+lf++},[])}function uf(e){var t=cf(),r=e.dragHandleUsageInstructions||$t.dragHandleUsageInstructions;return ne.createElement(Gc,null,function(n){return ne.createElement(sf,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var zi=function(t){return function(r){return t===r}},df=zi("scroll"),pf=zi("auto"),xa=function(t,r){return r(t.overflowX)||r(t.overflowY)},ff=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return xa(n,df)||xa(n,pf)},gf=function(){return!1},vf=function e(t){return t==null?null:t===document.body?gf()?t:null:t===document.documentElement?null:ff(t)?t:e(t.parentElement)},Lr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},hf=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},mf=function(e){var t=vf(e),r=hf(e);return{closestScrollable:t,isFixedOnPage:r}},bf=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,c=e.closest,p=function(){if(!c)return null;var f=c.scrollSize,v=c.client,h=Ni({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:f,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:h,diff:{value:ve,displacement:ve}}}}(),g=i==="vertical"?_r:si,u=dt({page:s,withPlaceholder:null,axis:g,frame:p}),d={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:g,isEnabled:r,client:o,page:s,frame:p,subject:u};return d},yf=function(t,r){var n=Qa(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,s=i+r.scrollWidth,c={top:a,right:s,bottom:o,left:i},p=Xr(c,n.border),g=Jr({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return g},xf=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,p=n.closestScrollable,g=yf(t,p),u=Ut(g,a),d=function(){if(!p)return null;var v=Qa(p),h={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:v,page:Ut(v,a),scroll:Lr(p),scrollSize:h,shouldClipSubject:c}}(),f=bf({descriptor:r,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:i,client:g,page:u,closest:d});return f},Df={passive:!1},wf={passive:!0},Da=function(e){return e.shouldPublishImmediately?Df:wf};function Kt(e){var t=b.useContext(e);return t||E(),t}var Lt=function(t){return t&&t.env.closestScrollable||null};function Sf(e){var t=b.useRef(null),r=Kt(sr),n=gn("droppable"),a=r.registry,i=r.marshal,o=ki(e),s=K(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=b.useRef(s),p=K(function(){return ge(function(I,R){t.current||E();var T={x:I,y:R};i.updateDroppableScroll(s.id,T)})},[s.id,i]),g=M(function(){var I=t.current;return!I||!I.env.closestScrollable?ve:Lr(I.env.closestScrollable)},[]),u=M(function(){var I=g();p(I.x,I.y)},[g,p]),d=K(function(){return Nt(u)},[u]),f=M(function(){var I=t.current,R=Lt(I);I&&R||E();var T=I.scrollOptions;if(T.shouldPublishImmediately){u();return}d()},[d,u]),v=M(function(I,R){t.current&&E();var T=o.current,k=T.getDroppableRef();k||E();var V=mf(k),$={ref:k,descriptor:s,env:V,scrollOptions:R};t.current=$;var q=xf({ref:k,descriptor:s,env:V,windowScroll:I,direction:T.direction,isDropDisabled:T.isDropDisabled,isCombineEnabled:T.isCombineEnabled,shouldClipSubject:!T.ignoreContainerClipping}),z=V.closestScrollable;return z&&(z.setAttribute(ha.contextId,r.contextId),z.addEventListener("scroll",f,Da($.scrollOptions))),q},[r.contextId,s,f,o]),h=M(function(){var I=t.current,R=Lt(I);return I&&R||E(),Lr(R)},[]),y=M(function(){var I=t.current;I||E();var R=Lt(I);t.current=null,R&&(d.cancel(),R.removeAttribute(ha.contextId),R.removeEventListener("scroll",f,Da(I.scrollOptions)))},[f,d]),m=M(function(I){var R=t.current;R||E();var T=Lt(R);T||E(),T.scrollTop+=I.y,T.scrollLeft+=I.x},[]),D=K(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:h,dragStopped:y,scroll:m}},[y,v,h,m]),C=K(function(){return{uniqueId:n,descriptor:s,callbacks:D}},[D,s,n]);Ae(function(){return c.current=C.descriptor,a.droppable.register(C),function(){t.current&&y(),a.droppable.unregister(C)}},[D,s,y,C,i,a.droppable]),Ae(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Ae(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function wr(){}var wa={width:0,height:0,margin:qc},Cf=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?wa:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},If=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=Cf({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Et.placeholder:null}};function Ef(e){var t=b.useRef(null),r=M(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,s=b.useState(e.animate==="open"),c=s[0],p=s[1];b.useEffect(function(){return c?n!=="open"?(r(),p(!1),wr):t.current?wr:(t.current=setTimeout(function(){t.current=null,p(!1)}),r):wr},[n,c,r]);var g=M(function(d){d.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),u=If({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return ne.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:g,ref:e.innerRef})}var Nf=ne.memo(Ef),hn=ne.createContext(null),Pf=function(e){za(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(ne.PureComponent),Sa={dragging:5e3,dropAnimating:4500},Of=function(t,r){return r?Et.drop(r.duration):t?Et.snap:Et.fluid},Tf=function(t,r){return t?r?Rt.opacity.drop:Rt.opacity.combining:null},Rf=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Af(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,s=Rf(e),c=!!i,p=c?jr.drop(n,o):jr.moveTo(n),g={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Of(s,i),transform:p,opacity:Tf(o,c),zIndex:c?Sa.dropAnimating:Sa.dragging,pointerEvents:"none"};return g}function Mf(e){return{transform:jr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function jf(e){return e.type==="DRAGGING"?Af(e):Mf(e)}function kf(e,t,r){r===void 0&&(r=ve);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=Ka(a,n),o=Ut(i,r),s={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},p={descriptor:e,placeholder:s,displaceBy:c,client:i,page:o};return p}function Bf(e){var t=gn("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,c=K(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:s}},[i,s,o]),p=M(function(f){var v=a();return v||E(),kf(r,v,f)},[r,a]),g=K(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:p}},[r,p,c,t]),u=b.useRef(g),d=b.useRef(!0);Ae(function(){return n.draggable.register(u.current),function(){return n.draggable.unregister(u.current)}},[n.draggable]),Ae(function(){if(d.current){d.current=!1;return}var f=u.current;u.current=g,n.draggable.update(g,f)},[g,n.draggable])}function Lf(e){e.preventDefault()}function Ff(e){var t=b.useRef(null),r=M(function($){t.current=$},[]),n=M(function(){return t.current},[]),a=Kt(sr),i=a.contextId,o=a.dragHandleUsageInstructionsId,s=a.registry,c=Kt(hn),p=c.type,g=c.droppableId,u=K(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:g}},[e.draggableId,e.index,p,g]),d=e.children,f=e.draggableId,v=e.isEnabled,h=e.shouldRespectForcePress,y=e.canDragInteractiveElements,m=e.isClone,D=e.mapped,C=e.dropAnimationFinished;if(!m){var I=K(function(){return{descriptor:u,registry:s,getDraggableRef:n,canDragInteractiveElements:y,shouldRespectForcePress:h,isEnabled:v}},[u,s,n,y,h,v]);Bf(I)}var R=K(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Lf}:null},[i,o,f,v]),T=M(function($){D.type==="DRAGGING"&&D.dropping&&$.propertyName==="transform"&&C()},[C,D]),k=K(function(){var $=jf(D),q=D.type==="DRAGGING"&&D.dropping?T:null,z={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":f,style:$,onTransitionEnd:q},dragHandleProps:R};return z},[i,R,f,D,T,r]),V=K(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return d(k,D.snapshot,V)}var Wi=function(e,t){return e===t},Ui=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},Gf=function(t){return t.combine?t.combine.draggableId:null},$f=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Hf(){var e=ge(function(a,i){return{x:a,y:i}}),t=ge(function(a,i,o,s,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:s,combineTargetFor:null}}),r=ge(function(a,i,o,s,c,p,g){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:i,offset:a,dimension:o,forceShouldAnimate:g,snapshot:t(i,s,c,p,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var s=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],p=Re(i.impact),g=$f(i.impact),u=i.forceShouldAnimate;return r(e(s.x,s.y),i.movementMode,c,o.isClone,p,g,u)}if(i.phase==="DROP_ANIMATING"){var d=i.completed;if(d.result.draggableId!==o.draggableId)return null;var f=o.isClone,v=i.dimensions.draggables[o.draggableId],h=d.result,y=h.mode,m=Ui(h),D=Gf(h),C=i.dropDuration,I={duration:C,curve:sn.drop,moveTo:i.newHomeClientOffset,opacity:D?Rt.opacity.drop:null,scale:D?Rt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:v,dropping:I,draggingOver:m,combineWith:D,mode:y,forceShouldAnimate:null,snapshot:t(y,f,m,D,I)}}}return null};return n}function qi(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var zf={mapped:{type:"SECONDARY",offset:ve,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:qi(null)}};function Wf(){var e=ge(function(o,s){return{x:o,y:s}}),t=ge(qi),r=ge(function(o,s,c){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:c,snapshot:t(s)}}}),n=function(s){return s?r(ve,s,!0):null},a=function(s,c,p,g){var u=p.displaced.visible[s],d=!!(g.inVirtualList&&g.effected[s]),f=nr(p),v=f&&f.draggableId===s?c:null;if(!u){if(!d)return n(v);if(p.displaced.invisible[s])return null;var h=vt(g.displacedBy.point),y=e(h.x,h.y);return r(y,v,!0)}if(d)return n(v);var m=p.displacedBy.point,D=e(m.x,m.y);return r(D,v,u.shouldAnimate)},i=function(s,c){if(s.isDragging)return s.critical.draggable.id===c.draggableId?null:a(c.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var p=s.completed;return p.result.draggableId===c.draggableId?null:a(c.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return i}var Uf=function(){var t=Hf(),r=Wf(),n=function(i,o){return t(i,o)||r(i,o)||zf};return n},qf={dropAnimationFinished:Ci},Vf=Xa(Uf,qf,null,{context:fn,pure:!0,areStatePropsEqual:Wi})(Ff);function Vi(e){var t=Kt(hn),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:ne.createElement(Vf,e)}function Yf(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return ne.createElement(Vi,F({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function Xf(e){var t=b.useContext(sr);t||E();var r=t.contextId,n=t.isMovementAllowed,a=b.useRef(null),i=b.useRef(null),o=e.children,s=e.droppableId,c=e.type,p=e.mode,g=e.direction,u=e.ignoreContainerClipping,d=e.isDropDisabled,f=e.isCombineEnabled,v=e.snapshot,h=e.useClone,y=e.updateViewportMaxScroll,m=e.getContainerForClone,D=M(function(){return a.current},[]),C=M(function(z){a.current=z},[]);M(function(){return i.current},[]);var I=M(function(z){i.current=z},[]),R=M(function(){n()&&y({maxScroll:Oi()})},[n,y]);Sf({droppableId:s,type:c,mode:p,direction:g,isDropDisabled:d,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:D});var T=ne.createElement(Pf,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(z){var j=z.onClose,N=z.data,B=z.animate;return ne.createElement(Nf,{placeholder:N,onClose:j,innerRef:I,animate:B,contextId:r,onTransitionEnd:R})}),k=K(function(){return{innerRef:C,placeholder:T,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}},[r,s,T,C]),V=h?h.dragging.draggableId:null,$=K(function(){return{droppableId:s,type:c,isUsingCloneFor:V}},[s,V,c]);function q(){if(!h)return null;var z=h.dragging,j=h.render,N=ne.createElement(Vi,{draggableId:z.draggableId,index:z.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(B,J){return j(B,J,z)});return ao.createPortal(N,m())}return ne.createElement(hn.Provider,{value:$},o(k,v),q())}var Sr=function(t,r){return t===r.droppable.type},Ca=function(t,r){return r.draggables[t.draggable.id]},Jf=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=F({},t,{shouldAnimatePlaceholder:!1}),n=ge(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=ge(function(o,s,c,p,g,u){var d=g.descriptor.id,f=g.descriptor.droppableId===o;if(f){var v=u?{render:u,dragging:n(g.descriptor)}:null,h={isDraggingOver:c,draggingOverWith:c?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:v}}if(!s)return r;if(!p)return t;var y={isDraggingOver:c,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}}),i=function(s,c){var p=c.droppableId,g=c.type,u=!c.isDropDisabled,d=c.renderClone;if(s.isDragging){var f=s.critical;if(!Sr(g,f))return r;var v=Ca(f,s.dimensions),h=Re(s.impact)===p;return a(p,u,h,h,v,d)}if(s.phase==="DROP_ANIMATING"){var y=s.completed;if(!Sr(g,y.critical))return r;var m=Ca(y.critical,s.dimensions);return a(p,u,Ui(y.result)===p,Re(y.impact)===p,m,d)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var D=s.completed;if(!Sr(g,D.critical))return r;var C=Re(D.impact)===p,I=!!(D.impact.at&&D.impact.at.type==="COMBINE"),R=D.critical.droppable.id===p;return C?I?t:r:R?t:r}return r};return i},Kf={updateViewportMaxScroll:nd};function Qf(){return document.body||E(),document.body}var Zf={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Qf},Yi=Xa(Jf,Kf,null,{context:fn,pure:!0,areStatePropsEqual:Wi})(Xf);Yi.defaultProps=Zf;function Xi(e){let t=null;return()=>(t==null&&(t=e()),t)}function _f(e,t){return e.filter(r=>r!==t)}function eg(e,t){const r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class tg{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=eg(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=_f(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class rg{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const Ji="__NATIVE_FILE__",Ki="__NATIVE_URL__",Qi="__NATIVE_TEXT__",Zi="__NATIVE_HTML__",Ia=Object.freeze(Object.defineProperty({__proto__:null,FILE:Ji,HTML:Zi,TEXT:Qi,URL:Ki},Symbol.toStringTag,{value:"Module"}));function Cr(e,t,r){const n=t.reduce((a,i)=>a||e.getData(i),"");return n??r}const Fr={[Ji]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Zi]:{exposeProperties:{html:(e,t)=>Cr(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Ki]:{exposeProperties:{urls:(e,t)=>Cr(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Qi]:{exposeProperties:{text:(e,t)=>Cr(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function ng(e,t){const r=Fr[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new rg(r);return n.loadDataTransfer(t),n}function Ir(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(Fr).filter(r=>{const n=Fr[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const ag=Xi(()=>/firefox/i.test(navigator.userAgent)),_i=Xi(()=>!!window.safari);class Ea{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let s=r.length-1;if(t===r[s])return n[s];let c=0,p=o.length-1,g;for(;c<=p;){g=Math.floor(.5*(c+p));const f=r[g];if(f<t)c=g+1;else if(f>t)p=g-1;else return n[g]}s=Math.max(0,p);const u=t-r[s],d=u*u;return n[s]+a[s]*u+i[s]*d+o[s]*u*d}constructor(t,r){const{length:n}=t,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,v)=>t[f]<t[v]?-1:1);const i=[],o=[];let s,c;for(let f=0;f<n-1;f++)s=t[f+1]-t[f],c=r[f+1]-r[f],i.push(s),o.push(c/s);const p=[o[0]];for(let f=0;f<i.length-1;f++){const v=o[f],h=o[f+1];if(v*h<=0)p.push(0);else{s=i[f];const y=i[f+1],m=s+y;p.push(3*m/((m+y)/v+(m+s)/h))}}p.push(o[o.length-1]);const g=[],u=[];let d;for(let f=0;f<p.length-1;f++){d=o[f];const v=p[f],h=1/i[f],y=v+p[f+1]-d-d;g.push((d-v-y)*h),u.push(y*h*h)}this.xs=t,this.ys=r,this.c1s=p,this.c2s=g,this.c3s=u}}const ig=1;function eo(e){const t=e.nodeType===ig?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function Ft(e){return{x:e.clientX,y:e.clientY}}function og(e){var t;return e.nodeName==="IMG"&&(ag()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function sg(e,t,r,n){let a=e?t.width:r,i=e?t.height:n;return _i()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function lg(e,t,r,n,a){const i=og(t),s=eo(i?e:t),c={x:r.x-s.x,y:r.y-s.y},{offsetWidth:p,offsetHeight:g}=e,{anchorX:u,anchorY:d}=n,{dragPreviewWidth:f,dragPreviewHeight:v}=sg(i,t,p,g),h=()=>{let T=new Ea([0,.5,1],[c.y,c.y/g*v,c.y+v-g]).interpolate(d);return _i()&&i&&(T+=(window.devicePixelRatio-1)*v),T},y=()=>new Ea([0,.5,1],[c.x,c.x/p*f,c.x+f-p]).interpolate(u),{offsetX:m,offsetY:D}=a,C=m===0||m,I=D===0||D;return{x:C?m:y(),y:I?D:h()}}class cg{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function ug(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){ug(e,a,r[a])})}return e}class dg{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Na({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return Na({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(Ia).some(r=>Ia[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=ng(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&eo(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=Ft(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=a,c=Ir(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const g=this.monitor.getSourceId(),u=this.sourceNodes.get(g),d=this.sourcePreviewNodes.get(g)||u;if(d){const{anchorX:f,anchorY:v,offsetX:h,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),C=lg(u,d,o,{anchorX:f,anchorY:v},{offsetX:h,offsetY:y});s.setDragImage(d,C.x,C.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(s&&!s.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:s}=a,c=Ir(s);c&&this.beginDragNativeItem(c,s)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Ft(a)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=Ft(a),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else Ir(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Ft(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new cg(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new tg(this.isNodeInDocument)}}const pg=function(t,r,n){return new dg(t,r,n)},fg=({elements:e,onReorder:t,onSelect:r,selectedElement:n})=>{const a=i=>{if(!i.destination)return;const o=Array.from(e),[s]=o.splice(i.source.index,1);o.splice(i.destination.index,0,s),t(o)};return l.jsxs("div",{className:"bg-white ",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Capas"}),l.jsx(uf,{onDragEnd:a,children:l.jsx(Yi,{droppableId:"layers",children:i=>l.jsxs("div",{...i.droppableProps,ref:i.innerRef,className:"space-y-2",children:[e.map((o,s)=>l.jsx(Yf,{draggableId:o.id,index:s,children:c=>l.jsxs("div",{ref:c.innerRef,...c.draggableProps,className:`flex items-center p-2 rounded cursor-pointer ${n===o.id?"bg-purple-100":"hover:bg-gray-100"}`,onClick:()=>r(o.id),children:[l.jsx("div",{...c.dragHandleProps,className:"mr-2",children:l.jsx(Eo,{size:16})}),o.type==="image"?l.jsx(Nr,{size:16,className:"mr-2"}):l.jsx(ct,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm truncate",children:o.type==="text"?o.content.substring(0,20):`Imagen ${s+1}`})]})},o.id)),i.placeholder]})})})]})},lt=[{id:"layout-1",name:"Cuatro fotos",template:"grid-cols-2 grid-rows-2",cells:4,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square","rounded-sm","rounded-lg","rounded-full","rounded-rect"]},{name:"Formas",masks:["heart","star","hexagon","triangle","diamond","badge","speech","burst"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave","diagonal","bevel","poster","inner-frame"]},{name:"Creativas",masks:["leaf","cloud","flower","ornate","blob1","blob2","blob3"]}]},{id:"layout-2",name:"Dos fotos horizontales",template:"grid-cols-1 grid-rows-2",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-3",name:"Tres fotos mixtas",template:"grid-cols-3 [grid-template-columns:1fr_2fr]",cells:3,maskCategories:[{name:"Formas",masks:["heart","star","hexagon","triangle"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-4",name:"Dos fotos verticales",template:"grid-cols-2 grid-rows-1",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded"]},{name:"Formas",masks:["heart","star","hexagon"]}]},{id:"layout-5",name:"Mosaico",template:"grid-cols-3 grid-rows-2",cells:6,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]},{id:"layout-6",name:"Individual",template:"grid-cols-1 grid-rows-1",cells:1,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]}];function gg({id:e,elements:t=[],selectedElement:r,onSelectElement:n,onAddElement:a,onUpdateElement:i,onDeleteElement:o,availableMasks:s=[],size:c="square"}){const[{isOver:p},g]=Wl(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:f=>{if(f.files){const v=new FileReader;v.onload=h=>{var y;if((y=h.target)!=null&&y.result){const m={id:`img-${Date.now()}`,type:"image",content:h.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(m),n(m.id,e)}},v.readAsDataURL(f.files[0])}},collect:f=>({isOver:!!f.isOver({shallow:!0})})})),u=()=>{const f=document.createElement("input");f.type="file",f.accept="image/*",f.onchange=v=>{if(v.target.files&&v.target.files[0]){const h=new FileReader;h.onload=y=>{var m;if((m=y.target)!=null&&m.result){const D={id:`img-${Date.now()}`,type:"image",content:y.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};a(D),n(D.id,e)}},h.readAsDataURL(v.target.files[0])}},f.click()},d={square:"aspect-square",landscape:"aspect-video",portrait:"aspect-[3/4]",wide:"aspect-[2/1]",tall:"aspect-[9/16]",custom:"h-[500px]"};return l.jsx("div",{ref:g,className:`relative ${d[c]} bg-gray-50 rounded-lg overflow-hidden ${p?"ring-2 ring-purple-500 bg-purple-50":""}`,onClick:f=>{f.target===f.currentTarget&&n(null,e)},style:{isolation:"isolate",background:"white"},children:t.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:f=>{f.stopPropagation(),u()},children:[l.jsx(lo,{className:"h-8 w-8 text-gray-400"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Haz clic o arrastra una imagen"})]}):t.map(f=>l.jsx("div",{className:"absolute inset-0",onClick:v=>v.stopPropagation(),children:f.type==="image"?l.jsx(Ul,{element:f,isSelected:r===f.id,onSelect:()=>n(f.id,e),onUpdate:v=>i(f.id,v),onDelete:()=>o(f.id),availableMasks:s}):l.jsx(ql,{element:f,isSelected:r===f.id,onSelect:()=>n(f.id,e),onUpdate:v=>i(f.id,v),onDelete:()=>o(f.id)})},f.id))})}const vg=({element:e,onUpdate:t,selectedImage:r})=>{var n;return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),l.jsx(qe,{label:"Opacidad",value:[((n=e.filters)==null?void 0:n.opacity)||100],min:0,max:100,onValueChange:a=>t({filters:{...e.filters,opacity:a[0]}})})]})},hg=({onSelectPreset:e,selectedImage:t})=>{const r=n=>({filter:`
            brightness(${n.brightness}%)
            contrast(${n.contrast}%)
            saturate(${n.saturation}%)
            sepia(${n.tint}%)
            hue-rotate(${n.hue}deg)
            blur(${n.blur}px)
        `});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:Ko.map(n=>l.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>e(n.filters),children:[l.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:t?l.jsx("img",{src:t.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r(n.filters)}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:l.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:l.jsx(co,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},mg=({selectedMask:e,onSelect:t,availableMasks:r=[],selectedImage:n})=>{var s;const[a,i]=b.useState("Básicas"),o={};return zt.forEach(c=>{o[c.category]||(o[c.category]=[]),(r.includes(c.id)||c.id==="none")&&o[c.category].push(c)}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Máscaras de imagen"}),l.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 border-b",children:Object.keys(o).map(c=>o[c].length>0&&l.jsx("button",{onClick:()=>i(c),className:`px-4 py-2 text-sm rounded-t-md transition font-medium ${a===c?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600"}`,children:c},c))}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:(s=o[a])==null?void 0:s.map(c=>l.jsxs("div",{onClick:()=>t(c.id),className:`cursor-pointer border rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all ${e===c.id?"ring-2 ring-purple-500 border-purple-300":"border-gray-200"}`,children:[l.jsx("div",{className:"aspect-square bg-white flex items-center justify-center p-2",children:l.jsx("img",{src:n==null?void 0:n.content,alt:c.name,className:`w-full h-full object-cover ${c.class}`})}),l.jsx("p",{className:"text-center text-sm text-gray-700 p-1 truncate",children:c.name})]},c.id))})]})},bg=[{name:"Arial",value:"Arial"},{name:"Times New Roman",value:"'Times New Roman'"},{name:"Helvetica",value:"Helvetica"},{name:"Courier New",value:"'Courier New'"},{name:"Georgia",value:"Georgia"},{name:"Verdana",value:"Verdana"},{name:"Impact",value:"Impact"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Pacifico (Cursiva)",value:"'Pacifico', cursive"},{name:"Lobster (Estilo Poster)",value:"'Lobster', cursive"},{name:"Indie Flower (Manuscrita)",value:"'Indie Flower', cursive"},{name:"Permanent Marker (Rotulador)",value:"'Permanent Marker', cursive"},{name:"Dancing Script (Elegante)",value:"'Dancing Script', cursive"},{name:"Shadows Into Light (Dibujada)",value:"'Shadows Into Light', cursive"},{name:"Amatic SC (Minimalista)",value:"'Amatic SC', cursive"},{name:"Handlee (Natural)",value:"'Handlee', cursive"},{name:"Caveat (Caligráfica)",value:"'Caveat', cursive"},{name:"Kalam (Pincel)",value:"'Kalam', cursive"}],yg=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","28px","32px","36px","42px","48px","64px","72px"],xg=[{label:"Normal",value:"none"},{label:"MAYÚSCULAS",value:"uppercase"},{label:"minúsculas",value:"lowercase"},{label:"Capitalizado",value:"capitalize"}],Dg=[{color:"#000000",name:"Negro"},{color:"#ffffff",name:"Blanco"},{color:"#f43f5e",name:"Rojo"},{color:"#22c55e",name:"Verde"},{color:"#3b82f6",name:"Azul"},{color:"#eab308",name:"Amarillo"},{color:"#06b6d4",name:"Cian"},{color:"#d946ef",name:"Magenta"},{color:"#6b7280",name:"Gris"},{color:"#a855f7",name:"Púrpura"},{color:"#ec4899",name:"Rosa"},{color:"#f97316",name:"Naranja"},{color:"#0f172a",name:"Azul oscuro"},{color:"#7c2d12",name:"Marrón"},{color:"#14532d",name:"Verde oscuro"},{color:"#4c1d95",name:"Violeta"},{color:"#1e293b",name:"Gris oscuro"},{color:"#fef3c7",name:"Crema"}],wg=[{color:"transparent",name:"Transparente"},{color:"#ffffff",name:"Blanco"},{color:"#f8fafc",name:"Gris claro"},{color:"#f1f5f9",name:"Plata"},{color:"#fef3c7",name:"Crema"},{color:"#ffedd5",name:"Melocotón"},{color:"#fee2e2",name:"Rosa claro"},{color:"#dbeafe",name:"Azul claro"},{color:"#dcfce7",name:"Verde claro"},{color:"#f3e8ff",name:"Lavanda"}],Sg=[{label:"Ninguno",value:"none"},{label:"Sólido",value:"solid"},{label:"Punteado",value:"dotted"},{label:"Discontinuo",value:"dashed"},{label:"Doble",value:"double"},{label:"Acanalado",value:"groove"}],Cg=({element:e,onUpdate:t,onClose:r})=>{var Q,ie,me,ye,ue,xe,De,de,Ee,pe,we,Ne,Se,be,Pe,Ce,P,ee,re,oe,fe,Ge,G,ce,He,ze,Qe,Ze,_e,et,bt,yt,w,x,A,L,H,_,Z,Me,xt;const[n,a]=b.useState(!1),[i,o]=b.useState(!1),[s,c]=b.useState(!1),[p,g]=b.useState(!1),[u,d]=b.useState(!1),[f,v]=b.useState(!1),[h,y]=b.useState(!1),[m,D]=b.useState(!1),[C,I]=b.useState("basic"),[R,T]=b.useState(((Q=e==null?void 0:e.style)==null?void 0:Q.color)||"#000000"),[k,V]=b.useState(((ie=e==null?void 0:e.style)==null?void 0:ie.backgroundColor)||"transparent"),$=b.useRef(null),q=b.useRef(null),z=b.useRef(null),j=b.useRef(null),N=b.useRef(null),B=b.useRef(null),J=b.useRef(null);b.useEffect(()=>{function S(Y){$.current&&!$.current.contains(Y.target)&&a(!1),q.current&&!q.current.contains(Y.target)&&o(!1),z.current&&!z.current.contains(Y.target)&&g(!1),j.current&&!j.current.contains(Y.target)&&d(!1),N.current&&!N.current.contains(Y.target)&&v(!1),B.current&&!B.current.contains(Y.target)&&c(!1),J.current&&!J.current.contains(Y.target)&&y(!1)}return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const O=(S,Y)=>{t({style:{...e==null?void 0:e.style,[S]:Y}})},le=(S,Y,je)=>{var Ue;t({style:{...e==null?void 0:e.style,[S]:((Ue=e==null?void 0:e.style)==null?void 0:Ue[S])===Y?je:Y}})},se=(S,Y)=>{O(S,Y)};if(!e)return null;const X=({active:S,onClick:Y,icon:je,title:Ue,className:it=""})=>l.jsx("button",{type:"button",className:`p-1.5 rounded-sm transition-colors ${S?"bg-gray-200 text-gray-900":"text-gray-700 hover:bg-gray-100"} ${it}`,onClick:Y,title:Ue,children:je}),ae=({onClick:S,icon:Y,text:je,isOpen:Ue,title:it})=>l.jsxs("button",{type:"button",className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${Ue?"bg-gray-100 border-gray-300":"border-gray-200 hover:bg-gray-50"}`,onClick:S,title:it,children:[Y&&l.jsx("span",{className:"flex-shrink-0",children:Y}),je&&l.jsx("span",{className:"text-sm truncate",children:je}),l.jsx(fo,{className:"h-3.5 w-3.5 opacity-70"})]});return l.jsx("div",{className:"  bg-white  rounded-lg shadow-sm p-4  border-gray-200  z-50 transition-all duration-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto p-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("h3",{className:"text-sm font-medium flex items-center gap-1.5",children:[l.jsx(ct,{className:"h-4 w-4"}),"Formato de texto"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:()=>D(!m),title:m?"Modo compacto":"Modo expandido",children:m?l.jsx(Fo,{className:"h-4 w-4"}):l.jsx(Lo,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded-md hover:bg-gray-100",onClick:r,title:"Cerrar",children:l.jsx(po,{className:"h-4 w-4"})})]})]}),m&&l.jsxs("div",{className:"flex border-b mb-2",children:[l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="basic"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("basic"),children:"Básico"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="paragraph"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("paragraph"),children:"Párrafo"}),l.jsx("button",{className:`px-3 py-1.5 text-sm font-medium ${C==="advanced"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>I("advanced"),children:"Avanzado"})]}),(C==="basic"||!m)&&l.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[l.jsx("div",{className:"relative",ref:z,children:l.jsx("select",{className:"px-2 py-1 border rounded-md text-sm",value:((me=e.style)==null?void 0:me.fontFamily)||"Arial",onChange:S=>{O("fontFamily",S.target.value)},children:bg.map(S=>l.jsx("option",{value:S.value,style:{fontFamily:S.value},children:S.name},S.value))})}),l.jsxs("div",{className:"relative",ref:j,children:[l.jsx(ae,{onClick:()=>d(!u),text:((ye=e.style)==null?void 0:ye.fontSize)||"16px",isOpen:u,title:"Tamaño de fuente"}),u&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-60 overflow-y-auto w-24",children:yg.map(S=>l.jsx("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm",onClick:()=>{O("fontSize",S),d(!1)},children:S},S))})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((ue=e.style)==null?void 0:ue.fontWeight)==="bold",onClick:()=>le("fontWeight","bold","normal"),icon:l.jsx(yo,{className:"h-4 w-4"}),title:"Negrita"}),l.jsx(X,{active:((xe=e.style)==null?void 0:xe.fontStyle)==="italic",onClick:()=>le("fontStyle","italic","normal"),icon:l.jsx(jo,{className:"h-4 w-4"}),title:"Cursiva"}),l.jsx(X,{active:((De=e.style)==null?void 0:De.textDecoration)==="underline",onClick:()=>le("textDecoration","underline","none"),icon:l.jsx(Xo,{className:"h-4 w-4"}),title:"Subrayado"}),l.jsx(X,{active:((de=e.style)==null?void 0:de.textDecoration)==="line-through",onClick:()=>le("textDecoration","line-through","none"),icon:l.jsx(qo,{className:"h-4 w-4"}),title:"Tachado"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((Ee=e.style)==null?void 0:Ee.textAlign)==="left",onClick:()=>O("textAlign","left"),icon:l.jsx(mo,{className:"h-4 w-4"}),title:"Alinear a la izquierda"}),l.jsx(X,{active:((pe=e.style)==null?void 0:pe.textAlign)==="center",onClick:()=>O("textAlign","center"),icon:l.jsx(vo,{className:"h-4 w-4"}),title:"Centrar"}),l.jsx(X,{active:((we=e.style)==null?void 0:we.textAlign)==="right",onClick:()=>O("textAlign","right"),icon:l.jsx(bo,{className:"h-4 w-4"}),title:"Alinear a la derecha"}),l.jsx(X,{active:((Ne=e.style)==null?void 0:Ne.textAlign)==="justify",onClick:()=>O("textAlign","justify"),icon:l.jsx(ho,{className:"h-4 w-4"}),title:"Justificar"})]}),l.jsxs("div",{className:"relative",ref:$,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>a(!n),title:"Color de texto",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:R}}),l.jsx(uo,{className:"h-4 w-4"})]}),n&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:R}})]}),l.jsx("input",{type:"color",value:R,onChange:S=>{T(S.target.value),O("color",S.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Colores predefinidos"}),l.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:Dg.map(S=>l.jsx("button",{type:"button",className:`w-8 h-8 rounded-md cursor-pointer border transition-all hover:scale-110 ${R===S.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:S.color},onClick:()=>{T(S.color),O("color",S.color)},title:S.name},S.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:q,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>o(!i),title:"Color de fondo",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:k,backgroundImage:k==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}}),l.jsx(Go,{className:"h-4 w-4"})]}),i&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-medium",children:"Color de fondo personalizado"}),l.jsx("div",{className:"w-6 h-6 rounded-md border",style:{backgroundColor:k,backgroundImage:k==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"}})]}),l.jsx("input",{type:"color",value:k==="transparent"?"#ffffff":k,onChange:S=>{V(S.target.value),O("backgroundColor",S.target.value)},className:"w-full h-8 cursor-pointer"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium mb-1.5",children:"Fondos predefinidos"}),l.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:wg.map(S=>l.jsx("button",{type:"button",className:`w-10 h-10 rounded-md cursor-pointer border transition-all hover:scale-110 ${k===S.color?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:S.color,backgroundImage:S.color==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px"},onClick:()=>{V(S.color),O("backgroundColor",S.color)},title:S.name},S.color))})]})]})})]}),l.jsxs("div",{className:"relative",ref:N,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>v(!f),title:"Transformación de texto",children:l.jsx(Do,{className:"h-4 w-4"})}),f&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] w-48",children:xg.map(S=>{var Y;return l.jsx("button",{className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm ${((Y=e.style)==null?void 0:Y.textTransform)===S.value?"bg-gray-100":""}`,style:{textTransform:S.value},onClick:()=>{O("textTransform",S.value),v(!1)},children:S.label},S.value)})})]}),l.jsxs("div",{className:"relative",ref:J,children:[l.jsx("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>y(!h),title:"Encabezados",children:l.jsx(ct,{className:"h-4 w-4"})}),h&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 w-48",children:[l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","32px"),O("fontWeight","bold"),y(!1)},children:[l.jsx(No,{className:"h-4 w-4"})," ","Encabezado 1"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","24px"),O("fontWeight","bold"),y(!1)},children:[l.jsx(Po,{className:"h-4 w-4"})," ","Encabezado 2"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","20px"),O("fontWeight","bold"),y(!1)},children:[l.jsx(Oo,{className:"h-4 w-4"})," ","Encabezado 3"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","16px"),O("fontWeight","bold"),y(!1)},children:[l.jsx(To,{className:"h-4 w-4"})," ","Encabezado 4"]}),l.jsxs("button",{className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 text-sm flex items-center gap-2",onClick:()=>{O("fontSize","16px"),O("fontWeight","normal"),y(!1)},children:[l.jsx(ct,{className:"h-4 w-4"})," Párrafo normal"]})]})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((Se=e.style)==null?void 0:Se.verticalAlign)==="super",onClick:()=>le("verticalAlign","super","baseline"),icon:l.jsx(Yo,{className:"h-4 w-4"}),title:"Superíndice"}),l.jsx(X,{active:((be=e.style)==null?void 0:be.verticalAlign)==="sub",onClick:()=>le("verticalAlign","sub","baseline"),icon:l.jsx(Vo,{className:"h-4 w-4"}),title:"Subíndice"})]})]}),m&&C==="paragraph"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((Pe=e.style)==null?void 0:Pe.listStyleType)==="disc",onClick:()=>{var S;return O("listStyleType",((S=e.style)==null?void 0:S.listStyleType)==="disc"?"none":"disc")},icon:l.jsx(Bo,{className:"h-4 w-4"}),title:"Lista con viñetas"}),l.jsx(X,{active:((Ce=e.style)==null?void 0:Ce.listStyleType)==="decimal",onClick:()=>{var S;return O("listStyleType",((S=e.style)==null?void 0:S.listStyleType)==="decimal"?"none":"decimal")},icon:l.jsx(ko,{className:"h-4 w-4"}),title:"Lista numerada"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{onClick:()=>{var Y;const S=Number.parseInt(((Y=e.style)==null?void 0:Y.textIndent)||"0");O("textIndent",`${S+20}px`)},icon:l.jsx(Mo,{className:"h-4 w-4"}),title:"Aumentar sangría"}),l.jsx(X,{onClick:()=>{var Y;const S=Number.parseInt(((Y=e.style)==null?void 0:Y.textIndent)||"0");S>=20&&O("textIndent",`${S-20}px`)},icon:l.jsx(Ao,{className:"h-4 w-4"}),title:"Disminuir sangría"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Altura de línea:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(An,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:Number.parseFloat(((P=e.style)==null?void 0:P.lineHeight)||"1.5"),onChange:S=>se("lineHeight",S.target.value),className:"w-24"}),l.jsx(Er,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((ee=e.style)==null?void 0:ee.lineHeight)||"1.5"})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Espaciado:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(An,{className:"h-3 w-3 text-gray-500"}),l.jsx("input",{type:"range",min:"-2",max:"10",step:"1",value:Number.parseInt(((re=e.style)==null?void 0:re.letterSpacing)||"0"),onChange:S=>se("letterSpacing",`${S.target.value}px`),className:"w-24"}),l.jsx(Er,{className:"h-3 w-3 text-gray-500"})]}),l.jsx("span",{className:"text-xs",children:((oe=e.style)==null?void 0:oe.letterSpacing)||"0px"})]}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md",children:[l.jsx(X,{active:((fe=e.style)==null?void 0:fe.fontStyle)==="italic"&&((Ge=e.style)==null?void 0:Ge.paddingLeft)==="20px"&&((G=e.style)==null?void 0:G.borderLeft)==="4px solid #ccc",onClick:()=>{var S,Y,je;((S=e.style)==null?void 0:S.fontStyle)==="italic"&&((Y=e.style)==null?void 0:Y.paddingLeft)==="20px"&&((je=e.style)==null?void 0:je.borderLeft)==="4px solid #ccc"?(O("fontStyle","normal"),O("paddingLeft","0"),O("borderLeft","none")):(O("fontStyle","italic"),O("paddingLeft","20px"),O("borderLeft","4px solid #ccc"))},icon:l.jsx($o,{className:"h-4 w-4"}),title:"Formato de cita"}),l.jsx(X,{active:((ce=e.style)==null?void 0:ce.fontFamily)==="'Courier New', monospace"&&((He=e.style)==null?void 0:He.backgroundColor)==="#f5f5f5"&&((ze=e.style)==null?void 0:ze.padding)==="2px 4px",onClick:()=>{var S,Y;((S=e.style)==null?void 0:S.fontFamily)==="'Courier New', monospace"&&((Y=e.style)==null?void 0:Y.backgroundColor)==="#f5f5f5"?(O("fontFamily","Arial, sans-serif"),O("backgroundColor","transparent"),O("padding","0")):(O("fontFamily","'Courier New', monospace"),O("backgroundColor","#f5f5f5"),O("padding","2px 4px"))},icon:l.jsx(wo,{className:"h-4 w-4"}),title:"Formato de código"})]})]}),m&&C==="advanced"&&l.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[l.jsxs("div",{className:"relative",ref:B,children:[l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50",onClick:()=>c(!s),title:"Opciones de borde",children:[l.jsx(Uo,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Bordes"})]}),s&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] p-3 w-64",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Estilo de borde"}),l.jsx("select",{className:"w-full p-1.5 border rounded-md text-sm",value:((Qe=e.style)==null?void 0:Qe.borderStyle)||"none",onChange:S=>O("borderStyle",S.target.value),children:Sg.map(S=>l.jsx("option",{value:S.value,children:S.label},S.value))})]}),((Ze=e.style)==null?void 0:Ze.borderStyle)&&((_e=e.style)==null?void 0:_e.borderStyle)!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Ancho de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:Number.parseInt(((et=e.style)==null?void 0:et.borderWidth)||"1"),onChange:S=>O("borderWidth",`${S.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((bt=e.style)==null?void 0:bt.borderWidth)||"1px"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Color de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:((yt=e.style)==null?void 0:yt.borderColor)||"#000000",onChange:S=>O("borderColor",S.target.value),className:"w-8 h-8"}),l.jsx("div",{className:"grid grid-cols-5 gap-1 flex-1",children:["#000000","#cccccc","#ff0000","#0000ff","#00ff00"].map(S=>l.jsx("button",{type:"button",className:"w-6 h-6 rounded-sm border",style:{backgroundColor:S},onClick:()=>O("borderColor",S)},S))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium block mb-1",children:"Radio de borde"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"50",step:"1",value:Number.parseInt(((w=e.style)==null?void 0:w.borderRadius)||"0"),onChange:S=>O("borderRadius",`${S.target.value}px`),className:"flex-1"}),l.jsx("span",{className:"text-xs",children:((x=e.style)==null?void 0:x.borderRadius)||"0px"})]})]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Sombra:"}),l.jsx("button",{className:`px-2 py-1 text-xs rounded ${(A=e.style)!=null&&A.textShadow?"bg-blue-100 text-blue-700":"bg-gray-100"}`,onClick:()=>{var S;(S=e.style)!=null&&S.textShadow?O("textShadow",""):O("textShadow","1px 1px 2px rgba(0,0,0,0.3)")},children:(L=e.style)!=null&&L.textShadow?"Quitar":"Añadir"}),((H=e.style)==null?void 0:H.textShadow)&&l.jsxs("select",{className:"text-xs p-1 border rounded",value:(_=e.style)==null?void 0:_.textShadow,onChange:S=>O("textShadow",S.target.value),children:[l.jsx("option",{value:"1px 1px 2px rgba(0,0,0,0.3)",children:"Suave"}),l.jsx("option",{value:"2px 2px 4px rgba(0,0,0,0.4)",children:"Medio"}),l.jsx("option",{value:"3px 3px 6px rgba(0,0,0,0.5)",children:"Fuerte"}),l.jsx("option",{value:"0 0 5px rgba(0,0,255,0.5)",children:"Resplandor azul"}),l.jsx("option",{value:"0 0 5px rgba(255,0,0,0.5)",children:"Resplandor rojo"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Opacidad:"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:Number.parseFloat(((Z=e.style)==null?void 0:Z.opacity)||"1"),onChange:S=>se("opacity",S.target.value),className:"w-24"})}),l.jsxs("span",{className:"text-xs",children:[Math.round(Number.parseFloat(((Me=e.style)==null?void 0:Me.opacity)||"1")*100),"%"]})]}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsxs("button",{className:`flex items-center gap-1 px-2 py-1.5 rounded-md border ${((xt=e.style)==null?void 0:xt.backgroundColor)==="#ffff00"?"bg-yellow-100":"bg-white hover:bg-gray-50"}`,onClick:()=>{var S;((S=e.style)==null?void 0:S.backgroundColor)==="#ffff00"?O("backgroundColor","transparent"):O("backgroundColor","#ffff00")},title:"Resaltar texto",children:[l.jsx(Ro,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Resaltar"})]})}),l.jsxs("div",{className:"flex items-center gap-0.5 border rounded-md ml-auto",children:[l.jsx(X,{onClick:()=>{alert("Función deshacer (implementar)")},icon:l.jsx(Wo,{className:"h-4 w-4"}),title:"Deshacer"}),l.jsx(X,{onClick:()=>{alert("Función rehacer (implementar)")},icon:l.jsx(Oa,{className:"h-4 w-4"}),title:"Rehacer"})]})]})]})})},Ig=({currentSize:e,onSizeChange:t})=>{const r=[{id:"square",label:"Cuadrado (1:1)",width:600,height:600},{id:"landscape",label:"Paisaje (16:9)",width:1280,height:720},{id:"portrait",label:"Retrato (3:4)",width:600,height:800},{id:"wide",label:"Ancho (2:1)",width:1200,height:600},{id:"tall",label:"Alto (9:16)",width:540,height:960}];return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 h-full items-center",children:[l.jsx("label",{htmlFor:"canvas-size",className:"text-sm font-medium text-gray-700",children:"Lienzo:"}),l.jsxs("div",{className:"relative w-full sm:w-40",children:[l.jsx("select",{id:"canvas-size",value:e,onChange:n=>t(n.target.value),className:"w-full appearance-none bg-white border border-gray-300 rounded-md pl-3 pr-10 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:r.map(n=>l.jsx("option",{value:n.id,children:n.label},n.id))}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})};function Xg(){var pe,we,Ne,Se,be,Pe,Ce,P,ee,re,oe,fe,Ge,G,ce,He,ze,Qe,Ze,_e,et,bt,yt;const[e,t]=b.useState([{id:"page-1",layout:"layout-1",cells:Array.from({length:4}).map((w,x)=>({id:`cell-1-${x+1}`,elements:[]}))}]),[r,n]=b.useState(0),[a,i]=b.useState(null),[o,s]=b.useState(null),[c,p]=b.useState("elements"),[g,u]=b.useState("basic"),[d,f]=b.useState([JSON.stringify(e)]),[v,h]=b.useState(0),[y,m]=b.useState(!1),[D,C]=b.useState(null),[I,R]=b.useState({}),[T,k]=b.useState(!1),[V,$]=b.useState({elementId:null,cellId:null}),[q,z]=b.useState(!1),j=b.useCallback(()=>{if(!a||!o)return null;const w=e[r].cells.find(x=>x.id===o);return w?w.elements.find(x=>x.id===a):null},[a,o,e,r]),N=(w,x)=>{if(x&&s(x),i(w),w){const A=e[r].cells.find(H=>H.id===(x||o)),L=A==null?void 0:A.elements.find(H=>H.id===w);(L==null?void 0:L.type)==="image"?(C(L),console.log(D)):(L==null?void 0:L.type)==="text"?(k(!0),$({elementId:w,cellId:x||o})):k(!1)}else k(!1),C(null)},B=()=>lt.find(w=>w.id===e[r].layout)||lt[0],J=w=>{t(w);const x=[...d.slice(0,v+1),JSON.stringify(w)];f(x),h(x.length-1)},O=w=>{const x=lt.find(_=>_.id===w);if(!x)return;const A=[...e],L=A[r],H=Array.from({length:x.cells}).map((_,Z)=>L.cells[Z]||{id:`cell-${L.id}-${Z+1}`,elements:[]});A[r]={...L,layout:w,cells:H},J(A),i(null),s(null)},le=()=>{const w=`page-${e.length+1}`,x=B(),A={id:w,layout:x.id,cells:Array.from({length:x.cells}).map((H,_)=>({id:`cell-${w}-${_+1}`,elements:[]}))},L=[...e,A];J(L),n(L.length-1)},se=()=>{if(e.length<=1)return;const w=e.filter((x,A)=>A!==r);J(w),n(Math.min(r,w.length-1))},X=()=>{const w=e[r],x={...JSON.parse(JSON.stringify(w)),id:`page-${e.length+1}-copy`},A=[...e,x];J(A),n(A.length-1)},ae=(w,x)=>{const A=[...e],L=A[r].cells.findIndex(H=>H.id===w);L!==-1&&(A[r].cells[L].elements.push(x),J(A),i(x.id),s(w))},Q=(w,x,A,L=!1)=>{const H=[...e],_=H[r].cells.findIndex(Z=>Z.id===w);if(_!==-1){if(L)H[r].cells[_].elements.push({...H[r].cells[_].elements.find(Z=>Z.id===x),...A});else{const Z=H[r].cells[_].elements.findIndex(Me=>Me.id===x);Z!==-1&&(H[r].cells[_].elements[Z]={...H[r].cells[_].elements[Z],...A})}J(H)}},ie=(w,x)=>{const A=[...e],L=A[r].cells.findIndex(H=>H.id===w);L!==-1&&(A[r].cells[L].elements=A[r].cells[L].elements.filter(H=>H.id!==x),J(A),a===x&&i(null))},me=()=>{v>0&&(h(v-1),t(JSON.parse(d[v-1])),i(null),s(null))},ye=()=>{v<d.length-1&&(h(v+1),t(JSON.parse(d[v+1])),i(null),s(null))},ue=()=>{m(!y)},xe=()=>{const x={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:20,y:20},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};o?ae(o,x):console.log("Selecciona una celda primero")},De=w=>{var x;!a||!o||Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,...w}})},[de,Ee]=b.useState("square");return b.useEffect(()=>{const w=async()=>{const A={};await Promise.all(e.map(async(L,H)=>{const _=document.getElementById(`page-${L.id}`);if(_)try{const Z=await oo(_,{scale:.2,logging:!1,useCORS:!0,allowTaint:!0,ignoreElements:Me=>Me.classList.contains("ignore-thumbnail")});A[L.id]=Z.toDataURL()}catch(Z){console.error("Error generating thumbnail:",Z),A[L.id]=null}})),R({...I,...A})},x=setTimeout(()=>{w()},500);return()=>clearTimeout(x)},[e,r]),l.jsx(gl,{backend:pg,children:l.jsx("div",{className:"bg-white py-4",children:l.jsxs("div",{className:"flex flex-col min-h-screen  mx-auto  max-w-[82rem]",children:[l.jsxs("header",{className:"border-b bg-white py-4 flex items-center justify-between ",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(We,{variant:"ghost",size:"sm",children:[l.jsx(go,{className:"h-5 w-5 mr-1"}),"Regresar"]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(We,{variant:"secondary",onClick:ue,icon:l.jsx(So,{className:"h-4 w-4"}),children:y?"Editar":"Vista previa"}),l.jsx(We,{variant:"secondary",onClick:()=>z(!0),icon:l.jsx(xo,{className:"h-4 w-4"}),children:"Vista de Álbum"})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx("aside",{className:"w-64 border-r bg-white p-4 overflow-y-auto shadow-sm",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex border-b pb-4",children:[l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${c==="elements"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>p("elements"),children:"Elementos"}),l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${c==="filters"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>p("filters"),children:"Filtros"})]}),c==="elements"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Layouts"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:lt.map(w=>l.jsxs("div",{className:`border rounded-md p-1 cursor-pointer hover:border-purple-500 ${e[r].layout===w.id?"border-purple-500 ring-1 ring-purple-200":""}`,onClick:()=>O(w.id),children:[l.jsx("div",{className:`grid ${w.template} gap-1 h-20`,children:Array.from({length:w.cells}).map((x,A)=>l.jsx("div",{className:"bg-gray-100 rounded-sm flex items-center justify-center",children:l.jsx(Nr,{className:"h-3 w-3 text-gray-400"})},A))}),l.jsx("p",{className:"text-xs text-center mt-1 truncate",children:w.name})]},w.id))})]}),l.jsx("div",{children:l.jsx(fg,{elements:((pe=e[r].cells.find(w=>w.id===o))==null?void 0:pe.elements)||[],onReorder:w=>{const x=[...e],A=x[r].cells.findIndex(L=>L.id===o);A!==-1&&(x[r].cells[A].elements=w,J(x))},onSelect:N,selectedElement:a})})]}),c==="filters"&&l.jsx(l.Fragment,{children:a?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl w-full max-w-md mx-auto",children:[{key:"basic",label:"Básicos"},{key:"transform",label:"Avanzados"}].map(w=>l.jsx("button",{onClick:()=>u(w.key),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200
                ${g===w.key?"bg-purple-600 text-white shadow":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:w.label},w.key))}),g==="basic"&&l.jsxs(l.Fragment,{children:[l.jsx(hg,{onSelectPreset:De,selectedImage:D}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Ajustes básicos"}),l.jsx(qe,{label:"Brillo",value:[((Ne=(we=j())==null?void 0:we.filters)==null?void 0:Ne.brightness)||100],min:0,max:200,onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,brightness:w[0]}})}}),l.jsx(qe,{label:"Contraste",value:[((be=(Se=j())==null?void 0:Se.filters)==null?void 0:be.contrast)||100],min:0,max:200,onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,contrast:w[0]}})}}),l.jsx(qe,{label:"Saturación",value:[((Ce=(Pe=j())==null?void 0:Pe.filters)==null?void 0:Ce.saturation)||100],min:0,max:200,onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,saturation:w[0]}})}}),l.jsx(qe,{label:"Tono",value:[((ee=(P=j())==null?void 0:P.filters)==null?void 0:ee.hue)||0],min:0,max:360,unit:"°",onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,hue:w[0]}})}}),l.jsx(qe,{label:"Sepia",value:[((oe=(re=j())==null?void 0:re.filters)==null?void 0:oe.tint)||0],min:0,max:100,onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,tint:w[0]}})}}),l.jsx(qe,{label:"Desenfoque",value:[((Ge=(fe=j())==null?void 0:fe.filters)==null?void 0:Ge.blur)||0],min:0,max:20,unit:"px",onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,blur:w[0]}})}})]})]}),g==="transform"&&l.jsxs("div",{className:"space-y-4",children:[((G=j())==null?void 0:G.type)==="image"&&l.jsx(mg,{onSelect:w=>Q(o,a,{mask:w}),selectedMask:((ce=j())==null?void 0:ce.mask)||"none",availableMasks:B().maskCategories.flatMap(w=>w.masks),selectedImage:D}),l.jsx(vg,{selectedImage:D,element:j(),onUpdate:w=>Q(o,a,w)}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h3",{className:" font-medium pt-4",children:"Transformación"})}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(We,{variant:(ze=(He=j())==null?void 0:He.filters)!=null&&ze.flipHorizontal?"secondary":"outline",size:"sm",icon:l.jsx(Co,{className:"h-4 w-4"}),className:"justify-start ",onClick:()=>{var w,x,A;return Q(o,a,{filters:{...(w=j())==null?void 0:w.filters,flipHorizontal:!((A=(x=j())==null?void 0:x.filters)!=null&&A.flipHorizontal)}})},children:"Giro Horizontal"}),l.jsx(We,{variant:(Ze=(Qe=j())==null?void 0:Qe.filters)!=null&&Ze.flipVertical?"secondary":"outline",size:"sm",icon:l.jsx(Io,{className:"h-4 w-4"}),className:"justify-start",onClick:()=>{var w,x,A;return Q(o,a,{filters:{...(w=j())==null?void 0:w.filters,flipVertical:!((A=(x=j())==null?void 0:x.filters)!=null&&A.flipVertical)}})},children:"Giro Vertical"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(qe,{label:"Rotación",value:[((et=(_e=j())==null?void 0:_e.filters)==null?void 0:et.rotate)||0],min:0,max:360,unit:"°",onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,rotate:w[0]}})}}),l.jsx(qe,{label:"Escala",value:[(((yt=(bt=j())==null?void 0:bt.filters)==null?void 0:yt.scale)||1)*100],min:10,max:200,unit:"%",onValueChange:w=>{var x;return Q(o,a,{filters:{...(x=j())==null?void 0:x.filters,scale:w[0]/100}})}})]})]})]})]}):l.jsx("h2",{className:"font-medium text-center",children:"Agrega imágenes y textos al área de trabajo y selecciona tu imagen para ver nuevas opciones"})})]})}),l.jsx(io,{isOpen:q,onRequestClose:()=>z(!1),pages:e.map(w=>({...w,layout:lt.find(x=>x.id===w.layout)||lt[0]}))}),l.jsxs("main",{className:"flex-1 overflow-auto bg-gray-100 p-6",children:[l.jsx("div",{className:"max-w-5xl mx-auto ",children:y?l.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg page-preview",children:l.jsx("div",{className:`grid ${B().template} gap-6 aspect-[4/3]`,children:e[r].cells.map(w=>l.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:w.elements.map(x=>{var A,L,H,_,Z,Me,xt,S,Y,je,Ue,it,mn,bn,yn,xn,Dn,wn,Sn,Cn,In,En,Nn,Pn,On;return x.type==="image"?l.jsx("div",{className:`absolute ${((A=zt.find(to=>to.id===x.mask))==null?void 0:A.class)||""}`,style:{left:`${x.position.x}px`,top:`${x.position.y}px`,width:"100%",height:"100%"},children:l.jsx("img",{src:x.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                    brightness(${(((L=x.filters)==null?void 0:L.brightness)||100)/100})
                                    contrast(${(((H=x.filters)==null?void 0:H.contrast)||100)/100})
                                    saturate(${(((_=x.filters)==null?void 0:_.saturation)||100)/100})
                                    sepia(${(((Z=x.filters)==null?void 0:Z.tint)||0)/100})
                                    hue-rotate(${(((Me=x.filters)==null?void 0:Me.hue)||0)*3.6}deg)
                                    blur(${((xt=x.filters)==null?void 0:xt.blur)||0}px)
                                  `,transform:`scale(${((S=x.filters)==null?void 0:S.scale)||1}) rotate(${((Y=x.filters)==null?void 0:Y.rotate)||0}deg) ${(je=x.filters)!=null&&je.flipHorizontal?"scaleX(-1)":""} ${(Ue=x.filters)!=null&&Ue.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((it=x.filters)==null?void 0:it.blendMode)||"normal",opacity:(((mn=x.filters)==null?void 0:mn.opacity)||100)/100}})},x.id):l.jsx("div",{className:"absolute",style:{left:`${x.position.x}px`,top:`${x.position.y}px`,fontFamily:(bn=x.style)==null?void 0:bn.fontFamily,fontSize:(yn=x.style)==null?void 0:yn.fontSize,fontWeight:(xn=x.style)==null?void 0:xn.fontWeight,fontStyle:(Dn=x.style)==null?void 0:Dn.fontStyle,textDecoration:(wn=x.style)==null?void 0:wn.textDecoration,color:(Sn=x.style)==null?void 0:Sn.color,textAlign:(Cn=x.style)==null?void 0:Cn.textAlign,backgroundColor:((In=x.style)==null?void 0:In.backgroundColor)||"transparent",padding:((En=x.style)==null?void 0:En.padding)||"8px",borderRadius:((Nn=x.style)==null?void 0:Nn.borderRadius)||"0px",border:((Pn=x.style)==null?void 0:Pn.border)||"none",opacity:((On=x.style)==null?void 0:On.opacity)||1},children:x.content},x.id)})},w.id))})}):l.jsxs("div",{className:"space-y-6",children:[T?l.jsx(Cg,{element:j(),onUpdate:w=>{Q(V.cellId,V.elementId,w)},onClose:()=>k(!1)}):l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center gap-4",children:[l.jsx(We,{variant:"ghost",size:"icon",onClick:me,disabled:v<=0,children:l.jsx(Jo,{className:"h-5 w-5"})}),l.jsx(We,{variant:"ghost",size:"icon",onClick:ye,disabled:v>=d.length-1,children:l.jsx(Ho,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(We,{variant:"ghost",size:"icon",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=x=>{if(x.target.files&&x.target.files[0]){const L={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},H=new FileReader;H.onload=_=>{var Z;(Z=_.target)!=null&&Z.result&&(L.content=_.target.result,ae(o||e[r].cells[0].id,L))},H.readAsDataURL(x.target.files[0])}},w.click()},children:l.jsx(Nr,{className:"h-5 w-5"})}),l.jsx(We,{variant:"ghost",size:"icon",onClick:xe,children:l.jsx(ct,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-6 border-l"}),l.jsx(We,{variant:"ghost",size:"icon",onClick:()=>{a&&o&&ie(o,a)},disabled:!a,children:l.jsx(ut,{className:"h-5 w-5"})}),l.jsx(Ig,{currentSize:de,onSizeChange:Ee})]}),l.jsx("div",{id:`page-${e[r].id}`,className:`bg-white rounded-lg shadow-lg overflow-hidden page-preview w-full ${B().cells<=4,""}`,style:{width:de.width,height:de.height},children:l.jsx("div",{className:`grid ${B().template} gap-4   p-4 max-h-full`,children:e[r].cells.map(w=>l.jsx(gg,{id:w.id,elements:w.elements,size:de,selectedElement:o===w.id?a:null,onSelectElement:N,onAddElement:x=>{const A=[...e],L=A[r].cells.findIndex(H=>H.id===w.id);L!==-1&&(A[r].cells[L].elements.push(x),J(A),i(x.id),s(w.id))},onUpdateElement:(x,A,L)=>{const H=[...e],_=H[r].cells.findIndex(Z=>Z.id===w.id);if(_!==-1){if(L)H[r].cells[_].elements.push({...H[r].cells[_].elements.find(Z=>Z.id===x),...A});else{const Z=H[r].cells[_].elements.findIndex(Me=>Me.id===x);Z!==-1&&(H[r].cells[_].elements[Z]={...H[r].cells[_].elements[Z],...A})}J(H)}},onDeleteElement:x=>{const A=[...e],L=A[r].cells.findIndex(H=>H.id===w.id);L!==-1&&(A[r].cells[L].elements=A[r].cells[L].elements.filter(H=>H.id!==x),J(A),a===x&&i(null))},availableMasks:B().maskCategories.flatMap(x=>x.masks)},w.id))})})]})}),l.jsx("aside",{className:"max-w-5xl mt-6 mx-auto bg-white p-4 rounded-lg border",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"font-medium",children:"Páginas"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:X,title:"Duplicar página",children:l.jsx(Gr,{className:"h-4 w-4"})}),l.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:se,disabled:e.length<=1,title:"Eliminar página",children:l.jsx(ut,{className:"h-4 w-4"})}),l.jsxs("button",{className:"flex items-center gap-1 px-3 py-1 text-sm border rounded-md hover:bg-gray-50",onClick:le,children:[l.jsx(Er,{className:"h-4 w-4"}),l.jsx("span",{children:"Nueva página"})]})]})]}),l.jsx("div",{className:"flex overflow-x-auto gap-3 custom-scroll",children:e==null?void 0:e.map((w,x)=>l.jsx("div",{className:"flex-shrink-0 w-40 p-4 ",onClick:()=>n(x),children:l.jsxs("div",{className:`relative bg-gray-100 h-48 rounded-md overflow-hidden ${r===x?"border border-primary":""}`,children:[l.jsxs("span",{className:"absolute top-1 left-1 text-xs bg-white/80 px-1 rounded z-10",children:["Pág. ",x+1]}),I[w.id]?l.jsx("img",{src:I[w.id],alt:`Miniatura página ${x+1}`,className:"w-full h-full object-contain"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("div",{className:`grid ${B().template} gap-1 w-full h-full p-1`,children:Array.from({length:B().cells}).map((A,L)=>l.jsx("div",{className:"bg-gray-200 rounded-sm"},L))})})]})},w.id))})]})})]})]})]})})})}export{Xg as default};
